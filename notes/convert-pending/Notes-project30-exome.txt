Notes-project30-exome.txt






++</entry>



<entry [Sun May 10 23:46:47 EDT 2009] dbSNP TEST SET WITH CHROMOSOME POSITIONS AND cDNA POSITIONS>



head /nethome/syoung/base/pipeline/exome/biomart/dbSNP-biomart.tsv 

    Variation ID    Chromosome name Position on Chromosome (bp)     Strand  Allele  dbSNP rsID      Variation start in cDNA (bp)    Variation end in cDNA (bp)      Ensembl Gene ID Ensembl Transcript ID     Transcript strand       Consequence to transcript       Peptide shift   Variation start in translation (aa)     Variation end in translation (aa)       Associated gene   Source ID(s)    Phenotype name  Phenotype description   Associated variant risk allele  Risk allele frequency in controls       P value
    rs242   1       20742048        1       T/-
    rs538   1       6083545 1       A/G                             ENSG00000069424 ENST00000378087 1       DOWNSTREAM
    rs538   1       6083545 1       A/G                             ENSG00000069424 ENST00000378111 1       DOWNSTREAM
    rs538   1       6083545 1       A/G                             ENSG00000069424 ENST00000352527 1       DOWNSTREAM
    rs538   1       6083545 1       A/G                             ENSG00000069424 ENST00000341524 1       DOWNSTREAM
    rs538   1       6083545 1       A/G             3906    3906    ENSG00000069424 ENST00000378097 1       3PRIME_UTR
    rs538   1       6083545 1       A/G                             ENSG00000069424 ENST00000378092 1       DOWNSTREAM
    rs538   1       6083545 1       A/G             3992    3992    ENSG00000069424 ENST00000164247 1       3PRIME_UTR
    rs538   1       6083545 1       A/G                             ENSG00000069424 ENST00000378083 1       DOWNSTREAM


++</entry>



<entry [Thurs May 7 23:24:08 EDT 2009] NIMBLEGEN PROBES>



cd /mihg/data/NGS/syoung/base/pipeline/nimblegen-probes/HD2Exome080904Design

ll
    -rw-r--r--+ 1 syoung bioinfo 541M Sep  5  2008 080904_ccds_exome_rebalfocus_HX1.ndf
    -rw-r--r--+ 1 syoung bioinfo  82M Sep  5  2008 080904_ccds_exome_rebalfocus_HX1.pos

head 080904_ccds_exome_rebalfocus_HX1.pos
    PROBE_ID        SEQ_ID  CHROMOSOME      POSITION        COUNT   LENGTH  GC
    CHR01FS000058924        chr1:58954-59153        chr1    58924   3       76      0.38
    CHR01FS000058945        chr1:58954-59153        chr1    58945   2       75      0.39
    CHR01FS000058954        chr1:58954-59153        chr1    58954   2       73      0.38
    CHR01FS000058964        chr1:58954-59153        chr1    58964   2       71      0.35
    CHR01FS000058979        chr1:58954-59153        chr1    58979   2       73      0.38
    CHR01FS000058996        chr1:58954-59153        chr1    58996   3       68      0.37
    CHR01FS000059019        chr1:58954-59153        chr1    59019   3       72      0.36
    CHR01FS000059064        chr1:58954-59153        chr1    59064   3       82      0.46
    CHR01FS000059087        chr1:59154-59353        chr1    59087   3       81      0.52

grep CHR01FS000058924 080904_ccds_exome_rebalfocus_HX1.ndf 
    8185_679_3121   BLOCK1  interval rank   target_tm:76.00;probe_tm:77.60;freq:22.68;count:03;rules:0000;score:0545        chr1:58954-59153        AATGAATCAACGAGTGAAACGAATAACTCTATGGTGACTGAATTCATTTTTCTGGGTCTCTCTGATTCTCAGGAAC      0       1246508232      1246508232      321     679     experimental    CHR01FS000058924        58924   8185    679     3121    A01




++</entry>



<entry [Mon Apr 20 23:24:08 EDT 2009] MINIMUM COVERAGE dbSNPs>



1. LOAD .BSV INTO .DBL FILE

cd /home/syoung/base/bin/utils
perl clusterSubmit.pl --queue "-q psmall" \
--scriptfile /nethome/syoung/base/pipeline/nimblegen-run2/454HCDiffs-mergeDiff.sh \
--outputdir /nethome/syoung/base/pipeline/nimblegen-run2 \
--command "/home/syoung/base/bin/utils/loader.pl \
--dbfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.dbl \
--sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql \
--bsvfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.bsv"

Submitting job to cluster...
qsub -q psmall /nethome/syoung/base/pipeline/nimblegen-run2/454HCDiffs-mergeDiff.sh
Submit done.
Monitoring job on cluster...
............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................Monitoring done.

Run time: 01:21:55
Completed clusterSubmit.pl
0:50AM, 21 April 2009
****************************************

CHECK LOADED:

ll /nethome/syoung/base/pipeline/nimblegen-run2/SID100*/ccds/mapping/pairalign.dbl
    -rw-r--r-- 1 syoung bioinfo 505M Apr 20 23:42 /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.dbl
    -rw-r--r-- 1 syoung bioinfo 3.0K Apr 20 23:45 /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.dbl
    -rw-r--r-- 1 syoung bioinfo 451M Apr 20 23:55 /nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/pairalign.dbl
    -rw-r--r-- 1 syoung bioinfo 3.0K Apr 20 23:57 /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.dbl
    -rw-r--r-- 1 syoung bioinfo 442M Apr 21 00:08 /nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/pairalign.dbl
    -rw-r--r-- 1 syoung bioinfo 587M Apr 21 00:28 /nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/pairalign.dbl
    -rw-r--r-- 1 syoung bioinfo 587M Apr 21 00:49 /nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/pairalign.dbl
    -rw-r--r-- 1 syoung bioinfo 3.0K Apr 21 00:50 /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.dbl


ll /nethome/syoung/base/pipeline/nimblegen-run2/SID100*/ccds/mapping/pairalign.bsv

    -rw-rw-rw- 1 syoung bioinfo 353M Apr  3 10:37 /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 348M Apr  3 10:37 /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 315M Apr  3 10:37 /nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 300M Apr  3 10:37 /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 308M Apr  3 10:37 /nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 409M Apr  3 10:37 /nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 410M Apr  3 10:37 /nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 329M Apr  3 10:36 /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.bsv
    




perl loader.pl --dbfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.dbl --sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql --bsvfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv


    Doing load(dbfiles, bsvfiles, sqlfile)...
    Dropping table: pairalign
    Creating table: pairalign
    Loading data into table: pairalign
    /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv line 1032222: expected 9 columns of data but found 8
    Completed load(dbfiles, bsvfiles, sqlfile).
    
    Run time: 00:02:12
    Completed loader.pl
    2:16AM, 21 April 2009
    ****************************************

lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv
    1105699



perl loader.pl --bsvfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.bsv --sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql --dbfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.dbl 

    Doing load(dbfiles, bsvfiles, sqlfile)...
    Dropping table: pairalign
    Creating table: pairalign
    Loading data into table: pairalign
    Error: columns readname, gene, chromosome, readstart, genestart are not unique
    Completed load(dbfiles, bsvfiles, sqlfile).
    
    Run time: 00:01:26
    Completed loader.pl
    0:23AM, 22 April 2009
    ****************************************





CHECK PAIRALIGN.PL


cd /home/syoung/base/bin/exome
./pairalign.pl \
--inputfile /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/454PairAlign.txt \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv

    AND OUTPUT IS OKAY....
    
cat /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv
    
    FSGQIFB02JAT35|CCDS14722.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCG\
    GGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGAC\
    CATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG
    FSGQIFB02JAT35|CCDS35440.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCG\
    GGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGAC\
    CATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG
    
    /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv
        
    Run time: 00:01:53
    Completed ./pairalign.pl
    1:06AM, 22 April 2009
    ****************************************


lines     /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv

    1105706


cd /home/syoung/base/bin/utils
perl loader.pl --bsvfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv --sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql --dbfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.dbl 

    Completed load(dbfiles, bsvfiles, sqlfile).
    
    Run time: 00:03:30
    Completed loader.pl
    1:23AM, 22 April 2009
    ****************************************




cd /home/syoung/base/bin/exome
./pairalign.pl \
--inputfile /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/454PairAlign.txt \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.bsv

    /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.bsv
    
    Run time: 00:01:38
    Completed ./pairalign.pl
    1:19AM, 22 April 2009
    ****************************************


cd /home/syoung/base/bin/exome
./pairalign.pl \
--inputfile /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/454PairAlign.txt \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.bsv
    
    /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.bsv
    
    Run time: 00:02:06
    Completed ./pairalign.pl
    1:22AM, 22 April 2009
    ****************************************




perl loader.pl --bsvfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.bsv --sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql --dbfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.dbl 


screen -S loader-1



perl loader.pl --bsvfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.bsv --sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql --dbfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.dbl 

screen -S loader-2

    Completed load(dbfiles, bsvfiles, sqlfile).
    
    Run time: 00:02:59
    Completed loader.pl
    2:06AM, 22 April 2009
    ****************************************








perl checkcols.pl \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.bsv \
--outputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign-checkcols.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign-checkcols.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign-checkcols.bsv \
--separator "\|"


    Infile: /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv
    Outfile: /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign-checkcols.bsv
    First line columns: 9
    Column mismatch: 8
    Line 0: FSGQIFB02JAT35|CCDS35440.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGA
    
    Outputfile printed:
    
    /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign-checkcols.bsv
    
    Infile: /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.bsv
    Outfile: /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign-checkcols.bsv
    First line columns: 9
    Outputfile printed:
    
    /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign-checkcols.bsv
    
    Infile: /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.bsv
    Outfile: /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign-checkcols.bsv
    First line columns: 9
    Column mismatch: 8
    Line 2: FSNVMG102GI0U5|CCDS33011.1|chr19|122|1|7429|7550|CCCACCCTGGGC-AAAGATGGGGCTCTGGTGCAGCCAAAGATGTCAGCATCCTTCGTGCCG
    
    Outputfile printed:
    
    /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign-checkcols.bsv
        
    Run time: 00:00:51
    Completed checkcols.pl
    0:17AM, 22 April 2009
    ****************************************

























FOUND THE ENTRY WITH THE MISSING COLUMN

getlines.pl -f /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv -n 1032220 > ~/base/pipeline/exome/pairalign-line1032220.bsv

cat pairalign-line1032220.bsv
    FSGQIFB02JAT35|CCDS35440.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGA









COPY OUT ALL ENTRIES FOR THIS READ FROM 454PairAlign.txt FILE TO TEST FILE:


cd /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/
grep FSGQIFB02JAT35 454PairAlign.txt > /nethome/syoung/base/pipeline/exome/test-pairalign/missing-column.txt
cat /nethome/syoung/base/pipeline/exome/test-pairalign/missing-column.txt


emacs /nethome/syoung/base/pipeline/exome/test-pairalign/test-454PairAlign.txt

QueryAccno      QueryStart      QueryEnd        QueryLength     SubjAccno       SubjStart       SubjEnd SubjLength      NumIdent        AlignLength     QueryAlign      SubjAlign
FSGQIFB02JAT35  80      266     355     CCDS14722.1|Hs36.3|chrX 3157    3342    3522    186     187     CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG       CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG
FSGQIFB02JAT35  80      266     355     CCDS35440.1|Hs36.3|chrX 3157    3342    3663    186     187     CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG       CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG
FSGQIFB02JAT35  80      266     355     CCDS14722.1|Hs36.3|chrX 3157    3342    3522    186     187     CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG       CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG
FSGQIFB02JAT35  80      266     355     CCDS35440.1|Hs36.3|chrX 3157    3342    3663    186     187     CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG       CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG


TEST pairalign.pl

cd /home/syoung/base/bin/exome
./pairalign.pl \
--inputfile /nethome/syoung/base/pipeline/exome/test-pairalign/test-454PairAlign.txt \
--outputfile /nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv













TEST loader.pl WITH SINGLE .DBL FILE

perl loader.pl --dbfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.dbl --sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql --bsvfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.bsv

Completed load(dbfiles, bsvfiles, sqlfile).

Run time: 00:05:42
Completed loader.pl
10:33PM, 20 April 2009
****************************************

ll /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.dbl
    -rw-r--r-- 1 syoung bioinfo 505M Apr 20 22:33 /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.dbl


sqlite3 /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.dbl
    SQLite version 3.3.6
    Enter ".help" for instructions
    sqlite> select count(*) from pairalign;
    1103628
    sqlite> select * from pairalign limit 1;
    FSA9WIN01A000M|CCDS8539.1|chr12|1|152|8291|8442|TCAACGATGTGCAGGACCAGTGCTCCTGCTGCTCTCCGACACGGACGGAGCCCATGCAGGTGGCCCTGCACTGCACCAATGGCTCTGTTGTGTACCATGAGGTTCTCAATGCCATGGAGTGCAAATGCTCCCCCAGGAAGTGCAGCAAGTGA|TCAACGATGTGCAGGACCAGTGCTCCTGCTGCTCTCCGACACGGACGGAGCCCATGCAGGTGGCCCTGCACTGCACCAATGGCTCTGTTGTGTACCATGAGGTTCTCAATGCCATGGAGTGCAAATGCTCCCCCAGGAAGTGCAGCAAGTGA
    sqlite> .schema pairalign
    CREATE TABLE pairalign (
    
        readname        varchar(40),
        gene            varchar(40),
        chromosome      varchar(40),
        readstart       int(15),
        readstop        int(15),
        genestart       int(15),
        genestop        int(15),
        genesequence    TEXT,
        readsequence    TEXT,
        
        PRIMARY KEY (readname, gene, chromosome, readstart, genestart)
    );

cp /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.dbl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign-bkp.dbl






2. ADD INDEX

cd /home/syoung/base/utils
./addindex.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--table pairalign \
--index gene \
--fields gene






COMMAND LINE File::Sort::sort_file WORKS BUT PROGRAMMATIC CALL DOESN'T:




 perl -e 'use lib "/nethome/syoung/base/lib"; use File::Sort; File::Sort::sort_file("/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-temp", "/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-sorted");'
File::Sort::sort_file
File::Sort::_sort_file($opts, @fh, @recs)
$opts: $VAR1 = {
          'I' => '/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-temp',
          'o' => '/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-sorted'
        };
@fh: @recs: output file: 
/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-sorted
No $opts->{c} or $opts->{m}
Doing input file: /nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-temp
Doing sysopen of filein: /nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-temp
Filehandle:
$VAR1 = \*File::Sort::F;
$rec: FSGQIFB02JAT35|CCDS14722.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG

$rec: FSGQIFB02JAT35|CCDS35440.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG

$rec: FSGQIFB02JAT35|CCDS14722.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG

$rec: FSGQIFB02JAT35|CCDS35440.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG

$rec: FSGQIFB02JAT35|CCDS14722.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG

$rec: FSGQIFB02JAT35|CCDS35440.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG

cat /nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-sorted:
before _merge_files()
File::Sort::_merge_files($opts, @fh, @recs, $file)
$opts: $VAR1 = {
          'F' => 40,
          'y' => 200000,
          'k' => [],
          'kst' => '',
          'K' => 1,
          'I' => [
                   '/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-temp'
                 ],
          'o' => '/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-sorted'
        };
$fh: $VAR1 = [];
$recs: $VAR1 = [
          'FSGQIFB02JAT35|CCDS14722.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG
',
          'FSGQIFB02JAT35|CCDS14722.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG
',
          'FSGQIFB02JAT35|CCDS14722.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG
',
          'FSGQIFB02JAT35|CCDS35440.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG
',
          'FSGQIFB02JAT35|CCDS35440.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG
',
          'FSGQIFB02JAT35|CCDS35440.1|chrX|80|266|3157|3342|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGG-CCTGAACCGGATTCAGACGCAG|CAGGTCATTGCCACCATCCCCACCAGCCAGCTCAAGTGCCTGAAGGAAGCCGGGCACGGGCCCGGGAAGGACGAGATGACCGACGAGGAGCTGGCCGAAGGCGAGGAAGAGATCGACCATGCCGAGCGGGAGCTCCGCAGGGGCCAGATCCTCTGGTTCCGGGGGCCTGAACCGGATTCAGACGCAG
'
        ];
$file: $VAR1 = '/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-sorted';
[syoung@kronos test-pairalign]$  perl -e 'use lib "/nethome/syoung/base/lib"; use File::Sort; File::Sort::sort_file("/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-temp", "/nethome/syoung/base/pipeline/exome/test-pairalign/test-pairalign-sorted.bsv-sorted");'



++</entry>



<entry [Tues Mar 10 03:54:37 EST 2009] MINIMUM COVERAGE dbSNPs>



6+

perl /nethome/syoung/base/bin/exome/min-coverage.pl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt 6 > /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-6+coverage.txt
lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-6+coverage.txt
grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-6+coverage.txt


8+

perl /nethome/syoung/base/bin/exome/min-coverage.pl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt 8 > /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-8+coverage.txt
lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-8+coverage.txt
grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-8+coverage.txt


10+

perl /nethome/syoung/base/bin/exome/min-coverage.pl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt 10 > /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-10+coverage.txt
lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-10+coverage.txt
grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-10+coverage.txt


12+

perl /nethome/syoung/base/bin/exome/min-coverage.pl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt 12 > /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-12+coverage.txt
lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-12+coverage.txt
grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-12+coverage.txt


14+

perl /nethome/syoung/base/bin/exome/min-coverage.pl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt 14 > /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-14+coverage.txt
lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-14+coverage.txt
grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-14+coverage.txt


    [syoung@ngsdev exome]$ lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-6+coverage.txt
    11641
    [syoung@ngsdev exome]$ grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-6+coverage.txt
    58
    [syoung@ngsdev exome]$ perl /nethome/syoung/base/bin/exome/min-coverage.pl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt 8 > /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-8+coverage.txt
    [syoung@ngsdev exome]$ lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-8+coverage.txt
    8311
    [syoung@ngsdev exome]$ grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-8+coverage.txt
    37
    [syoung@ngsdev exome]$ perl /nethome/syoung/base/bin/exome/min-coverage.pl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt 10 > /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-10+coverage.txt
    [syoung@ngsdev exome]$ lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-10+coverage.txt
    5478
    [syoung@ngsdev exome]$ grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-10+coverage.txt
    24
    [syoung@ngsdev exome]$ perl /nethome/syoung/base/bin/exome/min-coverage.pl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt 12 > /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-12+coverage.txt
    [syoung@ngsdev exome]$ lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-12+coverage.txt
    3497
    [syoung@ngsdev exome]$ grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-12+coverage.txt
    18
    [syoung@ngsdev exome]$ perl /nethome/syoung/base/bin/exome/min-coverage.pl /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt 14 > /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-14+coverage.txt
    [syoung@ngsdev exome]$ lines /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-14+coverage.txt
    2182
    [syoung@ngsdev exome]$ grep -c rs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs-14+coverage.txt
    9

++</entry>



<entry [Tues Mar 10 03:54:37 EST 2009] POST-PROCESS NIMBLEGEN RUN 2>



ADD NEWLINE TO diffs.pl OUTPUT 454HCDiffs-headers-SNPs.txt:

cd /nethome/syoung/base/pipeline/nimblegen-run2
ll SID100*/ccds/mapping/*headers-SNPs.txt

    -rw-rw-rw- 1 syoung bioinfo  1.5M Apr  6 19:24 SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt
    -rw-rw-rw- 1 syoung bioinfo  794K Apr  6 18:26 SID10033/ccds/mapping/454HCDiffs-headers-SNPs.txt
    -rw-rw-rw- 1 syoung bioinfo  973K Apr  6 18:59 SID10034/ccds/mapping/454HCDiffs-headers-SNPs.txt
    -rw-rw-rw- 1 syoung bioinfo 1020K Apr  6 20:18 SID10035/ccds/mapping/454HCDiffs-headers-SNPs.txt
    -rw-rw-rw- 1 syoung bioinfo  1.3M Apr  6 20:31 SID10036/ccds/mapping/454HCDiffs-headers-SNPs.txt
    -rw-rw-rw- 1 syoung bioinfo  1.1M Apr  6 18:06 SID10037/ccds/mapping/454HCDiffs-headers-SNPs.txt
    -rw-rw-rw- 1 syoung bioinfo  2.0M Apr  6 19:11 SID10039/ccds/mapping/454HCDiffs-headers-SNPs.txt
    -rw-rw-rw- 1 syoung bioinfo  1.1M Apr  6 18:10 SID10082/ccds/mapping/454HCDiffs-headers-SNPs.txt

perl -pi -e 's/CCDS/\nCCDS/g' SID100*/ccds/mapping/*headers-SNPs.txt

cd /nethome/syoung/base/pipeline/nimblegen-run2
head  SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt







++</entry>



<entry [Mon Mar 09 14:24:37 EST 2009] PROCESS NIMBLEGEN RUN 2>



1. CREATE FOLDERS AND LINKED FILES
----------------------------------

SAMPLE IDS:

SID10032
SID10033
SID10034
SID10035
SID10036
SID10037
SID10039
SID10082

CREATE ccds FOLDERS

mkdir  /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds
mkdir  /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds
mkdir  /nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds
mkdir  /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds
mkdir  /nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds
mkdir  /nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds
mkdir  /nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds
mkdir  /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds

LINK *.fna AND *.qual FILES

ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10032/SID10032_454Reads.fna /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/SID10032_454Reads.fna
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10033/SID10033_454Reads.fna /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/SID10033_454Reads.fna
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10034/SID10034_454Reads.fna /nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/SID10034_454Reads.fna
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10035/SID10035_454Reads.fna /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/SID10035_454Reads.fna
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10036/SID10036_454Reads.fna /nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/SID10036_454Reads.fna
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10037/SID10037_454Reads.fna /nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/SID10037_454Reads.fna
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10039/SID10039_454Reads.fna /nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/SID10039_454Reads.fna
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10082/SID10082_454Reads.fna /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/SID10082_454Reads.fna


ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10032/SID10032_454Reads.qual /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/SID10032_454Reads.qual
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10033/SID10033_454Reads.qual /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/SID10033_454Reads.qual
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10034/SID10034_454Reads.qual /nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/SID10034_454Reads.qual
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10035/SID10035_454Reads.qual /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/SID10035_454Reads.qual
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10036/SID10036_454Reads.qual /nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/SID10036_454Reads.qual
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10037/SID10037_454Reads.qual /nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/SID10037_454Reads.qual
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10039/SID10039_454Reads.qual /nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/SID10039_454Reads.qual
ln -s /mihg/data/vendor/RocheNimbleGenArraySequenceCapture/SID10082/SID10082_454Reads.qual /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/SID10082_454Reads.qual



2. RUN runMapping USING CCDS REFERENCE
--------------------------------------

cd /nethome/syoung/base/bin/exome

perl cluster-runMapping.pl \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/SID10032_454Reads.fna,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/SID10033_454Reads.fna,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/SID10034_454Reads.fna,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/SID10035_454Reads.fna,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/SID10036_454Reads.fna,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/SID10037_454Reads.fna,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/SID10039_454Reads.fna,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/SID10082_454Reads.fna \
--referencefile /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
--outputdirs /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds 

    
    14816.kronos.ccs.miami.edu
    14817.kronos.ccs.miami.edu
    14818.kronos.ccs.miami.edu
    14819.kronos.ccs.miami.edu
    14820.kronos.ccs.miami.edu
    14821.kronos.ccs.miami.edu
    14822.kronos.ccs.miami.edu
    14823.kronos.ccs.miami.edu
    
    Run time: 00:00:01
    Completed cluster-runMapping.pl
    8:32PM, 2 April 2009
    ****************************************
    
    



3. RUN EXOME VERIFICATION PIPELINE
----------------------------------

1. Filter SNPs in 454*Diffs.txt file                        diffs.pl

cd /nethome/syoung/base/bin/exome

perl cluster-diffs.pl \
--queue "-q psmall" \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/454HCDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/454HCDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/454HCDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/454HCDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/454HCDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/454HCDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/454HCDiffs.txt \
--outputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/454HCDiffs-headers-SNPs.txt 
    
    qsub -q psmall /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-diffs.sh
    15300.kronos.ccs.miami.edu
    qsub -q psmall /nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/454HCDiffs-diffs.sh
    15301.kronos.ccs.miami.edu
    qsub -q psmall /nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/454HCDiffs-diffs.sh
    15302.kronos.ccs.miami.edu
    qsub -q psmall /nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/454HCDiffs-diffs.sh
    15303.kronos.ccs.miami.edu
    qsub -q psmall /nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/454HCDiffs-diffs.sh
    15304.kronos.ccs.miami.edu
    qsub -q psmall /nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/454HCDiffs-diffs.sh
    15305.kronos.ccs.miami.edu
    qsub -q psmall /nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/454HCDiffs-diffs.sh
    15306.kronos.ccs.miami.edu
    qsub -q psmall /nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/454HCDiffs-diffs.sh
    15307.kronos.ccs.miami.edu
    
    Run time: 00:00:10
    Completed cluster-diffs.pl
    4:10PM, 6 April 2009
    ****************************************

    mshow
    15300                syoung    Running     1  4:23:53:47  Mon Apr  6 16:10:05
    15301                syoung    Running     1  4:23:53:47  Mon Apr  6 16:10:05
    15302                syoung    Running     1  4:23:53:47  Mon Apr  6 16:10:05
    15303                syoung    Running     1  4:23:54:01  Mon Apr  6 16:10:19
    15304                syoung    Running     1  4:23:54:01  Mon Apr  6 16:10:19
    15305                syoung    Running     1  4:23:54:01  Mon Apr  6 16:10:19
    15306                syoung    Running     1  4:23:54:01  Mon Apr  6 16:10:19
    15307                syoung    Running     1  4:23:54:01  Mon Apr  6 16:10:19
    





cd /nethome/syoung/base/bin/exome

perl cluster-diffs.pl \
--queue "-q psmall" \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454AllDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/454AllDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/454AllDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/454AllDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/454AllDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/454AllDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/454AllDiffs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/454AllDiffs.txt \
--outputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454AllDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/454AllDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/454AllDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/454AllDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/454AllDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/454AllDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/454AllDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/454AllDiffs-headers-SNPs.txt 

    
    15369.kronos.ccs.miami.edu
    15370.kronos.ccs.miami.edu
    15371.kronos.ccs.miami.edu
    15372.kronos.ccs.miami.edu
    15373.kronos.ccs.miami.edu
    15374.kronos.ccs.miami.edu
    15375.kronos.ccs.miami.edu
    15376.kronos.ccs.miami.edu
    
    Run time: 00:00:04
    Completed cluster-diffs.pl
    4:57AM, 7 April 2009
    ****************************************


2. Extract '454PairAlign.txt' hits to sqlite database 	    pairalign.pl

cd /nethome/syoung/base/bin/exome

perl cluster-pairalign.pl \
--queue "-q psmall" \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454PairAlign.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/454PairAlign.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/454PairAlign.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/454PairAlign.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/454PairAlign.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/454PairAlign.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/454PairAlign.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/454PairAlign.txt \
--outputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/pairalign.bsv,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/pairalign.bsv 

    14865.kronos.ccs.miami.edu
    14866.kronos.ccs.miami.edu
    14867.kronos.ccs.miami.edu
    14868.kronos.ccs.miami.edu
    14869.kronos.ccs.miami.edu
    14870.kronos.ccs.miami.edu
    14871.kronos.ccs.miami.edu
    14872.kronos.ccs.miami.edu
    
    Run time: 00:00:01
    Completed cluster-pairalign.pl
    10:33AM, 3 April 2009
    ****************************************


    cd /nethome/syoung/base/pipeline/nimblegen-run2
    ll SID100*/ccds/mapping/*bsv
    -rw-rw-rw- 1 syoung bioinfo 353M Apr  3 10:37 SID10032/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 348M Apr  3 10:37 SID10033/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 315M Apr  3 10:37 SID10034/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 300M Apr  3 10:37 SID10035/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 308M Apr  3 10:37 SID10036/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 409M Apr  3 10:37 SID10037/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 410M Apr  3 10:37 SID10039/ccds/mapping/pairalign.bsv
    -rw-rw-rw- 1 syoung bioinfo 329M Apr  3 10:36 SID10082/ccds/mapping/pairalign.bsv
    


3. Merge SNPs of all individuals in pedigree 	            mergediffs.pl

GENERATE A 'COMPLETE' LIST OF SNPS FOUND IN AT LEAST ONE INDIVIDUAL
    -   MERGE ALL 454HCDiffs-headers-SNPs.txt FILES FROM ALL THE INDIVIDUALS
    -   SORT BY chromosome genename genestart genestop individual


cd /nethome/syoung/base/bin/exome

./clusterSubmit.pl \
--queue "-q psmall" \
--scriptfile /nethome/syoung/base/pipeline/nimblegen-run2/454HCDiffs-mergeDiff.sh \
--outputdir /nethome/syoung/base/pipeline/nimblegen-run2 \
--command "perl /nethome/syoung/base/bin/exome/mergeDiffs.pl --individuals SID10032,SID10033,SID10034,SID10035,SID10036,SID10037,SID10039,SID10082 --inputfiles /nethome/syoung/base/pipeline/nimblegen-run2/SID10032/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10033/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10034/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10035/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10036/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10037/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10039/ccds/mapping/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run2/SID10082/ccds/mapping/454HCDiffs-headers-SNPs.txt --outputfile /nethome/syoung/base/pipeline/nimblegen-run2/454HCDiffs-headers-SNPs-merged.txt"

    Run time: 00:00:51
    Completed ./clusterSubmit.pl
    4:37AM, 7 April 2009
    ****************************************


4. Check SNP calls for all spanning reads 	                checkSNP.pl






5. Verify SNPs for the whole pedigree 	                    pedigreeSNP.pl









#################################################################
# NB: NOT NECESSARY AS THE _*454Reads.fna FILES ARE ALREADY PRESENT
#
# 2. PROCESS .sff FILES INTO .fna AND .qual
-----------------------------------------
#
#
#MERGE TWO .sff FILES USING sfffile
#
#/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sfffile -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/SID9640.sff /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/FO9YRTP01.sff /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/FO9YRTP02.sff
#
#GENERATE .fna FILES:
#
#/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -seq /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/FO91FA401.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/SID9637.fna
#
#
#GENERATE .qual FILES
#
#/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -qual /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/FO91FA401.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/SID9637.qual
#
#################################################################





++</entry>



<entry [Mon Mar 09 14:24:37 EST 2009] DATABASE LOGINS FOR solexa AND tank>



solexa?
#    print "OS is not Windows\n";
#    #### GET DATABASE HANDLE
#    #my $user = "exome";
#    #my $database = "exome";
#    #my $password = "accessexome";
#    #my $host = "localhost";
#    

tank
#    my $user = "ngsadmin";
#    my $database = "ngs";
#    my $password = "accessngs";
#    my $host = "tank.ccs.miami.edu:3307";
#    my $dsn = "DBI:mysql:$database:$host";    # data source name
#

++</entry>



<entry [Sun Mar 08 23:15:37 EST 2009] GENERATED pairalign SQLITE DB FOR EACH INDIVIDUAL FOR QUERYING NON-SNP READ MATCHES AGAINST CCDS>



RUN STEP ONE ON REMAINING INDIVIDUALS (SID9639, SID9640, SID9641)

SID9639  - OK
=======
# 1.1 pairalign.pl

cd /home/syoung/base/bin/exome
./pairalign.pl \
--inputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo/mapping/454PairAlign.txt \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo/mapping/pairalign.bsv

# 1.2 loader.pl


cd /home/syoung/base/html/Bioptic0.2.5/bin
./loader.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql \
--bsvfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo/mapping/pairalign.bsv

# 1.3 addindex.pl

cp /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo/mapping/pairalign.dbl /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo/mapping/pairalign-bkp.dbl 

cd /home/syoung/base/html/Bioptic0.2.5/bin
./addindex.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--table pairalign \
--index gene \
--fields gene


SID9640 - ERROR
=======
# 1.1 pairalign.pl

cd /home/syoung/base/bin/exome
./pairalign.pl \
--inputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo/mapping/454PairAlign.txt \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo/mapping/pairalign.bsv

# 1.2 loader.pl


cd /home/syoung/base/html/Bioptic0.2.5/bin
./loader.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql \
--bsvfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo/mapping/pairalign.bsv

#### ERROR:

/nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo/mapping/pairalign.bsv line 995131: expected 9 columns of data but found 2



# 1.3 addindex.pl

cp /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo/mapping/pairalign.dbl /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo/mapping/pairalign-bkp.dbl 

cd /home/syoung/base/html/Bioptic0.2.5/bin
./addindex.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--table pairalign \
--index gene \
--fields gene


SID9641 - ERROR
=======
# 1.1 pairalign.pl

cd /home/syoung/base/bin/exome
./pairalign.pl \
--inputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo/mapping/454PairAlign.txt \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo/mapping/pairalign.bsv

# 1.2 loader.pl



cd /home/syoung/base/html/Bioptic0.2.5/bin
./loader.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql \
--bsvfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo/mapping/pairalign.bsv

#### ERROR:


    Dropping table: pairalign
    Creating table: pairalign
    Loading data into table: pairalign
    Command:
    /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo/mapping/pairalign.bsv line 317091: expected 9 columns of data but found 5


# 1.3 addindex.pl

cp /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo/mapping/pairalign.dbl /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo/mapping/pairalign-bkp.dbl 

cd /home/syoung/base/html/Bioptic0.2.5/bin
./addindex.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--table pairalign \
--index gene \
--fields gene





++</entry>



<entry [Fri Feb 20 01:23:37 EST 2009] GENERATED pairalign SQLITE DB FOR EACH INDIVIDUAL FOR QUERYING NON-SNP READ MATCHES AGAINST CCDS>




1. USE pairalign.pl TO GENERATE A pairalign SQLITE DB FILE (WITH NO DUPLICATE LINES) FOR EACH INDIVIDUAL

1.1 pairalign.pl

cd /home/syoung/base/bin/exome
./pairalign.pl \
--inputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping/454PairAlign.txt \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping/pairalign.bsv

    ...
    /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping/pairalign.bsv
    
    Run time: 00:00:49
    Completed ./pairalign.pl
    9:37PM, 8 March 2009
    ****************************************
    
    
lines /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping/pairalign.bsv
    
    396732


PARSES 454PairAlign.txt FILE:

cd /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping
head -n 3 454PairAlign.txt

QueryAccno      QueryStart      QueryEnd        QueryLength     SubjAccno       SubjStart       SubjEnd SubjLength      NumIdent        AlignLength     QueryAlign      SubjAlign
FO91FA401ATFOB  111     16      111     CCDS2575.1|Hs36.3|chr3  1187    1283    3645    95      98      CCTGCATCCAGTGCCACAAGGCCAACTGTTACACAGCTTTCCATGTGACATGCGCCCAGCAGGCTGGCCTT-ACATGAAGATGGAGCCTGTG-GAGGA        CCTGCATCCAGTGCCACAAGGCCAACTGTTACACAGCTTTCCATGTGACATGCGCCCAGCAGGCTGGCCTTTACATGAAGATGGAGCCTGTGCG-GGA
FO91FA401ATFOB  111     16      111     CCDS33692.1|Hs36.3|chr3 1187    1283    3663    95      98      CCTGCATCCAGTGCCACAAGGCCAACTGTTACACAGCTTTCCATGTGACATGCGCCCAGCAGGCTGGCCTT-ACATGAAGATGGAGCCTGTG-GAGGA        CCTGCATCCAGTGCCACAAGGCCAACTGTTACACAGCTTTCCATGTGACATGCGCCCAGCAGGCTGGCCTTTACATGAAGATGGAGCCTGTGCG-GGA


... AND GENERATES BAR-SEPARATED VALUES DATA FOR THE pairalign TABLE:

    
    CREATE TABLE pairalign (
    
        readname        varchar(40),
        gene            varchar(40),
        chromosome      varchar(40),
        genestart       int(15),
        genestop        int(15),
        genesequence    TEXT,
        readsequence    TEXT,
        
        PRIMARY KEY (readname, gene, chromosome, genestart)    
    );



1.2 loader.pl


cd /home/syoung/base/html/Bioptic0.2.5/bin
./loader.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql \
--bsvfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping/pairalign.bsv

    Dropping table: pairalign
    Creating table: pairalign
    Loading data into table: pairalign
    ...
    Run time: 00:00:37
    Completed ./loader.pl
    9:39PM, 8 March 2009
    ****************************************

CHECK DATABASE WAS CREATED:

sqlite3 /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping/pairalign.dbl


    SQLite version 3.3.6
    Enter ".help" for instructions
    sqlite> SELECT COUNT(*) FROM pairalign;
    396732
    sqlite> .separator "**\t**"
    sqlite> select * from pairalign limit 1;
    FO91FA401A001P**        **CCDS1167.1**  **chr1**        **355** **74**  **1409**        **1691**        **CAGTTCCGGTGTCTCGCCCCGTCCTCACCCTCAGGGCTCCCGGGGCCCAGGCTGTGGT-GGGGACCTGCTGGAGCTTCACTGTGAGTCCCTGAGAGGCTCCTTCCCGATCCTGTACTGGTTTTATCACGAGGATGACACCTTGGGGAACATCTCGGCCCACTCTGGAGGAGGGGCATCCTTCAACCTCTCTCTGACTACAGAACATTCTGGAAACTACTCATGTGAGGCTGACAATGGCCTGGGGGCCCAGCACAGTAAAGTGGTGACACTCAATGTTACAGG**     **CAGTTCCGGTGTCTCGCCCCGTCCTCACCCTCAGGGCTCCCGGGGCCCAGGCTGTGGTGGGGGACCTGCTGGAGCTTCACTGTGAGTCCCTGAGAGGCTCCTTCCCGATCCTGTACTGGTTTTATCACGAGGATGACACCTTGGGGAACATCTCGGCCCACTCTGGAGGAGGGGCATCCTTCAACCTCTCTCTGACTACAGAACATTCTGGAAACTACTCATGTGAGGCTGACAATGGCCTGGGGGCCCAGCACAGTAAAGTGGTGACACTCAATGTTACAGG
    


1.3 addindex.pl

BACKUP DB FILE:

cd /home/syoung/base/bin/exome
./pairalign.pl \
--inputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo/mapping/454PairAlign.txt \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo/mapping/pairalign.bsv

cd /home/syoung/base/html/Bioptic0.2.5/bin
./loader.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--sqlfile /nethome/syoung/base/bin/exome/sql/pairalign.sql \
--bsvfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo/mapping/pairalign.bsv

cp /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo/mapping/pairalign.dbl /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo/mapping/pairalign-bkp.dbl 

cd /home/syoung/base/html/Bioptic0.2.5/bin
./addindex.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--table pairalign \
--index gene \
--fields gene

    Result: 0E0
    
    Run time: 00:00:15
    Completed ./addindex.pl
    11:16PM, 8 March 2009
    ****************************************


CHECK THE INDEX WAS ADDED:

sqlite3  /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo/mapping/pairalign.dbl
    SQLite version 3.3.6
    Enter ".help" for instructions
    sqlite> .schema pairalign
    CREATE TABLE pairalign (
    
        readname        varchar(40),
        gene            varchar(40),
        chromosome      varchar(40),
        readstart       int(15),
        readstop        int(15),
        genestart       int(15),
        genestop        int(15),
        genesequence    TEXT,
        readsequence    TEXT,
        
        PRIMARY KEY (readname, gene, chromosome, readstart, genestart)
        
    );
    CREATE INDEX gene ON pairalign (gene);




2. GENERATE A 'COMPLETE' LIST OF SNPS FOUND IN AT LEAST ONE INDIVIDUAL

    -   MERGE ALL 454HCDiffs-headers-SNPs.txt FILES FROM ALL THE INDIVIDUALS

    -   SORT BY chromosome genename genestart genestop individual


2.1 mergediffs.pl
    
./mergediffs.pl \
--individuals SID9637,SID9638,SID9639,SID9640,SID9641 \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds/454HCDiffs-headers-SNPs.txt,/nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds/454HCDiffs-headers-SNPs.txt \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run1/454HCDiffs-headers-SNPs-merged.txt

head /nethome/syoung/base/pipeline/nimblegen-run1/454HCDiffs-headers-SNPs-merged.txt
    chr10   CCDS31132.1     750     SID9639 750     G       A       5       80%     1036712 1036712 synonymous      GCG     GCA     Alanine Alanine +       rs2306409       0       +
    chr10   CCDS31135.1     333     SID9641 333     G       A       4       100%    5194743 5194743 synonymous      CCG     CCA     Proline Proline -                       -
    chr10   CCDS31138.1     1008    SID9640 1008    T       C       8       100%    7330479 7330479 synonymous      GAT     GAC     Aspartic        Aspartic        -                -
    chr10   CCDS31141.1     788     SID9640 788     A       G       5       100%    7803667 7803667 missense        AAC     AGC     Asparagine      Serine  +       rs7075296       0+
    chr10   CCDS31147.1     205     SID9637 205     A       C       3       100%    13315659        13315659        synonymous      AGA     CGA     Arginine        Arginine        --
    chr10   CCDS31147.1     205     SID9638 205     A       C       5       100%    13315659        13315659        synonymous      AGA     CGA     Arginine        Arginine        --
    chr10   CCDS31147.1     241     SID9641 241     C       T       4       75%     13315522        13315522        missense        CGG     TGG     Arginine        Tryptophan      --
    chr10   CCDS31151.1     26      SID9639 26      A       C       5       100%    15048499        15048499        missense        AAA     ACA     Lysine  Threonine       +       rs4750568 0       +
    chr10   CCDS31160.1     1186    SID9639 1186    A       G       3       100%    17931711        17931711        missense        AGT     GGT     Serine  Glycine +       rs19267360+
    chr10   CCDS31168.1     1138    SID9641 1138    G       A       9       44%     27075298        27075298        missense        GCC     ACC     Alanine Threonine       +        +



3. UTILITY TO CHECK FOR SNP CALLS IN ALL READS THAT SPAN A BASE (I.E., A SNP CALL IN THE 454HCDiffs.txt OUTPUT)

3.1 checkSNP.pl

RUN checkSNP.pl ON THE DATABASE FILES OF ALL INDIVIDUALS

cd /home/syoung/base/bin/exome
./checkSNP.pl \
--dbfile /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--chromosome chr10 \
--gene CCDS31147.1 \
--position 205  \
--output tsv




4. USE THE MERGED 'COMPLETE' SNP LIST GENERATED IN STEP 2 ABOVE AND THE 'checkSNP.pl' UTILITY IN STEP 3 TO FIND:

        1. HOW MANY NON-SNP READS CROSS A SNP
        
        2. HOW MANY READS HAVE THE SAME SNP, ANOTHER SNP OR NO SNP (SAME AS REFERENCE)

    -   HOW MANY READS IN EACH INDIVIDUAL SPAN THE POSITION:
    
    -   FOR EACH READ:
    
            1) DOES IT HAVE A SNP, AND IF SO,
            
            2) THE BASE OF THE SNP
            

4.1 pedigreeSNPs.pl


pedigreeSNPs.pl
--individuals SID9637,SID9638,SID9639,SID9640,SID9641 \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo/mapping/pairalign.dbl,/nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo/mapping/pairalign.dbl \
--outputfile /nethome/syoung/base/pipeline/nimblegen-run1/454HCDiffs-headers-SNPs-merged.txt








NOTES
=====

FIXED genesequence AND readsequence SWAP


SEARCHED IN CCDS GENE FOR genesequence OUTPUT FROM checkSNP.pl FOR BUT FOUND IT HAD AT LEAST ONE SNP, WHEREAS THE readsequence MATCHED OVER ITS ENTIRE LENGTH. THE genesequence AND readsequence ENTRIED HAD BEEN SWAPPED AROUND IN pairalign.pl - FIXED IT.



[syoung@kronos exome]$ lib
[syoung@kronos lib]$ fastaseq.pl -i CCDS31147.1 -f /nethome/syoung/base/pipeline/nimblegen-sff/CCDS_nucleotide.20080430.fa 
Sequence number: 14566
[syoung@kronos lib]$ fastaseq.pl -n 14566 -f /nethome/syoung/base/pipeline/nimblegen-sff/CCDS_nucleotide.20080430.fa 
>CCDS31147.1|Hs36.3|chr10
ATGACTTGGAGACAGGCCGTCCTGCTGTCTTGCTTCTCCGCCGTGGTGCTCCTGTCTATG
CTGAGAGAGGGAACCAGTGTATCTGTGGGCACCATGCAGATGGCGGGAGAAGAGGCGAGT
GAAGATGCAAAACAGAAGATTTTCATGCAGGAATCAGATGCCTCGAATTTCCTCAAGAGG
CGCGGCAAGCGGTCCCCCAAGTCCAGAGATGAGGTCAATGTGGAAAACAGGCAGAAGCTT
CGGGTTGATGAGCTGCGGAGAGAATATTACGAGGAACAAAGGAATGAATTTGAGAACTTC
GTGGAGGAACAAAACGATGAGCAGGAAGAGAGGAGCCGGGAGGCTGTGGAGCAGTGGCGC
CAGTGGCACTATGACGGCCTGCACCCATCCTATCTCTACAACCGCCACCACACCTGA



ATGACTTGGAGACAGGCCGTCCTGCTGTCTTGCTTCTCCGCCGTGGTGCTCCTGTCTATGCTGAGAGAGGGAACCAGTGTATCTGTGGGCACCATGCAGATGGCGGGAGAAGAGGCGAGTGAAGATGCAAAACAGAAGATTTTCATGCAGGAATCAGATGCCTCGAATTTCCTCAAGAGGCGCGGCAAGCGGTCCCCCAAGTCCAGAGATGAGGTCAATGTGGAAAACAGGCAGAAGCTTCGGGTTGATGAGCTGCGGAGAGAATATTACGAGGAACAAAGGAATGAATTTGAGAACTTCGTGGAGGAACAAAACGATGAGCAGGAAGAGAGGAGCCGGGAGGCTGTGGAGCAGTGGCGCCAGTGGCACTATGACGGCCTGCACCCATCCTATCTCTACAACCGCCACCACACCTGA



CHECK READ SEQUENCE

150242:>FO91FA401EB89T length=223 xy=1662_2911 region=1 run=R_2009_01_14_16_00_36_
[syoung@kronos sff]$ pwd
/nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff


fastaseq.pl -n 27800 -f /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/SID9637.fna
>FO91FA401EB89T length=223 xy=1662_2911 region=1 run=R_2009_01_14_16_00_36_
CTCGAGAATTCTGGATCCTCACTGCTGGTGACAGGCCTCTCCCGGGTTTCAGATGCAAAA
CAGAAGATTTTCATGCAGGAATCAGATGCCTCGAATTTCCTCAAGAGGCGCGGCAAGCGG
TCCCCCAAGTCCCGAGATGAGGTCAATGGTAAGGATGCTGGAGGGACCCCACCCCGCGTC
CATCACCACCTCTGCTCACACCCCCGCCGTCTCCTCTCCNCCA


CTCGAGAATTCTGGATCCTCACTGCTGGTGACAGGCCTCTCCCGGGTTTCAGATGCAAAACAGAAGATTTTCATGCAGGAATCAGATGCCTCGAATTTCCTCAAGAGGCGCGGCAAGCGGTCCCCCAAGTCCCGAGATGAGGTCAATGGTAAGGATGCTGGAGGGACCCCACCCCGCGTCCATCACCACCTCTGCTCACACCCCCGCCGTCTCCTCTCCNCCA



++</entry>



<entry [Fri Feb 20 01:23:37 EST 2009] RERAN filterSNP.pl ON run1 TO ADD chromosome COLUMN TO OUTPUT>



1. COPIED DBD::SQLite FROM solexa01 TO kronos

ON solexa:

FILES TO COPY

/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD/SQLite.pm
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/SQLite
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/SQLite/.packlist
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/SQLite/SQLite.bs
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/SQLite/SQLite.so

COPY COMMANDS:

scp /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD/SQLite.pm syoung@kronos.ccs.miami.edu:/nethome/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD

scp -r /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/SQLite* syoung@kronos.ccs.miami.edu:/nethome/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD


2. VERIFIED IT WORKS ON kronos

perl -e 'use lib "/nethome/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi"; use DBD::SQLite;'

    OK


3. ADDED use lib LINE TO SCRIPT AND RAN

cd /home/syoung/base/bin/exome

perl filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds/454HCDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds/454HCDiffs-headers-SNPs.txt

    OK
    


4. CONVERTED TO CLUSTER SHELL SCRIPT AND RAN

cd /home/syoung/base/pipeline/nimblegen-run1/
emacs /home/syoung/base/pipeline/nimblegen-run1/run-filterSNP-HCDiffs.sh
#/bin/sh

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds/454HCDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds/454HCDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds/454HCDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds/454HCDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds/454HCDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds/454HCDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds/454HCDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds/454HCDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds/454HCDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds/454HCDiffs-headers-SNPs.txt


cd /home/syoung/base/pipeline/nimblegen-run1/
qsub -q psmall /home/syoung/base/pipeline/nimblegen-run1/run-filterSNP-HCDiffs.sh


cd /home/syoung/base/pipeline/nimblegen-run1/
emacs /home/syoung/base/pipeline/nimblegen-run1/run-filterSNP-AllDiffs.sh
#/bin/sh

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds/454AllDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds/454AllDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds/454AllDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds/454AllDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds/454AllDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds/454AllDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds/454AllDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds/454AllDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile /home/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds/454AllDiffs-headers.txt --outputfile /home/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds/454AllDiffs-headers-SNPs.txt


cd /home/syoung/base/pipeline/nimblegen-run1/
qsub -q psmall /home/syoung/base/pipeline/nimblegen-run1/run-filterSNP-AllDiffs.sh




++</entry>



<entry [Fri Feb 20 01:23:37 EST 2009] RERAN GS MAPPER WITH OPTION TO PRINT 454PairAlign.txt FILE CONTAINING READ MAPPING INFO>




RUN runMapping USING CCDS REFERENCE (ONE .ace FILE FOR ALL HITS)

1. SID9637

cd /nethome/syoung/base/pipeline/nimblegen-run1
emacs gsmapper-ccds-readinfo-SID9637.sh
#/bin/sh

time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo \
-pairt -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
-read /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/SID9637.fna 

qsub -q psmall gsmapper-ccds-readinfo-SID9637.sh
    
    9107.kronos.ccs.miami.edu
    Fri Feb 20 00:04:58 EST 2009


2. SID9638

cd /nethome/syoung/base/pipeline/nimblegen-run1
emacs gsmapper-ccds-readinfo-SID9638.sh
#/bin/sh

time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds-readinfo \
-pairt -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
-read /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/sff/SID9638.fna 

qsub -q psmall gsmapper-ccds-readinfo-SID9638.sh

    9105.kronos.ccs.miami.edu
    Fri Feb 20 01:15:03 EST 2009


3. SID9639

cd /nethome/syoung/base/pipeline/nimblegen-run1
emacs gsmapper-ccds-readinfo-SID9639.sh
#/bin/sh

time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds-readinfo \
-pairt -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
-read /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/sff/SID9639.fna 

qsub -q psmall gsmapper-ccds-readinfo-SID9639.sh

    9109.kronos.ccs.miami.edu
    Fri Feb 20 00:04:58 EST 2009



4. SID9640

cd /nethome/syoung/base/pipeline/nimblegen-run1
emacs gsmapper-ccds-readinfo-SID9640.sh
#/bin/sh

time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds-readinfo \
-pairt -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
-read /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/SID9640.fna 

qsub -q psmall gsmapper-ccds-readinfo-SID9640.sh

    9110.kronos.ccs.miami.edu
    Fri Feb 20 00:04:58 EST 2009


5. SID9641

cd /nethome/syoung/base/pipeline/nimblegen-run1
emacs gsmapper-ccds-readinfo-SID9641.sh
#/bin/sh

time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds-readinfo \
-pairt -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
-read /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/sff/SID9641.fna 

qsub -q psmall gsmapper-ccds-readinfo-SID9641.sh

    9111.kronos.ccs.miami.edu
    Fri Feb 20 00:04:58 EST 2009





RUNPROJECT USAGE:

#### CREATE PROJECT
/home/syoung/base/apps/454/2.0.00.20-64/bin/createProject -t asm /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo
    Created assembly project directory /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo

#### ADD REFERENCE
/home/syoung/base/apps/454/2.0.00.20-64/bin/setRef /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa


SCRAP NOTES:

cd /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo

time /home/syoung/base/apps/454/2.0.00.20-64/bin/runProject -ace -pt -nimblegen \
-snp /nethome/syoung/base/pipeline/goldenpath/snp129.txt \
-annot /nethome/syoung/base/pipeline/goldenpath/refGene.txt 

-read /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/SID9637.fna 
-o /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds-readinfo \
-ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \





++</entry>



<entry [Tues Feb 10 14:13:14 EST 2009] 454 READ MAPPING INFO IN 454PairAlign.txt FILE>




p.209 Reference manual

454PairAlign.txt

This file contains the pairwise alignments that were found when mapping the reads against
the reference. By default, this file is not generated, but if the -p or -pt options are given
on the runProject command line, this file will be generated either in a human-readable
text format (-p) or in tab-delimited format (-pt).

Each of the displayed alignments contain the following information (these are the columns
in the tab-delimited format):

    1. QueryAccno  accession number of the read (the query sequence)
    2. QueryStart  starting position of the alignment in query sequence
    3. QueryEnd  ending position of the alignment in query sequence
    4. QueryLength  length of the query sequence
    5. SubjAccno  accession number of the sequence in the reference where the alignment
    occurs (the subject sequence)
    6. SubjStart  starting position of the alignment in subject sequence
    7. SubjEnd  ending position of the alignment in subject sequence
    8. SubjLength  length of the subject sequence
    9. NumIdent  number of identities in the pairwise alignment, i.e. where query and subject
    characters match
    10. AlignLength  the length of the pairwise alignment
    11. QueryAlign  query alignment sequence
    12. SubjAlign  subject alignment sequence
    







For each uniquely mapped read (the Full and Partial reads), the file contains the unique
alignment found. For reads that map to multiple locations in the genome (some of the
Repeat reads), all the alignments to those multiple locations will be computed. However,
only the highest quality alignments will be output to the file (i.e., if a 99% identity alignment
is found, a 90% identity alignment will not be output, as it is not a likely mapping location
of the read to the genome, given that a 99% identity location was found).





++</entry>



<entry [Tues Feb 10 14:13:14 EST 2009] run2 SEQUENCE FILES>



The s_*_sequence files for run2 (1st paired end) are here:

ON MENDEL1:

ssh syoung@mendel1.ccs.miami.edu

cd /data/solexa/080801_HWI-EAS185_0001_20GVYAAXX_Jia_cDNA2_mtDNA_Total_Small_Medium_JH/Data/C1-72_Firecrest1.9.2_11-08-2008_ddittman/Bustard1.9.2_11-08-2008_ddittman/GERALD_28-08-2008_ddittman
ls | grep sequence


REMOVED DIRECTORIES FROM pipeline_out ON solexa:

sudo rm -fr 080805_HWI-EAS185_0006_20GVYAAXX_Jia_cDNA2_mtDNA_Total_Small_Medium_read2_JH/


Info in Y:\Studies\HSP\Analysis\Nimblegen




++</entry>



<entry [Tues Feb 10 13:57:14 EST 2009] MAP pluto TO P>



P:
\\pluto.ccs.miami.edu\data




++</entry>



<entry [Sun Feb 8 14:57:14 EST 2009] RERUN filterSNP.pl TO FIND ANY dbSNPS WITHIN MARGIN AROUND PREDICTED SNP>



margin = 1

cd C:\DATA\base\bin\exome
perl C:\DATA\base\bin\exome\filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers-SNPs-margin1.txt

margin = 5

cd C:\DATA\base\bin\exome
perl C:\DATA\base\bin\exome\filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers-SNPs-margin5.txt


margin = 10

cd C:\DATA\base\bin\exome
perl C:\DATA\base\bin\exome\filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers-SNPs-margin10.txt


++</entry>



<entry [Fri Feb 6 14:57:14 EST 2009] LOAD ccdsSeq ONTO tank AND RUN filterSNP.pl ON kronos >




1. CONVERT bsv TO tsv

cd /home/syoung/base/bin/exome/sql
cp ccdsSeq.bsv ccdsSeq.tsv
perl -pi -e 's/\|/\t/g' ccdsSeq.tsv


2. LOAD INTO tank

mysql -u ngsadmin -h tank.ccs.miami.edu -P 3307 -p
use ngs

source /home/syoung/base/bin/exome/sql/ccdsSeq.sql
load data local infile '/home/syoung/base/bin/exome/sql/ccdsSeq.tsv' into table ccdsSeq


3. INSTALL DBI ON kronos IN /home/syoung/base/lib/perl_5.8.8

1. DOWNLOAD FROM CPAN


cd /home/syoung/base/lib/perlmods
ls
DBI-1.607.tar.gz
DBD-mysql-4.010.tar.gz 

tar xvfz DBI-1.607.tar.gz
tar xvfz DBD-mysql-4.010.tar.gz 


2. UNZIP AND INSTALL

cd /home/syoung/base/lib/perlmods/DBI-1.607
perl Makefile.PL PREFIX=/home/syoung/base/lib/perl_5.8.8
make
make test
make install


FILES INSTALLED HERE:

cd /home/syoung/base/lib/perl_5.8.8
ll
    drwxr-xr-x  4 syoung bioinfo 16K Feb  6 14:12 archive
    drwxr-xr-x  2 syoung bioinfo 16K Feb  6 16:45 bin
    drwxr-xr-x  3 syoung bioinfo 16K Feb  6 16:45 lib
    drwxr-xr-x  3 syoung bioinfo 16K Feb  6 16:45 lib64
    drwxr-xr-x  3 syoung bioinfo 16K Feb  6 16:45 share


DON'T BOTHER INSTALLING MYSQL LOCALLY IN ORDER TO INSTALL DBD::mysql

g++ bla.cpp -I/usr/include/mysql -L/usr/lib/mysql -lmysqlclient_r

cd /home/syoung/base/lib/perlmods/DBD-mysql-4.010
perl Makefile.PL PREFIX=/home/syoung/base/lib/perl_5.8.8
make
make test
make install


... RATHER, COPY IT OVER FROM solexa

ON solexa:

/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/Bundle/DBD/mysql.pm
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD/mysql
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD/mysql.pm
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD/mysql/GetInfo.pm
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD/mysql/INSTALL.pod
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql/.packlist
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql/mysql.bs
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql/mysql.so


WHICH BOILS DOWN TO:

/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/Bundle/DBD/mysql.pm
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD/mysql*
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql*


ON kronos:


cd /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi

    drwxr-xr-x 3 syoung bioinfo  16K Feb  6 16:41 auto
    drwxr-xr-x 2 syoung bioinfo  16K Feb  6 16:41 Bundle
    drwxr-xr-x 3 syoung bioinfo  16K Feb  6 16:41 DBD
    drwxr-xr-x 8 syoung bioinfo  16K Feb  6 16:41 DBI
    -r--r--r-- 1 syoung bioinfo 285K Jul 22  2008 DBI.pm
    -r--r--r-- 1 syoung bioinfo 1.5K Jul 16  2007 dbixs_rev.pl
    -r--r--r-- 1 syoung bioinfo  15K Mar 25  2005 Roadmap.pod
    -r--r--r-- 1 syoung bioinfo 1.1K Sep  4  2006 TASKS.pod
    drwxr-xr-x 2 syoung bioinfo  16K Feb  6 16:41 Win32


ll /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD
    -r--r--r-- 1 syoung bioinfo  42K Jan 31  2008 DBM.pm
    -r--r--r-- 1 syoung bioinfo  13K Sep 27  2007 ExampleP.pm
    -r--r--r-- 1 syoung bioinfo  20K Feb  8  2008 File.pm
    drwxr-xr-x 4 syoung bioinfo  16K Feb  6 16:41 Gofer
    -r--r--r-- 1 syoung bioinfo  48K Jul 22  2008 Gofer.pm
    -r--r--r-- 1 syoung bioinfo 3.7K Jun 14  2007 NullP.pm
    -r--r--r-- 1 syoung bioinfo  29K Oct 10  2007 Proxy.pm
    -r--r--r-- 1 syoung bioinfo 7.8K Sep 26  2007 Sponge.pm


ON kronos:

DO auto:


cd /home/syoung/base/lib/perl_5.8.8/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD
mkdir -p /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD
cd /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD
scp -r syoung@solexa01.med.miami.edu:/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql* ./

DO Bundle/DBD

mkdir -p /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/Bundle/DBD
cd /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/Bundle/DBD
scp -r syoung@solexa01.med.miami.edu:/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/Bundle/DBD* ./


DO DBD/msyql

mkdir -p /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD
cd /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD
scp -r syoung@solexa01.med.miami.edu:/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/DBD/mysql* ./


COPY OVER mysql.so TO AVOID THIS ERROR:

Can't load '/home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql/mysql.so'

mkdir /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql
cd /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql
#scp -r syoung@solexa01.med.miami.edu:/store/home/syoung/base/apps/sam/bioperl/DBD-mysql-4.005/blib/arch/auto/DBD/mysql/mysql.so ./
scp -r syoung@solexa01.med.miami.edu:mysql.so ./


COPY DIDN'T WORK AS mysql.so WAS ALREADY PRESENT BUT 555 SO CHANGED PERMISSIONS 

cd /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql
chmod 777 mysql.so

    
FILES INSTALLED HERE:

cd /home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi

ll
    drwxr-xr-x 3 syoung bioinfo  16K Feb  6 16:41 auto
    drwxr-xr-x 2 syoung bioinfo  16K Feb  6 16:41 Bundle
    drwxr-xr-x 3 syoung bioinfo  16K Feb  6 16:41 DBD
    drwxr-xr-x 8 syoung bioinfo  16K Feb  6 16:41 DBI
    -r--r--r-- 1 syoung bioinfo 285K Jul 22  2008 DBI.pm
    -r--r--r-- 1 syoung bioinfo 1.5K Jul 16  2007 dbixs_rev.pl
    -r--r--r-- 1 syoung bioinfo  15K Mar 25  2005 Roadmap.pod
    -r--r--r-- 1 syoung bioinfo 1.1K Sep  4  2006 TASKS.pod
    drwxr-xr-x 2 syoung bioinfo  16K Feb  6 16:41 Win32

ADD TO filterSNP.pl:

use lib "/home/syoung/base/lib/perl_5.8.8/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi";



3. RUN filterSNP.pl

cd /home/syoung/base/pipeline/nimblegen-run1
emacs /home/syoung/base/pipeline/nimblegen-run1/run-filterSNP.sh
#/bin/sh

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9637_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9637_exon_Map\ccds\454AllDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9638_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9638_exon_Map\ccds\454AllDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9639_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9639_exon_Map\ccds\454AllDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9640_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9640_exon_Map\ccds\454AllDiffs-headers-SNPs.txt

perl /home/syoung/base/bin/exome/filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers-SNPs.txt


cd /home/syoung/base/pipeline/nimblegen-run1
rm -fr *.sh.*
qsub -q psmall run-filterSNP.sh 
mshow

    8528.kronos.ccs.miami.edu



++</entry>



<entry [Wed Feb 4 23:57:14 EST 2009] RUN filterSNP.pl TO FILTER dbSNP AND missense/synon SNPs>



1. LOAD ccdsGene, ccdsSeq AND ccdsSNP TABLES

cd C:\DATA\base\bin\nextgen

perl loader.pl --dbfile C:/DATA/base/bin/exome/exome.dbl --sqlfile C:/DATA/base/bin/exome/sql/ccdsGene.sql --bsvfile C:/DATA/base/bin/exome/sql/ccdsGene.bsv
perl loader.pl --dbfile C:/DATA/base/bin/exome/exome.dbl --sqlfile C:/DATA/base/bin/exome/sql/ccdsSeq.sql --bsvfile C:/DATA/base/bin/exome/sql/ccdsSeq.bsv
perl loader.pl --dbfile C:/DATA/base/bin/exome/exome.dbl --sqlfile C:/DATA/base/bin/exome/sql/ccdsSNP.sql --bsvfile C:/DATA/base/bin/exome/sql/ccdsSNP.bsv


2. RUN FILTER ON 454HCDiffs.txt SNPs 

cd /nethome/syoung/base/pipeline/nimblegen-run1

ll -R SID96*/ccds/*Diffs*

    -rw-r--r-- 1 syoung bioinfo 903K Feb  5 11:32 SID9637_exon_Map/ccds/454AllDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo  17M Jan 30 16:36 SID9637_exon_Map/ccds/454AllDiffs.txt
    -rw-r--r-- 1 syoung bioinfo 275K Jan 31 20:36 SID9637_exon_Map/ccds/454HCDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo 6.4M Jan 30 16:36 SID9637_exon_Map/ccds/454HCDiffs.txt
    -rw-r--r-- 1 syoung bioinfo 1.1M Feb  5 11:26 SID9638_exon_Map/ccds/454AllDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo  21M Jan 31 01:31 SID9638_exon_Map/ccds/454AllDiffs.txt
    -rw-r--r-- 1 syoung bioinfo 347K Jan 31 20:36 SID9638_exon_Map/ccds/454HCDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo 8.3M Jan 31 01:31 SID9638_exon_Map/ccds/454HCDiffs.txt
    -rw-r--r-- 1 syoung bioinfo 913K Feb  5 11:27 SID9639_exon_Map/ccds/454AllDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo  17M Jan 31 01:34 SID9639_exon_Map/ccds/454AllDiffs.txt
    -rw-r--r-- 1 syoung bioinfo 235K Jan 31 20:36 SID9639_exon_Map/ccds/454HCDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo 5.3M Jan 31 01:34 SID9639_exon_Map/ccds/454HCDiffs.txt
    -rw-r--r-- 1 syoung bioinfo 1.2M Feb  5 11:29 SID9640_exon_Map/ccds/454AllDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo  25M Jan 31 01:41 SID9640_exon_Map/ccds/454AllDiffs.txt
    -rw-r--r-- 1 syoung bioinfo 504K Jan 31 20:36 SID9640_exon_Map/ccds/454HCDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo  13M Jan 31 01:41 SID9640_exon_Map/ccds/454HCDiffs.txt
    -rw-r--r-- 1 syoung bioinfo 541K Feb  5 11:29 SID9641_exon_Map/ccds/454AllDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo  11M Jan 31 01:31 SID9641_exon_Map/ccds/454AllDiffs.txt
    -rw-r--r-- 1 syoung bioinfo 138K Jan 31 20:36 SID9641_exon_Map/ccds/454HCDiffs-headers.txt
    -rw-r--r-- 1 syoung bioinfo 3.6M Jan 31 01:31 SID9641_exon_Map/ccds/454HCDiffs.txt




cd C:\DATA\base\bin\exome

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9637_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9637_exon_Map\ccds\454AllDiffs-headers-SNPs.txt

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9638_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9638_exon_Map\ccds\454AllDiffs-headers-SNPs.txt

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9639_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9639_exon_Map\ccds\454AllDiffs-headers-SNPs.txt

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9640_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9640_exon_Map\ccds\454AllDiffs-headers-SNPs.txt

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454AllDiffs-headers-SNPs.txt




cd C:\DATA\base\bin\exome

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9637_exon_Map\ccds\454HCDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9637_exon_Map\ccds\454HCDiffs-headers-SNPs.txt

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9638_exon_Map\ccds\454HCDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9638_exon_Map\ccds\454HCDiffs-headers-SNPs.txt

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9639_exon_Map\ccds\454HCDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9639_exon_Map\ccds\454HCDiffs-headers-SNPs.txt

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9640_exon_Map\ccds\454HCDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9640_exon_Map\ccds\454HCDiffs-headers-SNPs.txt

perl filterSNP.pl --inputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454HCDiffs-headers.txt --outputfile C:\DATA\base\pipeline\nimblegen-run1\SID9641_exon_Map\ccds\454HCDiffs-headers-SNPs.txt






++</entry>



<entry [Wed Feb 4 23:35:14 EST 2009] CONVERT CCDS FASTA TO TSV AND LOAD INTO SQLITE>



1. PARSE FASTA TO .bsv

cd C:\DATA\base\bin\nextgen

perl fasta2tsv.pl --inputfile c:/data/base/pipeline/nimblegen-run1/CCDS_nucleotide.20080430.fa --outputfile C:/DATA/base/bin/exome/sql/ccdsSeq.bsv --regex "^>*([^/|]+)" --separator "|"


2. CREATE SQL 'CREATE TABLE' FILE

cd C:\DATA\base\bin\nextgen\sql

C:/DATA/base/bin/exome/sql/ccdsSeq.sql

CREATE TABLE ccds (id VARCHAR(20), sequence TEXT, primary key(id) );


3. LOAD

cd C:\DATA\base\html\Bioptic0.2.5\bin

perl loader.pl --dbfile C:/DATA/base/bin/exome/exome.dbl --sqlfile C:/DATA/base/bin/exome/sql/ccdsSeq.sql --bsvfile C:/DATA/base/bin/exome/sql/ccdsSeq.bsv


C:\data\base\pipeline\nimblegen-run1\ccds.bsv 


4. TEST

SELECT COUNT(*) FROM ccdsSeq;
20091



++</entry>



<entry [Wed Feb 4 23:35:14 EST 2009] SQLITE 'show tables'>



SELECT name FROM sqlite_master WHERE type = 'table'


++</entry>



<entry [Tues Feb 3 22:35:14 EST 2009] FIX polybayes ERROR: Unknown nucleotide (J) in when converting bases during Smith-Waterman alignment.>


 
cd nimblegen-run1-polybayes/
 
[syoung@kronos nimblegen-run1-polybayes]$ /nethome/syoung/base/apps/polybayes/BetaRelease64Bit/bin/MosaikAligner -in /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640/SID9640.dat -out /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640/SID9640.aligned.dat -anchors /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640/ccds.fasta -oa /nethome/syoung/base/pipeline > /nimblegen-run1-polybayes/SID9640/ccds.dat -hs 30 -mmp .02 -minp 0.95

    ---------------------------------------------------------------
    MosaikAligner beta                                   2007-06-08
    Michael Stromberg - Marth Lab, Dept. of Biology, Boston College
    ---------------------------------------------------------------
    
    - Using a maximum mismatch percent threshold of 0.02
    - Using a minimum percent alignment threshold of 0.95
    - Using a hash size of 30
    - Parsing /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640/ccds.fasta
    Reading anchors FASTA file... 20091 anchors loaded.
    Hashing unified anchor... finished.
    
    Aligning sequence library:
    [=>                                         ] ( 3 %) 00:02:46 (31829 - 191.7) /
    ERROR: Unknown nucleotide (J) in when converting bases during Smith-Waterman alignment.
    Died at i = 9


BUT NO 'J' FOUND IN FILES IN DIRECTORY:

grep -I -P "^[^>].*J" *
#run-polybayes-SID9640.sh.o8128#:ERROR: Unknown nucleotide (J) in when converting bases during Smith-Waterman alignment.
run-polybayes-SID9640.sh.o8128:ERROR: Unknown nucleotide (J) in when converting bases during Smith-Waterman alignment.

ll
    -rw-r--r-- 1 syoung bioinfo  33M Feb  1 00:10 ccds.fasta
    -rw-r--r-- 1 syoung bioinfo  440 Feb  1 00:01 run-polybayes-SID9640.sh
    -rw------- 1 syoung bioinfo  232 Feb  1 00:35 run-polybayes-SID9640.sh.e8128
    -rw------- 1 syoung bioinfo  43K Feb  1 00:35 run-polybayes-SID9640.sh.o8128
    -rw-rw-rw- 1 syoung bioinfo  89K Feb  4 03:05 SID9640.aligned.dat
    -rw-rw-rw- 1 syoung bioinfo 1.3G Feb  1 00:35 SID9640.bas
    -rw-rw-rw- 1 syoung bioinfo 669M Feb  1 00:10 SID9640.dat
    -rw-r--r-- 1 syoung bioinfo 3.9G Jan 31 23:31 SID9640.sff
    -rw-r--r-- 1 syoung bioinfo 388M Feb  1 00:08 SID9640.sff.fasta
    -rw-r--r-- 1 syoung bioinfo 1.1G Feb  1 00:08 SID9640.sff.fasta.qual


OFFENDING 'J' MUST BE IN FASTA FILE:

SID9640.sff.fasta


BUT DOES NOT APPEAR TO HAVE A 'J' IN IT:

grep -P "^[^>]" SID9640.sff.fasta | grep J
<no result>


++</entry>



<entry [Tues Feb 3 22:35:14 EST 2009] TEST CASE FOR SYNONYMOUS/NON-SYNONYMOUS PREDICTION>



1. GET EXONSTARTS/EXONENDS FOR A CCDS GENE

sqlite> .schema ccdsGene
CREATE TABLE 'ccdsGene' (
  'bin' smallint(5) NOT NULL default '0',
  'name' varchar(255) NOT NULL default '',
  'chrom' varchar(255) NOT NULL default '',
  'strand' char(1) NOT NULL default '',
  'txStart' int(10) NOT NULL default '0',
  'txEnd' int(10) NOT NULL default '0',
  'cdsStart' int(10) NOT NULL default '0',
  'cdsEnd' int(10) NOT NULL default '0',
  'exonCount' int(10) NOT NULL default '0',
  'exonStarts' longblob NOT NULL,
  'exonEnds' longblob NOT NULL,
  'score' int(11) default NULL,
  'name2' varchar(255) NOT NULL default '',
  'cdsStartStat' TEXT NOT NULL,
  'cdsEndStat' TEXT NOT NULL,
  'exonFrames' longblob NOT NULL,
  PRIMARY KEY ('chrom','bin', 'name')
);


sqlite> select * from ccdsGene where name = 'CCDS2.2';
591|CCDS2.2|chr1|+|851184|869396|851184|869396|13|851184,855397,856281,861014,86
4282,864517,866386,867378,867652,867801,868495,868940,869150,|851256,855579,8563
32,861139,864372,864703,866549,867494,867731,868301,868620,869051,869396,|0||cmp
l|cmpl|0,0,2,2,1,1,1,2,1,2,1,0,0,



GET CCDS GENE START AND STOP EXON POSITIONS

txStart	851184												
txEnd	869396												

exonStarts	851184	855397	856281	861014	864282	864517	866386	867378	867652	867801	868495	868940	869150
        	0	4213	5097	9830	13098	13333	15202	16194	16468	16617	17311	17756	17966

exonEnds	851256	855579	856332	861139	864372	864703	866549	867494	867731	868301	868620	869051	869396
        	72	4395	5148	9955	13188	13519	15365	16310	16547	17117	17436	17867	18212

length	72	182	51	125	90	186	163	116	79	500	125	111	246

total	2046												


2. GET CHROMOSOME 1 SEQUENCE WITHOUT THE FASTA HEADER

cd /nethome/syoung/base/pipeline/nimblegen-run1
cp ../human-genome/chr1.fa ./


3. SELECT FIRST 100,000 LINES

chopfile.pl chr1.fa chr1-seq.fa 100000


4. REMOVE HEADER MANUALLY
emacs chr1-seq.fa


5. REMOVE WHITESPACE

ls -al chr1-seq.fa
    -rw-r--r-- 1 syoung bioinfo 5099949 Feb  3 22:49 chr1-seq.fa

perl -pi -e 's/\s+//g' chr1-seq.fa

ls -al chr1-seq.fa
    -rw-r--r-- 1 syoung bioinfo 4999950 Feb  3 22:52 chr1-seq.fa


6. SELECT SEQUENCE 

getbases.pl --inputfile /nethome/syoung/base/pipeline/nimblegen-run1/chr1-seq.fa --start 851184,855397,856281,861014,864282,864517,866386,867378,867652,867801,868495,868940,869150 --stop 851256,855579,856332,861139,864372,864703,866549,867494,867731,868301,868620,869051,869396


    Bases 851184..851256
    ATGTCCAAGGGGATCCTGCAGGTGCATCCTCCGATCTGCGACTGCCCGGGCTGCCGAATATCCTCCCCGGTG
    Bases 855397..855579
    AACCGGGGGCGGCTGGCAGACAAGAGGACAGTCGCCCTGCCTGCCGCCCGGAACCTGAAGAAGGAGCGAACTCCCAGCTTCTCTGCCAGCGATGGTGACAGCGACGGGAGTGGCCCCACCTGTGGGCGGCGGCCAGGCTTGAAGCAGGAGGATGGTCCGCACATCCGTATCATGAAGAGAAG
    Bases 856281..856332
    AGTCCACACCCACTGGGACGTGAACATCTCTTTCCGAGAGGCGTCCTGCAG
    Bases 861014..861139
    CCAGGACGGCAACCTTCCCACCCTCATATCCAGCGTCCACCGCAGCCGCCACCTCGTTATGCCCGAGCATCAGAGCCGCTGTGAATTCCAGAGAGGCAGCCTGGAGATTGGCCTGCGACCCGCCG
    Bases 864282..864372
    GTGACCTGTTGGGCAAGAGGCTGGGCCGCTCCCCCCGTATCAGCAGCGACTGCTTTTCAGAGAAGAGGGCACGAAGCGAATCGCCTCAAG
    Bases 864517..864703
    AGGCGCTGCTGCTGCCGCGGGAGCTGGGGCCCAGCATGGCCCCGGAGGACCATTACCGCCGGCTTGTGTCAGCACTGAGCGAGGCCAGCACCTTTGAGGACCCTCAGCGCCTCTACCACCTGGGCCTCCCCAGCCACGGTGAGGACCCACCCTGGCATGATCCCCCTCATCACCTCCCCAGCCACG
    Bases 866386..866549
    ATCTCCTGAGGGTCCGGCAGGAGGTGGCGGCTGCAGCTCTGAGGGGCCCCAGTGGCCTGGAAGCCCACCTGCCCTCCTCCACGGCAGGTCAGCGTCGGAAGCAGGGCCTGGCTCAGCACCGGGAGGGCGCCGCCCCAGCTGCCGCCCCGTCCTTCTCGGAGAG
    Bases 867378..867494
    GGAGCTGCCTCAGCCGCCCCCCTTGCTGTCGCCGCAGAATGCCCCTCACGTCGCCCTGGGCCCCCATCTCAGGCCCCCCTTCCTGGGGGTGCCCTCGGCTCTGTGCCAGACCCCAG
    Bases 867652..867731
    GCTACGGCTTCCTGCCCCCCGCGCAGGCGGAGATGTTCGCCTGGCAGCAGGAGCTCCTGCGGAAGCAGAACCTGGCCCG
    Bases 867801..868301
    GCTGGAGCTGCCCGCCGACCTCCTGCGGCAGAAGGAGCTGGAGAGCGCGCGCCCACAGCTGCTGGCGCCCGAGACCGCCCTGCGCCCCAACGACGGCGCCGAGGAGCTGCAGCGGCGCGGGGCCCTGCTGGTGCTGAACCACGGCGCGGCGCCACTGCTGGCCCTGCCCCCCCAGGGGCCCCCGGGCTCCGGACCCCCCACCCCGTCCCGGGACTCTGCCCGGCGAGCCCCCCGGAAGGGGGGTCCCGGCCCTGCCTCAGCGCGGCCCAGCGAGTCCAAGGAGATGACGGGGGCTAGGCTCTGGGCACAAGATGGCTCGGAAGACGAGCCCCCCAAAGACTCGGACGGAGAGGACCCCGAGACGGCAGCTGTTGGGTGCAGGGGGCCCACTCCGGGCCAAGCTCCAGCTGGAGGGGCCGGCGCCGAGGGGAAGGGGCTTTTCCCAGGGTCCACACTGCCCCTGGGCTTCCCTTATGCCGTCAGCCCCTACTTCCACACAG
    Bases 868495..868620
    GCGCGGTAGGGGGACTCTCCATGGATGGGGAGGAGGCCCCAGCCCCTGAGGACGTCACCAAGTGGACCGTGGATGACGTCTGCAGCTTCGTGGGGGGCCTGTCTGGCTGTGGAGAGTACACTCGG
    Bases 868940..869051
    GTCTTCAGGGAGCAGGGGATCGACGGGGAGACCCTGCCACTGCTGACGGAGGAGCACCTGCTGACCAACATGGGGCTGAAGCTGGGGCCCGCCCTCAAGATCCGGGCCCAG
    Bases 869150..869396
    GTGGCCAGGCGCCTGGGCCGAGTTTTCTACGTGGCCAGCTTCCCCGTGGCTCTGCCACTGCAGCCACCAACCCTGCGGGCCCCGGAGCGAGAACTCGGCACAGGAGAGCAGCCCTTGTCCCCCACGACGGCCACGTCCCCCTATGGAGGGGGCCACGCCCTTGCCGGTCAAACTTCACCCAAGCAGGAGAATGGGACCTTGGCTCTACTTCCAGGGGCCCCCGACCCTTCCCAGCCTCTGTGTTGA


7. COMPARE WITH CCDS SEQUENCE

getfasta.pl --inputfile /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa --id CCDS2.2
>CCDS2.2|Hs36.3|chr1


ATGTCCAAGGGGATCCTGCAGGTGCATCCTCCGATCTGCGACTGCCCGGGCTGCCGAATATCCTCCCCGGTG     
                                                                        AACCGGGGGCGGCTGGCAGACAAGAGGACAGTCGCCCTGCCTGCCGCCCGGAACCTGAAGAAGGAGCGAACTCCCAGCTTCTCTGCCAGCGATGGTGACAGCGACGGGAGTGGCCCCACCTGTGGGCGGCGGCCAGGCTTGAAGCAGGAGGATGGTCCGCACATCCGTATCATGAAGAGAAG
                                                                          
ATGTCCAAGGGGATCCTGCAGGTGCATCCTCCGATCTGCGACTGCCCGGGCTGCCGAATATCCTCCCCGGTGAACCGGGGGCGGCTGGCAGACAAGAGGACAGTCGCCCTGCCTGCCGCCCGGAACCTGAAGAAGGAGCGAACTCCCAGCTTCTCTGCCAGCGATGGTGACAGCGACGGGAGTGGCCCCACCTGTGGGCGGCGGCCAGGCTTGAAGCAGGAGGATGGTCCGCACATCCGTATCATGAAGAGAAGAGTCCACACCCACTGGGACGTGAACATCTCTTTCCGAGAGGCGTCCTGCAGCCAGGACGGCAACCTTCCCACCCTCATATCCAGCGTCCACCGCAGCCGCCACCTCGTTATGCCCGAGCATCAGAGCCGCTGTGAATTCCAGAGAGGCAGCCTGGAGATTGGCCTGCGACCCGCCGGTGACCTGTTGGGCAAGAGGCTGGGCCGCTCCCCCCGTATCAGCAGCGACTGCTTTTCAGAGAAGAGGGCACGAAGCGAATCGCCTCAAGAGGCGCTGCTGCTGCCGCGGGAGCTGGGGCCCAGCATGGCCCCGGAGGACCATTACCGCCGGCTTGTGTCAGCACTGAGCGAGGCCAGCACCTTTGAGGACCCTCAGCGCCTCTACCACCTGGGCCTCCCCAGCCACGGTGAGGACCCACCCTGGCATGATCCCCCTCATCACCTCCCCAGCCACGATCTCCTGAGGGTCCGGCAGGAGGTGGCGGCTGCAGCTCTGAGGGGCCCCAGTGGCCTGGAAGCCCACCTGCCCTCCTCCACGGCAGGTCAGCGTCGGAAGCAGGGCCTGGCTCAGCACCGGGAGGGCGCCGCCCCAGCTGCCGCCCCGTCCTTCTCGGAGAGGGAGCTGCCTCAGCCGCCCCCCTTGCTGTCGCCGCAGAATGCCCCTCACGTCGCCCTGGGCCCCCATCTCAGGCCCCCCTTCCTGGGGGTGCCCTCGGCTCTGTGCCAGACCCCAGGCTACGGCTTCCTGCCCCCCGCGCAGGCGGAGATGTTCGCCTGGCAGCAGGAGCTCCTGCGGAAGCAGAACCTGGCCCGGCTGGAGCTGCCCGCCGACCTCCTGCGGCAGAAGGAGCTGGAGAGCGCGCGCCCACAGCTGCTGGCGCCCGAGACCGCCCTGCGCCCCAACGACGGCGCCGAGGAGCTGCAGCGGCGCGGGGCCCTGCTGGTGCTGAACCACGGCGCGGCGCCACTGCTGGCCCTGCCCCCCCAGGGGCCCCCGGGCTCCGGACCCCCCACCCCGTCCCGGGACTCTGCCCGGCGAGCCCCCCGGAAGGGGGGTCCCGGCCCTGCCTCAGCGCGGCCCAGCGAGTCCAAGGAGATGACGGGGGCTAGGCTCTGGGCACAAGATGGCTCGGAAGACGAGCCCCCCAAAGACTCGGACGGAGAGGACCCCGAGACGGCAGCTGTTGGGTGCAGGGGGCCCACTCCGGGCCAAGCTCCAGCTGGAGGGGCCGGCGCCGAGGGGAAGGGGCTTTTCCCAGGGTCCACACTGCCCCTGGGCTTCCCTTATGCCGTCAGCCCCTACTTCCACACAGGCGCGGTAGGGGGACTCTCCATGGATGGGGAGGAGGCCCCAGCCCCTGAGGACGTCACCAAGTGGACCGTGGATGACGTCTGCAGCTTCGTGGGGGGCCTGTCTGGCTGTGGAGAGTACACTCGGGTCTTCAGGGAGCAGGGGATCGACGGGGAGACCCTGCCACTGCTGACGGAGGAGCACCTGCTGACCAACATGGGGCTGAAGCTGGGGCCCGCCCTCAAGATCCGGGCCCAGGTGGCCAGGCGCCTGGGCCGAGTTTTCTACGTGGCCAGCTTCCCCGTGGCTCTGCCACTGCAGCCACCAACCCTGCGGGCCCCGGAGCGAGAACTCGGCACAGGAGAGCAGCCCTTGTCCCCCACGACGGCCACGTCCCCCTATGGAGGGGGCCACGCCCTTGCCGGTCAAACTTCACCCAAGCAGGAGAATGGGACCTTGGCTCTACTTCCAGGGGCCCCCGACCCTTCCCAGCCTCTGTGTTGA


getfasta.pl --inputfile /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa --id CCDS3.1
>CCDS3.1|Hs36.3|chr1
ATGGCAGCTGCGGGGAGCCGCAAGAGGCGCCTGGCGGAGCTGACGGTGGACGAGTTCCTAGCTTCGGGCTTTGACTCCGAGTCCGAATCCGAGTCCGAAAATTCTCCACAAGCGGAGACACGGGAAGCACGCGAGGCTGCCCGGAGTCCGGATAAGCCGGGCGGGAGCCCCTCGGCCAGCCGGCGTAAAGGCCGTGCCTCTGAGCACAAAGACCAGCTCTCTCGGCTGAAGGACAGAGACCCCGAGTTCTACAAGTTCCTGCAGGAGAATGACCAGAGCCTGCTAAACTTCAGCGACTCGGACAGCTCTGAGGAGGAAGAGGGGCCGTTCCACTCCCTGCCAGATGTGCTGGAGGAAGCCAGTGAGGAGGAGGATGGAGCGGAGGAAGGAGAAGATGGGGACAGAGTCCCCAGAGGGCTGAAGGGGAAGAAGAATTCTGTTCCTGTGACCGTCGCCATGGTTGAGAGATGGAAGCAGGCAGCAAAGCAACGCCTCACTCCAAAGCTGTTCCATGAAGTGGTACAGGCGTTCCGAGCAGCTGTGGCCACCACCCGAGGGGACCAGGAAAGTGCTGAGGCCAACAAATTCCAGGTCACGGACAGTGCTGCATTCAATGCTCTGGTTACCTTCTGCATCAGAGACCTCATTGGCTGTCTCCAGAAGCTGCTGTTTGGAAAGGTGGCAAAGGATAGCAGCAGGATGCTGCAGCCGTCCAGCAGCCCGCTCTGGGGGAAGCTTCGTGTGGACATCAAGGCTTACCTGGGCTCGGCCATACAGCTGGTGTCCTGTCTGTCGGAGACGACGGTGTTGGCGGCCGTGCTGCGGCACATCAGCGTGCTGGTGCCCTGCTTCCTGACCTTCCCCAAGCAGTGCCGCATGCTGCTCAAGAGAATGGTGATCGTATGGAGCACTGGGGAAGAGTCTCTGCGGGTGCTGGCTTTCCTGGTCCTCAGCAGAGTCTGCCGGCACAAGAAGGACACTTTCCTTGGCCCCGTCCTCAAGCAAATGTACATCACGTATGTGAGGAACTGCAAGTTCACCTCGCCTGGTGCCCTCCCCTTCATCAGTTTCATGCAGTGGACCTTGACGGAGCTGCTGGCCCTGGAGCCGGGTGTGGCCTACCAGCACGCCTTCCTCTACATCCGCCAGCTCGCCATACACCTGCGCAACGCCATGACCACTCGCAAGAAGGAAACATACCAGTCTGTGTACAACTGGCAGTATGTGCACTGCCTCTTCCTGTGGTGCCGGGTCCTGAGCACTGCGGGCCCCAGCGAAGCCCTCCAGCCCTTGGTCTACCCCCTTGCCCAAGTCATCATTGGCTGTATCAAGCTCATCCCCACTGCCCGCTTCTACCCGCTGCGAATGCACTGCATCCGTGCCCTGACGCTGCTCTCGGGGAGCTCGGGGGCCTTCATCCCGGTGCTGCCTTTCATCCTGGAGATGTTCCAGCAGGTCGACTTCAACAGGAAGCCAGGGCGCATGAGCTCCAAGCCCATCAACTTCTCCGTGATCCTGAAGCTGTCCAATGTCAACCTGCAGGAGAAGGCGTACCGGGACGGCCTGGTGGAGCAGCTGTACGACCTCACCCTGGAGTACCTGCACAGCCAGGCACACTGCATCGGCTTCCCGGAGCTGGTGCTGCCTGTGGTCCTGCAGCTGAAGTCGTTCCTCCGGGAGTGCAAGGTGGCCAACTACTGCCGGCAGGTGCAGCAGCTGCTTGGGAAGGTTCAGGAGAACTCGGCATACATCTGCAGCCGCCGCCAGAGGGTTTCCTTCGGCGTCTCTGAGCAGCAGGCAGTGGAAGCCTGGGAGAAGCTGACCCGGGAAGAGGGGACACCCCTGACCTTGTACTACAGCCACTGGCGCAAGCTGCGTGACCGGGAGATCCAGCTGGAGATCAGTGGCAAAGAGCGGCTGGAAGACCTGAACTTCCCTGAGATCAAACGAAGGAAGATGGCTGACAGGAAGGATGAGGACAGGAAGCAATTTAAAGACCTCTTTGACCTGAACAGCTCTGAAGAGGACGACACCGAGGGATTCTCGGAGAGAGGGATACTGAGGCCCCTGAGCACTCGGCATGGGGTGGAAGACGATGAAGAGGACGAGGAGGAGGGCGAGGAGGACAGCAGCAACTCGGAGGATGGAGACCCAGACGCAGAGGCGGGGCTGGCCCCTGGGGAGCTGCAGCAGCTGGCCCAGGGGCCGGAGGACGAGCTGGAGGATCTGCAGCTCTCAGAGGACGACTGA



>CCDS4845.1|Hs36.3|chr6
ATGTGGAAGAGTTGGAAGCTCCGCACAGATGTCAGAGTAAGGGAGGGGGCAGGCGGTTCTCCTTGTGCCTCTTCCCAGCCCGGTAGCAGGGGCCCATGCTTCCTCCCTGGTCTGTCCTCGCAGGAGGTGTCCAGGCGGAGGCAGTTCCTGCGGGAGCATGCGGCCCCCTTCTCCGCCTTCCTCACAGACAGCTTCGGCCGGCAGCACAGCTACCTGCGGATCTCCCTCACAGAGAAGTGCAACCTCAGATGTCAGTACTGCATGCCCGAGGAGGGGGTCCCGCTGACCCCCAAAGCCAACCTGCTGACCACAGAGGAGATCCTGACCCTCGCCCGGCTCTTTGTGAAGGAAGGCATCGACAAGATCCGGCTCACAGGTGGAGAGCCGCTTATCCGGCCGGACGTGGTGGACATTGTGGCCCAGCTCCAGCGGCTGGAAGGGCTGAGAACCATAGGTGTTACCACCAATGGCATCAACCTGGCCCGGCTACTGCCCCAGCTTCAGAAGGCTGGTCTCAGTGCCATCAACATCAGCCTGGACACCCTGGTGCCTGCCAAGTTTGAGTTCATTGTCCGCAGGAAAGGCTTCCACAAGGTCATGGAGGGCATCCACAAGGCCATCGAGCTGGGCTACAACCCTGTGAAGGTGAACTGTGTGGTGATGCGAGGCCTTAACGAGGATGAACTCCTGGACTTTGCGGCCTTGACTGAGGGCCTCCCCCTGGATGTGCGCTTCATAGAGTATATGCCCTTTGATGGCAACAAGTGGAACTTCAAGAAGATGGTCAGCTATAAGGAGATGCTAGACACTGTCCGGCAGCAGTGGCCAGAGCTGGAGAAGGTGCCAGAGGAGGAATCCAGCACAGCCAAGGCCTTTAAAATCCCTGGCTTCCAAGGCCAGATCAGCTTCATCACATCCATGTCTGAGCATTTCTGTGGGACCTGCAACCGCCTGCGAATCACAGCTGATGGGAACCTCAAGGTCTGCCTCTTTGGAAACTCTGAGGTATCCCTGCGGGATCACCTGCGAGCTGGGGCCTCTGAGCAGGAGCTGCTGAGAATCATTGGGGCTGCTGTGGGCAGGAAGAAGCGGCAGCATGCAGAGTTATTTTTGATGTTCCCCAATTCCCCACCAGCCAATCCAAGCATTTTCTCCTGGGACCCGCTCCATGTTCAGGGTCTAAGACCCAGAATGAGTTTCTCCAGCCAGGTGGCCACTTTATGGAAAGGATGCAGGGTCCCCCAGACCCCTCCTCTAGCCCAGCAGCGGCTGGGGTCTGGCTCCTTTCAGAGACACTACACTTCCCGTGCAGACTCAGATGCCAACTCAAAGTGCCTTAGCCCAGGTTCCTGGGCTTCTGCTGCCCCCTCAGGACCCCAGCTAACCTCAGAACAACTAACTCATGTGGACTCGGAAGGACGGGCAGCTATGGTAGATGTGGGCAGGAAGCCAGACACAGAGCGGGTGGCTGTGGCTTCAGCCGTGGTCCTCCTGGGACCGGTAGCCTTCAAGCTTGTCCAGCAGAACCAGCTCAAGAAAGGAGATGCCCTAGTGGTGGCCCAGCTGGCTGGAGTCCAGGCAGCCAAGGTGACCAGCCAGCTGATCCCTCTGTGCCACCACGTGGCCCTGAGCCACATCCAGGTGCAGCTGGAGCTGGACAGCACACGCCATGCCGTGAAGATCCAGGCATCTTGCCGGGCTCGGGGCCCCACCGGGGTGGAGATGGAGGCCCTGACCTCTGCTGCAGTGGCCGCCCTCACCCTGTATGACATGTGCAAGGCTGTCAGCAGGGACATCGTGTTGGAGGAGATCAAGCTCATTAGCAAGACTGGTGGTCAGCGGGGGGACTTCCATCGGGCTTAG

8. GET dbSNPS FOR THIS CCDS GENE

select * from ccdsSNP where chromosome = 'chr1' and chromosomeStart >= 851184 and chromosomeEnd <= 869396;

chr1|855490|855491|rs41285790|0|+
chr1|855556|855557|rs9988179|0|+
chr1|861077|861078|rs28419423|0|+
chr1|867693|867694|rs6672356|0|+
chr1|868969|868970|rs57360688|0|+
chr1|869179|869180|rs7523549|0|+


CALCULATE GENE-RELATIVE SNP STARTS:

                                                                            +---------+---------+----------+
                                                                            | refNCBI | refUCSC | observed |
                                                                            +---------+---------+----------+
chr1	855490	855491	rs41285790	0	+	4306    165     missense        | G       | G       | A/G      | 
chr1	855556	855557	rs9988179	0	+	4372    231     missense        | C       | C       | C/T      | 
chr1	861077	861078	rs28419423	0	+	9893    368     coding-synon    | C       | C       | C/G      | 
chr1	867693	867694	rs6672356	0	+	16509   1026    missense        | T       | T       | C/T      |
chr1	868969	868970	rs57360688	0	+	17785   1718    coding-synon    | G       | G       | A/G      | 
chr1	869179	869180	rs7523549	0	+	17995   1829    coding-synon    | C       | C       | C/T      | 
                                                                            +---------+---------+----------+
txStart	851184					




... AND COMPARE WITH EXON STARTS:

txStart	851184												
txEnd	869396												

exonStarts	851184	855397	856281	861014	864282	864517	866386	867378	867652	867801	868495	868940	869150
        	0	4213	5097	9830	13098	13333	15202	16194	16468	16617	17311	17756	17966

exonEnds	851256	855579	856332	861139	864372	864703	866549	867494	867731	868301	868620	869051	869396
        	72	4395	5148	9955	13188	13519	15365	16310	16547	17117	17436	17867	18212

length	72	182	51	125	90	186	163	116	79	500	125	111	246

total	2046												



... TO GET GENE-RELATIVE SNP POSITIONS:

													
txStart	851184												
													
txEnd	869396												
													
exonStarts	851184	855397	856281	861014	864282	864517	866386	867378	867652	867801	868495	868940	869150
	0	4213	5097	9830	13098	13333	15202	16194	16468	16617	17311	17756	17966
													
exonEnds	851256	855579	856332	861139	864372	864703	866549	867494	867731	868301	868620	869051	869396
	72	4395	5148	9955	13188	13519	15365	16310	16547	17117	17436	17867	18212
													
length	72	182	51	125	90	186	163	116	79	500	125	111	246
													
cumulative	72	254	305	430	520	706	869	985	1064	1564	1689	1800	2046
													
SNP position													
													
total	2046												
													
											gene    CCDS
                                            pos.    pos.
chr1	855490	855491	rs41285790	0	+	4306	165						
chr1	855556	855557	rs9988179	0	+	4372	231						
chr1	861077	861078	rs28419423	0	+	9893	368						
chr1	867693	867694	rs6672356	0	+	16509	1026						
chr1	868969	868970	rs57360688	0	+	17785	1718						
chr1	869179	869180	rs7523549	0	+	17995	1829						
													
txStart	851184												




CREATE TABLE ccdsSNP (

    chromosome      varchar(255),
    chromosomeStart int(10),
    chromosomeEnd   int(10),
    snp             varchar(20),
    score           int(10),
    strand          char(1),
    
    PRIMARY KEY(snp)
);



9. EXTRACT MORE SNP INFORMATION FROM SNP129 TABLE

mysql -u ngsadmin -h tank.ccs.miami.edu -P 3307 -p
accessngs
use ngs;


select * from snp129 where name='rs41285790'\G
select * from snp129 where name='rs9988179'\G
select * from snp129 where name='rs28419423	'\G
select * from snp129 where name='rs6672356'\G
select * from snp129 where name='rs57360688'\G
select * from snp129 where name='rs7523549'\G



select * from snp129 where name='rs41285790'\G
*************************** 1. row ***************************
       bin: 591
     chrom: chr1
chromStart: 855490
  chromEnd: 855491
      name: rs41285790
     score: 0
    strand: +
   refNCBI: G
   refUCSC: G
  observed: A/G
   molType: genomic
     class: single
     valid: unknown
     avHet: 0
   avHetSE: 0
      func: cds-reference,missense
   locType: exact
    weight: 1


mysql> select * from snp129 where name='rs9988179'\G
*************************** 1. row ***************************
       bin: 591
     chrom: chr1
chromStart: 855556
  chromEnd: 855557
      name: rs9988179
     score: 0
    strand: +
   refNCBI: C
   refUCSC: C
  observed: C/T
   molType: genomic
     class: single
     valid: unknown
     avHet: 0
   avHetSE: 0
      func: cds-reference,missense
   locType: exact
    weight: 1
1 row in set (0.00 sec)

mysql> select * from snp129 where name='rs28419423'\G
*************************** 1. row ***************************
       bin: 591
     chrom: chr1
chromStart: 861077
  chromEnd: 861078
      name: rs28419423
     score: 0
    strand: +
   refNCBI: C
   refUCSC: C
  observed: C/G
   molType: genomic
     class: single
     valid: unknown
     avHet: 0
   avHetSE: 0
      func: coding-synon,cds-reference
   locType: exact
    weight: 1
1 row in set (0.00 sec)


mysql> select * from snp129 where name='rs6672356'\G
*************************** 1. row ***************************
       bin: 591
     chrom: chr1
chromStart: 867693
  chromEnd: 867694
      name: rs6672356
     score: 0
    strand: +
   refNCBI: T
   refUCSC: T
  observed: C/T
   molType: genomic
     class: single
     valid: by-cluster
     avHet: 0
   avHetSE: 0
      func: cds-reference,near-gene-3,missense
   locType: exact
    weight: 1
1 row in set (0.00 sec)


mysql> select * from snp129 where name='rs57360688'\G
*************************** 1. row ***************************
       bin: 591
     chrom: chr1
chromStart: 868969
  chromEnd: 868970
      name: rs57360688
     score: 0
    strand: +
   refNCBI: G
   refUCSC: G
  observed: A/G
   molType: genomic
     class: single
     valid: unknown
     avHet: 0
   avHetSE: 0
      func: coding-synon,cds-reference,near-gene-3
   locType: exact
    weight: 1
1 row in set (0.00 sec)

mysql> select * from snp129 where name='rs7523549'\G
*************************** 1. row ***************************
       bin: 591
     chrom: chr1
chromStart: 869179
  chromEnd: 869180
      name: rs7523549
     score: 0
    strand: +
   refNCBI: C
   refUCSC: C
  observed: C/T
   molType: genomic
     class: single
     valid: unknown
     avHet: 0
   avHetSE: 0
      func: coding-synon,cds-reference,near-gene-3
   locType: exact
    weight: 1
1 row in set (0.00 sec)


select refNCBI, refUCSC, observed from snp129 where name='rs41285790';
select refNCBI, refUCSC, observed from snp129 where name='rs9988179';
select refNCBI, refUCSC, observed from snp129 where name='rs28419423	';
select refNCBI, refUCSC, observed from snp129 where name='rs6672356';
select refNCBI, refUCSC, observed from snp129 where name='rs57360688';
select refNCBI, refUCSC, observed from snp129 where name='rs7523549';

mysql> select refNCBI, refUCSC, observed from snp129 where name='rs41285790';
+---------+---------+----------+
| refNCBI | refUCSC | observed |
+---------+---------+----------+
| G       | G       | A/G      | 
+---------+---------+----------+
1 row in set (0.00 sec)

mysql> select refNCBI, refUCSC, observed from snp129 where name='rs9988179';
+---------+---------+----------+
| refNCBI | refUCSC | observed |
+---------+---------+----------+
| C       | C       | C/T      | 
+---------+---------+----------+
1 row in set (0.00 sec)

mysql> select refNCBI, refUCSC, observed from snp129 where name='rs28419423';
+---------+---------+----------+
| refNCBI | refUCSC | observed |
+---------+---------+----------+
| C       | C       | C/G      | 
+---------+---------+----------+
1 row in set (0.00 sec)

mysql> select refNCBI, refUCSC, observed from snp129 where name='rs6672356';
+---------+---------+----------+
| refNCBI | refUCSC | observed |
+---------+---------+----------+
| T       | T       | C/T      | 
+---------+---------+----------+
1 row in set (0.00 sec)

mysql> select refNCBI, refUCSC, observed from snp129 where name='rs57360688';
+---------+---------+----------+
| refNCBI | refUCSC | observed |
+---------+---------+----------+
| G       | G       | A/G      | 
+---------+---------+----------+
1 row in set (0.00 sec)

mysql> select refNCBI, refUCSC, observed from snp129 where name='rs7523549';
+---------+---------+----------+
| refNCBI | refUCSC | observed |
+---------+---------+----------+
| C       | C       | C/T      | 
+---------+---------+----------+



++</entry>



<entry [Tues Feb 3 19:40:14 EST 2009] GOLDENPATH AND dbSNP: AUTOMATIC SNP VALIDATION USING GOLDEN PATH>



LOCATION OF GOLDENPATH FILE:

/nethome/syoung/base/pipeline/goldenpath/refGene.txt

DOWNLOAD GOLDENPATH refGene.txt FILE FROM UCSC:

cd /nethome/syoung/base/pipeline/goldenpath
wget ftp://hgdownload.cse.ucsc.edu/goldenPath/hg18/database/refGene.txt.gz
wget ftp://hgdownload.cse.ucsc.edu/goldenPath/hg18/database/refGene.sql

DOWNLOAD snp129.txt FROM UCSC:

http://hgdownload.cse.ucsc.edu/goldenPath/hg18/database/snp129.txt.gz





chromosome
ftp://hgdownload.cse.ucsc.edu/goldenPath/hg18/chromosomes/


cd /nethome/syoung/base/bin/nextgen
./deepvac.pl --url ftp://hgdownload.cse.ucsc.edu/goldenPath/hg18/chromosomes/ --outputdir /nethome/syoung/base/pipeline/goldenpath


whole genome
http://hgdownload.cse.ucsc.edu/goldenPath/hg18/bigZips/
ftp://hgdownload.cse.ucsc.edu/goldenPath/hg18/bigZips
    
    upstream1000.fa.gz  	6812 KB  	2/4/2008  	2:57:00 AM
    upstream1000.fa.gz.md5 	1 KB 	2/4/2008 	2:57:00 AM
    upstream2000.fa.gz 	12851 KB 	2/4/2008 	2:57:00 AM
    upstream2000.fa.gz.md5 	1 KB 	2/4/2008 	2:57:00 AM
    upstream5000.fa.gz 	30596 KB 	2/4/2008 	2:57:00 AM
    upstream5000.fa.gz.md5 	1 KB 	2/4/2008 	2:57:00 AM
    xenoMrna.fa.gz 	604204 KB 	2/4/2008 	2:58:00 AM
    xenoMrna.fa.gz.md5


OR:

To download multiple files from the UNIX command line, use the "mget" command. 
    mget <filename1> <filename2> ...
    - or -
    mget -a (to download all the files in the directory) 
Use the "prompt" command to toggle the interactive mode if you do not want 
to be prompted for each file that you download.


- Genome annotation  The path to an annotation file describing the gene/coding region
annotations for the reference sequences, so that the variation detection
(HCDiffs tab) can report gene names and protein translations of any identifed
variations in gene regions. The format of this file must match that of the GoldenPath
refGene.txt file.






Ben Boese EMAIL:
One thing I did notice is that you used the CCDS reference.  I recommend using the GoldenPath reference data set from UCSC.  Our software can use the GoldenPath reference and annotation data to highlight known SNPs and genes in the GS Mapper output.  The data at UCSC and NCBI should be synchronized so you are working off of essentially the same data set.  Details on setting up Mapper to use this information can also be found in the software manual section on mapper. 




p.154 GS Data Analysis Software Manual_LowRes.pdf

- Configuration Files
    
    - Trimming database  The path to a FASTA file of sequences to be used to trim
    the ends of input reads (for cloning vectors, primers, adapters or other end
    sequences).
    
    - Screening database The path to a FASTA file of sequences to be used to screen the
    input reads for contaminants. A Read that completely aligns against the screening
    database is removed so that it is not used in the computation; if only part of a read
    aligns with the screening database, no action is taken.
    
    - Targeted regions  A string argument telling the GS Reference Mapper to only
    output specifc regions of the reference, and the reads aligned to those regions.
    The reads are mapped against the complete reference, but the output files will only
    report on the specifed regions. The string value can be
    
            . a accno:#-# string, e.g. chr9:10549-30594 specifes bases 10549 to 30594 of
    the chr9 reference sequence;
            . the path to a file containing lines of accno:#-# strings (one per line); or
            . the path to a GFF DAR file created during a NimbleGen Sequence Capture
    experiment, describing the primary_target_region regions of the experiment.
    
    - Genome annotation  The path to an annotation file describing the gene/coding region
    annotations for the reference sequences, so that the variation detection
    (HCDiffs tab) can report gene names and protein translations of any identifed
    variations in gene regions. The format of this file must match that of the GoldenPath
    refGene.txt file.
    
    - Known SNP annotation  The path to an annotation file describing the known SNP
    information for the reference sequences, so that the variation detection (HCDiffs
    tab) can link identifed variations to the known SNP information. The format of
    this file must match that of the GoldenPath snp128.txt file.
    
    - Long fle paths will be displayed in full by pausing the mouse cursor on the text
    area.



p.176 GS Data Analysis Software Manual_LowRes.pdf

6.3 Using the GS Reference Mapper Via the

Command Line Interface

Mapping can be performed either using the Graphical User Interface described above, or
using the Linux command line, described in this section.

6.3.1 One-Step Mapping: the runMapping Command

If all the reads to be mapped to the reference sequence are available at once, the GS
Reference Mapper application can process them with a single command, which has the
following command line structure:

runMapping [options] refdesc [MIDList@]filedesc

where:

    - [options] are zero or more of the command line options (listed below),
    - the refdesc is one of the following:
    - reffasta
        a FASTA file containing the reference sequence(s),
    - refdirname
        a name or path for a directory containing the reference sequence (all FASTA
files in the directory will be used as the reference),
    - refgenome
        a GoldenPath genome name (see the fifth Note, below),

    - ref (reffasta | refdirname) -read
        the string -ref, followed by multiple FASTA file names or directories,
followed by the string -read (to mark the beginning of the read data files)
    - each filedesc is one of the following:
    - sfffilename or
    - [regionlist:]datadir or
    - readfastafile
    - and each MIDList is a multiplexing information string used to filter the set of file
reads to be used in the mapping (see the third Note below for the format of the MIDList
information). If MIDs were used in the generation of the datafile, then an MIDList
string must be specified in order for the GS Reference Mapper to properly handle the
files reads.
External files:
    - GS Read Data files (SFF files) are not actually copied to the project directory.
Rather, a symbolic link to the file is created and placed in the projects sff
directory. Consequently, if the original file is moved or erased from the file
system, the project will not operate correctly. This applies whether the files are
added via the GUior the command line.
    - FASTA files are not actually copied to the project directory. Rather, the file
path is simply recorded in the project setup. Consequently, if the original file
is moved or erased from the file system, the project will not operate correctly.
This applies to all instances of FASTA files that can be added to a Mapping
project, whether done via the GUI or the command line:
    - FASTA read files, including Sanger reads
    - Trimming database files
    - Screening database files
    - Reference sequence FASTA files
Unlike with the GS Read Data files, no symbolic link to the file is created for FASTA
files.



p.180 GS Data Analysis Software Manual_LowRes.pdf
 
[-n or nimblegen]

This option tells the GS Reference Mapper that the reads come
from a NimbleGen Sequence Capture experiment. The reads will be
automatically trimmed for the Sequence Capture primer sequence.

[-reg (accno:#-# or regstringfile or NimblegenDARFile)]

This option tells the GS Reference Mapper to only output specific
regions of the reference, and the reads aligned to those regions.
The reads are mapped against the complete reference, but the
output files will only report on the specified regions. The option
argument can be either:

 a accno:#-# string, e.g. chr9:10549-30594 specifies bases
10549 to 30594 of the chr9 reference sequence;
 the path to a regstringfile which is a file containing lines of
accno:#-# strings (one per line);
 the path to a GFF DAR file created during a NimbleGen Sequence
Capture experiment, describing the primary_target_region regions
of the experiment

[-annot filename]

An optional file describing the gene/coding-region annotations for
the reference sequences, so that the variation detection can report
gene names and protein translations of any identified variations in
gene regions (on the HCDiffs tab). The format of this file must match
that of the GoldenPath refGene.txt file. (See the sixth Note below for
the case where the GS Reference Mapper automatically reads a gene
annotation file.)

[-noannot]
Tells the GS Reference Mapper not to use an annotation file during the
mapping. This option must be used to disable the automatic reading of
annotation files.

[-snp filename]
An optional file describing the known SNP information for the reference
sequences, so that the variation detection can link identified variations
to the known SNP information (on the HCDiffs tab). The format of this
file must match that of the GoldenPath snp128.txt file, and the contents
must be for the same reference given to the GS Reference Mapper.

(See the sixth Note below for the case where the GS Reference Mapper
automatically reads a known SNP file.)

[-nosnp]
Tells the GS Reference Mapper not to use a known SNP file during
the mapping. This option must be used to disable the automatic
reading of known SNP files.




p. 183 GS Data Analysis Software Manual_LowRes.pdf

The off-instrument installation contains a default MID configuration file,
found by default at /usr/local/rig/config/MIDConfig.parse. This file is read by the
GS Reference Mapper and used to match MID set names and MID names with
their multiplexing information. Users can edit this file to add their own MID sets
(following the format and syntax described in the file), or can copy this file to
create their own separate MID configuration file (and then use the -mcf option
to specify that as the MID configuration file to be used). See Section 13.4.15 for the
contents of the MIDConfig.parse file.

    -  Contrary to the situation with project-based mapping (see the setRef command,
section 6.3.2.2), you can use only one reference FASTA file, directory or
GoldenPath genome name with the runMapping command, unless the ref/-
read options are including to separate the reference files from the read data files.

All the files can still contain multiple reference sequences (see section 13.2).

    -  The GS Reference Mapper is aware of the folder/file structure of the UCSC
GoldenPath genome databases (most specifically the human genome and the
other major eukaryotic genome databases). If one or more of those databases are
downloaded onto the DataRig, and the user sets a GOLDENPATH environment
variable to the root directory containing those databases, then the genome name
can be given as the reference for runMapping (i.e., the command runMapping
hg18 reads.sff will map reads.sff against the GoldenPath hg18 human genome).
The GS Reference Mapper will automatically read the chromosome FASTA files,
the gene annotation file and the known SNP information file.


Specifically, the Mapping application looks for the reference FASTA files in
the chromosomes sub-directory, and files named refGene.txt and snp???.
txt (i.e., a file like snp128.txt that begins with snp, has three digits, then ends
with .txt) in the database sub-directory.


This matches the organization of the human genome database. Other GoldenPath databases (which dont match this
organization) can be used by the GS Reference Mapper application if the files are
modified to match this organization. See the UCSC GoldenPath Downloads
page for information on how their genome databases can be downloaded.
    -  In addition to automatically reading the gene/coding-region annotation and
known SNP files when the reference is a GoldenPath genome, the GS Reference
Mapper application automatically searches for specific annotation/SNP
files for any reference. If the reference files are located in a directory named
chromosomes, the GS Reference Mapper will look for refGene.txt and snp???.
txt files in a neighboring database directory (inside the same parent directory
as chromosomes). The GS Reference Mapper also searches the same directory
as the reference FASTA files for a refGene.txt and snp???.txt. Finally, if the
reference consists of a single FASTA file, then the software will look for files
with .refGene and .snp suffixes (e.g., if the reference file is mygenome.fna,
then files mygenome.refGene and mygenome.snp will be tried.
To disable this automated reading of the annotation/SNP files, the noannot
and nosnp options must be included as part of the command line options.

    -  Some of the runMapping command options listed above are mutually exclusive,
for obvious functional reasons. Specifically:
    -  Dont use -no or -nobig together with any of the following: -ace, -acedir,
consed, -pair, or -pairt
    -  Use no more than one of each of the following sets:
        . -noace, -ace, -acedir, or -consed
        . -ar or -at
        . -a # or -g
        . -annot or -noannot
        . -snp or -nosnp



6.3.2.2 The setRef Command

The setRef command is used to assign the reference sequence(s) to which the reads from the
sequencing Run(s) included in the project will be mapped. Its command line structure is:
setRef [dir] refdesc
where each refdesc is one of the following:
    -  reffasta
    -  a FASTA file containing the reference sequence(s),
    -  refdirname
    -  a name or path for a directory containing the reference sequence (all FASTA files in
the directory will be used in the reference),
    -  refgenome
    -  a GoldenPath genome name (see the Fifth Note in the runMapping Section 6.3.1
above).
Command Description
setRef
Sets or resets the reference sequence(s) for the mapping project to
the sequence(s) in the fastafile(s) given on the command line.
Argument Description
[dir]
An optional argument (must be first in the list of arguments) to identify
the project folder for the command. If the command is executed with no
directory argument, it verifies whether the current working directory
is either a mapping project folder or the mapping sub-directory inside
a mapping project folder, and uses that if so. This way, users can
create a mapping project and then simply change directory (cd)
into it, and all the commands will work on the project they are in.
refdesc
Path to a FASTA file, directory or GoldenPath genome name containing
the reference sequence(s) to which the reads from one or more
sequencing Run(s) will be mapped. Multiple FASTA files can be used
as argument, and each FASTA file can contain multiple sequences
(see section 13.2). When multiple files are given, the command treats
the reference as the union of all the sequences in all the FASTA files,
(i.e. all the sequences are considered as one genome for the purposes
of determining unique vs. repeat matches). (See Caution, below.)
External files: FASTA files are not actually copied to the project directory. Rather,
the file path is simply recorded in the project setup. Consequently, if the original
file is moved or erased from the file system, the project will not operate correctly.
This applies to all instances of FASTA files that can be added to a Mapping project,
whether done via the GUior the command line:
    -  FASTA read files, including Sanger reads
    -  Trimming database files
    -  Screening database files
    -  Reference sequence FASTA files
Unlike with the GS Read Data files, no symbolic link to the file is created for FASTA
files.


    -  Contrary to the situation with one-step mapping (see the runMapping
command, section 6.3.1), multiple FASTA files can be specified as arguments to
the setRef command, each of which may contain multiple reference sequences
(see section 13.2); mapping will be performed against the union of all the
sequences contained therein.
    -  The setRef command can be run multiple times for a project (in any combination
with the addRun, removeRun and runProject commands). When setRef is
executed, it resets (not adds) the reference sequence(s) used for the mapping.
If previous mapping results exist for the project, they will be discarded at the
next execution of the runProject command (as it resets the mapping results to
remap the reads against the new reference).
    -  The commands setRef, addRun, removeRun, and runProject can be executed in
any combination and in any order.






</entry>



<entry [Mon Jan 12 23:59:14 EST 2009] Ben - SNPs IN *Diffs.txt FILES, GS MAPPER ASSEMBLY PROCESS, USE GOLDENPATH>




p.147 GS Data Analysis Software Manual_LowRes.pdf

In the mapping process, the software performs the following operations (see also Table
12):
 For each read, search for a suitable alignment, or alignments, of the read to the reference
sequence(s) (a read may align to multiple positions in the reference sequence); this is
done in nucleotide space
 Construct contigs and compute a consensus basecall sequence from the signals of the
aligned reads (performed in flowspace)
 Identify the positions in the aligned reads (consensus) that differ from the reference
sequence(s); alternatively, identify subsets of the aligned reads that are identical within
each subset but differ between subsets (these are the putative differences)
 Evaluate the list of putative differences to identify High-Confidence differences
 Output the following information: contig consensus sequence(s) and associated quality
values; alignments of the reads and contigs to the reference, position-by-position
metrics of the depth and consensus accuracy (quality values) for each position in the
aligned reference; and the positions and alignments of identified differences
While the initial read to reference alignments are made in nucleotide space, the consensus
basecalling and quality value determination for contigs are performed in flowspace. Work
in flowspace allows the averaging of processed flow signals (a continuous variable) at each
nucleotide flow of the sequencing Run(s) rather than called bases (a discontinuous variable)
at each nucleotide position along the alignment. It also allows the use of information from
the negative flows, i.e. flows where no nucleotide incorporation is detected, which would
obviously not be possible in nucleotide space. Alignment in flowspace thus results in an
improved accuracy for the final basecalls.

P.196

6.4.2.5 454AllDiffs.txt
This file contains the list of variations where at least 2 reads differ either from the reference
sequence or from other reads aligned at a specific location. SNPs, insertion-deletion pairs,
multi-homopolymer insertion or deletion regions, and single-base overcalls and undercalls
are reported. Also, in order for a difference to be identified and reported, there must be at
least two non-duplicate reads that (1) show the difference, (2) have at least 5 bases on both
sides of the difference, and (3) have few other isolated sequence differences in the read.
In addition, if the e option is used to set an expected depth, then there must be at least
5% of that depth in differing reads. Finally, for single-base overcalls or undercalls to be
reported, they must have a flow signal distribution that differs from the signal distribution
of the reads matching the reference (i.e. not all overcalls and undercalls are reported as
variations). Once the difference is identified, all reads that fully span the difference location
and have at least 5 additional fl anking nucleotides on both sides are used in reporting the
difference. For a sample 454AllDiffs.txt file, see section 13.4.8.
The file consists of one tab-delimited summary line for each difference, plus a multiple
alignment of the reads spanning the difference location. Each of the difference summary
lines begin with a > character, so the summary list of differences can be extracted from
the file using the command fgrep > 454AllDiffs.txt. The full summary lines contain
fifteen columns of information, of which the first seven columns are always output,
columns eight through eleven are output if gene annotations or known SNP information
is given to the GS Reference Mapper (or the fd option is given), and the rest are output
only if the fd option is given to the GS Reference Mapper. The summary lines contain
the following columns:

( The accession number of the reference sequence in which the difference was
detected
) The start position within the reference sequence, where the difference occurs
* The end position within the reference sequence, where the difference occurs
+ The reference nucleotide sequence at the difference location
, The differing nucleotide sequence at the difference location
- The total number of reads that fully span the difference location
. The percentage of different reads versus total reads that fully span the difference
location
/ The reference amino acid sequence at the difference location, if it occurs within the
coding region of an annotated gene
0 The differing amino acid sequence at the difference location, if it occurs within the
coding region of an annotated gene
(1 The gene name at the difference location, if it occurs with the region of an annotated
gene
(( The list of known SNP IDs that occur at the difference location
() The number of forward reads that include the difference
(* The number of reverse reads that include the difference
(+ The total number of forward reads that fully span the difference location
(, The total number of reverse reads that fully span the difference location
?

P. 197
The multiple alignment for a difference shows the difference location plus approximately
30 bases on either side. The alignment is divided into two sections, the first section
displaying the reads found to contain the difference and the second, the reads not found
to have the difference. Each line of the alignment displays the following information for
a read:

( The identifier for the read
) The number of duplicate reads whose alignment matches this read (when there are
duplicates of the read)
* The position of the reads first base displayed in the alignment region
+ The orientation of the read in the displayed alignment (+ is forward orientation, -
is reverse-complement orientation)
, The aligned bases of the read
- The position of the reads last base displayed in the alignment region
?
6.4.2.6 454HCDiffs.txt
This file contains the same type of information as the 454AllDiffs.txt file (section 6.4.2.5,
above), but restricted to the High-Confidence differences. The GS Reference Mapper
application uses a combination of flow signal information, quality score information and
difference type information to determine if a difference is High-Confidence. The general
rules are:
    -   There must be at least 3 non-duplicate reads with the difference, unless the e option
is specified, in which case there must be 10% of the expected depth having the
difference
    -   There must be both forward and reverse reads showing the difference, unless there are
a at least 5 reads with quality scores over 20 (or 30 if the difference involves a 5-mer or
higher)
    -   If the difference is a single-base overcall or undercall, then the reads with the
difference must form the consensus of the sequenced reads (i.e., at that location, the
overall consensus must differ from the reference) and the signal distribution of the
differing reads must vary from the matching reads (and the number of bases in that
homopolymer of the reference).



RE: 454 Off Instrument Applications -- SNP pipeline and .ace file options?
Boese, Benjamin [benjamin.boese@roche.com]
Sent: 	Monday, January 12, 2009 9:34 PM
To: 	
Young, Stuart
Attachments: 	

Hi Stewart,

The details of our variant calling methods is outlined in our software data analysis manual in Section 6 (page 147) for GS Reference Mapper Application.  Specifically you should refer to section 6.4.2.5  .6.  These sections detail the parameters used to place a variant in the AllDiffs or HCDiffs (High Confidence diffs).  The algorithms take into account some of the known characteristics of our platform to provide the highest confidence variant calls.  In some cases you may be able to interpret the data in the AllDiffs file if you are looking for particular patterns.  The AllDiffs variants that are not in the HCDiffs file may be accurate, but merely lack sufficient depth of coverage to make the variant call with confidence.

Homopolymer errors are quite a challenge to deal with because of the variety of ways that you can align them to the reference.  The quality scores should help you interpret the results as well as looking at the multiple alignments.  In many cases the alignment can be confirmed or corrected by human analysis but these types of errors arent very common within most regions of interest for SNP calling so I wouldnt anticipate that to be a major issue for your analysis.  If we identify a particularly challenging region then we can work with you to develop a method of interpreting the data to make the appropriate calls.

I have a feeling that your flat ACE file is an artifact of using the FASTA files as input for our assembler but will have to check on this with our software group.  Our mapper uses some of the meta information associated with the sequencing run from the SFF files to make the quality score calls.  Basically it incorporates the raw signal data into the quality calculation.  Im not sure, but I believe that the software makes an assumption that FASTA reads are of Q30 in all cases as this is typically Sanger data.  There may be some comment about this in the data analysis manual.

Once you get the SFF files I think the analysis will look slightly different though I have had difficulty finding viewer software that makes it easy to view alignments to the whole human genome.

One thing I did notice is that you used the CCDS reference.  I recommend using the GoldenPath reference data set from UCSC.  Our software can use the GoldenPath reference and annotation data to highlight known SNPs and genes in the GS Mapper output.  The data at UCSC and NCBI should be synchronized so you are working off of essentially the same data set.  Details on setting up Mapper to use this information can also be found in the software manual section on mapper. 

I hope this points you in the right direction.  Let me know if you have any questions or need anything else.

 

Best regards,

Ben



</entry>



<entry [Tue Feb  3 14:45:40 EST 2009] CONFERENCE CALL WITH Ben Boese (Roche/454) AND Ed Szekerer (Roche/454)>




-----Original Message-----
From: Young, Stuart 
Sent: Tuesday, February 03, 2009 2:51 PM
To: 'Boese, Benjamin'
Cc: 'edward.szekeres@roche.com'
Subject: RE: Miami Exome - bioinformatics conference call

Hi Ben,

It was great talking to you just now. If you have a moment, could please CC introduce me to Brian Desany (I'll be looking out for him at AGBT)?

I'm looking forward to receiving the detailed read mapping info file from Ed when you get a chance.

Cheers,

Stuart.


NOTES FROM THE CALL:
    
    Brian Desany (Roche/454) to give talk at AGBT
    hapmap sequencing to confirm variation (including SNP calls)
    
    
    Expected conclusions of pedigree analysis: expt design with pedigree
    
    
    New samples status: 454 waiting for capture Nimblegen results
    
    
    New controls may delay timeline: Stephan & Tim discussed a method to troubleshoot different stages of capture
    

    PolyBayes
        - no precise comparison with GS Mapper
        - Gabor Marth is a collaborator so analysis may be included in their tools
    
    
    Perlegen: a lot of SNP calling work on 454 & answers on homopolymer error - relevance of error for most diseases is minimal cos more useful info is provided using 454 sequence which outweighs possible error
    
    
    Beta version of GS Mapper software with additional info on reads mapping info - Ed will send output files
    
    

</entry>



<entry [Tue Feb  3 14:45:40 EST 2009] SEQANSWERS NEW PASS>



-----Original Message-----
From: SEQanswers [mailto:admin@seqanswers.com] 
Sent: Tuesday, February 03, 2009 2:14 PM
To: Young, Stuart
Subject: Your new password for SEQanswers

Dear ngen_user,

As you requested, your password has now been reset. Your new details are as follows:

Username: ngen_user
Password: 7494637

To change your password, please visit this page: http://seqanswers.com/forums/profile.php?do=editpassword

All the best,
SEQanswers


</entry>



<entry [Sat Jan 31 22:03:08 EDT 2009] POLYBAYES OF run1 SAMPLES>




1. CHECK SOURCE FILES

cd /nethome/syoung/base/pipeline/nimblegen-run1
ls -R SID96*Map/sff
    SID9637_exon_Map/sff:
    FO91FA401.sff  SID9637.fna  SID9637.qual
    
    SID9638_exon_Map/sff:
    FO75YAH01.sff  SID9638.fna  SID9638.qual
    
    SID9639_exon_Map/sff:
    FO75YAH02.sff  SID9639.fna  SID9639.qual
    
    SID9640_exon_Map/sff:
    FO9YRTP01.sff  FO9YRTP02.sff  SID9640.fna  SID9640.qual  SID9640.sff
    
    SID9641_exon_Map/sff:
    FO91FA402.sff  SID9641.fna  SID9641.qual
    

2. CREATE DIRECTORIES AND COPY REFERENCE AND sff FILES

mkdir -p /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9637
mkdir -p /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9638
mkdir -p /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9639
mkdir -p /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640
mkdir -p /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9641



cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9637
cp /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/FO91FA401.sff SID9637.sff
cp /nethome/syoung/base/pipeline/nimblegen-sff/CCDS_nucleotide.20080430.fa ccds.fasta

cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9638
cp /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/sff/FO75YAH01.sff SID9638.sff
cp /nethome/syoung/base/pipeline/nimblegen-sff/CCDS_nucleotide.20080430.fa ccds.fasta

cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9639
cp /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/sff/FO75YAH02.sff SID9639.sff
cp /nethome/syoung/base/pipeline/nimblegen-sff/CCDS_nucleotide.20080430.fa ccds.fasta

cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640
cp /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/SID9640.sff SID9640.sff
cp /nethome/syoung/base/pipeline/nimblegen-sff/CCDS_nucleotide.20080430.fa ccds.fasta

cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9641
cp /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/sff/FO91FA402.sff SID9641.sff
cp /nethome/syoung/base/pipeline/nimblegen-sff/CCDS_nucleotide.20080430.fa ccds.fasta



2. CREATE .sh FILES AND RUN run-polybayes.pl

2.1

cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9637
em run-polybayes-SID9637.sh
#/bin/sh

/nethome/syoung/base/apps/polybayes/BetaRelease64Bit/bin/PyroBayes -i /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9637/SID9637.sff -r SID9637-

/nethome/syoung/base/bin/nextgen/run-polybayes.pl \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9637_exon_Map/sff/SID9637.sff.fasta \
--reference ccds \
--name SID9637 \
--outputdir /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9637


qsub -q psmall run-polybayes-SID9637.sh
    8125.kronos.ccs.miami.edu
    Sat Jan 31 23:31:47 EST 2009



2.2

cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9638
em run-polybayes-SID9638.sh
#/bin/sh

/nethome/syoung/base/apps/polybayes/BetaRelease64Bit/bin/PyroBayes -i /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9638/SID9638.sff -r SID9638-

/nethome/syoung/base/bin/nextgen/run-polybayes.pl \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9638_exon_Map/sff/SID9638.sff.fasta \
--reference ccds \
--name SID9638 \
--outputdir /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9638

qsub -q psmall run-polybayes-SID9638.sh

    8126.kronos.ccs.miami.edu

FAILED WITH MESSAGE
ERROR: Unknown nucleotide (J) in when converting bases during Smith-Waterman alignment.


2.3

cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9639
em run-polybayes-SID9639.sh
#/bin/sh

/nethome/syoung/base/apps/polybayes/BetaRelease64Bit/bin/PyroBayes -i /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9639/SID9639.sff -r SID9639-

/nethome/syoung/base/bin/nextgen/run-polybayes.pl \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9639_exon_Map/sff/SID9639.sff.fasta \
--reference ccds \
--name SID9639 \
--outputdir /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9639

qsub -q psmall run-polybayes-SID9639.sh
    8127.kronos.ccs.miami.edu


FAILED WITH MESSAGE
ERROR: Unknown nucleotide (J) in when converting bases during Smith-Waterman alignment.


2.4

cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640
em run-polybayes-SID9640.sh
#/bin/sh

/nethome/syoung/base/apps/polybayes/BetaRelease64Bit/bin/PyroBayes -i /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640/SID9640.sff -r SID9640-

/nethome/syoung/base/bin/nextgen/run-polybayes.pl \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640_exon_Map/sff/SID9640.sff.fasta \
--reference ccds \
--name SID9640 \
--outputdir /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9640

qsub -q psmall run-polybayes-SID9640.sh

    8128.kronos.ccs.miami.edu


FAILED WITH MESSAGE
ERROR: Unknown nucleotide (J) in when converting bases during Smith-Waterman alignment.




2.5

cd /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9641
em run-polybayes-SID9641.sh
#/bin/sh

/nethome/syoung/base/apps/polybayes/BetaRelease64Bit/bin/PyroBayes -i /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9641/SID9641.sff -r SID9641-

/nethome/syoung/base/bin/nextgen/run-polybayes.pl \
--inputfiles /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9641_exon_Map/sff/SID9641.sff.fasta \
--reference ccds \
--name SID9641 \
--outputdir /nethome/syoung/base/pipeline/nimblegen-run1-polybayes/SID9641


qsub -q psmall run-polybayes-SID9641.sh







</entry>



<entry [Tues Jan 26 11:37:08 EDT 2009] PROCESS .sff FILES INTO .fna AND .qual>




0. EXAMINE FILES

cd /nethome/syoung/base/pipeline/nimblegen-run1
ll
    drwxr-xr-x  2 syoung bioinfo 16K Jan 30 01:56 archive
    drwxr-xr-x  3 syoung bioinfo 16K Jan 29 22:46 SID9637_exon_Map
    drwxr-xr-x  3 syoung bioinfo 16K Jan 15 16:00 SID9638_exon_Map
    drwxr-xr-x  3 syoung bioinfo 16K Jan 15 02:17 SID9639_exon_Map
    drwxr-xr-x  3 syoung bioinfo 16K Jan 20 12:24 SID9640_exon_Map
    drwxr-xr-x  3 syoung bioinfo 16K Jan 20 16:19 SID9641_exon_Map

ls -R *Map/sff
    SID9637_exon_Map/sff:
    FO91FA401.fna  FO91FA401.sff
    
    SID9638_exon_Map/sff:
    FO75YAH01.sff
    
    SID9639_exon_Map/sff:
    FO75YAH02.sff
    
    SID9640_exon_Map/sff:
    FO9YRTP01.sff  FO9YRTP02.sff
    
    SID9641_exon_Map/sff:
    FO91FA402.sff



1. MERGE TWO .sff FILES USING sfffile

/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sfffile -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/SID9640.sff /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/FO9YRTP01.sff /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/FO9YRTP02.sff

    Reading the input SFF file(s)...
    Generating the SFF file...
       1262462 reads written into the SFF file.
       

    7.1 sfffile
    
    The sfffile command constructs a single SFF file containing the reads from a list of SFF
    files and/or datasets from sequencing Runs. The reads written to the new SFF file can
    be filtered using inclusion and exclusion lists of accession numbers, and their sequence
    trimming points or flowgram lengths can be adjusted. This command is used to pool the
    results of multiple sequencing Runs (or specified regions of one or multiple Runs) into a
    single SFF file, to simplify further handling of the combined data.
    
    The sfffile command uses the following syntax:
    
    sfffile [options...] [MIDList@](sfffile | datadir)...
    
    where MIDList is a multiplexing information string used to filter the set of file reads
    output (see the fourth Note below for the format of the MIDList information).
    
    Command Description
    
    sfffile
    
    Constructs a single SFF file containing the reads from a list of SFF
    files and/or datasets from older sequencing Runs.
    
    
    Option / Argument Description
    
    -o output
    The default output of the sfffile program is a single SFF file containing
    all the reads of the SFF files/sequencing Runs given in argument on
    the command line, output to the file 454Reads.sff. The -o option
    allows the user to specify a different filename.
    
    -r
    This option re-generates the phred-based quality scores for each of
    the input reads using the current quality scoring table, and overwrites
    the existing quality scores with these new quality scores in the output
    


2. GENERATE .fna AND .qual FILES


.fna FILES:

/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -seq /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/FO91FA401.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/SID9637.fna

/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -seq /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/sff/FO75YAH01.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/sff/SID9638.fna

/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -seq /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/sff/FO75YAH02.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/sff/SID9639.fna

(MERGED SFF FILES)
/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -seq /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/SID9640.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/SID9640.fna

/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -seq /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/sff/FO91FA402.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/sff/SID9641.fna


.qual FILES

/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -qual /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/FO91FA401.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/SID9637.qual

/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -qual /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/sff/FO75YAH01.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/sff/SID9638.qual

/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -qual /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/sff/FO75YAH02.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/sff/SID9639.qual

(MERGED SFF FILES)
/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -qual /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/SID9640.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/SID9640.qual

/nethome/syoung/base/apps/454/2.0.00.20-64/bin/sffinfo -qual /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/sff/FO91FA402.sff > /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/sff/SID9641.qual



cd /nethome/syoung/base/pipeline/nimblegen-run1
ls -R *Map/sff | grep SID
    SID9637_exon_Map/sff:
    SID9637.fna
    SID9637.qual
    SID9638_exon_Map/sff:
    SID9638.fna
    SID9638.qual
    SID9639_exon_Map/sff:
    SID9639.fna
    SID9639.qual
    SID9640_exon_Map/sff:
    SID9640.fna
    SID9640.qual
    SID9640.sff
    SID9641_exon_Map/sff:
    SID9641.fna
    SID9641.qual


    7.2 sffinfo
    
    The sffinfo command extracts read information from an SFF file, and reports it in text
    form. This is used for human examination of the data, or for generating the FASTA and
    quality score files of the read sequences, which can be given to standard bioinformatics
    tools. For an example of this output, see section 13.4.14.
    
    The sffinfo command uses the following syntax:
    sffinfo [options...] [- | sfffile] [accno...]
    
    Command Description
    
    sffinfo
    
    The sffinfo command extracts read information from an SFF file,
    and reports it in text form. By default, a text summary of all the
    read information is output, but the output can be limited to only
    the sequences, quality scores, flowgrams or manifest. Alloutput is
    written to standard output.
    Option / Argument Description
    -a or -accno This option limits the output to only the accession numbers.
    -s or -seq This option limits the output to only the sequences.
    -q or -qual This option limits the output to only the quality scores.
    -f or -flow This option limits the output to only the flowgrams.
    -t or -tab
    The default format for the sequences, quality scores and flowgram
    is FASTA. This option changes this to tab-delimited lines.
    -n or -notrim
    By default, the trimmed data is output. The -notrim option changes
    this to output the untrimmed sequences or quality scores.
    -m or -mft
    This command does not output the manifest by default. This option
    outputs the manifest text, if it exists in the SFF file. In this case, the
    -tab and -notrim options and the accnos on the command line are
    ignored.
    [--help] Displays a usage line and short description of the command.
    [--version] Displays the current software version of the command.
    - | sfffile
    Path to the SFF file whose data will be output. If this is replaced by
    a - on the command line, then standard input is read for the SFF
    contents.
    accno...
    List of the accession numbers of the reads whose data will be output.
    If no accnos are given on the command line, the information from all
    reads in the file are output. If an SFF file is specified and it contains
    an sfffile-created index, then an index-based lookup is used and the
    reads are output in the order they appear on the command line. If
    not, the complete SFF file is scanned and the reads are output in the
    order they appear in the file.
    Only one of -accno, -seq, -qual, -flow or -mft may be specified: the program uses
    the last one on the command line.



3. RUN runMapping USING CCDS REFERENCE (ONE .ace FILE FOR ALL HITS)

    3.1
    
    cd /nethome/syoung/base/pipeline/nimblegen-run1
    emacs gsmapper-ccds-SID9637.sh
    #/bin/sh
    
    time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/mapping \
    -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
    -read /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/sff/SID9637.fna 
    
    qsub -q psmall gsmapper-ccds-SID9637.sh
        
        7881.kronos.ccs.miami.edu
        Fri Jan 30 16:29:12 EST 2009
    
    
    3.2
    
    cd /nethome/syoung/base/pipeline/nimblegen-run1
    emacs gsmapper-ccds-SID9638.sh
    #/bin/sh
    
    time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/mapping \
    -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
    -read /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/sff/SID9638.fna 
    
    qsub -q psmall gsmapper-ccds-SID9638.sh
    
    7898.kronos.ccs.miami.edu
    Sat Jan 31 01:22:40 EST 2009
    
    
    
    3.3
    
    cd /nethome/syoung/base/pipeline/nimblegen-run1
    emacs gsmapper-ccds-SID9639.sh
    #/bin/sh
    
    time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/mapping \
    -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
    -read /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/sff/SID9639.fna 
    
    qsub -q psmall gsmapper-ccds-SID9639.sh
    
    7899.kronos.ccs.miami.edu
    
    
    
    3.4
    
    cd /nethome/syoung/base/pipeline/nimblegen-run1
    emacs gsmapper-ccds-SID9640.sh
    #/bin/sh
    
    time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/mapping \
    -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
    -read /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/sff/SID9640.fna 
    
    qsub -q psmall gsmapper-ccds-SID9640.sh
    
    7900.kronos.ccs.miami.edu
    
    
    
    3.5
    
    cd /nethome/syoung/base/pipeline/nimblegen-run1
    emacs gsmapper-ccds-SID9641.sh
    #/bin/sh
    
    time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/mapping \
    -nrm -ref /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa \
    -read /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/sff/SID9641.fna 
    
    qsub -q psmall gsmapper-ccds-SID9641.sh
    
    7901.kronos.ccs.miami.edu



4. EXTRACT HEADERS FROM 454HCDiffs.txt FILES

grep ">" SID9637_exon_Map/mapping/454HCDiffs.txt > SID9637_exon_Map/mapping/454HCDiffs-headers.txt
grep ">" SID9638_exon_Map/mapping/454HCDiffs.txt > SID9638_exon_Map/mapping/454HCDiffs-headers.txt
grep ">" SID9639_exon_Map/mapping/454HCDiffs.txt > SID9639_exon_Map/mapping/454HCDiffs-headers.txt
grep ">" SID9640_exon_Map/mapping/454HCDiffs.txt > SID9640_exon_Map/mapping/454HCDiffs-headers.txt
grep ">" SID9641_exon_Map/mapping/454HCDiffs.txt > SID9641_exon_Map/mapping/454HCDiffs-headers.txt


5. MOVE FILES INTO ccds DIRECTORY:

ls  SID96*
SID9637_exon_Map:
ccds  chromosomes  mapping.old  sff

SID9638_exon_Map:
ccds  chromosomes  mapping.old  sff

SID9639_exon_Map:
ccds  chromosomes  mapping.old  sff

SID9640_exon_Map:
ccds  chromosomes  mapping.old  sff

SID9641_exon_Map:
ccds  chromosomes  mapping.old  sff



6. DO RUN STATS 

capturestats.pl --mapdir /nethome/syoung/base/pipeline/nimblegen-run1/SID9637_exon_Map/ccds --reference /home/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa 

capturestats.pl --mapdir /nethome/syoung/base/pipeline/nimblegen-run1/SID9638_exon_Map/ccds --reference /home/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa 

capturestats.pl --mapdir /nethome/syoung/base/pipeline/nimblegen-run1/SID9639_exon_Map/ccds --reference /home/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa 

capturestats.pl --mapdir /nethome/syoung/base/pipeline/nimblegen-run1/SID9640_exon_Map/ccds --reference /home/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa 

capturestats.pl --mapdir /nethome/syoung/base/pipeline/nimblegen-run1/SID9641_exon_Map/ccds --reference /home/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa 



6. COPY TO /tmp/gsmapper
cp -r SID* /tmp/gsmapper


CREATED FILES:

/tmp/gsmapper/SID37_exon_Map/ccds
/tmp/gsmapper/SID38_exon_Map/ccds
/tmp/gsmapper/SID39_exon_Map/ccds
/tmp/gsmapper/SID40_exon_Map/ccds
/tmp/gsmapper/SID41_exon_Map/ccds



</entry>



<entry [Tues Jan 26 11:37:08 EDT 2009] LOADED exome TABLES ONTO laptop>



sqlite3 exome.dbl
>

.separator "\t"
.import sql/ccdsGene.tsv ccdsGene
.import sql/ccdsSNP.tsv ccdsSNP

NB: ccdsInfo HAS ISSUES WITH PRIMARY KEY 'ccds' SO CHANGED TO 'ccds', 'srcDb'... FIX COMPLETELY LATER:

.import sql/ccdsInfo.tsv ccdsInfo


</entry>



<entry [Mon Jan 26 17:08:08 EDT 2009] CCDS (CONSENSUS CODING SEQUENCES) INFO>



(NB: FTP IS HERE ftp://ftp.ncbi.nih.gov/pub/CCDS/)

http://www.ncbi.nlm.nih.gov/projects/CCDS/CcdsBrowse.cgi

The Consensus CDS (CCDS) project is a collaborative effort to identify a core set of human and mouse protein coding regions that are consistently annotated and of high quality. The long term goal is to support convergence towards a standard set of gene annotations.


CCDS update released for human:       May 1, 2008
The NCBI, Ensembl, and Sanger (Havana) annotation of the human reference genome (NCBI build 36.3) was analyzed to identify additional coding sequences (CDS) that are consistently annotated. Existing CCDS IDs were tracked based on re-identification of matching annotation (both identical and partial matches of CCDS collaboration updates that were asynchronous). CCDS data is available in the CCDS web site and FTP site and will become available in the collaborators' genome and/or gene browser web sites according to each browser's update cycle.

This update includes the addition of 2,151 new CCDS IDs and adds 1,249 Genes into the human CCDS set. Human build 36.3 includes a total of 20,159 CCDS IDs that correspond to 17,052 GeneIDs. See the statistics report for details.


 The CCDS set is calculated following coordinated whole genome annotation updates carried out by the NCBI, WTSI, and Ensembl. Annotation updates represent genes that are defined by a mixture of manual curation and automated computational processing.

The main curation groups are the Havana team at the WTSI and the RefSeq annotation group at NCBI. In addition, the manually curated information on chr14 (Genoscope) and Chr7 (Wustl) has been brought in via the Vega resource. The automatic methods are via the Ensembl group and the NCBI genome annotation computational pipeline. Curated information is favored over automated information and the information has to be both consistent in the Hinxton (Vega/Ensembl) and NCBI groups and also pass stringent QC controls.

The general process flow for defining the CCDS gene set includes:

   1. compare genome annotation results
   2. identify annotated coding regions that have identical location coordinates on the genome
   3. quality evaluation
   4. remove lower quality CDSs from the core set pending additional review among the collaboration groups. 

The CCDS set includes coding regions that are annotated as full-length (with an initiating ATG and valid stop-codon), can be translated from the genome without frameshifts, and use consensus splice-sites. The number and type of quality tests performed may be expanded in the future but includes consistency in cross-species comparative analysis, analysis to identify putative pseudogenes, retrotransposed genes, consensus splice sites, supporting transcripts, and protein homology. 



</entry>



<entry [Mon Jan 26 17:08:08 EDT 2009] LOADED solexa EXOME TABLES (ccdsGene, ccdsSNP, snp129, ccdsInfo) ONTO tank.ccs.miami.edu:3307>




SUMMARY
source /nethome/syoung/base/pipeline/exome/ccds/ccdsSNP.sql
source /nethome/syoung/base/pipeline/exome/ccds/ccdsGene.sql
source /nethome/syoung/base/pipeline/exome/ccds/ccdsInfo.sql
source /nethome/syoung/base/pipeline/exome/ccds/snp129.sql

load data local infile '/nethome/syoung/base/pipeline/exome/ccds/ccdsSNP-table.tsv' into table ccdsSNP;
load data local infile '/nethome/syoung/base/pipeline/exome/ccds/ccdsGene.txt' into table ccdsGene;
load data local infile '/nethome/syoung/base/pipeline/exome/ccds/ccdsInfo.txt' into table ccdsInfo;
load data local infile '/nethome/syoung/base/pipeline/exome/ccds/snp129.txt' into table snp129;


EXAMPLE LOAD ccdsSNP TABLE:

mysql -u ngsadmin -h tank.ccs.miami.edu -P 3307 -p
> accessngs
source /nethome/syoung/base/pipeline/exome/ccds/ccdsSNP.sql
Query OK, 0 rows affected (0.00 sec)

> desc ccdsSNP;
+-----------------+------------------+------+-----+---------+-------+
| Field           | Type             | Null | Key | Default | Extra |
+-----------------+------------------+------+-----+---------+-------+
| chromosome      | varchar(255)     | YES  |     | NULL    |       | 
| chromosomeStart | int(10) unsigned | YES  |     | NULL    |       | 
| chromosomeEnd   | int(10) unsigned | YES  |     | NULL    |       | 
| snp             | varchar(20)      | NO   | PRI | NULL    |       | 
| score           | int(10)          | YES  |     | NULL    |       | 
| strand          | char(1)          | YES  |     | NULL    |       | 
+-----------------+------------------+------+-----+---------+-------+
6 rows in set (0.01 sec)

load data local infile '/nethome/syoung/base/pipeline/exome/ccds/ccdsSNP-table.tsv' into table ccdsSNP;
Query OK, 156972 rows affected (2.05 sec)
Records: 156972  Deleted: 0  Skipped: 0  Warnings: 0






</entry>



<entry [Mon Jan 26 17:08:08 EDT 2009] CREATED capturestats.pl SCRIPT WITH Roche454.pm MODULE AND RAN ON HD2 DEMO CCDS CAPTURE DATA>



./capturestats.pl --mapdir /home/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping --reference /home/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa 


Average_mapped_homopolymericity: 0.731
Average g: 0.270
Average c: 0.266
Average a: 0.250
Average t: 0.214
Average gc: 0.536
Average at: 0.464

home/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping/stats-unmapped-homopoly.tsv <==

Average_mapped_homopolymericity: 0.734
Average g: 0.283
Average c: 0.277
Average a: 0.241
Average t: 0.198
Average gc: 0.56
Average at: 0.439


LAST: COMPARE HOMOPOLYMER AND GCAT STATS OF HIGH COVERAGE AND LOW COVERAGE SEQUENCES....



</entry>



<entry [Mon Jan 26 12:23:08 EDT 2009] LOAD CCDS AND SNP TABLES INTO WINDOWS SQLITE>





1. CREATE TABLE ON SQLITE COMMAND LINE OR WITH PERL

CREATE TABLE ccdsSNP (

    chromosome      varchar(255),
    chromosomeStart int(10),
    chromosomeEnd   int(10),
    snp             varchar(20),
    score           int(10),
    strand          char(1),
    
    PRIMARY KEY(snp)
);
.schema ccdsSNP



2. USE .import TO LOAD DATA

PERL:

system qq{sqlite3 databasename ".separator ,; .import filename tablename"};

OR, ON SQLITE COMMAND LINE:

.separator ,
.import C:\\DATA\\base\\pipeline\\exome\\ccdsSNP-table.tsv ccdsSNP



3. TEST

> select * from ccdsSNP limit 1;
> select count(*) from ccdsSNP;








SQLITE COMMAND LINE OPTIONS

C:\Documents and Settings\syoung>sqlite3

sqlite> .help
.bail ON|OFF           Stop after hitting an error.  Default OFF
.databases             List names and files of attached databases
.dump ?TABLE? ...      Dump the database in an SQL text format
.echo ON|OFF           Turn command echo on or off
.exit                  Exit this program
.explain ON|OFF        Turn output mode suitable for EXPLAIN on or off.
.header(s) ON|OFF      Turn display of headers on or off
.help                  Show this message
.import FILE TABLE     Import data from FILE into TABLE
.indices TABLE         Show names of all indices on TABLE
.load FILE ?ENTRY?     Load an extension library
.mode MODE ?TABLE?     Set output mode where MODE is one of:
                         csv      Comma-separated values
                         column   Left-aligned columns.  (See .width)
                         html     HTML <table> code
                         insert   SQL insert statements for TABLE
                         line     One value per line
                         list     Values delimited by .separator string
                         tabs     Tab-separated values
                         tcl      TCL list elements
.nullvalue STRING      Print STRING in place of NULL values
.output FILENAME       Send output to FILENAME
.output stdout         Send output to the screen
.prompt MAIN CONTINUE  Replace the standard prompts
.quit                  Exit this program
.read FILENAME         Execute SQL in FILENAME
.schema ?TABLE?        Show the CREATE statements
.separator STRING      Change separator used by output mode and .import
.show                  Show the current values for various settings
.tables ?PATTERN?      List names of tables matching a LIKE pattern
.timeout MS            Try opening locked tables for MS milliseconds
.width NUM NUM ...     Set column widths for "column" mode
sqlite>


</entry>



<entry [Thurs Jan 22 23:54:18 EST 2009] sfffile COMMAND FOR CONCATENATING SFF FILES>



7.1 sfffile

The sfffile command constructs a single SFF file containing the reads from a list of SFF
files and/or datasets from sequencing Runs. The reads written to the new SFF file can
be filtered using inclusion and exclusion lists of accession numbers, and their sequence
trimming points or fl owgram lengths can be adjusted. This command is used to pool the
results of multiple sequencing Runs (or specified regions of one or multiple Runs) into a
single SFF file, to simplify further handling of the combined data.

The sfffile command uses the following syntax:

sfffile [options...] [MIDList@](sfffile | datadir)...

where MIDList is a multiplexing information string used to filter the set of file reads
output (see the fourth Note below for the format of the MIDList information).


Command Description

Constructs a single SFF file containing the reads from a list of SFF
files and/or datasets from older sequencing Runs.
Option / Argument Description

-o output
The default output of the sfffile program is a single SFF file containing
all the reads of the SFF files/sequencing Runs given in argument on
the command line, output to the file 454Reads.sff. The -o option
allows the user to specify a different filename.

-r
This option re-generates the phred-based quality scores for each of
the input reads using the current quality scoring table, and overwrites
the existing quality scores with these new quality scores in the output
file.


EXTRACT READS FOR ANALYSIS 

One of the most common uses of the sfffile program is to collect and organize
your sequences in terms of your projects, instead of the standard timestamp and
Run-based organization generated by the Genome Sequencer FLX
Instrument.

For example, multiple sequencing Runs for a large sequencing
project can easily be combined into a single mygenome.sff file using sfffile
-o mygenome.sff path_to_D1 path_to_D2 path_to_D3. This file could then
be given to the GS Reference Mapper and GS De Novo Assembler software, or
carved and divided into separate pieces (see below), while still preserving the
traceback information to the source data, since:

The universal accessions for each read encode the Run timestamp, the
region and the X,Y location of the read, and all but ensure uniqueness for
the accessions.


The manifest of the SFF file provides the mapping from the Run prefix of
the universal accessions to the actual Run and Data Analysis directories
used to generate the read. When universal accessions are given to the reads,
the manifest is kept updated through multiple invocations of sfffile (as best
it can).

sffinfo COMMAND TO GET TRACEBACK FOR A PARTICULAR READ

So, if a read needs more investigation, you can invoke the sffinfo command (see
section 7.2, below) for that read to see the traceback information, including the
source Run and Data Analysis directories.

The GS Run Browser (see section 8)
could be used to evaluate the read within the context of the Run [where the
Find location feature on the Wells tab allows entry of a universal accession and
will then center the image and place a marker at the reads X,Y location].


EXTRACT SUBSETS OF READS

Another common use of sfffile is to extract subsets of the reads from a
sequencing Run or a set of sequencing Runs, to perform further processing.
Using the iand e options, one can construct an SFF file containing only the
reads of interest, and then use that for further processing, e.g. input it into to
the GS Reference Mapper or GS De Novo Assembler applications. For example,
you can extract the singletons from an assembly (when performing, say, survey
sequencing) by executing the following commands (which assume that the
current working directory is the output directory of the assembly):
fgrep Singleton 454ReadStatus.txt > singles.txt
sfffile -o singles.sff -isingles.txt sff/*
sffinfo -s singles.sff > singles.fna
Or, after running the GS Reference Mapper application, you can retrieve the
reads that did not map to your reference sequence (so that, for example, you
can give them as input to the GS De Novo Assembler software to see if there
are any contigs that are part of what you sequenced but are not part of the
reference) by using the following commands (which assume that the current
working directory is the output directory of the assembly):
grep Unmapped 454ReadStatus.txt > unmapped.txt
sfffile -o unmapped.sff iunmapped.txt sff/*
runAssembly unmapped.sff
where the Unix grep command extracts the lines in the 454ReadStatus.txt file
that list the accession numbers of the unmapped reads, then the ioption in
the sfffile command is used to signify that the command should include those
reads in the new SFF file. (Similarly, there is a -e option to exclude reads from
the output file.) Note that the -iand -e options cannot take a list of files, so to
specify the inclusion or exclusion of multiple files on the command, you must
precede each with an -ior -e option.



</entry>



<entry [Thurs Jan 22 23:23:18 EST 2009] CHECK AN 100% COVERAGE ENTRY IN 454RefStatus.txt FILE>



==> 454RefStatus.txt <==
Reference       Num Unique      Pct of All      Pct of  Pct Coverage
Accession       Matching Reads  Unique Matches  All Reads       of Reference    Description
CCDS6193.1|Hs36.3|chr8  3071    0.3%    0.1%    100.00%


1. GET ALL THE ALIGNMENT LINES FROM 454AlignmentInfo.tsv FOR CCDS6193.1

cd /nethome/syoung/base/pipeline/nimblegen-gsmapper

getlines.pl -f /nethome/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping/454AlignmentInfo.tsv -n 6521198 -l 486 > CCDS6193-454AlignmentInfo.tsv

tail -n 5 /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS6193-454AlignmentInfo.tsv
    
    476     T       T       64      6       4.00    0.45
    477     T       T       64      6       4.00    0.45
    478     T       T       22      6       4.00    0.45
    479     G       G       64      6       1.00    0.00
    480     A       A       64      6       2.00    0.00


2. GET THE ACTUAL SEQUENCE FOR CCDS6193.1

cd /nethome/syoung/base/pipeline/nimblegen-gsmapper

grep -n CCDS6193.1 CCDS_nucleotide.20080430.fa 
164887:>CCDS6193.1|Hs36.3|chr8

getlines.pl -f /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa -n 164885 -l 12

>CCDS6193.1|Hs36.3|chr8
ATGAGGAAGAATGAGAGTTATCTCAACCAGCCAGCACCCCCTATCCCCATTCCCACACTT
TCCCTCATGGGAGGCTGTCGGGAGCACTTCGAAAACCACTGGAAAGGCCGGGCACGGTGG
CTCATGCCTGTAATCCCAGCACTTTGGGAGGCCAAGGCAGGCAGATCACCTGAGGTCAGG
AGTTCGAAACCAGCCTGGCCAACATGGCGAAACCCCATCTTTACTAAAAATACGAAAATT
AGCCAGGTATTAGAATTATTTCTGAATTATCAGTCTCTCATTTGTGCTTTGGAGAAGCAG
AAAAGGCAAAAGGGGTCTTTGGCCATCTTCTGCTGGAGCTTCCAGGGAGGATGTGTCTCC
AAGAGACCAGATGTACCGAGTTTGAAATCCCAGAAGCCCAAGAGGAAAAGAATCACAGGG
AGGAAAAGACTGTCCAAAGGCTTCTGGAGTCTTCTGTTCTCTAACCTTGGAAGGTTTTGA
>CCDS6195.1|Hs36.3|chr8
ATGCAAAGAGATCACACCATGGACTACAAGGAAAGCTGCCCAAGTGTAAGCATTCCCAGC
TCCGATGAACACAGAGAGAAAAAGAAGAGGTTTACTGTTTATAAAGTTCTGGTTTCAGTG

getlines.pl -f /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS_nucleotide.20080430.fa -n 164885 -l 9 > CCDS6193.1.fasta

bases.pl --inputfile /nethome/syoung/base/pipeline/nimblegen-gsmapper/CCDS6193.1.fasta
480


NB: USE THE -pt COMMAND TO WITH runMapping TO GENERATE THE 454PairAlign.txt FILE, WHICH CONTAINS THE ALIGNMENTS FOR EACH READ:

****** NOTE, THIS DOES NOT CONTAIN ALL OF THE MULTIPLE MAPS OF READS TO THE REFERENCE !!!! *******

6.4.2.11 454PairAlign.txt

This file contains the pairwise alignments that were found when mapping the reads against
the reference. By default, this file is not generated, but if the -p or -pt options are given
on the runProject command line, this file will be generated either in a human-readable
text format (-p) or in tab-delimited format (-pt).

Each of the displayed alignments contain the following information (these are the columns in the tab-delimited format):

1. QueryAccno  accession number of the read (the query sequence)
2. QueryStart  starting position of the alignment in query sequence
3. QueryEnd  ending position of the alignment in query sequence
4. QueryLength  length of the query sequence
5. SubjAccno  accession number of the sequence in the reference where the alignment
occurs (the subject sequence)
6. SubjStart  starting position of the alignment in subject sequence
7. SubjEnd  ending position of the alignment in subject sequence
8. SubjLength  length of the subject sequence
9. NumIdent  number of identities in the pairwise alignment, i.e. where query and subject
characters match
10. AlignLength  the length of the pairwise alignment
11. QueryAlign  query alignment sequence
12. SubjAlign  subject alignment sequence

****** NOTE, THIS DOES NOT CONTAIN ALL OF THE MULTIPLE MAPS OF READS TO THE REFERENCE !!!! *******

For each uniquely mapped read (the Full and Partial reads), the file contains the unique
alignment found. For reads that map to multiple locations in the genome (some of the
Repeat reads), all the alignments to those multiple locations will be computed. However,
only the highest quality alignments will be output to the file (i.e., if a 99% identity alignment
is found, a 90% identity alignment will not be output, as it is not a likely mapping location
of the read to the genome, given that a 99% identity location was found).


</entry>



<entry [Fri Jan 23 00:03:18 EST 2009] MESSAGE SAWSAN EXOME UPDATE 5>



Hi Sawsan,

Here's a quick update for the exome project:

DONE

1. Created 'capturestats' script to generate capture quality metrics:

    - Average coverage of CDS targets
    - Maximal coverage, minimal coverage
    - How much sequence below certain cut-off (e.g. 5x)
    - Average coverage per chromosome
    - Graph with average coverage per each gene
    - what did we miss of the targeted region
    - number of aligned and unaligned reads (on-target/ off-target)

2. Created 'run-polybayes' script to generate alternate SNPs using PyroBayes/Mosaik/PolyBayes

3. Ran 'run-polybayes' script on human genome (BUT FAILED AGAIN DUE TO LACK OF MEMORY), chromosomes and the CCDS sequences

4. Ran GS Mapper on human genome, chromosomes and CCDS sequences

5. Created script to do dbSNP flagging of unknown SNPs

6. Participated in conference call with 454/Nimblegen - sequence capture didn't seem to work so well, won't finish in time for AGBT so aiming for 'THE BIOLOGY OF GENOMES' conference, May 5 - 9, Abstract Deadline: February 13, 2009.


TO DO

1. Still onworking incorporation of Dale's script (synonymous/non-synonymous and UTR-relative position)

________________________________________
From: Zuchner, Stephan
Sent: Thursday, January 22, 2009 2:44 PM
To: Hedges, Dale; Young, Stuart
Subject: RE: Miami Exome Samples

I will fill you in, but importantly, it did not work, they think. And they will redo everything. AGBT is off the table. Now it is

THE BIOLOGY OF GENOMES
May 5 - 9, 2009
Abstract Deadline: February 13, 2009

Stephan Zchner, MD
Director, Center for Human Molecular Genomics
University of Miami Miller School of Medicine
Miami Institute for Human Genomics
Clinical Research Building
Room 810
1120 N.W. 14th Street
Miami, FL 33136
Phone: +1-305-243-2281
Fax: +1-305-243-2396


-----Original Message-----
From: Hedges, Dale
Sent: Thursday, January 22, 2009 2:29 PM
To: Zuchner, Stephan; Young, Stuart
Subject: RE: Miami Exome Samples


Sorry, I was absorbed in what I was doing, never looked at my calendar, and completely missed the conference call. Any significant updates?



-----Original Message-----


Updated: Miami Exome Samples conference call
Zuchner, Stephan 	Sent: Wednesday, January 21, 2009 4:26 PM
Accepted on 1/22/2009 1:26 PM
Required: 	
'xinmin.zhang@roche.com'; 'tim.harkins@roche.com'; 'michael.schilling.ms1@roche.com'; 'lance.brown@roche.com'; 'daniel.burgess@roche.com'; 'gerard.irzyk@roche.com'; Young, Stuart; Khuri, Sawsan; Hedges, Dale; Huang, Jia
		
When:	Thursday, January 22, 2009 1:30 PM-2:30 PM.
Location:	CRB 810 call in number:(888)285-4585 PARTICIPANT CODE: 568311
Attachments: 	
		
When: Thursday, January 22, 2009 1:30 PM-2:30 PM (GMT-05:00) Eastern Time (US & Canada).
Where: CRB 810 call in number:(888)285-4585  PARTICIPANT CODE:  568311
 
    

 
</entry>



<entry [Tues Jan 20 18:27:18 EST 2009] MESSAGE BEN BOESE: SUMMARY STATS OF SHIPPED SAMPLES (2115250, 2115245, 2115253)>



From: Boese, Benjamin [mailto:benjamin.boese@roche.com] 
Sent: Wednesday, January 21, 2009 12:02 PM
To: Zuchner, Stephan
Cc: Zhang, Xinmin {GLMK~Madison}; Harkins, Tim {DNZG~Indianapolis}; Schilling, Michael {DNZA~Indianapolis}; Brown, Lance {DNZT~Indianapolis}; Burgess, Daniel {ADVR~Madison}; Irzyk, Gerard {454_~Branford}; Young, Stuart; Khuri, Sawsan; Hedges, Dale; Huang, Jia
Subject: RE: Miami Exome Samples

Hi Stephan,

I wanted to let you know that we managed to complete the mapping for all of the remaining samples yesterday afternoon and I was able to get the DVDs for all of the samples in the shipment.

Sample 2115250:
Total Reads: 1.26 million reads
Number of mapped reads: 1,177,534 (93%)
Number of mapped bases: 339,919,550 (91%)
 
Number uniquely mapped: 1,005,451
Number unique in targeted regions: 735,682 (73%)
Number unique out of targeted regions: 269,787 (27%)

Sample 2115245:
Total Reads: 547,847 reads
Number of mapped reads: 482,059 (88%)
Number of mapped bases: 125,859,952 (96.56%)
 
Number uniquely mapped: 390,781
Number unique in targeted regions: 266,712 (68.25%)
Number unique out of targeted regions: 124,069 (31.75%)


Sample 2115253:
Total Reads: 572,186 reads
Number of mapped reads: 533,951 (93.38%)
Number of mapped bases: 137,895,787 (98.23%)
 
Number uniquely mapped: 447,313
Number unique in targeted regions: 299,745 (67.01%)
Number unique out of targeted regions: 147,568 (33%)


Im working with our team here to asses the evenness of coverage we can also work with Stuart to point him in the right direction with the Mapper output to find the depth of coverage numbers.  I believe there are a number of aspects to the results that arent fully captured by the high-level summary provided above so we should probably discuss what analysis metrics should be generated for the data set.  Tim, Ill push the questions of additional sequencing over to you.

Regards,
Ben



</entry>



<entry [Tues Jan 20 18:27:18 EST 2009] MESSAGE STEPHAN: AVERAGE COVERAGE, 5X AND 10X COVERAGES>



Hi Stephan,

Thats right - average coverage per target CCDS sequence and the 5X+ and 10X+ read coverage proportions of targets should be calculable from the 454RefStatus.txt file:

E.g.,

emacs  /nethome/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping/454RefStatus.txt

Accession       Matching Reads  Unique Matches  All Reads       of Reference    Description
CCDS6193.1|Hs36.3|chr8  3071    0.3%    0.1%    100.00%
CCDS8731.1|Hs36.3|chr12 2993    0.2%    0.1%    20.56%
CCDS12128.1|Hs36.3|chr19        2724    0.2%    0.1%    90.37%
CCDS8755.1|Hs36.3|chr12 2300    0.2%    0.1%    98.33%
CCDS35212.1|Hs36.3|chrX 2077    0.2%    0.1%    84.33%
CCDS34869.1|Hs36.3|chr8 1752    0.1%    0.1%    10.22%
CCDS9868.1|Hs36.3|chr14 1518    0.1%    0.1%    97.56%
CCDS14785.1|Hs36.3|chrXY        1364    0.1%    0.1%    7.96%
CCDS5024.1|Hs36.3|chr6  1288    0.1%    0.1%    98.52%
CCDS30956.1|Hs36.3|chr1 1249    0.1%    0.1%    98.44%
CCDS31994.1|Hs36.3|chr13        1134    0.1%    0.0%    97.31%
CCDS2232.1|Hs36.3|chr2  1126    0.1%    0.0%    98.37%

Btw, there were a few problems with the PolyBayes run which I am troubleshooting now. Ill update you when I have any further developments.

Cheers,

Stuart.


From: Zuchner, Stephan 
Sent: Tuesday, January 20, 2009 6:06 PM
To: Hedges, Dale; Young, Stuart
Subject: 

The 454REDstatus.txt file is interesting. From there we can do all the statistics regarding coverage.




Stephan Zchner, MD
Director, Center for Human Molecular Genomics
University of Miami Miller School of Medicine 
Miami Institute for Human Genomics
Clinical Research Building
Room 810
1120 N.W. 14th Street
Miami, FL 33136
Phone: +1-305-243-2281
Fax: +1-305-243-2396
e-mail: szuchner@med.miami.edu



</entry>



<entry [Fri Jan 16 22:27:18 EST 2009] MESSAGE PATY UNPAIRED SEQUENCES>



    Hi Paty,
    
    The mtDNA (lanes 6-8) data are on kronos at this location:
    
    /nethome/syoung/base/pipeline/run2-mtdna-eland/assembly
    
    s_6_1_sorted.txt.unpaired
    s_7_1_sorted.txt.unpaired
    s_8_1_sorted.txt.unpaired
    
    I haven't done the human data yet but will try to get round to it soon. Do you need it urgently?
    
    My poster is on Tuesday 27th - the number's P42. Hope to see you there!
    
    Cheers,
    
    Stuart.  
    
    
    ________________________________________
    From: Buendia, Patricia
    Sent: Friday, January 16, 2009 12:56 AM
    To: Young, Stuart
    Subject: unpaired sequences
    
    Hi Stuart,
    
    Once in a while I have time to work on this. I don't want to take much of your time, but you send me unpaired sequences from mtDNA (lanes 6-8). Do you have "unpaired" sequences from the human chromosomes transcripts (from lanes 1-4)?
    
    BTW, I saw your name in the Miami Symposium list. Are you presenting a poster? What day?
    
    Cheers,
    
    Patricia

</entry>



<entry [Fri Jan 16 22:23:18 EST 2009] MESSAGE SAWSAN EXOME UPDATE 4>



Hi Sawsan,

Just a quick update on the exome project:

1. I got Dale's script this afternoon and am working it into my script

2. In the meeting, Stephan said Nimblegen told him we can expect the captured 454 sequence data for the four samples by Tuesday/Wednesday next week

3. I got the DVD with the SFF data for the HD2 demo data this evening and will load it onto kronos tomorrow and run the alternate SNP pipeline

4. I'll ask Stephan to post his edited 'ExomeSequencing4.doc' file on the Y: drive

Cheers,

Stuart.


</entry>



<entry [Fri Jan 16 14:36:37 EST 2009] TRANSFERRING DATA FROM solexa TO kronos BY scp>



ON SOLEXA:

cd /home/syoung/base
scp -r pipeline/* syoung@kronos.ccs.miami.edu:base/pipeline

du -hs *

12G     apps
22M     archive
3.6M    bin
52K     conf
28G     dev
4.1M    lib
144K    misc
8.4M    notes
636K    perlmods
703G    pipeline


</entry>



<entry [Tues Jan 13 01:20:14 EST 2009] MESSAGE SAWSAN>



Exome update 3

Hi Sawsan,

Here's a quick update for the exome project:

DONE

1. Located quality, etc. info in GS Mapper output
2. Whole genome reference GS Mapper run completed, chromosome .ace files produced
3. Dale's script is almost ready (synonymous/non-synonymous and UTR-relative position)
4. Emailed Ben Boese and he confirmed we should use the *Diffs.txt files though he's not given me any specific SNP-calling pipeline information (i.e., they may not have any)

TO DO

1. dbSNP flagging of unknown SNPs (tomorrow)
2. Incorporate syn/non-syn and UTR code into application
3. Generate quality metrics:

    - Average coverage of CDS targets
    - Maximal coverage, minimal coverage
    - How much sequence below certain cut-off (e.g. 5x)
    - Average coverage per chromosome
    - Graph with average coverage per each gene
    - what did we miss of the targeted region
    - number of aligned and unaligned reads (on-target/ off-target)

POSSIBLE

1. Use GoldenPath reference sequence and SNP data with GS Mapper as alternate means of dbSNP flagging
2. We'll get the SFF (raw sequence read) files shortly so we can use PyroBayes/Mosaik/PolyBayes as an alternate SNP caller





</entry>



<entry [Tues Jan 13 01:05:14 EST 2009] MESSAGE ALL: Whole genome reference GS Mapper completed>



Hi all,

The whole genome reference GS Mapper run has completed and the .ace files are available on solexa01:

Whole genome file (16GB)
ls -alh /home/syoung/base/pipeline/nimblegen-gsmapper/genome/mapping/454Contigs.ace

-rw-r--r-- 1 syoung users 16G Jan 12 23:15 /home/syoung/base/pipeline/nimblegen-gsmapper/genome/mapping/454Contigs.ace

Chromosome files (300MB- 1.3GB)

cd /home/syoung/base/pipeline/nimblegen-gsmapper/chromosomes/mapping/ace
ls -alh

total 16G
drwxr-xr-x 2 syoung users 4.0K Jan 12 23:13 .
drwxr-xr-x 3 syoung users 4.0K Jan 12 23:15 ..
-rw-r--r-- 1 syoung users 712M Jan 12 21:59 chr10.ace
-rw-r--r-- 1 syoung users 713M Jan 12 22:04 chr11.ace
-rw-r--r-- 1 syoung users 706M Jan 12 22:20 chr12.ace
-rw-r--r-- 1 syoung users 581M Jan 12 22:24 chr13.ace
-rw-r--r-- 1 syoung users 557M Jan 12 22:28 chr14.ace
-rw-r--r-- 1 syoung users 529M Jan 12 22:32 chr15.ace
-rw-r--r-- 1 syoung users 469M Jan 12 22:47 chr16.ace
-rw-r--r-- 1 syoung users 440M Jan 12 22:50 chr17.ace
-rw-r--r-- 1 syoung users 392M Jan 12 22:53 chr18.ace
-rw-r--r-- 1 syoung users 348M Jan 12 22:55 chr19.ace
-rw-r--r-- 1 syoung users 1.3G Jan 12 20:32 chr1.ace
-rw-r--r-- 1 syoung users 335M Jan 12 23:05 chr20.ace
-rw-r--r-- 1 syoung users 243M Jan 12 23:06 chr21.ace
-rw-r--r-- 1 syoung users 261M Jan 12 23:08 chr22.ace
-rw-r--r-- 1 syoung users 1.3G Jan 12 20:49 chr2.ace
-rw-r--r-- 1 syoung users 1.1G Jan 12 20:56 chr3.ace
-rw-r--r-- 1 syoung users 978M Jan 12 21:03 chr4.ace
-rw-r--r-- 1 syoung users 932M Jan 12 21:20 chr5.ace
-rw-r--r-- 1 syoung users 894M Jan 12 21:26 chr6.ace
-rw-r--r-- 1 syoung users 821M Jan 12 21:32 chr7.ace
-rw-r--r-- 1 syoung users 750M Jan 12 21:49 chr8.ace
-rw-r--r-- 1 syoung users 729M Jan 12 21:54 chr9.ace
-rw-r--r-- 1 syoung users 782M Jan 12 23:13 chrX.ace
-rw-r--r-- 1 syoung users 282M Jan 12 23:15 chrY.ace


Cheers,

Stuart.


</entry>



<entry [Tues Jan 13 12:53:14 EST 2009] MESSAGE DALE >



Hi Dale,

I'll try to do the dbSNP flagging part tomorrow. Can you send me your part when it's ready? I'll put all of it together into one application/module. 

Here's a rough list of the components:

    - parse out genome-relative positions for each SNP
    - check against dbSNP (snp129 table in mysql)
    - get position relative to UTR
    - check synonymous/non-synonymous
    - get quality information

I'll use the 454HCDiffs-header.txt file as input for now unless you want to use anything else: 

/home/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping/454HCDiffs-headers.txt

Cheers,

Stuart.



</entry>



<entry [Tues Jan 13 12:15:14 EST 2009] AUTOMATIC SNP VALIDATION USING GOLDEN PATH>



Ben Boese EMAIL:
One thing I did notice is that you used the CCDS reference.  I recommend using the GoldenPath reference data set from UCSC.  Our software can use the GoldenPath reference and annotation data to highlight known SNPs and genes in the GS Mapper output.  The data at UCSC and NCBI should be synchronized so you are working off of essentially the same data set.  Details on setting up Mapper to use this information can also be found in the software manual section on mapper. 


p.154 GS Data Analysis Software Manual_LowRes.pdf

- Configuration Files
    
    - Trimming database  The path to a FASTA file of sequences to be used to trim
    the ends of input reads (for cloning vectors, primers, adapters or other end
    sequences).
    
    - Screening database The path to a FASTA file of sequences to be used to screen the
    input reads for contaminants. A Read that completely aligns against the screening
    database is removed so that it is not used in the computation; if only part of a read
    aligns with the screening database, no action is taken.
    
    - Targeted regions  A string argument telling the GS Reference Mapper to only
    output specifc regions of the reference, and the reads aligned to those regions.
    The reads are mapped against the complete reference, but the output files will only
    report on the specifed regions. The string value can be
    
    ?? a accno:#-# string, e.g. chr9:10549-30594 specifes bases 10549 to 30594 of
    the chr9 reference sequence;
    ?? the path to a file containing lines of accno:#-# strings (one per line); or
    ?? the path to a GFF DAR file created during a NimbleGen Sequence Capture
    experiment, describing the primary_target_region regions of the experiment.
    
    - Genome annotation  The path to an annotation file describing the gene/coding region
    annotations for the reference sequences, so that the variation detection
    (HCDiffs tab) can report gene names and protein translations of any identifed
    variations in gene regions. The format of this file must match that of the GoldenPath
    refGene.txt file.
    
    - Known SNP annotation  The path to an annotation file describing the known SNP
    information for the reference sequences, so that the variation detection (HCDiffs
    tab) can link identifed variations to the known SNP information. The format of
    this file must match that of the GoldenPath snp128.txt file.
    
    - Long fle paths will be displayed in full by pausing the mouse cursor on the text
    area.



</entry>



<entry [Mon Jan 12 23:59:14 EST 2009] Ben - SNPs IN *Diffs.txt FILES, GS MAPPER ASSEMBLY PROCESS, USE GOLDENPATH>




p.147 GS Data Analysis Software Manual_LowRes.pdf

In the mapping process, the software performs the following operations (see also Table
12):
 For each read, search for a suitable alignment, or alignments, of the read to the reference
sequence(s) (a read may align to multiple positions in the reference sequence); this is
done in nucleotide space
 Construct contigs and compute a consensus basecall sequence from the signals of the
aligned reads (performed in flowspace)
 Identify the positions in the aligned reads (consensus) that differ from the reference
sequence(s); alternatively, identify subsets of the aligned reads that are identical within
each subset but differ between subsets (these are the putative differences)
 Evaluate the list of putative differences to identify High-Confidence differences
 Output the following information: contig consensus sequence(s) and associated quality
values; alignments of the reads and contigs to the reference, position-by-position
metrics of the depth and consensus accuracy (quality values) for each position in the
aligned reference; and the positions and alignments of identified differences
While the initial read to reference alignments are made in nucleotide space, the consensus
basecalling and quality value determination for contigs are performed in flowspace. Work
in flowspace allows the averaging of processed flow signals (a continuous variable) at each
nucleotide flow of the sequencing Run(s) rather than called bases (a discontinuous variable)
at each nucleotide position along the alignment. It also allows the use of information from
the negative flows, i.e. flows where no nucleotide incorporation is detected, which would
obviously not be possible in nucleotide space. Alignment in flowspace thus results in an
improved accuracy for the final basecalls.

P.196

6.4.2.5 454AllDiffs.txt
This file contains the list of variations where at least 2 reads differ either from the reference
sequence or from other reads aligned at a specific location. SNPs, insertion-deletion pairs,
multi-homopolymer insertion or deletion regions, and single-base overcalls and undercalls
are reported. Also, in order for a difference to be identified and reported, there must be at
least two non-duplicate reads that (1) show the difference, (2) have at least 5 bases on both
sides of the difference, and (3) have few other isolated sequence differences in the read.
In addition, if the e option is used to set an expected depth, then there must be at least
5% of that depth in differing reads. Finally, for single-base overcalls or undercalls to be
reported, they must have a flow signal distribution that differs from the signal distribution
of the reads matching the reference (i.e. not all overcalls and undercalls are reported as
variations). Once the difference is identified, all reads that fully span the difference location
and have at least 5 additional fl anking nucleotides on both sides are used in reporting the
difference. For a sample 454AllDiffs.txt file, see section 13.4.8.
The file consists of one tab-delimited summary line for each difference, plus a multiple
alignment of the reads spanning the difference location. Each of the difference summary
lines begin with a > character, so the summary list of differences can be extracted from
the file using the command fgrep > 454AllDiffs.txt. The full summary lines contain
fifteen columns of information, of which the first seven columns are always output,
columns eight through eleven are output if gene annotations or known SNP information
is given to the GS Reference Mapper (or the fd option is given), and the rest are output
only if the fd option is given to the GS Reference Mapper. The summary lines contain
the following columns:

( The accession number of the reference sequence in which the difference was
detected
) The start position within the reference sequence, where the difference occurs
* The end position within the reference sequence, where the difference occurs
+ The reference nucleotide sequence at the difference location
, The differing nucleotide sequence at the difference location
- The total number of reads that fully span the difference location
. The percentage of different reads versus total reads that fully span the difference
location
/ The reference amino acid sequence at the difference location, if it occurs within the
coding region of an annotated gene
0 The differing amino acid sequence at the difference location, if it occurs within the
coding region of an annotated gene
(1 The gene name at the difference location, if it occurs with the region of an annotated
gene
(( The list of known SNP IDs that occur at the difference location
() The number of forward reads that include the difference
(* The number of reverse reads that include the difference
(+ The total number of forward reads that fully span the difference location
(, The total number of reverse reads that fully span the difference location
?

P. 197
The multiple alignment for a difference shows the difference location plus approximately
30 bases on either side. The alignment is divided into two sections, the first section
displaying the reads found to contain the difference and the second, the reads not found
to have the difference. Each line of the alignment displays the following information for
a read:

( The identifier for the read
) The number of duplicate reads whose alignment matches this read (when there are
duplicates of the read)
* The position of the reads first base displayed in the alignment region
+ The orientation of the read in the displayed alignment (+ is forward orientation, -
is reverse-complement orientation)
, The aligned bases of the read
- The position of the reads last base displayed in the alignment region
?
6.4.2.6 454HCDiffs.txt
This file contains the same type of information as the 454AllDiffs.txt file (section 6.4.2.5,
above), but restricted to the High-Confidence differences. The GS Reference Mapper
application uses a combination of flow signal information, quality score information and
difference type information to determine if a difference is High-Confidence. The general
rules are:
    -   There must be at least 3 non-duplicate reads with the difference, unless the e option
is specified, in which case there must be 10% of the expected depth having the
difference
    -   There must be both forward and reverse reads showing the difference, unless there are
a at least 5 reads with quality scores over 20 (or 30 if the difference involves a 5-mer or
higher)
    -   If the difference is a single-base overcall or undercall, then the reads with the
difference must form the consensus of the sequenced reads (i.e., at that location, the
overall consensus must differ from the reference) and the signal distribution of the
differing reads must vary from the matching reads (and the number of bases in that
homopolymer of the reference).



RE: 454 Off Instrument Applications -- SNP pipeline and .ace file options?
Boese, Benjamin [benjamin.boese@roche.com]
Sent: 	Monday, January 12, 2009 9:34 PM
To: 	
Young, Stuart
Attachments: 	

Hi Stewart,

The details of our variant calling methods is outlined in our software data analysis manual in Section 6 (page 147) for GS Reference Mapper Application.  Specifically you should refer to section 6.4.2.5  .6.  These sections detail the parameters used to place a variant in the AllDiffs or HCDiffs (High Confidence diffs).  The algorithms take into account some of the known characteristics of our platform to provide the highest confidence variant calls.  In some cases you may be able to interpret the data in the AllDiffs file if you are looking for particular patterns.  The AllDiffs variants that are not in the HCDiffs file may be accurate, but merely lack sufficient depth of coverage to make the variant call with confidence.

Homopolymer errors are quite a challenge to deal with because of the variety of ways that you can align them to the reference.  The quality scores should help you interpret the results as well as looking at the multiple alignments.  In many cases the alignment can be confirmed or corrected by human analysis but these types of errors arent very common within most regions of interest for SNP calling so I wouldnt anticipate that to be a major issue for your analysis.  If we identify a particularly challenging region then we can work with you to develop a method of interpreting the data to make the appropriate calls.

I have a feeling that your flat ACE file is an artifact of using the FASTA files as input for our assembler but will have to check on this with our software group.  Our mapper uses some of the meta information associated with the sequencing run from the SFF files to make the quality score calls.  Basically it incorporates the raw signal data into the quality calculation.  Im not sure, but I believe that the software makes an assumption that FASTA reads are of Q30 in all cases as this is typically Sanger data.  There may be some comment about this in the data analysis manual.

Once you get the SFF files I think the analysis will look slightly different though I have had difficulty finding viewer software that makes it easy to view alignments to the whole human genome.

One thing I did notice is that you used the CCDS reference.  I recommend using the GoldenPath reference data set from UCSC.  Our software can use the GoldenPath reference and annotation data to highlight known SNPs and genes in the GS Mapper output.  The data at UCSC and NCBI should be synchronized so you are working off of essentially the same data set.  Details on setting up Mapper to use this information can also be found in the software manual section on mapper. 

I hope this points you in the right direction.  Let me know if you have any questions or need anything else.

 

Best regards,

Ben


</entry>



<entry [Mon Jan 12 15:04:14 EST 2009] MESSAGE STEPHAN ON WHOLE GENOME REFERENCE MAPPING AND SNP OUTPUT OF GS MAPPER>



---------------
NB: Extracted summary lines from *Diffs.txt files:

cd /home/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping

grep ">" 454AllDiffs.txt > 454AllDiffs-headers.txt 
grep ">" 454HCDiffs.txt > 454HCDiffs-headers.txt 

The non-summary *Diffs.txt file lines contain the following info:

* The accession number of the reference sequence in which the difference was
detected
+   The start and stop position within the reference sequence
,   The reference sequence at the difference location
-   The differing sequence at the difference location
.   The number of forward reads that include the difference
/   The number of reverse reads that include the difference
0   The total number of reads that include the difference
1   The total number of reads that fully span the difference location
2   The percentage of different reads versus total reads that fully span the difference location
?   The multiple alignment for a difference shows the difference location plus approximately
30   bases on either side. The alignment is divided into two sections, the first section displaying
the reads found to contain the difference and the second, the reads not found to
have the difference. Each line of the alignment displays the following information for a
read:
*   The identifier for the read
+   The number of duplicate reads whose alignment matches this read (when there are
duplicates of the read)
,   The position of the reads first base displayed in the alignment region
-   The orientation of the read in the displayed alignment (+ is forward orientation, -
is reverse-complement orientation)
.   The aligned bases of the read
/   The position of the reads last base displayed in the alignment region
---------------


Hi Stephan,

Im running GS Mapper using the whole genome as the reference sequence, putting the output into one single .ace file for the whole genome and also individual .ace files for each chromosome.

As a rough estimate, it'll take 24 hours. Ill let you know as soon as its done.

Regarding SNP detection, the '454HCDiffs.txt' file in the 'mappings' directory contains 'high confidence differences':

    - at any particular location, at least 3 reads differ either from the reference sequence or from other aligned reads
    - at least one aligned in the forward direction and at least one aligned in the reverse direction
    - includes SNPs, insertion-deletion pairs, and multi-homopolymer insertion or deletion regions
    - differing reads must have at least 5 bases on both sides of the difference, and have few other isolated sequence differences
    - all reads that fully span the difference location and have at least 5 additional flanking nucleotides on both sides are used in reporting the difference

The '454AllDiffs.txt' also contains the same sort of information but is less stringent - only 2 reads have to differ for the difference to be included.

I extracted the summary lines from both the 454HCDiffs.txt and the 455AllDiffs.txt files (see below). The columns are as follows:

    1. The accession number of the reference sequence in which the difference was detected
    2.   The start and stop position within the reference sequence
    3.   The reference sequence at the difference location
    4.   The differing sequence at the difference location
    5.   The total number of reads that include the difference
    6.   The total number of reads that fully span the difference location
    7.   The percentage of different reads versus total reads that fully span the difference location

You can find them here on solexa01:

/home/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping/454HCDiffs-headers.txt
/home/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping/454AllDiffs-headers.txt


Here's a sample from the 454HCDiffs-headers.txt file:

    >Reference      Start   End     Ref     Var     Total   Var
    >Accno           Pos    Pos     Nuc     Nuc     Depth   Freq
    >CCDS3.1|Hs36.3|chr1    778     783     CTGGTG  GTGCTAT 5       60%
    >CCDS3.1|Hs36.3|chr1    1016    1016    C       T       4       100%
    >CCDS3.1|Hs36.3|chr1    1078    1078    T       C       4       100%
    >CCDS3.1|Hs36.3|chr1    1084    1084    T       C       4       100%
    >CCDS3.1|Hs36.3|chr1    1102    1102    C       T       4       100%
    >CCDS3.1|Hs36.3|chr1    1166    1166    G       A       5       80%
    >CCDS3.1|Hs36.3|chr1    1182    1182    T       C       5       100%
    >CCDS3.1|Hs36.3|chr1    1359    1359    G       A       6       100%
    >CCDS3.1|Hs36.3|chr1    1422    1422    G       A       7       100%
    >CCDS3.1|Hs36.3|chr1    1466    1466    A       G       5       80%
    >CCDS3.1|Hs36.3|chr1    1791    1791    G       C       7       71%
    >CCDS3.1|Hs36.3|chr1    1813    1813    G       C       6       83%
    >CCDS3.1|Hs36.3|chr1    1826    1826    G       T       6       83%
    >CCDS3.1|Hs36.3|chr1    1867    1867    C       T       6       83%
    >CCDS3.1|Hs36.3|chr1    1882    1882    C       T       6       83%
    >CCDS3.1|Hs36.3|chr1    1935    1935    C       T       8       62%
    >CCDS3.1|Hs36.3|chr1    1957    1957    A       G       8       62%
    >CCDS3.1|Hs36.3|chr1    2018    2018    C       G       7       71%
    >CCDS3.1|Hs36.3|chr1    2045    2045    C       T       6       83%
    >CCDS3.1|Hs36.3|chr1    2049    2049    G       A       5       80%
    >CCDS3.1|Hs36.3|chr1    2081    2081    A       G       4       75%
    >CCDS4.1|Hs36.3|chr1    1292    1292    -       TGC     5       80%
    >CCDS6.1|Hs36.3|chr1    248     248     G       A       4       100%

And here's a sample from the 454AllDiffs-headers.txt file:

    >Reference      Start   End     Ref     Var     Total   Var
    >Accno           Pos    Pos     Nuc     Nuc     Depth   Freq
    >CCDS3.1|Hs36.3|chr1    100     102     AAT     TAC     2       100%
    >CCDS3.1|Hs36.3|chr1    109     109     C       G       2       100%
    >CCDS3.1|Hs36.3|chr1    120     120     A       G       2       100%
    >CCDS3.1|Hs36.3|chr1    126     126     A       G       2       100%
    >CCDS3.1|Hs36.3|chr1    154     154     A       G       2       100%
    >CCDS3.1|Hs36.3|chr1    213     213     C       T       8       25%
    >CCDS3.1|Hs36.3|chr1    491     491     G       A       4       50%
    >CCDS3.1|Hs36.3|chr1    528     528     G       A       4       50%
    >CCDS3.1|Hs36.3|chr1    532     532     C       G       4       50%
    >CCDS3.1|Hs36.3|chr1    680     680     T       C       2       100%
    >CCDS3.1|Hs36.3|chr1    690     690     T       C       2       100%
    >CCDS3.1|Hs36.3|chr1    706     706     C       T       6       33%
    >CCDS3.1|Hs36.3|chr1    722     722     C       G       6       33%
    >CCDS3.1|Hs36.3|chr1    738     740     TCG     CCA     6       33%
    >CCDS3.1|Hs36.3|chr1    756     756     T       G       6       33%
    >CCDS3.1|Hs36.3|chr1    770     770     C       T       6       33%
    >CCDS3.1|Hs36.3|chr1    778     783     CTGGTG  GTGCTAT 5       60%
    >CCDS3.1|Hs36.3|chr1    790     791     CT      -       5       40%
    >CCDS3.1|Hs36.3|chr1    794     795     CG      GGCA    5       40%
    >CCDS3.1|Hs36.3|chr1    803     803     C       T       5       40%

Should I extract all the SNPs from one of these files as our base input into our SNP-calling pipeline?

By the way, I've requested the SFF files (the actual sequencing output files) for further analysis - Ximing should hopefully be Fedexing it to you.

Cheers,

Stuart.












From: Stephan Zuchner [mailto:SZuchner@med.miami.edu] 
Sent: Monday, January 12, 2009 8:23 AM
To: Young, Stuart
Cc: Hedges, Dale; Khuri, Sawsan; Huang, Jia; Hoffman, Josh D
Subject: Re: Whole genome ace file output from GS Mapper (Nimblegen demo data)

Import into CLC is not a problem but what inoticed is that it is all chopped up into single CCDC contigs each representing a gene. Did you do alignment against all CCDS files? It would be good to use the whole chromosome as refernece file and then let the mapper figure out where the stuff is placed. This also should preserve genomic coordinates, (they seem lost right now?). 
Did you have a chance to look at the SNP detection functions in GSmapper?

How can we use GS mapper down here at SC ?

Thanks,

Stephan



</entry>



<entry [Mon Jan 12 15:03:51 EST 2009] GS MAPPER OPTIONS AND OUTPUT FILES>



runMapping OPTIONS
------------------

FROM: GS_FLX_Software_Manual.pdf

runMapping
Complete set of mapping algorithms, whereby the read fl owgrams of one
or more sequencing Runs are mapped to the reference sequence(s)
contained in a single FASTA file, resulting in a final consensus sequence
of the sample DNA library, and a list of differences with the reference
sequence(s) (mutations). (See the third Note, below.)

1. COMMON OPTIONS

There are a large number of command-line options to this command, only a subset of
which are commonly used or important. The following are the most common commandline
arguments:
Option Description
[-nrm]
An option to allow the mapping results to be used for further projectbased
mapping, by not removing the project files and folders at the
end of the mapping processing (as described in section 6.3.2; see also
the first Note below)
[-o dir]
An option to specify the directory where all the output files should
be written. If this option is omitted, the program will generate the P_
directory in the current working directory at the time the command is
launched.
[-v fastafile]
This option gives a vector database, or FASTA file of sequences to
be used to screen the input reads and to trim the ends of input reads.
[-no]
With the no output option, the program will perform all the mapping
of the reads to the reference, but will not generate consensus/contig
output. This is useful to avoid wasting computing time, e.g. when the
user knows that more Runs will be added to the project. (However,
the project and alignment metrics are still output.)
[-noace] With this option, the ACE file is not generated.
[-ace]
With this option, the command generates a single ACE file containing
the mapping of all the reads and contigs to the reference sequence(s).
[-acedir]
With this option, the command generates an ace sub-directory
containing a separate ACE file for each sequence in the reference(s)
(see Figure 16).
[-consed]
With this option, the command generates a consed sub-directory
containing all the directories and files needed to run the consed
application on the results of the mapping (see Figure 16).
[-pair]
This option outputs the pairwise overlaps used in the mapping, in
simple text format. By default, these alignments are not output.
[-pairt]
This option outputs the pairwise overlaps used in the mapping, in
tab-delimited format. By default, these alignments are not output.
[-p (sfffilename or
[regionlist:]datadir)]
An option to specify that the SFF file or Data Analysis folder whose path
immediately follows contains the results of a Paired End sequencing Run,
to be used to order and orient the contigs of the Shotgun sequencing
Run(s) (if present). Multiple Paired End Runs may be included in the
Analysis but each must be preceded by the -p option tag to be specified
as such; all Runs whose reference is not preceded by p will be determined
as being Paired End or Shotgun sequencing Runs, by virtue
of the presence or absence of the Paired End linker sequence in the
read data they contain. The details for Shotgun Run datasets (below)
also apply to Paired End Run datasets.


reffastafile

Path to a single FASTA file containing the reference sequence(s) to
which the input reads will be mapped. (See the fourth Note, below.)
[MIDList@]
(sfffile or
[regionlist:]datadir or
readfastafile)

Path to an SFF file or to a Data Analysis folder containing the results
of a Shotgun sequencing Run, created by the Image Processing and
Signal Processing applications (either on a Genome Sequencer FLX
Instrument or on a DataRig), and containing the SFF files for the
regions of the sequencing Run (in the sff sub-folder; see Figure 12).
There can be any number of SFF files and/or Data Analysis folders
given as argument (and thus included in the mapping), an optional
list of regions may be prepended to each data directory argument (see
the second Note below), and an optional multiplexing infor mation
string can be prepended to each file/data-directory argument (see
the third Note below). [If SFF files are not present in a Data Analysis
folder (e.g. for a Run whose data has been processed with a version
of the Genome Sequencer System software anterior to 1.0.52), the
runMapping command will invoke the sffcall command to generate
them on-the-fl y.]
Alternatively, path to a FASTA file containing Sanger reads to be
included in the mapping. These reads must be shorter than 2000
bases (longer sequences are ignored) and longer than 50 bases
(shorter sequences are ignored). See section 13.2 for input FASTA file
format requirements.



2. OUTPUT OPTIONS

A second set of arguments are less commonly used, but are useful to configure the output
generated by the command or to adjust the execution of the computation:
Option Description
[-a #]
This option sets the minimum length for a contig to appear in the
454AllContigs.fna file. The default is 100 bases.
[-ar]
An option telling the mapper to output the full raw read sequence
when generating an ACE file or consed folder.
[-at]
An option telling the mapper to output only the trimmed sequences
for each read when generating an ACE file or consed folder.
[-l #]
This option sets the minimum length for a contig to appear in the
454LargeContigs.fna file. The default is 500 bases.
[-m]
An option telling the mapper to keep all sequence data in memory
throughout the computation. This option can speed up the execution
of the mapper, but requires the use of more computer memory.
[-mcf filename]
This option specifies a different MID configuration file to be used by
the mapper for decoding the multiplex information appearing on the
command-line.
[-nobig]
This option turns off the generation of the big output files, namely the
ACE/consed files, the 454PairAlign.txt file and the 454AlignmentInfo.tsv
file.
[-nor]
This option turns off the automatic rescore function that generates
new quality scores for each SFF read using the new quality score
algorithms.
[-ud]
An option telling the mapper to treat each read as a separate read, and
not group them into duplicates for variation detection or consensus
calling.


3. MAPPING ALGORITHM OPTIONS

A final set of options exist, that can be used to adjust the mapping algorithm para meters
(equivalent to the Parameter tab settings in the GUI), or minor options that are more
rarely used. See section 6.2.4 for a more complete description of the Parameter tab settings.
The mapping computation has been optimized to give its best results using the default
parameters, but these are provided for users who wish to experiment with adjusting
parameters for their data sets.
Option Description
[-ais] This option sets the Alignment identity score parameter.
[-ads] This option sets the Alignment difference score parameter.
[-hll] This option sets the Hit location limit parameter.
[-hsl] This option sets the Hit-per-seed limit parameter.
[-mi] This option sets the Minimum overlap identity parameter.
[-ml] This option sets the Minimum overlap length parameter.
[-rst] This option sets the Repeat score threshold parameter.
[-sl] This option sets the Seed length parameter.
[-ss] This option sets the Seed step parameter.


runMapping OUTPUT FILES
-----------------------

GS Reference Mapper Output Files (runMapping and
newMapping)

The GS Reference Mapper application creates the files listed in Table 61 (except when
the runMapRegions and runMapTitration are used; for these special cases, see section
6.5 and the output file listings in Figure 17 and Figure 18). Each time a mapping
computation is carried out (no matter how many sequencing Runs or analysis regions are
included), the files produced will have the names shown in Table 61, with the exception
of the *.ace files (if individual, per reference sequence; see section 6.4.2.14) and the files
in the sff subdirectory (see section 6.4.2.15, below). You can view the output files from
the sample datasets provided in the accompanying DVD, some using the GS Run browser
application.

File Name Structure Definition
454AllContigs.fna

FASTA file of all the consensus basecalled contigs longer than 100
bases.

454AllContigs.qual
Corresponding Phred-equivalent quality scores for each base in
the consensus contigs in 454AllContigs.fna.

454LargeContigs.fna
FASTA file of all the large consensus basecalled contigs contained
in 454AllContigs.fna. What constitutes a large contig is
currently set to 500 bp.

454LargeContigs.qual
Corresponding Phred-equivalent quality scores for each base in
the large consensus contigs in 454LargeContigs.fna.

454AllDiffs.txt
Text file listing all the differences between the reference
sequence(s) and the reads included in the mapping, including a
display of the multiple alignments of the differences and frequency
statistics for each difference.

454HCDiffs.txt
Text file containing only the high-quality differences between the
reference sequence(s) and the reads, including a display of the
multiple alignment of the differences and frequency statistics for
each of these differences.

454NewblerMetrics.txt
File providing the summary metrics for the mapping computation,
including the number of input Runs and reads, the number
and size of the large consensus contigs and the number of all
consensus contigs.

454NewblerProgress.txt
A text log of the messages sent to standard output during the
mapping computation.

454MappingQC.xls
A tab-delimited text file, suitable for import into MS Excel, containing
detailed metrics about the mapping (see below).

454AlignmentInfo.tsv
Tab-delimited file giving position-by-position reference vs. consensus
information.

454PairAlign.txt
A text file giving the pairwise alignment(s) found for each read
mapped (only produced when using the p option [or pt option
for the tab-delimited version of the file]).

454ReadStatus.txt
A tab-delimited text file providing a per-read report of the status
of each read in the mapping.

454RefStatus.txt
A tab-delimited text file giving the mapping results for each of the
sequences in the reference that had one or more reads mapping
to them. This is useful e.g. when mapping survey or metagenomic
sequences against a sequence database.



454AllDiffs.txt
---------------

This file contains the list of variations where at least 2 reads differ either from the reference
sequence or from other reads aligned at a specific location. Only local differences that
involve more than one homopolymer (SNPs, insertion-deletion pairs, and multi-homopolymer
insertion or deletion regions) are reported. Individual, single-read overcalls and
undercalls are not reported. Also, in order for a difference to be identified and reported,
there must be at least two non-duplicate reads that (1) show the difference, (2) have at
least 5 bases on both sides of the difference, and (3) have few other isolated sequence differences
in the read. Once the difference is identified, all reads that fully span the difference
location and have at least 5 additional fl anking nucleotides on both sides are used in
reporting the difference. For a sample 454AllDiffs.txt file, see section 13.4.8.
The file consists of one tab-delimited summary line for each difference, plus a multiple
alignment of the reads spanning the difference location. Each of the difference summary
lines begin with a > character, so the summary list of differences can be extracted from
the file using the command fgrep > 454AllDiffs.txt; these summary lines contain the
following columns:
* The accession number of the reference sequence in which the difference was
detected
+ The start and stop position within the reference sequence
, The reference sequence at the difference location
- The differing sequence at the difference location
. The number of forward reads that include the difference
/ The number of reverse reads that include the difference
0 The total number of reads that include the difference
1 The total number of reads that fully span the difference location
2 The percentage of different reads versus total reads that fully span the difference
location
?
The multiple alignment for a difference shows the difference location plus approximately
30 bases on either side. The alignment is divided into two sections, the first section displaying
the reads found to contain the difference and the second, the reads not found to
have the difference. Each line of the alignment displays the following information for a
read:
* The identifier for the read
+ The number of duplicate reads whose alignment matches this read (when there are
duplicates of the read)
, The position of the reads first base displayed in the alignment region
- The orientation of the read in the displayed alignment (+ is forward orientation, -
is reverse-complement orientation)
. The aligned bases of the read
/ The position of the reads last base displayed in the alignment region


cd /home/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping
head -n 50 454AllDiffs.txt 

    >Reference      Start   End     Ref     Var     Total   Var
    >Accno           Pos    Pos     Nuc     Nuc     Depth   Freq
    ______________________________
    
    >CCDS3.1|Hs36.3|chr1    100     102     AAT     TAC     2       100%
    
    Reads with Difference:
    CCDS3.1|Hs36.3|              70+ TTTGACTCCGAGTCCGAATCCGAGTCCGAA-A-ATTCTCCA-CAAGCGGAGAC-ACGGGAAG-CA 129
                                                                   ******
    FLTZPLR02SBN58  (3)          55+                       AGTCCGAATAC-T-CTCCAG-AAGCGGAGACG-CGGGA-GGCA 92
    FLR2L3302PODX9  (2)         147+                       AGTCCGAATAC-T-CTCCAG-AAGCGGAGACG-CGGGA-GGCA 184
                                                                   ******
    
    Other Reads:
    
    
    -----------------------------
    
    >CCDS3.1|Hs36.3|chr1    109     109     C       G       2       100%
    
    Reads with Difference:
    CCDS3.1|Hs36.3|              81+ GTCCGAATCCGAGTCCGAA-A-ATTCTCCA-CAAGCGGAGAC-ACGGGAAG-CACGCGAGG 136
                                                                   **
    FLTZPLR02SBN58  (3)          55+            AGTCCGAATAC-T-CTCCAG-AAGCGGAGACG-CGGGA-GGCACGCGAGG 99
    FLR2L3302PODX9  (2)         147+            AGTCCGAATAC-T-CTCCAG-AAGCGGAGACG-CGGGA-GGCACGCGAGG 191
                                                                   **
    
    Other Reads:
    
    
    -----------------------------
    
    >CCDS3.1|Hs36.3|chr1    120     120     A       G       2       100%
    
    Reads with Difference:
    CCDS3.1|Hs36.3|              93+ GTCCGAA-A-ATTCTCCA-CAAGCGGAGAC-ACGGGAAG-CACGCGAGGCTGCCCGGAGTCC 149
                                                                   **
    FLTZPLR02SBN58  (3)          56+ GTCCGAATAC-T-CTCCAG-AAGCGGAGACG-CGGGA-GGCACGCGAGGCTGCCCGGAGTCC 112
    FLR2L3302PODX9  (2)         148+ GTCCGAATAC-T-CTCCAG-AAGCGGAGACG-CGGGA-GGCACGCGAGGCTGCCCGGAGTCC 204
                                                                   **
    
    Other Reads:
    


6.4.2.6 454HCDiffs.txt
----------------------

This file contains the same type of information as the 454AllDiffs.txt file (section 6.4.2.5,
above), but restricted to the High-Confidence differences. A difference is considered
High-Confidence if at least 3 reads match the conditions listed in the previous section,
with at least one aligned in the forward direction and at least one aligned in the reverse
direction.


cd /home/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping
head -n 50 454HCDiffs.txt 


    >Reference      Start   End     Ref     Var     Total   Var
    >Accno           Pos    Pos     Nuc     Nuc     Depth   Freq
    ______________________________
    
    >CCDS3.1|Hs36.3|chr1    778     783     CTGGTG  GTGCTAT 5       60%
    
    Reads with Difference:
    CCDS3.1|Hs36.3|             749+ TCAAGGC-TTACCTGGGCTCGG-CCATACAG---CT-GGTGTCCTGTCTGTCGG---AGACGA-CGGTGTT 809
                                                                    **********
    FLR2L3301DAK1R              181- TCAAGGC-TTACCTGGGCTCGG-CCATACAGGTGCTA--T-TC-TG                          142
    FLR2L3302PVHS7              241+ TCAAGGC-TTACCTGGGCTCGG-CCATACAGGTGCTA--T-TC-TG                          280
    FLR2L3302TFNTY              147- TCAAGGC-TTACCTGGGCTCGG-CCATACAGGTGCTA--T-TC-TG                          108
                                                                    **********
    
    Other Reads:
                                                                    **********
    FLTZPLR02RGPRK              156- TCAAGGCGT-ACCTGGGCTCGGTC-ATACAG---CTAG-TGTCCTGT--GT-GGCAGAGACGAT-GGTGTT 96
    FLR2L3301DQC1I              116+ TCAAGGCGT-ACCTGGGCTCGGTC-ATACAG---CTAG-TGTCCTGT--GT-GGCAGAGACGAT-GGTGTT 176
                                                                    **********





6.4.2.9 454MappingQC.xls
------------------------

This file contains a number of detailed metrics regarding the mapping results; its format
and structure are intended for reading by MS Excel or a similar spreadsheet program, so
that the metrics can be easily visualized using Excels charting/graphing tools. The file is in
tab-delimited format, and contains six main sections (Note: The section titles given here
are not displayed in the file.)

Quality Score Information

a. Predicted Score  The quality score values, from 0 to 60
b. Observed Quality  The observed quality score obtained from the read alignments
(computed as Observed Num. Errors over Num. Bases With Score values, see
below)
c. Observed Accuracy  The observed quality score expressed as an accuracy
percentage
d. Num. Bases With Score  the number of mapped bases having the Predicted Score
(only mapped bases are used, because they can be evaluated for accuracy)
e. Expected Num. Errors  the expected number of errors for a quality score, given the
number of mapped bases with that quality score
f. Observed Num. Errors  the number of bases which did not match in the read
alignment (i.e. the alignment column containing that base was not an identity)


6.4.2.14 454Contigs.ace
-----------------------

This viewer-ready genome file shows all the sequences in the reference and allows the display
of how the reads and contigs aligned to those sequences, in an ACE format file suitable for use
in various third-party sequence finishing programs. (The freeware clview application can
be downloaded from: http://www.tigr.org/tdb/tgi/software/; a full description of the .ace
file format can be found at: http://bozeman.mbt.washington.edu/consed/consed.html.) It
should be noted, however, that such third-party viewing software will not be able to make
full use of the fl owspace assembly information available with Genome Sequencer reads,
and that conversely some of the third-party programs functions (e.g. involving sequence
chromatogram input) are not usable with Genome Sequencer datasets. Nonetheless, these
programs may be useful to view and assess read characteristics and coverage depth in
regions of interest.
The number of ACE files generated during a mapping computation is determined by
which ACE option is checked, as described in sections 6.2.4 (for project-based mapping)
and 6.3.2.5 (for mapping carried out from the command-line).
The GS Reference Mapper application can also output the mapping results in a complete
directory structure suitable for use as input to the consed software (see the above link
for a description of this structure and its files). When the appropriate option is selected,
a consed sub-directory is produced in the output (or project) directory. This directory
contains the sub-directories, the ACE file and the PHD file, so that the functions of consed
(viewing traces, editing reads, autofinishing) can be performed on the mapping results. In
order to integrate the 454 Sequencing reads (and their SFF files) into the consed data, an
extra sff_dir directory is created in the consed sub-directory, and a number of consed
options are automatically specified in this directory (see the consed/edit_dir/.consedrc
file for the options specified by the generated structure). One option tells consed to use the
sff2scf command to access any trace information requested by a user. See Section 7.4 for
a description of the sff2scf command, and how it can generate synthetic traces from SFF
data, as well as provide a pass-through access to SCF data for Sanger reads.
The structure of the ACE file produced by the GS Reference Mapper application
differs from the traditional assembly ACE files, because it is displaying the
sequence information within the context of the given reference sequence(s). Each
individual sequence in the reference is output as a contig in the ACE file (so that
the alignments of the 454 reads to each reference sequence can be viewed relative
to the reference sequence bases in the contig alignment viewers that most thirdparty
ACE file viewers contain). The 454 reads, as well as the contigs generated by
the GS Reference Mapper application, are output in the ACE file as reads, again
to organize all the data relative to the reference.
6.4.2.15 sff/sfffilename
The SFF files used for mapping are the same as for assembly. See section 5.4.2.12


5.4.2.12 sff/sfffilename
------------------------


The files in the sff sub-directory of the GS De Novo Assembler applications output
directory are the files used as input for the assembly computation. They are constructed
as the application processes the command-line arguments (or their equivalent GUI
parameters). The conversion of each command-line argument into SFF files in this
directory occurs in one of three ways:

if the command-line argument gives the path to an SFF file, that is the file to use

if the command-line argument specifies a data directory in which the SFF files exist,
then the files in the sff sub-directory of the data directory (possibly restricted to the
regions given in the optional region list) are the files to use

if the command-line argument specifies a data directory without SFF files, then the
sffcall command is used to generate new SFF files for the high quality reads of the
sequencing Run (possibly restricted to the regions given in the optional region list).
This sff sub-directory in the assembly output (inside the P_ directory; see Figure 13)
provides a consistent place for users to access the input used by the GS De Novo Assembler
application, independent of which method is used to specify the files, as well as a place to
store the SFF files generated on-the-fl y by the sffcall command.
The filenames of the SFF files in this sub-directory are assigned by the GS De Novo
Assembler application to ensure uniqueness for all the files, while trying to preserve the
original names when possible.

For SFF files explicitly specified on the command-line, the software uses the original
filename of the file except when there are duplicate filenames, in which case a
numerical suffix is added to names found to be duplicates (e.g. if the command line is
runAssembly dir1/454Reads.sff dir2/454Reads.sff dir3/454Reads.sff, the assembler
will name the first 454Reads.sff, the second 454Reads.sff.1 and the third 454Reads.
sff.2).

For data directory arguments on the command-line, the software relies on the universal
accession naming convention to ensure uniqueness of the filenames. In fact, it reports
an error if duplicate filenames are found, because the most common cause of that is
when two different Signal Processing analyses from the same sequencing Run are given
as input to the GS De Novo Assembler application, which assumes that each read is an
independent sequence.


</entry>



<entry [Mon Jan 12 14:40:49 EST 2009] GS MAPPER SNP OUTPUT AND FLOW ORDER>



http://seqanswers.com/forums/showthread.php?t=1009

GS MAPPER SNP OUTPUT

    ... For SNPs, gsMapper provides the proper SNPs information in another file. 
    "454HCDiffs.txt", meaning 454 high confidence difference files for all the SNPs and mutations. In this file, the flow splace is converted into base space, and C -> G mutation would be there in one row. This is obviously post-ace processing result.
    
    You might want to look deeper into this file for mutations.
    
    BTW, assembly results are not well prepared for calling mutations. If you want mutation, you want to run gsMapper using a reference, or using assembled-contig as reference. That way, you can get "454HCDiffs.txt" file, which has all the relavent SNPs and mutations.
    
    There is another file, called "454AllDiffs.txt", which even includes all the low confident SNPs/mutations from gsMapper result.

FLOW ORDER IN ACE FILE


    I think I get what you're saying:
    So, where there's a base mismatch between reads in an alignment, the ace file representation retains the original flow space order ... i.e. in my original example, fluorophore-tagged G's were flowed over the slide before tagged C's? So theoretically I should be able to see the order of the cycle of bases by looking over my alignments ... as in (for example) I might always see "a*" on top of "*g", and "g*" on top of "*c", and "c*" on top of "*t" ... which would mean that the sequencer flows in a's, g's, c's, t's, and repeats ... (if I follow my own logic correctly)?
    Thanks for your comments!
    
    I think you got it.
    
    I don't have record on hand on the flow order. But each colume of newbler ace file alignment is unique fluorophore-tagged base. 454 has 4 bases in 1 cycle for the flow order.
    
    Newbler does not want to change that flow order information because the basic information is flow based. The base level display is only for human eye, and I believe the software everything is based on raw signal in flow for all the calculation.
    





</entry>



<entry [Fri Jan  9 23:48:24 EST 2009] RUN GS MAPPER ASSEMBLY USING INDIVIDUAL CHROMOSOMES AND WHOLE GENOME AS REFERENCE>



1. USE hg18 FROM UCSC (CORRESPONDS TO NCBI36) CHROMOSOMES

    GENOME RELEASE MAPPINGS
    
    Mar 2006 assembly = hg18 = NCBI36.
    May 2004 assembly = hg17 = NCBI35.
    July 2003 assembly = hg16 = NCBI34.
    
    FROM: Genome Builds
    All genomes are in different states of completion
    Gaps are being filled, corrections are being made
    New techniques or ideas for improvements to assemblies
    http://74.125.47.132/search?q=cache:9ZObLte2jxEJ:www.hsl.unc.edu/bioinformatics/ClassMaterials/Ensembl_Intro_A.pdf+HG18+NCBI36&hl=en&ct=clnk&cd=2&gl=us
    
    Mar 2006 assembly = hg18 = NCBI36.
    May 2004 assembly = hg17 = NCBI35.
    July 2003 assembly = hg16 = NCBI34.


   DOWNLOAD INFORMATION:

    FROM:
    /home/syoung/base/pipeline/human-genome/download_notes.txt
    Thu Jul 17 20:31:33 EDT 2008
    TIMED RUNS USING ONE LANE OF human1 DATA (LANE 3)

    4. DOWNLOAD LATEST VERSION OF HUMAN GENOME FROM UCSC
    ftp://ftp.hgc.jp/pub/mirror/ucsc/goldenPath/hg18/chromosomes/
    wget ftp://ftp.hgc.jp/pub/mirror/ucsc/goldenPath/hg18/chromosomes/chrY.fa.gz
        NB: THE NCBI VERSION ONLY HAS CONTIGS, DOES NOT HAVE ONE CONTINUOUS CHROMOSOME
        ftp://ftp.ncbi.nih.gov/genomes/MapView/Homo_sapiens/sequence/BUILD.36.3/initial_release/
        UNZIP FILES:
        gunzip *.gz
    
        MERGE INTO SINGLE FILE
        cat chr1.fa chr2.fa   chr3.fa  chr4.fa  chr5.fa  chr6.fa  chr7.fa  chr8.fa  chr9.fa  chr10.fa  chr11.fa  chr12.fa  chr13.fa  chr14.fa  chr15.fa  chr16.fa  chr17.fa  chr18.fa\
      chr19.fa  chr20.fa  chr21.fa  chr22.fa  chrX.fa chrY.fa > human.fasta

    
cd /home/syoung/base/pipeline/human-genome
ls -t *.fa
    genome.fa
    chrX.fa
    chrY.fa
    chr1.fa
    chr11.fa
    chr12.fa
    chr13.fa
    chr14.fa
    chr15.fa
    chr16.fa
    chr17.fa
    chr18.fa
    chr19.fa
    chr20.fa
    chr21.fa
    chr22.fa
    chr2.fa
    chr3.fa
    chr4.fa
    chr5.fa
    chr6.fa
    chr7.fa
    chr8.fa
    chr9.fa
    chr10.fa


2. RUN runMapping (ONE .ace FILE FOR WHOLE HUMAN GENOME)

cd /home/syoung/base/pipeline/nimblegen-gsmapper
screen -S gsmapper-genome

time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o /home/syoung/base/pipeline/nimblegen-gsmapper/genome \
-nrm -ref /home/syoung/base/pipeline/human-genome/genome.fa \
-read /home/syoung/base/pipeline/nimblegen-gsmapper/run1-1.TCA.454Reads.fna /home/syoung/base/pipeline/nimblegen-gsmapper/run\
1-2.TCA.454Reads.fna /home/syoung/base/pipeline/nimblegen-gsmapper/run2-1.TCA.454Reads.fna /home/syoung/base/pipeline/nimblegen-gsmapper/run2-2.TCA.454Reads.fna

    Initialized mapping project directory /home/syoung/base/pipeline/nimblegen-gsmapper/genome
    1 reference files successfully added.
        human.fasta
    4 read files successfully added.
        run1-1.TCA.454Reads.fna
        run1-2.TCA.454Reads.fna
        run2-1.TCA.454Reads.fna
        run2-2.TCA.454Reads.fna
    Mapping computation starting at: Mon Jan 12 14:12:41 2009  (v2.0.00.20)
    Reading reference file human.fasta...
    Indexing run1-1.TCA.454Reads.fna...
      -> 614394 reads, 198631473 bases.
    Indexing run1-2.TCA.454Reads.fna...
      -> 567308 reads, 174940162 bases.
    Indexing run2-1.TCA.454Reads.fna...
      -> 593630 reads, 173213486 bases.
    Indexing run2-2.TCA.454Reads.fna...
      -> 630990 reads, 195868146 bases.
    Setting up overlap detection...
    Building a tree for 238167332 seeds...
    Mapping reads...
      -> 2305538 of 2305538
    Computing signals...
      -> 3080419480 of 3080419480...
    Generating output...
      -> 3085985914 of 3085985914...
    Mapping computation succeeded at: Mon Jan 12 23:15:51 2009
    
    real    543m12.093s
    user    360m34.637s
    sys     8m57.329s
    



3. RUN runMapping (ONE .ace FILE FOR EACH CHROMOSOME)

cd /home/syoung/base/pipeline/nimblegen-gsmapper
screen -S gsmapper-chromosomes

time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -acedir -o /home/syoung/base/pipeline/nimblegen-gsmapper/chromosomes \
-nrm -ref /home/syoung/base/pipeline/human-genome/genome.fa \
-read /home/syoung/base/pipeline/nimblegen-gsmapper/run1-1.TCA.454Reads.fna /home/syoung/base/pipeline/nimblegen-gsmapper/run\
1-2.TCA.454Reads.fna /home/syoung/base/pipeline/nimblegen-gsmapper/run2-1.TCA.454Reads.fna /home/syoung/base/pipeline/nimblegen-gsmapper/run2-2.TCA.454Reads.fna


    Initialized mapping project directory /home/syoung/base/pipeline/nimblegen-gsmapper/chromosomes
    1 reference files successfully added.
        human.fasta
    4 read files successfully added.
        run1-1.TCA.454Reads.fna
        run1-2.TCA.454Reads.fna
        run2-1.TCA.454Reads.fna
        run2-2.TCA.454Reads.fna
    Mapping computation starting at: Mon Jan 12 14:13:31 2009  (v2.0.00.20)
    Reading reference file human.fasta...
    Indexing run1-1.TCA.454Reads.fna...
      -> 614394 reads, 198631473 bases.
    Indexing run1-2.TCA.454Reads.fna...
      -> 567308 reads, 174940162 bases.
    Indexing run2-1.TCA.454Reads.fna...
      -> 593630 reads, 173213486 bases.
    Indexing run2-2.TCA.454Reads.fna...
      -> 630990 reads, 195868146 bases.
    Setting up overlap detection...
    Building a tree for 238167332 seeds...
    Mapping reads...
      -> 2305538 of 2305538
    Computing signals...
      -> 3080419480 of 3080419480...
    Generating output...
      -> 3085985914 of 3085985914...
    Mapping computation succeeded at: Mon Jan 12 23:15:57 2009
    
    real    542m27.167s
    user    360m34.771s
    sys     9m34.976s





4. WHOLE GENOME RUN STATISTICS


cd /home/syoung/base/pipeline/nimblegen-gsmapper/genome/mapping
records 454LargeContigs.fna
    95108
records 454AllContigs.fna 
    202026

cd /home/syoung/base/pipeline/nimblegen-gsmapper/chromosomes/mapping
records 454LargeContigs.fna
    95108
records 454AllContigs.fna 
    202026


    COMPARED TO RUN STATISTICS USING CCDS TARGET SEQUENCES:
    
    cd /home/syoung/base/pipeline/nimblegen-gsmapper/P_2009_01_09_03_26_14_runMapping/mapping
    
    records 454LargeContigs.fna 
        12888
    records 454AllContigs.fna 
        26563


OVERALL STATS:

cd /home/syoung/base/pipeline/nimblegen-gsmapper/genome/mapping
em 454MappingQC.xls


Num. Reads:     2405723
Num. Bases:     712282210

Mapped Reads:   1946678 80.92%  2247586 93.43%
Mapped Bases:   601493726       84.45%  690126241       96.89%
Inf. Read Error:        4.32%   13.6    25973652        601493726
Exp. Read Error:        0.95%   20.2    5741560

Last 100 Base IRE:      3.24%   14.9    6057184 187055628
Last 50 Base IRE:       4.51%   13.5    4286733 95024239
Last 20 Base IRE:       7.22%   11.4    2685682 37220912

Genom Size:     3080419480
Num. Large Contigs:     95107
Num. Large Contigs Bases:       79769339        2.59%
Avg. Depth:     0.2
Avg. Map Length:        308

Unmapped:       2.41%   57952
Partial:        29.79%  716657
Multiple:       12.51%  300908
10+     49.95%  1201694
9       0.47%   11273
8       0.21%   5031
7       0.11%   2649
6       0.07%   1769
5       0.06%   1391
4       0.06%   1409
3       0.06%   1378
2       0.05%   1299
1       0.06%   1338
0       0.03%   790


COMPARED TO CCDS:
    
    Num. Reads:     2405723
    Num. Bases:     712282210
    
    Mapped Reads:   1200713 49.91%  1475521 61.33%
    Mapped Bases:   173799488       24.40%  267745758       37.59%
    Inf. Read Error:        3.50%   14.6    6089688 173799488
    Exp. Read Error:        0.81%   20.9    1399662
    
    Last 100 Base IRE:      3.58%   14.5    1919243 53609629
    Last 50 Base IRE:       4.44%   13.5    1111174 25033961
    Last 20 Base IRE:       6.42%   11.9    573797  8942603
    
    Genom Size:     32940942
    Num. Large Contigs:     12887
    Num. Large Contigs Bases:       15495805        47.04%
    Avg. Depth:     5.3
    Avg. Map Length:        144
    
    Unmapped:       34.50%  830017
    Partial:        46.58%  1120539
    Multiple:       11.42%  274808
    ...



</entry>



<entry [Sat Jan 10 12:06:21 EST 2009] INSTALLED POLYBAYES (AND PYROBAYES & MOSAIK)>



    SEE Notes-apps-polybayes.txt
    Sat Jan 10 11:50:12 EST 2009
    DOWNLOADED PolyBayes AND RAN DEMO



    


</entry>



<entry [Fri Jan  9 23:48:24 EST 2009] RUN GS MAPPER ASSEMBLY, OUTPUTTING ONE .ace FILE FOR EACH CHROMOSOME>



1. SPLIT CCDS FILE INTO ONE FILE PER CHROMOSOME

./chromosomeCCDS.pl --fastafile /home/syoung/base/pipeline/nimblegen-maq/CCDS_nucleotide.20080430.fa --outputdir /home/syoung/base/pipeline/nimblegen-gsmapper/CCDS-chromosomes

    Output files printed to output directory:
    
    /home/syoung/base/pipeline/nimblegen-gsmapper/CCDS-chromosomes
    
    Run time: 00:00:01
    Completed ./chromosomeCCDS.pl
    0:12AM, 10 January 2009
    ****************************************


2. RUN runMapping ONCE FOR EACH CHROMOSOME

./chromosomeRunMapping.pl --inputdir /home/syoung/base/pipeline/nimblegen-gsmapper/CCDS-chromosomes \
	--outputdir /home/syoung/base/pipeline/nimblegen-gsmapper/acefiles-chromosomes \
    --sequencefiles /home/syoung/base/pipeline/nimblegen-gsmapper/run1-1.TCA.454Reads.fna,/home/syoung/base/pipeline/nimblegen-gsmapper/run1-2.TCA.454Reads.fna,/home/syoung/base/pipeline/nimblegen-gsmapper/run2-1.TCA.454Reads.fna,/home/syoung/base/pipeline/nimblegen-gsmapper/run2-2.TCA.454Reads.fna \
    &> /home/syoung/base/pipeline/nimblegen-gsmapper/acefiles-chromosomes/runMapping-runlog.txt

    TIMING FOR SIX CHROMOSOMES:
    
    Run time: 01:08:24
    Completed ./chromosomeRunMapping.pl
    1:35PM, 10 January 2009
    ****************************************

emacs /home/syoung/base/pipeline/nimblegen-gsmapper/acefiles-chromosomes/runMapping-runlog.txt



</entry>



<entry [Fri Jan  9 23:48:24 EST 2009] RUN GS MAPPER ASSEMBLY, OUTPUTTING ONE .ace FILE FOR THE WHOLE GENOME>



cd /home/syoung/base/pipeline/nimblegen-maq

screen -S gsmapper

time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o acefiles-genome -nrm -ref CCDS_nucleotide.20080430.fa -read run1-1.TCA.454Reads.fna run1-2.TCA.454Reads.fna run2-1.TCA.454Reads.fna run2-2.TCA.454Reads.fna


cd /home/syoung/base/pipeline/nimblegen-gsmapper
screen -S gsmapper
time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -ace -o acefiles-genome -nrm -ref CCDS_nucleotide.20080430.fa -read run1-1.TCA.454Reads.fna run1-2.TCA.454Reads.fna run2-1.TCA.454Reads.fna run2-2.TCA.454Reads.fna

    Created mapping project directory acefiles-genome
    1 reference files successfully added.
        CCDS_nucleotide.20080430.fa
    4 read files successfully added.
        run1-1.TCA.454Reads.fna
        run1-2.TCA.454Reads.fna
        run2-1.TCA.454Reads.fna
        run2-2.TCA.454Reads.fna
    Mapping computation starting at: Fri Jan 9 23:45:49 2009  (v2.0.00.20)
    Reading reference file CCDS_nucleotide.20080430.fa...
    Indexing run1-1.TCA.454Reads.fna...
      -> 614394 reads, 198631473 bases.
    Indexing run1-2.TCA.454Reads.fna...
      -> 567308 reads, 174940162 bases.
    Indexing run2-1.TCA.454Reads.fna...
      -> 593630 reads, 173213486 bases.
    Indexing run2-2.TCA.454Reads.fna...
      -> 630990 reads, 195868146 bases.
    Setting up overlap detection...
    Building a tree for 2727502 seeds...
    Mapping reads...
      -> 2305538 of 2305538
    Computing signals...
      -> 32940942 of 32940942...
    Generating output...
      -> 34243911 of 34243911...
    Mapping computation succeeded at: Sat Jan 10 00:33:54 2009
    
    real    48m4.843s
    user    33m59.711s
    sys     1m49.626s


head /home/syoung/base/pipeline/nimblegen-gsmapper/acefiles-genome/mapping/454Contigs.ace

    AS   20091 1227275 
    
    CO CCDS2.2|Hs36.3|chr1 2051 17 1 U
    ATGTCCAAGGGGATCCTGCAGGTGCATCCTCCGATCTGCGACTGCCCGGG
    CTGCCGAATATCCTCCCCGGTGAACCGGGGGCGGCTGGCAGACAAGAGGA
    CAGTCGCCCTGCCTGCCGCCCGGAACCTGAAGAAGGAGCGAACTCCCAGC
    TTCTCTGCCAGCGATGGTGACAGCGACGGGAGTGGCCCCACCTGTGGGCG
    GCGGCCAGGCTTGAAGCAGGAGGATGGTCCGCACATCCGTATCATGAAGA
    GAAGAGTCCACACCCACTGGGACGTGAACATCTCTTTCCGAGAGGCGTCC
    TGCAGCCAGGACGGCAACCTTCCCACCCTCATATCCAGCGTCCACCGCAG

In total, 1,227,275 reads (51% of the total 2,406,326 reads) were aligned to 20,091 CCDS sequences (every CCDS sequence had at least one read aligned to it)


records run1-1.TCA.454Reads.fna
614395

records run1-2.TCA.454Reads.fna
567309

records run2-1.TCA.454Reads.fna
593631

records run2-2.TCA.454Reads.fna
630991


perl -e 'print 614395 + 567309 + 593631 + 630991, "\n"';
2406326

perl -e 'print 1227275/2406326'; 
0.510020254944675



Hi all,

The whole genome alignment ace file is on solexa:

/home/syoung/base/pipeline/nimblegen-gsmapper/acefiles-genome/mapping/454Contigs.ace

In total, 1,227,275 reads (51% of the total 2,406,326 reads) were aligned to 20,091 CCDS sequences (every CCDS sequence had at least one read aligned to it and the average depth of coverage was 5.3).

The percentage coverage stats for each CCDS sequence are in the'454RefStatus.txt' file:

Reference       Num Unique      Pct of All      Pct of  Pct Coverage
Accession       Matching Reads  Unique Matches  All Reads       of Reference    Description
CCDS6193.1|Hs36.3|chr8  3071    0.3%    0.1%    100.00%
CCDS8731.1|Hs36.3|chr12 2993    0.2%    0.1%    20.56%
CCDS12128.1|Hs36.3|chr19        2724    0.2%    0.1%    90.37%
CCDS8755.1|Hs36.3|chr12 2300    0.2%    0.1%    98.33%
CCDS35212.1|Hs36.3|chrX 2077    0.2%    0.1%    84.33%
CCDS34869.1|Hs36.3|chr8 1752    0.1%    0.1%    10.22%
CCDS9868.1|Hs36.3|chr14 1518    0.1%    0.1%    97.56%
CCDS14785.1|Hs36.3|chrXY        1364    0.1%    0.1%    7.96%
...

There are more stats in the '454MappingQC.xls' file:

Num. Reads:     2405723
Num. Bases:     712282210

Mapped Reads:   1200713 49.91%  1475521 61.33%
Mapped Bases:   173799488       24.40%  267745758       37.59%
Inf. Read Error:        3.50%   14.6    6089688 173799488
Exp. Read Error:        0.81%   20.9    1399662

Last 100 Base IRE:      3.58%   14.5    1919243 53609629
Last 50 Base IRE:       4.44%   13.5    1111174 25033961
Last 20 Base IRE:       6.42%   11.9    573797  8942603

Genom Size:     32940942
Num. Large Contigs:     12887
Num. Large Contigs Bases:       15495805        47.04%
Avg. Depth:     5.3
Avg. Map Length:        144

Unmapped:       34.50%  830017
Partial:        46.58%  1120539
Multiple:       11.42%  274808
...


Cheers,

Stuart.




________________________________________
From: Stephan Zuchner [SZuchner@med.miami.edu]
Sent: Friday, January 09, 2009 3:21 PM
To: Hedges, Dale
Cc: Khuri, Sawsan; Young, Stuart; Huang, Jia; Hoffman, Josh D
Subject: Re: exome

Importing the ace files into CLC works. SNP/conflict detection works - table output.

Gives a nice coverage blot as well, also available as bp by bp table.

I would like to try to import a whole chromosome and the whole genome as ACE. Please produce such an output Stuart.



Stephan Zchner, MD
Associate Professor of Human Genetics and Neurology
Director, Center for Human Molecular Genomics
University of Miami Miller School of Medicine
Miami Institute for Human Genomics
Clinical Research Building
Room 810
1120 N.W. 14th Street
Miami, FL 33136
Phone: +1-305-243-2281
Fax: +1-305-243-2396
e-mail: szuchner@med.miami.edu<mailto:szuchner@med.miami.edu>





On Jan 9, 2009, at 2:10 PM, Hedges, Dale wrote:

Have action plan; planning for action

________________________________
From: Zuchner, Stephan
Sent: Friday, January 09, 2009 1:54 PM
To: Khuri, Sawsan; Hedges, Dale; Young, Stuart; Huang, Jia; Hoffman, Josh D
Subject: exome

Attached is the current action plan.

Please keep thinking/working about the 8min-solves-all-script.

Stuart, let us know when files are available and we can have a look to get a feel. SNP detection would be great. Ask Ben how to do it. Thnaks.

Stephan




</entry>



<entry [Fri Jan  9 16:16:24 EST 2009] LOAD NIMBLEGEN ANNOTATION FOR CAPTURED CCDS EXOME>



1. EXTRACT DATA FILE AS TSV FROM EXCEL FILE

ORIGINAL FILE:

/home/syoung/base/pipeline/exome/nimblegen-demo-data/2.1M_coding_exons_annotation.xls

REMOVED COLUMN HEADERS LINE AND SAVED AS TSV FILE:

/home/syoung/base/pipeline/exome/nimblegen-demo-data/codingExons.tsv


2. CREATE .SQL TABLE CREATION FILE

emacs /home/syoung/base/pipeline/exome/nimblegen-demo-data/codingExons.sql

CREATE TABLE codingExons (

    CCDS_ID         varchar(20),
    GENE_SYMBOL     varchar(20),
    DESCRIPTION     TEXT,
    REFSEQ          varchar(20),
    UCSC_GENE_ID    varchar(20),
    ENSEMBL         varchar(20),
    CHROMOSOME      varchar(10),
    STRAND          varchar(1),
    CDS_START       int(12),
    CDS_END         int(12),
    EXON_COUNT      int(6),
    ARRAY_COVERAGE  varchar(6),
    ARRAY_COVERAGE_W_100BP_EXTENSION    varchar(6),

    PRIMARY KEY(CCDS_ID)
);


mysql -u exome -paccessexome
use exome
source /home/syoung/base/pipeline/exome/nimblegen-demo-data/codingExons.sql

desc codingExons;
    +----------------------------------+-------------+------+-----+---------+-------+
    | Field                            | Type        | Null | Key | Default | Extra |
    +----------------------------------+-------------+------+-----+---------+-------+
    | CCDS_ID                          | varchar(20) | NO   | PRI |         |       | 
    | GENE_SYMBOL                      | varchar(20) | YES  |     | NULL    |       | 
    | DESCRIPTION                      | text        | YES  |     | NULL    |       | 
    | REFSEQ                           | varchar(20) | YES  |     | NULL    |       | 
    | UCSC_GENE_ID                     | varchar(20) | YES  |     | NULL    |       | 
    | ENSEMBL                          | varchar(20) | YES  |     | NULL    |       | 
    | CHROMOSOME                       | varchar(10) | YES  |     | NULL    |       | 
    | STRAND                           | varchar(1)  | YES  |     | NULL    |       | 
    | CDS_START                        | int(12)     | YES  |     | NULL    |       | 
    | CDS_END                          | int(12)     | YES  |     | NULL    |       | 
    | EXON_COUNT                       | int(6)      | YES  |     | NULL    |       | 
    | ARRAY_COVERAGE                   | varchar(6)  | YES  |     | NULL    |       | 
    | ARRAY_COVERAGE_W_100BP_EXTENSION | varchar(6)  | YES  |     | NULL    |       | 
    +----------------------------------+-------------+------+-----+---------+-------+

load data local infile '/home/syoung/base/pipeline/exome/nimblegen-demo-data/codingExons.tsv' into table codingExons;

    Query OK, 20091 rows affected, 6 warnings (0.52 sec)
    Records: 20112  Deleted: 0  Skipped: 21  Warnings: 3

NB: SKIPPED 21 RECORDS




</entry>



<entry [Fri Jan  9 16:16:24 EST 2009] PAPER ON 454 SNP CALLING WITH POLYBAYES>



SNP discovery via 454 transcriptome sequencing

http://www.pubmedcentral.nih.gov/articlerender.fcgi?artid=2169515




</entry>



<entry [Fri Jan  9 15:12:49 EST 2009] MESSAGE TO Rachel RE: LOAD CCDS AND SNP DATA INTO MYSQL>



Hi Rachel,

Thanks for your help finding the CCDS data. I followed your instructions but I encountered what might be a mismatch between the extracted Table Browser output and the table schema and had to use a workaround. Here are the steps I took to get the data:

PROBLEM 1: TABLE SCHEMA DOES NOT CORRESPOND TO 'Table Browser' OUTPUT

TABLE SCHEMA:

http://genome.ucsc.edu/cgi-bin/hgTables
group: Genes and Gene Prediction Tracks --> track: CCDS --> table: ccdsGene --> 'describe table schema'

    Schema for CCDS - Consensus CDS
    
    Database: hg18    Primary Table: ccdsGene    Row Count: 20,025
    
    Format description: A gene prediction with some additional info.
    
    field	example	SQL type 	info 	description
    bin 	585	smallint(5) unsigned 	range 	Indexing field to speed chromosome range queries.
    name 	CCDS30547.1	varchar(255) 	values 	Name of gene (usually transcript_id from GTF)
    chrom 	chr1	varchar(255) 	values 	Reference sequence chromosome or scaffold
    strand 	+	char(1) 	values 	+ or - for strand
    txStart 	58953	int(10) unsigned 	range 	Transcription start position
    txEnd 	59871	int(10) unsigned 	range 	Transcription end position
    cdsStart 	58953	int(10) unsigned 	range 	Coding region start
    cdsEnd 	59871	int(10) unsigned 	range 	Coding region end
    exonCount 	1	int(10) unsigned 	range 	Number of exons
    exonStarts 	58953,	longblob 	  	Exon start positions
    exonEnds 	59871,	longblob 	  	Exon end positions
    score 	0	int(11) 	range 	 
    name2 	 	varchar(255) 	values 	Alternate name (e.g. gene_id from GTF)
    cdsStartStat 	cmpl	enum('none','unk','incmpl','cmpl') 	values 	enum('none','unk','incmpl','cmpl')
    cdsEndStat 	cmpl	enum('none','unk','incmpl','cmpl') 	values 	enum('none','unk','incmpl','cmpl')
    exonFrames 	0,	longblob 	  	Exon frame {0,1,2}, or -1 if no frame for exon

TABLE DATA: 

http://genome.ucsc.edu/cgi-bin/hgTables
group: Genes and Gene Prediction Tracks --> track: CCDS --> table: ccdsGene --> 'get output' 

NB: THE CONTENTS OF THE DOWNLOADED TABLE DATA FILE DO NOT CORRESPOND TO THE TABLE SCHEMA ABOVE:

head ccdsGene-ucsc-table

chr1    67052400        67163102        CCDS635.1       0       -       67052400        67163102        0       17      51,157,227,99,122,158,152,87,203,195,156,140,157,113,185,175,170, 0,8231,12690,13682,19455,19861,21496,23580,26339,33354,48017,57240,60651,77024,79099,91071,110532,
chr1    8337733 8638943 CCDS95.1        0       -       8337733 8638943 0       22      34,181,147,721,223,1379,114,162,200,93,163,81,99,100,125,49,105,97,106,126,71,325,      0,332,1013,3109,4677,5025,6676,7596,8969,9659,10725,67640,110838,139976,142318,153539,186126,201387,202330,259473,269222,300885,
chr1    58719224        58777554        CCDS608.1       0       -       58719224        58777554        0       8       210,150,75,129,108,174,229,500, 0,25095,46296,49636,52988,53193,55548,57830,
chr1    75444879        75779720        CCDS667.1       0       -       75444879        75779720        0       23      113,85,89,71,74,104,95,263,88,93,100,132,113,84,124,61,126,85,85,74,49,39,13,     0,4861,7098,7312,7998,9147,11259,11883,12650,13193,15754,21119,27379,30380,31906,35394,36279,44603,68351,94005,132975,189976,334828,
chr1    92268224        92301431        CCDS736.1       0       +       92268224        92301431        0       7       231,86,158,129,104,149,232,     0,2425,12743,15452,20237,22430,32975,


SOLUTION:

I downloaded the table schema and data from your FTP site and it worked fine:

#### GET 'CREATE TABLE' SQL FILE
wget http://hgdownload.cse.ucsc.edu/goldenPath/hg18/database/ccdsGene.sql

#### TABLE DATA
wget http://hgdownload.cse.ucsc.edu/goldenPath/hg18/database/ccdsGene.txt.gz




I also have another question I was hoping you could help me with:-

PROBLEM 2: SOME SNP IDs APPEAR MULTIPLE TIMES IN THE 'Table Browser' CCDS-SNP129 INTERSECTION OUTPUT FILE 

I followed your instructions on how to download an intersection between the SNP129 and CCDS data sets (i.e., a list of SNP IDs and positions for SNPs that intersect with the CCDS):
    
1) Select the genome and assembly of interest.
2) Set group to "Variation and Repeats", track to "SNPs (129), table to 
"snp129".
3) Make sure "genome" is selected as the region.
4) Click on the "create" button for intersection.
5) Then on the intersection web interface, select the "Genes and Gene 
Prediction Tracks" group and the "CCDS" track and then press "submit".
6) Then select the output format and press "get output".

THE OUTPUT FILE HAS THE FOLLOWING CONTENT:

head ccds-SNP129.bed

    chr1    172228602       172228627       rs56731360      0       +
    chr1    58996   58997   rs1638318       0       +
    chr1    59315   59316   rs2854682       0       -
    chr1    59373   59374   rs2691305       0       -
    chr1    59414   59415   rs2531266       0       +
    chr1    59414   59415   rs55874132      0       +
    chr1    59431   59432   rs2531267       0       +
    ...


BUT IT CONTAINS MULTIPLE ENTRIES FOR THE SAME SNP IDs, E.G.:

grep -n rs62030432 CCDS_snp129_intersection.bed
25:chr1 358412  358413  rs62030432      0       +
28:chr1 611005  611006  rs62030432      0       -
48665:chr5      180727784       180727785       rs62030432      0       +
67199:chr8      106132  106133  rs62030432      0       -


In total, there were 4,967 duplicate SNP IDs out of a total 161939 entries.

I also noticed the first SNP in the file has these chromosome Start/Stop points:

    chr1    172228602       172228627       rs56731360      0       +

Do you have any ideas about what could be going on here?

Cheers,

Stuart.






</entry>



<entry [Thurs Jan 8 21:59:14 EDT 2009] LOAD CCDS AND SNP DATA INTO MYSQL>



1. DOWNLOADED CCDS INFO FROM UCSC FTP TO solexa

cd /home/syoung/base/pipeline/exome/ccds/ftp

#### GET 'CREATE TABLE' SQL FILE
wget http://hgdownload.cse.ucsc.edu/goldenPath/hg18/database/ccdsGene.sql

#### TABLE DATA
wget http://hgdownload.cse.ucsc.edu/goldenPath/hg18/database/ccdsGene.txt.gz

gunzip *gz
    
    field	example	SQL type 	info 	description
    
    bin smallint(5) unsigned 	range 	Indexing field to speed chromosome range queries.
    name 	varchar(255) 	values 	Name of gene (usually transcript_id from GTF)
    chrom 	varchar(255) 	values 	Reference sequence chromosome or scaffold
    strand 	char(1) 	values 	+ or - for strand
    txStart int(10) unsigned 	range 	Transcription start position
    txEnd 	int(10) unsigned 	range 	Transcription end position
    cdsStart int(10) unsigned 	range 	Coding region start
    cdsEnd 	int(10) unsigned 	range 	Coding region end
    exonCount int(10) unsigned 	range 	Number of exons
    exonStarts longblob 	  	Exon start positions
    exonEnds longblob 	  	Exon end positions
    score 	int(11) 	range 	 
    name2 	varchar(255) 	values 	Alternate name (e.g. gene_id from GTF)
    cdsStartStat 	enum('none','unk','incmpl','cmpl') 	values 	enum('none','unk','incmpl','cmpl')
    cdsEndStat 	enum('none','unk','incmpl','cmpl') 	values 	enum('none','unk','incmpl','cmpl')
    exonFrames 	longblob 	  	Exon frame {0,1,2}, or -1 if no frame for exon


2. DOWNLOADED ALL SNPS DATA FROM UCSC FTP TO solexa

#### GET 'CREATE TABLE' SQL FILE
wget http://hgdownload.cse.ucsc.edu/goldenPath/hg18/database/snp129.sql

#### TABLE DATA
wget http://hgdownload.cse.ucsc.edu/goldenPath/hg18/database/snp129.txt.gz

gunzip *gz


3. DOWNLOADED TABLE DATA FOR INTERSECTION BETWEEN CCDS AND SNP129

    SEE THIS FILE:
    Wed Jan  7 15:29:02 EST 2009
    SNP AND CCDS INTERSECTION FROM UCSC BROWSER TABLE PAGE



REMOVED EXTRANEOUS FIRST LINE CONTAINING LONG SNP:

head CCDS_snp129_intersection.bed
    chr1    172228602       172228627       rs56731360      0       +

AND WROTE TO FILE:

/home/syoung/base/pipeline/exome/ccds/ccdsSNP.bed

CREATED .SQL FILE:

/home/syoung/base/pipeline/exome/ccds/ccdsSNP.sql

CREATE TABLE ccdsSNP (

    chromosome      varchar(255),
    chromosomeStart int(10) unsigned,
    chromosomeEnd   int(10) unsigned,
    snp             varchar(20),
    score           int(10),
    strand          char(1),
    
    PRIMARY KEY(snp)
);


4. SET USERS IN MYSQL ON solexa

    SEE 'Notes-install-mysql-solexa01.txt'
        SET USERS IN MYSQL ON solexa
        Thurs Jan 8 21:59:14 EDT 2009    
    
    GRANT ALL PRIVILEGES ON exome.* TO 'exome'@'localhost'
    IDENTIFIED BY 'accessexome' WITH GRANT OPTION;
    
    GRANT ALL PRIVILEGES ON exome.* TO 'syoung'@'localhost'
    IDENTIFIED BY '<my_password>' WITH GRANT OPTION;


4. LOGGED INTO MYSQL AND SOURCED .SQL AND LOADED DATA FILES:

mysql -u exome -paccessexome #### NB: NO GAP BETWEEN -p AND PASSWORD
mysql>

use exome

source /home/syoung/base/pipeline/exome/ccds/ftp/ccdsGene.sql
load data local infile '/home/syoung/base/pipeline/exome/ccds/ftp/ccdsGene.txt' into table ccdsGene;   

    Query OK, 20025 rows affected (0.45 sec)
    Records: 20025  Deleted: 0  Skipped: 0  Warnings: 0

source /home/syoung/base/pipeline/exome/ccds/ftp/snp129.sql
load data local infile '/home/syoung/base/pipeline/exome/ccds/ftp/snp129.txt' into table snp129;
    
    Query OK, 15625346 rows affected (6 min 37.32 sec)
    Records: 15625346  Deleted: 0  Skipped: 0  Warnings: 0
    
    DESC snp129;

    -----------------------------------------------+------+-----+---------+-------+
    | bin        | smallint(5) unsigned            | NO   |     | 0       |       | 
    | chrom      | varchar(31)                     | NO   | MUL |         |       | 
    | chromStart | int(10) unsigned                | NO   |     | 0       |       | 
    | chromEnd   | int(10) unsigned                | NO   |     | 0       |       | 
    | name       | varchar(15)                     | NO   | MUL |         |       | 
    | score      | smallint(5) unsigned            | NO   |     | 0       |       | 
    | strand     | enum('+','-')                   | YES  |     | NULL    |       | 
    | refNCBI    | blob| NO   |     |         |       | 
    | refUCSC    | blob| NO   |     |         |       | 
    | observed   | varchar(255)| NO   |     |         |       | 
    | molType    | enum('genomic','cDNA')| YES  |     | NULL    |       | 
    | class      | enum('unknown','single','in-del','het','microsatellite','named','mixed','mnp','insertion','deletion')| NO   |     | unknown |       | 
    | valid      | set('unknown','by-cluster','by-frequency','by-submitter','by-2hit-2allele','by-hapmap')| NO   |     | unknown |       | 
    | avHet      | float| NO   |     | 0       |       | 
    | avHetSE    | float| NO   |     | 0       |       | 
    | func       | set('unknown','coding-synon','intron','cds-reference','near-gene-3','near-gene-5','nonsense','missense','frameshift','untranslated-3','untranslated-5','splice-3','splice-5') | NO   |     | unknown |       | 
    | locType    | enum('range','exact','between','rangeInsertion','rangeSubstitution','rangeDeletion')| YES  |     | NULL    |       | 
    | weight     | int(10) unsigned | NO   |     | 0       |       | 
    -----------------------------------------------+------+-----+---------+-------+            

    
source /home/syoung/base/pipeline/exome/ccds/ccdsSNP.sql
load data local infile '/home/syoung/base/pipeline/exome/ccds/ccdsSNP.bed' into table ccdsSNP;
    
    Query OK, 156972 rows affected (4.38 sec)
    Records: 161939  Deleted: 0  Skipped: 4967  Warnings: 0

select * from ccdsSNPs into outfile '/var/tmp/ccdsSNP-table.tsv';
sudo mv ccdsSNP-table.tsv ~/base/pipeline/exome/ccds/
diff ccdsSNP-table.tsv ccdsSNP.bed > out

    head out*
    ==> out <==
    26,41d25
    < chr1  610968  610969  rs388753        0       +
    < chr1  611005  611006  rs62030432      0       -
    < chr1  611119  611120  rs373301        0       +
    < chr1  611160  611161  rs367554        0       +
    < chr1  611327  611328  rs4980317       0       -
    < chr1  611398  611399  rs447678        0       +
    < chr1  611442  611443  rs374360        0       +
    < chr1  611508  611509  rs3936961       0       +
    < chr1  611508  611509  rs4090925       0       +

    <SHOWS BIG CHUNKS FOR THE .bed FILE THAT AREN'T IN THE .tsv FILE>

THE .bed FILE CONTAINS DUPLICATE SNP IDS WHICH ARE NOT FOUND IN THE .tsv EXTRACTED FROM THE MSYQL TABLE, E.G.:

grep -n  "rs388753" ccdsSNP.*
ccdsSNP.bed:25:chr1     358449  358450  rs388753        0       -
ccdsSNP.bed:26:chr1     610968  610969  rs388753        0       +
ccdsSNP.bed:48665:chr5  180727821       180727822       rs388753        0       -
ccdsSNP.bed:67197:chr8  106095  106096  rs388753        0       +



5. CHECK THE DATA

desc ccdsGene;    
    +--------------+------------------------------------+------+-----+---------+-------+
    | Field        | Type                               | Null | Key | Default | Extra |
    +--------------+------------------------------------+------+-----+---------+-------+
    | bin          | smallint(5) unsigned               | NO   |     | 0       |       | 
    | name         | varchar(255)                       | NO   | MUL |         |       | 
    | chrom        | varchar(255)                       | NO   | MUL |         |       | 
    | strand       | char(1)                            | NO   |     |         |       | 
    | txStart      | int(10) unsigned                   | NO   |     | 0       |       | 
    | txEnd        | int(10) unsigned                   | NO   |     | 0       |       | 
    | cdsStart     | int(10) unsigned                   | NO   |     | 0       |       | 
    | cdsEnd       | int(10) unsigned                   | NO   |     | 0       |       | 
    | exonCount    | int(10) unsigned                   | NO   |     | 0       |       | 
    | exonStarts   | longblob                           | NO   |     |         |       | 
    | exonEnds     | longblob                           | NO   |     |         |       | 
    | score        | int(11)                            | YES  |     | NULL    |       | 
    | name2        | varchar(255)                       | NO   | MUL |         |       | 
    | cdsStartStat | enum('none','unk','incmpl','cmpl') | NO   |     | none    |       | 
    | cdsEndStat   | enum('none','unk','incmpl','cmpl') | NO   |     | none    |       | 
    | exonFrames   | longblob                           | NO   |     |         |       | 
    +--------------+------------------------------------+------+-----+---------+-------+
    16 rows in set (0.01 sec)


mysql> desc ccdsSNP;
+-----------------+------------------+------+-----+---------+-------+
| Field           | Type             | Null | Key | Default | Extra |
+-----------------+------------------+------+-----+---------+-------+
| chromosome      | varchar(255)     | YES  |     | NULL    |       | 
| chromosomeStart | int(10) unsigned | YES  |     | NULL    |       | 
| chromosomeEnd   | int(10) unsigned | YES  |     | NULL    |       | 
| snp             | varchar(20)      | NO   | PRI |         |       | 
| score           | int(10)          | YES  |     | NULL    |       | 
| strand          | char(1)          | YES  |     | NULL    |       | 
+-----------------+------------------+------+-----+---------+-------+
6 rows in set (0.00 sec)



mysql> desc ccdsGene;
+--------------+------------------------------------+------+-----+---------+-------+
| Field        | Type                               | Null | Key | Default | Extra |
+--------------+------------------------------------+------+-----+---------+-------+
| bin          | smallint(5) unsigned               | NO   |     | 0       |       | 
| name         | varchar(255)                       | NO   | MUL |         |       | 
| chrom        | varchar(255)                       | NO   | MUL |         |       | 
| strand       | char(1)                            | NO   |     |         |       | 
| txStart      | int(10) unsigned                   | NO   |     | 0       |       | 
| txEnd        | int(10) unsigned                   | NO   |     | 0       |       | 
| cdsStart     | int(10) unsigned                   | NO   |     | 0       |       | 
| cdsEnd       | int(10) unsigned                   | NO   |     | 0       |       | 
| exonCount    | int(10) unsigned                   | NO   |     | 0       |       | 
| exonStarts   | longblob                           | NO   |     |         |       | 
| exonEnds     | longblob                           | NO   |     |         |       | 
| score        | int(11)                            | YES  |     | NULL    |       | 
| name2        | varchar(255)                       | NO   | MUL |         |       | 
| cdsStartStat | enum('none','unk','incmpl','cmpl') | NO   |     | none    |       | 
| cdsEndStat   | enum('none','unk','incmpl','cmpl') | NO   |     | none    |       | 
| exonFrames   | longblob                           | NO   |     |         |       | 
+--------------+------------------------------------+------+-----+---------+-------+


</entry>



<entry [Fri Jan 9 03:07:02 EST 2009] MSG Ben Boese ON runMapper .ACE FILES, SNP CALLING PIPELINE>



Hi Ben,

Could you send me details of the SNP calling pipeline you use in-house? In particular, I was wondering if you might be able to help me with these two questions:

What parameters/options are used at each stage in the pipeline?
How does the SNP calling method deal with differentiating between indels caused by homopolymer errors and actual SNPs?

I also have a couple of questions about the .ace files I produced with runMapper using the Nimblegen demo data with the acedir option:

    The BS quality data for the contig is flat (i.e., all quality values are 30)
    The contig ID appears at the top of the 'AF' block

Are there any additional options for runMapper that I should have used? Heres the command I used for the run:

/home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -acedir -nrm -ref CCDS_nucleotide.20080430.fa -read run1-1.TCA.454Reads.fna run1-2.TCA.454Reads.fna run2-1.TCA.454Reads.fna run2-2.TCA.454Reads.fna

    Created mapping project directory P_2009_01_09_03_26_14_runMapping
    1 reference files successfully added.
        CCDS_nucleotide.20080430.fa
    4 read files successfully added.
        run1-1.TCA.454Reads.fna
        run1-2.TCA.454Reads.fna
        run2-1.TCA.454Reads.fna
        run2-2.TCA.454Reads.fna
    Mapping computation starting at: Fri Jan 9 03:26:14 2009  (v2.0.00.20)
    Reading reference file CCDS_nucleotide.20080430.fa...
    Indexing run1-1.TCA.454Reads.fna...
      -> 614394 reads, 198631473 bases.
    Indexing run1-2.TCA.454Reads.fna...
      -> 567308 reads, 174940162 bases.
    Indexing run2-1.TCA.454Reads.fna...
      -> 593630 reads, 173213486 bases.
    Indexing run2-2.TCA.454Reads.fna...
      -> 630990 reads, 195868146 bases.
    Setting up overlap detection...
    Building a tree for 2727502 seeds...
    Mapping reads...
      -> 2305538 of 2305538
    Computing signals...
      -> 32940942 of 32940942...
    Generating output...
      -> 34243911 of 34243911...
    Mapping computation succeeded at: Fri Jan 9 04:14:54 2009
    

Cheers,

Stuart.


Sample .ace file "CCDS10000.1|Hs36.3|chr14.ace:
AS       1 22

CO CCDS10000.1|Hs36.3|chr14 687 22 1 U
ATGGAGCGCATCGAGGGGGCGTCCGTGGGCCGCTGCGCCGCCTCACCCTA
CCTGCGGCCGCTCACGCTGCATTACCGCCAGAATGGTGCCCAGAAGTCCT
GGGACTTCATGAAGACGCATGACAGCGTGACCGTTCTCTTATT*CAACTC
TTCTCGGAGGAGCCTGGTGTTGGTGAAGCAGTT*CC***GGCCAG*CTGT
GTATGCGGGTGAGGTGGAGCGCCGCTTCCCAGGGTCCCTAGCAGC*TGTA
GACCAGGACGGGCCTCGGGAGCTACAGCCAGCCCTGCCCGGCTCA*GCGG
GGGTGACAGTTGAGCTGTGTGCCGGCCTCGTGGACCAGCCTGGGCTCTCG
CTGGAGGAAGTGGCTTGCAAGGAGGCTTGGGAGGAGTGTGGCTACCACTT
GGCCCCCTCTGATCTGCGCCGGGTCGCCACATACTGGTCTGGAGTGGGAC
TGACTGGCTCCAGACAGACCATGTT*CTACACAGAGGTGACAGATGCCCA
GCGTAGCGGTCCAGGTGGGGG*CCTGG*TGGAGGAGG*GTGAGCTCATTG
AGGTGGTGCACCTGCCCCTGGAAGGCGCCCAGGCCTTTGCAGACGACCCG
G*ACATCCCC*AA*GACCCTCGG*CGTCATCTTT*GGTGTCTCATGGTTC
CTCAGCCAGGTGGCCCCC*AACCTGGATCTCCAGTGA

BQ
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30

AF CCDS10000.1|Hs36.3|chr14 U 1
AF FLTZPLR02TDQ7D.117-73 C 150
AF FLR2L3301DWXHF.68-21 C 383
AF FLR2L3302RA0Y0.144-73 C -183
AF FLTZPLR01AQX8G.265-105 C 267





</entry>



<entry [Fri Jan 9 03:07:02 EST 2009] RUN GS MAPPER ON NIMBLEGEN DEMO DATA>



1. CREATE FOLDER AND TRANSFER EXOME SEQUENCES

mkdir /home/syoung/base/pipeline/nimblegen-gsmapper
cd /home/syoung/base/pipeline/nimblegen-gsmapper
cp /home/syoung/base/pipeline/exome/ccds/sequence/CCDS_nucleotide.20080430.fna CCDS_nucleotide.20080430.fa

2. COPY READS TO FOLDER
    
cd /home/syoung/base/pipeline/nimblegen-maq

#### COPY run_1
cp /home/syoung/base/pipeline/exome/nimblegen-demo-data/demo_data_fa/run_1/1.TCA.454Reads.fna run1-1.TCA.454Reads.fna
cp /home/syoung/base/pipeline/exome/nimblegen-demo-data/demo_data_fa/run_1/1.TCA.454Reads.qual run1-1.TCA.454Reads.qual
cp /home/syoung/base/pipeline/exome/nimblegen-demo-data/demo_data_fa/run_1/2.TCA.454Reads.fna run1-2.TCA.454Reads.fna
cp /home/syoung/base/pipeline/exome/nimblegen-demo-data/demo_data_fa/run_1/2.TCA.454Reads.qual run1-2.TCA.454Reads.qual


#### COPY run_2
cp /home/syoung/base/pipeline/exome/nimblegen-demo-data/demo_data_fa/run_2/1.TCA.454Reads.fna run2-1.TCA.454Reads.fna
cp /home/syoung/base/pipeline/exome/nimblegen-demo-data/demo_data_fa/run_2/1.TCA.454Reads.qual run2-1.TCA.454Reads.qual
cp /home/syoung/base/pipeline/exome/nimblegen-demo-data/demo_data_fa/run_2/2.TCA.454Reads.fna run2-2.TCA.454Reads.fna
cp /home/syoung/base/pipeline/exome/nimblegen-demo-data/demo_data_fa/run_2/2.TCA.454Reads.qual run2-2.TCA.454Reads.qual


4. RUN GS MAPPER ASSEMBLY, OUTPUTTING ONE .ace FILE FOR EACH CCDS REFERENCE SEQUENCE

cd /home/syoung/base/pipeline/nimblegen-gsmapper

screen -S gsmapper

 time /home/syoung/base/apps/454/2.0.00.20-64/bin/runMapping -acedir -nrm -ref CCDS_nucleotide.20080430.fa -read run1-1.TCA.454Reads.fna run1-2.TCA.454Reads.fna run2-1.TCA.454Reads.fna run2-2.TCA.454Reads.fna

    Created mapping project directory P_2009_01_09_03_26_14_runMapping
    1 reference files successfully added.
        CCDS_nucleotide.20080430.fa
    4 read files successfully added.
        run1-1.TCA.454Reads.fna
        run1-2.TCA.454Reads.fna
        run2-1.TCA.454Reads.fna
        run2-2.TCA.454Reads.fna
    Mapping computation starting at: Fri Jan 9 03:26:14 2009  (v2.0.00.20)
    Reading reference file CCDS_nucleotide.20080430.fa...
    Indexing run1-1.TCA.454Reads.fna...
      -> 614394 reads, 198631473 bases.
    Indexing run1-2.TCA.454Reads.fna...
      -> 567308 reads, 174940162 bases.
    Indexing run2-1.TCA.454Reads.fna...
      -> 593630 reads, 173213486 bases.
    Indexing run2-2.TCA.454Reads.fna...
      -> 630990 reads, 195868146 bases.
    Setting up overlap detection...
    Building a tree for 2727502 seeds...
    Mapping reads...
      -> 2305538 of 2305538
    Computing signals...
      -> 32940942 of 32940942...
    Generating output...
      -> 34243911 of 34243911...
    Mapping computation succeeded at: Fri Jan 9 04:14:54 2009
    
    real    48m40.425s
    user    34m20.078s
    sys     1m57.478s




    RUNNING... Fri Jan  9 03:56:52 EST 2009






./runMapping 
Usage:  runMapping [-o projdir] [-nrm] refFastaFile (sfffile | [regionlist:]analysisDir)...



</entry>



<entry [Thurs Jan 8 23:17:02 EST 2009] SNP callers:>



    MAQ
    PolyBayesShort
    ssaha_pileup
    Mosiak



</entry>



<entry [Thurs Jan 8 21:29:02 EST 2009] NIMBLEGEN DEMO DATA>



cd /store/home/syoung/base/pipeline/exome/nimblegen-demo-data/demo_data_fa
ll -R
    drwxrwxr-x 2 syoung users 4.0K Dec 22 15:24 run_1
    drwxrwxr-x 2 syoung users 4.0K Dec 22 15:12 run_2
    
    ./run_1:
    total 1.6G
    -rwxrwxr-x 1 syoung users 238M Dec 15 03:04 1.TCA.454Reads.fna
    -rwxrwxr-x 1 syoung users 613M Dec 15 03:04 1.TCA.454Reads.qual
    -rwxrwxr-x 1 syoung users 211M Dec 15 03:06 2.TCA.454Reads.fna
    -rwxrwxr-x 1 syoung users 542M Dec 15 03:06 2.TCA.454Reads.qual
    
    ./run_2:
    total 1.6G
    -rw-rw-r-- 1 syoung users 212M Dec 22 15:00 1.TCA.454Reads.fna
    -rw-rw-r-- 1 syoung users 539M Dec 22 15:05 1.TCA.454Reads.qual
    -rw-rw-r-- 1 syoung users 236M Dec 22 15:02 2.TCA.454Reads.fna
    -rw-rw-r-- 1 syoung users 606M Dec 22 15:03 2.TCA.454Reads.qual


cd run_1
head 1.TCA.454Reads.fna 
    >FLR2L3301CM0FL length=68 xy=0965_0351 region=1 run=R_2008_12_10_15_28_41_
    CTCGAGAATTCTGGATCCTCCCTGATGTGCCTTGAGCTTTGGCACATCAGGCGGACACTG
    ACTACCGG
    >FLR2L3301B0PY3 length=286 xy=0711_0749 region=1 run=R_2008_12_10_15_28_41_
    CTCGAGAATTCTGGATCCTCGGGGAATAAGTGTGTCTTATAGACAGGGATGACTTTTGGA
    GAGTCATGACTGCCGTTGTCTGCAATCACAATGCCCAGAGCATTCCATCTTCTTCATTAG
    CTCTTCTATCCTCTGTCCTGTCCTCTAGCAAGACACGCTGGATGCAGATATCCACATAGA
    GACCGGAGGATCAGGGGTCATGTATAAGTACATGTCTTCCCAGCACCTCTTCAAGCTGTT
    GGACTGTTTGCAGGAATCCCATTCATTCTCAAAGGCCTTCAACTCC
    >FLR2L3301C2MU0 length=68 xy=1143_0170 region=1 run=R_2008_12_10_15_28_41_


head 1.TCA.454Reads.qual 
    >FLR2L3301CM0FL length=68 xy=0965_0351 region=1 run=R_2008_12_10_15_28_41_
    37 37 37 37 34 30 27 25 25 25 35 35 30 30 31 32 35 35 35 37 37 37 37 35 35 35 35 35 33 32 29 27 23 24 24 27 22 13 13 13 13 13 25 19 18 17 19 22 25 24 17 14 13 13 19 19 19 18 22 22
    22 22 28 23 22 22 12 12
    >FLR2L3301B0PY3 length=286 xy=0711_0749 region=1 run=R_2008_12_10_15_28_41_
    35 35 35 35 35 35 30 30 30 30 35 35 35 33 33 33 32 32 32 33 24 24 20 20 20 20 28 28 32 32 33 33 33 33 35 35 35 35 33 33 33 33 33 27 27 23 19 19 19 22 27 22 19 13 13 13 13 19 19 29
    28 30 30 30 30 31 32 33 33 33 35 35 32 32 32 32 32 32 33 32 32 30 30 29 29 27 27 28 28 25 23 24 30 26 26 26 31 31 30 30 32 32 25 25 25 25 25 32 33 33 33 33 33 33 35 35 37 37 34 34
    34 37 37 37 37 37 37 37 37 37 37 37 37 37 37 37 37 37 37 37 37 30 30 30 32 35 35 35 35 35 25 25 24 25 25 35 33 33 32 32 32 32 33 33 32 27 27 27 31 28 28 27 27 25 20 20 18 17 18 20
    17 12 12 12 12 12 12 16 16 12 13 13 13 13 17 17 19 19 19 24 30 30 32 31 33 28 28 28 28 24 25 25 28 33 33 33 29 29 26 26 26 27 27 31 30 19 19 19 19 29 31 31 33 33 33 33 32 32 32 33
    33 33 33 33 35 33 28 28 26 27 27 30 32 32 28 27 24 15 15 16 24 23 23 24 29 26 26 27 26 27 17 17 17 17 17 17 16 16 16 11 12 12 17 22 12 12
    >FLR2L3301C2MU0 length=68 xy=1143_0170 region=1 run=R_2008_12_10_15_28_41_




</entry>



<entry [Wed Jan  7 15:29:02 EST 2009] SNP AND CCDS INTERSECTION FROM UCSC BROWSER TABLE PAGE>



1. DOWNLOADED INTERSECTION BETWEEN CCDS AND SNP129 TO solexa

cd /home/syoung/base/pipeline/exome/ccds

lines snp129.bed 
161940

head snp129.bed 
chr1    172228602       172228627       rs56731360      0       +
chr1    58996   58997   rs1638318       0       +
chr1    59315   59316   rs2854682       0       -
chr1    59373   59374   rs2691305       0       -
chr1    59414   59415   rs2531266       0       +
chr1    59414   59415   rs55874132      0       +
chr1    59431   59432   rs2531267       0       +
chr1    59613   59614   rs1419821       0       +
chr1    59630   59631   rs62026918      0       -
chr1    59830   59831   rs1638319       0       +


ll
    total 78M
    -rw-rw-rw- 1 syoung users   24 Jan  6 22:39 BuildInfo.20080430.txt
    -rw-rw-rw- 1 syoung users 5.3M Jan  6 22:40 CCDS.20080430.txt
    -rw-rw-rw- 1 syoung users 5.3M Jan  6 22:40 CCDS.20080609.txt
    -rw-rw-rw- 1 syoung users 5.3M Jan  6 22:40 CCDS.20080902.txt
    -rw-rw-rw- 1 syoung users 2.8M Jan  6 22:40 CCDS2Sequence.20080430.txt
    -rw-rw-rw- 1 syoung users 2.8M Jan  6 22:40 CCDS2Sequence.20080902.txt
    -rw-rw-rw- 1 syoung users  33M Jan  6 22:40 CCDS_nucleotide.20080430.fna
    -rw-rw-rw- 1 syoung users  12M Jan  6 22:40 CCDS_protein.20080430.fna
    -rw-r--r-- 1 syoung users 6.0M Jan  7 16:07 CCDS_snp129_intersection.bed
    -rw-r--r-- 1 syoung users 227K Jan  7 22:09 out
    -rw-rw-rw- 1 syoung users  248 Jan  6 22:40 README.20080609
    -rw-rw-rw- 1 syoung users 1.4K Jan  6 22:40 README.20080902
    -rw-r--r-- 1 syoung users 6.0M Jan  7 22:04 snp129.bed


2.


NB: EARLIER TRIED DOWNLOADING ccdsGene TABLE FROM UCSC TO solexa AS FOLLOWS BUT THE RESULTING TABLE WAS MISSING MANY COLUMNS AND DIDN'T APPEAR TO CORRESPOND TO THE TABLE SCHEMA: 

http://genome.ucsc.edu/cgi-bin/hgTables

group: Genes and Gene Prediction Tracks
track: CCDS
table: ccdsGene 
output file: ccdsGene-ucsc-table
gzip compressed
get output


SAVED AS FILE:
/store/home/syoung/base/pipeline/exome/ccds/ccdsGene-ucsc-table

BUT DOES NOT CORRESPOND TO THE TABLE SCHEMA:

head ccdsGene-ucsc-table

chr1    67052400        67163102        CCDS635.1       0       -       67052400        67163102        0       17      51,157,227,99,122,158,152,87,203,195,156,140,157,113,185,175,170, 0,8231,12690,13682,19455,19861,21496,23580,26339,33354,48017,57240,60651,77024,79099,91071,110532,
chr1    8337733 8638943 CCDS95.1        0       -       8337733 8638943 0       22      34,181,147,721,223,1379,114,162,200,93,163,81,99,100,125,49,105,97,106,126,71,325,      0,332,1013,3109,4677,5025,6676,7596,8969,9659,10725,67640,110838,139976,142318,153539,186126,201387,202330,259473,269222,300885,
chr1    58719224        58777554        CCDS608.1       0       -       58719224        58777554        0       8       210,150,75,129,108,174,229,500, 0,25095,46296,49636,52988,53193,55548,57830,
chr1    75444879        75779720        CCDS667.1       0       -       75444879        75779720        0       23      113,85,89,71,74,104,95,263,88,93,100,132,113,84,124,61,126,85,85,74,49,39,13,     0,4861,7098,7312,7998,9147,11259,11883,12650,13193,15754,21119,27379,30380,31906,35394,36279,44603,68351,94005,132975,189976,334828,
chr1    92268224        92301431        CCDS736.1       0       +       92268224        92301431        0       7       231,86,158,129,104,149,232,     0,2425,12743,15452,20237,22430,32975,


TABLE SCHEMA:

http://genome.ucsc.edu/cgi-bin/hgTables
group: Genes and Gene Prediction Tracks --> track: CCDS --> table: ccdsGene --> DESCRIBE TABLE SCHEMA

    Schema for CCDS - Consensus CDS
    
    Database: hg18    Primary Table: ccdsGene    Row Count: 20,025
    
    Format description: A gene prediction with some additional info.
    
    field	example	SQL type 	info 	description
    bin 	585	smallint(5) unsigned 	range 	Indexing field to speed chromosome range queries.
    name 	CCDS30547.1	varchar(255) 	values 	Name of gene (usually transcript_id from GTF)
    chrom 	chr1	varchar(255) 	values 	Reference sequence chromosome or scaffold
    strand 	+	char(1) 	values 	+ or - for strand
    txStart 	58953	int(10) unsigned 	range 	Transcription start position
    txEnd 	59871	int(10) unsigned 	range 	Transcription end position
    cdsStart 	58953	int(10) unsigned 	range 	Coding region start
    cdsEnd 	59871	int(10) unsigned 	range 	Coding region end
    exonCount 	1	int(10) unsigned 	range 	Number of exons
    exonStarts 	58953,	longblob 	  	Exon start positions
    exonEnds 	59871,	longblob 	  	Exon end positions
    score 	0	int(11) 	range 	 
    name2 	 	varchar(255) 	values 	Alternate name (e.g. gene_id from GTF)
    cdsStartStat 	cmpl	enum('none','unk','incmpl','cmpl') 	values 	enum('none','unk','incmpl','cmpl')
    cdsEndStat 	cmpl	enum('none','unk','incmpl','cmpl') 	values 	enum('none','unk','incmpl','cmpl')
    exonFrames 	0,	longblob 	  	Exon frame {0,1,2}, or -1 if no frame for exon
    


-----Original Message-----
From: Rachel Harte [mailto:hartera@soe.ucsc.edu] 
Sent: Wednesday, January 07, 2009 2:07 PM
To: Young, Stuart
Subject: Re: dbSNPs in CCDS download?

Hello Stuart,
You can easily do this by using the Table Browser on the UCSC Genome 
Bioinformatics site. If you go to genome.ucsc.edu and then click on the 
Tables link on the top blue bar, you will be able to access the Table 
Browser interface. Then do the following steps:

1) Select the genome and assembly of interest.
2) Set group to "Variation and Repeats", track to "SNPs (129), table to 
"snp129".
3) Make sure "genome" is selected as the region.
4) Click on the "create" button for intersection.
5) Then on the intersection web interface, select the "Genes and Gene 
Prediction Tracks" group and the "CCDS" track and then press "submit".
6) Then select the output format and press "get output".

This gives a list of SNP IDs and positions for SNPs that intersect with 
CCDS.



In order to get the data for frames, you would need to download the data 
from the ccdsGene table (group:Genes and Gene Prediction Tracks, track: 
CCDS, table: ccdsGene).  The frame information is in the exonFrames 
column as a comma separated list that refers to the exons listed in the 
exonStarts column. The data format is explained here:

http://genome.ucsc.edu/FAQ/FAQformat#format9

(COPIED BELOW)

Note that, for most tables in our databases, the coordinates for the 
start of the CDS or exons or other features are 0-based, that is, the 
first base in a chromosome is stored as 0 so you need to add 1 to the 
database table starts to get the actual starts.

You will need to write a program to use the SNP locations and CCDS 
locations to map the SNPs to exons and exon frames in the CCDS. 



Galaxy is another data mining website that is built on top of the UCSC 
Genome Browser and allows you to do intersections and get the data for 
both tables that are queried.  To use Galaxy, go to 
http://main.g2.bx.psu.edu/ and click on "Get Data" in the left hand 
panel and click on "UCSC Main table browser". Then select first the data 
from the snp129 table. When you press "get output", a link to the data 
will appear in the history panel on the right hand side (make sure the 
box for "Send output to Galaxy" is checked). Then select data from the 
ccdsGene table as above. Links to this data will also appear in the 
right hand side history panel.  Then click on "Operate on Genomic 
Intervals" on the left panel and click on "Join", select to join the two 
datasets (SNPs and CCDS). Then you will get a list of both the SNP IDs 
and positions and the CCDS ID and positional data for the CCDS that they 
intersect with. You will still need to write a program to figure out the 
exon and frame information for each SNP.

I hope that this helps you.

Rachel

Young, Stuart wrote:
>
> Hi Rachel,
>
>  
>
> I was wondering if you provide a downloadable list of dbSNPs in the 
> CCDS, including chromosome position and frame information?
>
>  
>
> Cheers,
>
>  
>
> Stuart.
>
>  
>
>  
>
>  
>
> Stuart Young
>
> Research Associate
>
> Center for Computational Science
>
> Leonard M. Miller School of Medicine
>
> 1120 NW 14th St., CRB-1188 (C-213)
>
> Miami, FL 33136
>
> Tel. + 1 (305) 243-4539
>
>  
>

-- 
Rachel Harte, Ph.D.
Bioinformatics Engineer
UCSC Genome Bioinformatics Group
http://genome.ucsc.edu






ADDITIONAL INFORMATION (OUT OF DATE?) ON THE TABLE FORMAT:

http://genome.ucsc.edu/FAQ/FAQformat#format9

GenePred table format 	
  	

genePred is a table format commonly used for gene prediction tracks in the Genome Browser. Variations of the genePred format are listed below.
Gene Predictions
The following definition is used for gene prediction tables. In alternative-splicing situations, each transcript has a row in this table.

table genePred
"A gene prediction."
    (
    string  name;               "Name of gene"
    string  chrom;              "Chromosome name"
    char[1] strand;             "+ or - for strand"
    uint    txStart;            "Transcription start position"
    uint    txEnd;              "Transcription end position"
    uint    cdsStart;           "Coding region start"
    uint    cdsEnd;             "Coding region end"
    uint    exonCount;          "Number of exons"
    uint[exonCount] exonStarts; "Exon start positions"
    uint[exonCount] exonEnds;   "Exon end positions"
    )

Gene Predictions (Extended)
The following definition is used for extended gene prediction tables. In alternative-splicing situations, each transcript has a row in this table. The refGene table is an example of the genePredExt format.

table genePredExt

"A gene prediction with some additional info."
    (
    string name;        	"Name of gene (usually transcript_id from GTF)"
    string chrom;       	"Chromosome name"
    char[1] strand;     	"+ or - for strand"
    uint txStart;       	"Transcription start position"
    uint txEnd;         	"Transcription end position"
    uint cdsStart;      	"Coding region start"
    uint cdsEnd;        	"Coding region end"
    uint exonCount;     	"Number of exons"
    uint[exonCount] exonStarts; "Exon start positions"
    uint[exonCount] exonEnds;   "Exon end positions"
    uint id;            	"Unique identifier"
    string name2;       	"Alternate name (e.g. gene_id from GTF)"
    string cdsStartStat; 	"enum('none','unk','incmpl','cmpl')"
    string cdsEndStat;   	"enum('none','unk','incmpl','cmpl')"
    lstring exonFrames; 	"Exon frame offsets {0,1,2}"
    )

Gene Predictions and RefSeq Genes with Gene Names

A version of genePred that associates the gene name with the gene prediction information. In alternative-splicing situations, each transcript has a row in this table.


table refFlat

"A gene prediction with additional geneName field."
    (
    string  geneName;           "Name of gene as it appears in Genome Browser."
    string  name;               "Name of gene"
    string  chrom;              "Chromosome name"
    char[1] strand;             "+ or - for strand"
    uint    txStart;            "Transcription start position"
    uint    txEnd;              "Transcription end position"
    uint    cdsStart;           "Coding region start"
    uint    cdsEnd;             "Coding region end"
    uint    exonCount;          "Number of exons"
    uint[exonCount] exonStarts; "Exon start positions"
    uint[exonCount] exonEnds;   "Exon end positions"
    )

	





</entry>



<entry [Wed Jan  7 15:19:02 EST 2009] DOWNLOAD AND INSTALL 454 data analysis software >



1. DOWNLOADED FROM WEBSITE

  ftp://ftp.454.com
  Username: 454software
  Password: GF2ds4eus

2. UNZIPPED 64-BIT VERSION

cd /store/home/syoung/base/apps/454/offInstrumentApps_2.0.00.20-64

ll
    total 169M
    drwxr-xr-x 2 syoung users 4.0K Sep  9 15:10 .
    drwxr-xr-x 4 syoung users 4.0K Jan  7 15:34 ..
    -rw-r--r-- 1 syoung users 5.9M Sep  9 14:00 amplicons_2.0.00.20.tar
    -rw-r--r-- 1 syoung users 4.2M Sep  9 14:00 assembly_2.0.00.20.tar
    -rw-r--r-- 1 syoung users 1.1M Sep  9 15:09 gsReporter-2.0.00.20-1.x86_64.rpm
    -rw-r--r-- 1 syoung users  11M Sep  9 15:09 gsRunProcessor-2.0.00.20-1.x86_64.rpm
    -rw-r--r-- 1 syoung users 2.0M Sep  9 15:09 gsRunProcessorManager-2.0.00.20-1.x86_64.rpm
    -rw-r--r-- 1 syoung users 9.8M Sep  9 15:09 gsRunProcessor-openmpi-2.0.00.20-1.x86_64.rpm
    -rw-r--r-- 1 syoung users 1.5M Sep  9 15:10 gsSupportTool-1.16.02-1.i386.rpm
    -rwxr-xr-x 1 syoung users  21K Sep  9 14:58 INSTALL
    -rw-r--r-- 1 syoung users  85M Sep  9 14:58 jre.tar
    -rw-r--r-- 1 syoung users 4.2M Sep  9 14:00 mapper_2.0.00.20.tar
    -rw-r--r-- 1 syoung users  37M Sep  9 15:10 offInstrument.tar
    -rw-r--r-- 1 syoung users  10K May  2  2008 pathVar.tar
    -rw-r--r-- 1 syoung users 2.5K Sep  9 15:10 README.offInstrument
    -rw-r--r-- 1 syoung users 7.4M Sep  9 14:00 runBrowser_2.0.00.20.tar
    -rwxr-xr-x 1 syoung users 1.5M Sep  9 13:47 supportToolInstaller_1.16.02.runme


3. INSTALLED TO /store/home/syoung/base/apps/454/2.0.00.20-64

cd /store/home/syoung/base/apps/454/offInstrumentApps_2.0.00.20-64
./INSTALL

    At any prompt, press the ENTER key to accept the default value
    
    Please enter the number corresponding to the option:
    
    [1] Install Off-Instrument Apps AND gsRunProcessor
    [2] Install Off-Instrument Apps ONLY
    [3] Install gsRunProcessor ONLY
    [4] Quit

    Enter number [1]: 1
    
    **************************************************************************
    Please enter the directory in which to install.
    [default: /home/syoung/454]
    or type "quit" to exit the installation: /store/home/syoung/base/apps/454/2.0.00.20-64
    
    
    **************************************************************************
    Directory "/store/home/syoung/base/apps/454/2.0.00.20-64" already exists
    Continuing will update packages already installed in /store/home/syoung/base/apps/454/2.0.00.20-64
    [Default: yes]
    or type "quit" to exit the installation: 
    
            Creating directory /store/home/syoung/base/apps/454/2.0.00.20-64
    
    
    
            Be sure to add '/store/home/syoung/base/apps/454/2.0.00.20-64/bin' to your PATH.
            For example:
    
            export PATH=$PATH:/store/home/syoung/base/apps/454/2.0.00.20-64/bin
    
    
            Command line apps successfully installed
            JRE successfully installed
            gsMapper successfully installed
            gsAssembler successfully installed
            gsAmplicon successfully installed
            gsRunBrowser successfully installed
    
            Version 2.0.00.20 Off-Instrument Apps successfully installed.
    
    INSTALLING AS LOCAL USER
    
    Roche/454 Support Tool v1.16.02. - Installation Utility
    
    Roche/454 Support Tool(beta) v1.16 installed in /store/home/syoung/base/apps/454/2.0.00.20-64/apps/gsSupportTool.
    Run the tool by calling /store/home/syoung/base/apps/454/2.0.00.20-64/apps/gsSupportTool/usr/bin/gsSupportTool
            gsRunProcessor successfully installed
    
            Version 2.0.00.20 gsRunProcessor Suite successfully installed.


4. TEST APPS

cd /store/home/syoung/base/apps/454/2.0.00.20-64/bin
ll
    total 34M
    drwxr-xr-x 2 syoung users 4.0K Jan  7 15:37 .
    drwxr-xr-x 9 syoung users 4.0K Jan  7 15:37 ..
    -rwxr-xr-x 1 syoung users 3.0M Sep  9 15:10 addRun
    -rwxr-xr-x 1 syoung users 2.9M Sep  9 15:10 createProject
    -rwxr-xr-x 1 syoung users  734 Apr  4  2008 doAmplicon
    -rwxr-xr-x 1 syoung users 551K Sep  9 15:10 fnafile
    -rwxr-xr-x 1 syoung users 3.0M Sep  9 15:10 getProjAlignData
    -rwxr-xr-x 1 syoung users  734 Apr  4  2008 gsAmplicon
    -rwxr-xr-x 1 syoung users  636 Apr  4  2008 gsAssembler
    -rwxr-xr-x 1 syoung users  622 Apr  4  2008 gsMapper
    lrwxrwxrwx 1 syoung users   75 Jan  7 15:37 gsReporter -> /store/home/syoung/base/apps/454/2.0.00.20-64/gsReporter/usr/bin/gsReporter
    -rwxr-xr-x 1 syoung users  740 Apr  4  2008 gsRunBrowser
    lrwxrwxrwx 1 syoung users   83 Jan  7 15:37 gsRunProcessor -> /store/home/syoung/base/apps/454/2.0.00.20-64/gsRunProcessor/usr/bin/gsRunProcessor
    lrwxrwxrwx 1 syoung users   86 Jan  7 15:37 gsSupportTool -> /store/home/syoung/base/apps/454/2.0.00.20-64/apps/gsSupportTool/usr/bin/gsSupportTool
    -rwxr-xr-x 1 syoung users   24 Sep  9 15:10 newAssembly
    -rwxr-xr-x 1 syoung users 4.1M Sep  9 15:10 newbler
    -rwxr-xr-x 1 syoung users   24 Sep  9 15:10 newMapping
    -rwxr-xr-x 1 syoung users 2.9M Sep  9 15:10 removeRun
    lrwxrwxrwx 1 syoung users   86 Jan  7 15:37 runAnalysisFilter -> /store/home/syoung/base/apps/454/2.0.00.20-64/gsRunProcessor/usr/bin/runAnalysisFilter
    lrwxrwxrwx 1 syoung users   84 Jan  7 15:37 runAnalysisPipe -> /store/home/syoung/base/apps/454/2.0.00.20-64/gsRunProcessor/usr/bin/runAnalysisPipe
    lrwxrwxrwx 1 syoung users   93 Jan  7 15:37 runAnalysisPipeAmplicons -> /store/home/syoung/base/apps/454/2.0.00.20-64/gsRunProcessor/usr/bin/runAnalysisPipeAmplicons
    lrwxrwxrwx 1 syoung users   93 Jan  7 15:37 runAnalysisPipePairedEnd -> /store/home/syoung/base/apps/454/2.0.00.20-64/gsRunProcessor/usr/bin/runAnalysisPipePairedEnd
    -rwxr-xr-x 1 syoung users 2.9M Sep  9 15:10 runAssembly
    lrwxrwxrwx 1 syoung users   81 Jan  7 15:37 runImagePipe -> /store/home/syoung/base/apps/454/2.0.00.20-64/gsRunProcessor/usr/bin/runImagePipe
    -rwxr-xr-x 1 syoung users 2.9M Sep  9 15:10 runMapping
    -rwxr-xr-x 1 syoung users 2.9M Sep  9 15:10 runProject
    -rwxr-xr-x 1 syoung users 2.9M Sep  9 15:10 setRef
    -rwxr-xr-x 1 syoung users 518K Sep  9 15:10 sff2scf
    -rwxr-xr-x 1 syoung users 1.8M Sep  9 15:10 sfffile
    -rwxr-xr-x 1 syoung users 518K Sep  9 15:10 sffinfo
    -rwxr-xr-x 1 syoung users 5.5K Sep  9 15:10 sffrescore
    lrwxrwxrwx 1 syoung users   85 Jan  7 15:37 startGsProcessor -> /store/home/syoung/base/apps/454/2.0.00.20-64/gsRunProcessor/usr/bin/startGsProcessor
    -rwxr-xr-x 1 syoung users 2.9M Sep  9 15:10 stopRun


OKAY!




From: "Boese, Benjamin" <benjamin.boese@roche.com<mailto:benjamin.boese@roche.com>>
Date: January 6, 2009 5:03:52 PM EST
To: "Zuchner, Stephan" <SZuchner@med.miami.edu<mailto:SZuchner@med.miami.edu>>
Subject: RE: 454 Off Instrument Applicaions

Hi Stephan,

I received your acceptance of the End User License Agreement and the 454 data analysis software is now available from the following ftp site:

  ftp://ftp.454.com
  Username: 454software
  Password: GF2ds4eus

Once you have logged in, you can navigate to the /454software/v2.0.00_OffInstrument/ directory and you'll find .tar.gz files for both the 32-bit and 64-bit installations plus a PDF copy of the software manual.  The installation instructions can be found inside the appropriate archive.  If you have any questions, please don't hesitate to contact me.

If you could also put me in touch with the people that will be doing the analysis I can work with them to arrange for training on the software and make sure that everyone is on the same page with handling the data once it has been generated.

Best regards,
Ben







</entry>



<entry [Tues Jan 6 22:39:24 EDT 2008] DOWNLOAD CCDS TO /home/syoung/base/pipeline/exome/ccds>



CREATED deepvac.pl

./deepvac.pl --url ftp://ftp.ncbi.nlm.nih.gov/pub/CCDS/current_human/ --outputdir /home/syoung/base/pipeline/exome/ccds

    Run time: 00:00:37
    Completed ./deepvac.pl
    10:40PM, 6 January 2009
    ****************************************


cd /home/syoung/base/pipeline/exome/ccds
ll
-rw-rw-rw- 1 syoung users   24 Jan  6 22:39 BuildInfo.20080430.txt
-rw-rw-rw- 1 syoung users 5.3M Jan  6 22:40 CCDS.20080430.txt
-rw-rw-rw- 1 syoung users 5.3M Jan  6 22:40 CCDS.20080609.txt
-rw-rw-rw- 1 syoung users 5.3M Jan  6 22:40 CCDS.20080902.txt
-rw-rw-rw- 1 syoung users 2.8M Jan  6 22:40 CCDS2Sequence.20080430.txt
-rw-rw-rw- 1 syoung users 2.8M Jan  6 22:40 CCDS2Sequence.20080902.txt
-rw-rw-rw- 1 syoung users  33M Jan  6 22:40 CCDS_nucleotide.20080430.fna
-rw-rw-rw- 1 syoung users 5.8M Jan  6 22:40 CCDS_protein.20080430.fna.gz
-rw-rw-rw- 1 syoung users  248 Jan  6 22:40 README.20080609
-rw-rw-rw- 1 syoung users 1.4K Jan  6 22:40 README.20080902

records CCDS_nucleotide.20080430.fna 
20092

records CCDS_protein.20080430.fna 
20092


STRAND AND POSITION INFORMATION IN CCDS.*.txt FILE:

head CCDS.20080902.txt

#chromosome     g_accession     gene    gene_id ccds_id ccds_status     cds_strand      cds_from        cds_to  cds_locations   match_type
1       NC_000001.8     FLJ22639        79854   CCDS1.1 Withdrawn, inconsistent annotation      -       801942  802433  [801942-802433] Identical
1       NC_000001.9     SAMD11  148398  CCDS2.2 Public  +       851184  869395  [851184-851255, 855397-855578, 856281-856331, 861014-861138, 864282-864371, 864517-864702, 866386-866548, 867378-867493, 867652-867730, 867801-868300, 868495-868619, 868940-869050, 869150-869395]       Identical
1       NC_000001.9     NOC2L   26155   CCDS3.1 Public  -       869936  884482  [869936-870042, 870299-870388, 870760-870895, 871415-871528, 871644-871787, 873373-873474, 873732-873845, 876369-876480, 877242-877381, 877654-877842, 878417-878530, 879024-879134, 879246-879324, 881165-881255, 881337-881457, 882136-882267, 882341-882515, 884171-884323, 884457-884482]       Identical
1       NC_000001.9     PLEKHN1 84069   CCDS4.1 Public  +       891774  899817  [891774-891856, 891946-892045, 895519-895665, 895763-895843, 895928-896000, 896121-896248, 896355-896450, 896566-896646, 897317-897392, 897530-897666, 898103-898252, 898428-898568, 898742-898882, 899075-899293, 899558-899606, 899684-899817]  Identical
1       NC_000001.9     HES4    57801   CCDS5.1 Public  -       924301  925215  [924301-924674, 924768-924855, 924934-925029, 925108-925215]    Identical
1       NC_000001.9     ISG15   9636    CCDS6.1 Public  +       938816  939720  [938816-938818, 939226-939720]  Identical




</entry>



<entry [Fri Dec 26 17:42:24 EDT 2008] EXOME DATA FROM NIMBLEGEN>



1. LEFT-CLICK 'MY COMPUTER', CHOOSE TOOLS --> MAP NETWORK DRIVE

Drive   Y:
Folder  \\medfs02\humangenomics-admin01$\Lab\Projects\Exome


Y: DRIVE LOCATION
\\medfs02\humangenomics-admin01$

LOCATION ON Y: DRIVE 
Y:\Lab\Projects\Exome


Friday, December 26, 2008 5:42 PM
To: Young, Stuart; Hedges, Dale; Huang, Jia; Khuri, Sawsan; Dittman, David; Hoffman, Josh D; Zuchner, Stephan
Subject: exome

Here are the data to play with: Y:\Lab\Projects\Exome. Interesting stuff. Stuart can you get to this place?

Please do not distribute to ANYONE without informing Dale or me.
 
See you soon,

Stephan


Connect a drive from My Network Places

   1. Click Start, click My Network Places, click Entire Network, and then double-click Microsoft Windows Network.
   2. Double-click the domain that you want to open.
   3. Double-click the computer that has the shared resource you want to map. All the shared resources for that computer automatically appear in the window.
   4. Right-click the shared drive or folder that you want to map, and then click Map Network Drive.
   5. Click the drive letter that you want to use, and then specify whether you want to reconnect every time that you log on to your computer.

      Note Network drives are mapped by using letters starting from the letter Z. This is the default drive letter for the first mapped drive you create. However, you can select another letter if you want to use a letter other than Z.
   6. Click Finish.

      A windows opens that displays the contents of the resource you mapped.


Back to the top
Connect a drive from My Computer or Windows Explorer

   1. To connect a drive from My Computer, click Start, right-click My Computer, and then click Explore.

      To connect a drive from Windows Explorer, right-click Start, and then click Explore.
   2. On the Tools menu, click Map Network Drive.
   3. In the Drive box, click a drive letter.
   4. In the Folder box, type the UNC path for the server and shared resource in the following format: \\server name\share name. You can also click Browse to find the computer and shared resource.

You can map shared drives and shared folders. When you access a shared drive or folder you can also access subfolders if you have the appropriate permissions. However, you cannot map a drive for a subfolder that is not explicitly configured as a shared resource.


Back to the top
Use the Net Use command to map or disconnect a drive
You can use the net use command for batch files and scripts. To use the net use command to map or disconnect a drive:

    * To map a network drive:
         1. Click Start, and then click Run.
         2. In the Open box, type cmd.
         3. Type net use x: \\computer name\share name, where x: is the drive letter you want to assign to the shared resource.
    * To disconnect a mapped drive:
         1. Click Start, and then click Run.
         2. In the Open box, type cmd.
         3. Type net use x: /delete, where x: is the drive letter of the shared resource.


Back to the top
Disconnect from a mapped network drive

   1. Click Start, and then click My Computer.
   2. Right-click the icon for the mapped drive.
   3. Click Disconnect.

Note When you disconnect from a mapped drive, you remove the mapped drive letter that you assigned to the shared resource. You can still access the resource from My Network Places.


</entry>



<entry [Fri Dec 26 10:09:24 EDT 2008] SLIDER ASSEMBLER USES SOLEXA QUALITY VALUES>



Friday, December 26, 2008 10:09 AM
To: 	
Young, Stuart
Cc: 	
Hedges, Dale; Zuchner, Stephan; Huang, Jia; Dittman, David; Nunez, Eduardo
Attachments: 	
Slider_alignment_tool.pdf? (152 KB?)[Open as Web Page]

Hi Stuart,

I just came across this new aligner on pubmed.

Thanks,

Josh

http://bioinformatics.oxfordjournals.org/cgi/content/full/25/1/6

</entry>



<entry [Mon Dec 22 23:35:24 EDT 2008] SEQANSWERS March 2008 TALKING ABOUT NIMBLEGEN CAPTURE WITH SOLEXA SEQUENCING>



http://seqanswers.com/forums/showthread.php?t=11

 Illumina/Solexa sequencing of human exons enriched with Nimblegen arrays


To continue this topic, as it's been pretty popular...there was just another paper released by another group at Cold Spring Harbor using Nimblegen arrays in combination with Solexa sequencing.


Link to Nature is here:
http://www.nature.com/ng/journal/v39...g.2007.42.html

Some interesting highlights below, I'll try to expand on the paper tomorrow...it's getting late for me!

1. They show what we've already seen from the Baylor/Emory groups (discussed over in our 454 forum), that it's possible to capture a majority of human exons on 6-7 Nimblegen arrays with ~350k features each. Seems to be the same probe design, 60-mers tiled every 20bp.

2. Some data that suggests WGA samples miss quite a bit...~60% of exons represented with WGA, and ~98% without. Also WGA biases slightly against AT rich exons.

3. Showed that shorter captured samples (150-200, the range Illumina recommends...) work much better than capturing 500-600 base fragments. This is not surprising as Illumina relies on fragment length for efficient bridging and cluster generation. Seems they tried the same protocol that the 454/Nimblegen groups used.

4. A remarkable lack of commentary on sequencing accuracy, with only one comment stating that they detected 60% of HapMap SNP's expected in this CEPH individual.

They show some actual read data in the Supplementary Info from five SNP loci, which in reality is quite disappointing from an accuracy standpoint. There are at least 3 random differences from consensus in some of the reads that they fail to address, and in the same breath claim they are calling heterozygous SNPs simply because there are differences seen at an rs locus. I don't have the paper in front of me now but there were quite a few low quality bases as well. Up to 17 bases out of 26 in one run were quite poor.

I also wonder why the authors, in the intro to the paper, describe Solexa sequencing as generating "35-50" bp reads, and then use 26bp read lengths throughout their study. Comes across like an industrial application note from Illumina/Nimblegen, rather than a Nature paper.

Anyway, very interesting paper, although not the best presentation of actual sequence data nor any biology. It reminds me of the early days of microarrays when all you had to do demonstrate a run on someone's array platform to get a Nature paper. In all actuality I'm just jealous that I don't get to work with this type of technology, yet.
Last edited by ECO; 01-26-2008 at 10:00 AM. Reason: Updated link to paper
ECO is offline   	Reply With Quote
ECO
View Public Profile
Send a private message to ECO
Visit ECO's homepage!
Find More Posts by ECO
Old 01-26-2008, 06:17 AM 	  #2
ivoire
Junior Member

Instrument(s):
Illumina GAI-II
 
Member #: 104
Join Date: Jan 2008
Location: GA
Posts: 6
	
Default
I have to clarify that WGA samples do not miss ~ 60% of exons. Read Okou et al (2007). they not only use WGA on all the samples (MDA method of repli g kit - Qiagen) but sequenced unique coding and non coding sequences. Not only did they get great basecall result but there is no reason to believe that WGA is particularly bias toward exons and not introns. for more information please read the paper by Pinard et al (BMC Genomics. 2006 Aug 23;7:216) and also BMC Biotechnol. 2005 Sep 16;5:24.
Last edited by ivoire; 01-26-2008 at 06:57 AM.
ivoire is offline   	Reply With Quote
ivoire
View Public Profile
Send a private message to ivoire
Find More Posts by ivoire
Old 02-26-2008, 07:45 PM 	  #3
ECO
--Site Admin--

 
Member #: 1
Join Date: Oct 2007
Location: CA, USA
Posts: 308
	
Default
Quote:
Originally Posted by ivoire View Post
I have to clarify that WGA samples do not miss ~ 60% of exons. Read Okou et al (2007). they not only use WGA on all the samples (MDA method of repli g kit - Qiagen) but sequenced unique coding and non coding sequences. Not only did they get great basecall result but there is no reason to believe that WGA is particularly bias toward exons and not introns. for more information please read the paper by Pinard et al (BMC Genomics. 2006 Aug 23;7:216) and also BMC Biotechnol. 2005 Sep 16;5:24.
Hey ivoire, I think I was unclear with my wording...I meant that 60% WERE represented with WGA, versus 98% being represented without.
ECO is offline   	Reply With Quote
ECO
View Public Profile
Send a private message to ECO
Visit ECO's homepage!
Find More Posts by ECO
Old 03-15-2008, 02:53 PM 	  #4
sathish
Junior Member

Instrument(s):
Illumina GAI-II Roche 454
 
Member #: 150
Join Date: Feb 2008
Location: california
Posts: 2
	
Default Difference between exon capture microarrays and gene expression microarrays
Hi Group,

I am new to next generation sequencing. I am wondering what is the difference between exon capture microarrays and gene expression microarrays?

I like to know the answers with respect transcript abundance and probe saturation.

Thanks a lot
sathish is offline   	Reply With Quote
sathish
View Public Profile
Send a private message to sathish
Find More Posts by sathish
Old 03-16-2008, 10:47 AM 	  #5
ECO
--Site Admin--

 
Member #: 1
Join Date: Oct 2007
Location: CA, USA
Posts: 308
	
Default
Quote:
Originally Posted by sathish View Post
Hi Group,

I am new to next generation sequencing. I am wondering what is the difference between exon capture microarrays and gene expression microarrays?

I like to know the answers with respect transcript abundance and probe saturation.

Thanks a lot
Hey sathish...gene expression microarrays are just that, for assaying gene expression! (but you knew that).

"Exon capture" or any type of enrichment array is basically an upstream sample prep method for genomic sequencing. It is one of a few methods for genome decomplexing, so that one can focus the next gen instrument on a specific region of interest instead of the entire genome. It doesn't just have to be exons that are captured, this was basically a proof of principle from Nimblegen, I personally think there are better uses than just exon sequencing.

Before array enrichment came on the scene, people do many specific PCRs to enrich for their regions of interest, then pool them prior to sequencing. This is totally workable but can be labor intensive for large regions or many patients.

Supposedly, Agilent is about to release a "solution phase array" which captures the regions of interest in solution rather than on solid phase, which should give improved kinetics of hybridization.

Hope that helps!
ECO is offline   	Reply With Quote
ECO
View Public Profile
Send a private message to ECO
Visit ECO's homepage!
Find More Posts by ECO
Old 03-16-2008, 01:57 PM 	  #6
sathish
Junior Member

Instrument(s):
Illumina GAI-II Roche 454
 
Member #: 150
Join Date: Feb 2008
Location: california
Posts: 2
	
Default Microarays
Thanks for your reply.

However, I am wondering will there be a difference in exon or DNA capture. Can we use capture microarray to estimate the transcript abundance? Will capture arrays show difference between most abundant, intermediately abundant and low abundant transcripts?

Is there any change in array manufacture between expression arrays and capture arrays? Is there difference in probe saturation?

I think I am asking too many questions, basically I like to know technical difference between the two arrays.

Thanks again in advance for your answers.

Sathish 