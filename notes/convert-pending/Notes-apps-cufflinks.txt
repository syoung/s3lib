Notes-apps-cufflinks.txt

</entry>



<entry [Fri Nov 12 14:02:30 EST 2010] INSTALLED cufflinks 0.9.2 LINUX BINARY>



HERE:
/share/apps/ccsngs/apps/cufflinks/0.9.2

INSTALLATION:

mkdir -p /share/apps/ccsngs/apps/cufflinks/0.9.2
cd /share/apps/ccsngs/apps/cufflinks/0.9.2

wget http://cufflinks.cbcb.umd.edu/downloads/cufflinks-0.9.2.Linux_x86_64.tar.gz
tar xvfz *
mv cufflinks-0.9.2.Linux_x86_64/* ./
rm -fr cufflinks-0.9.2.Linux_x86_64
mv cufflinks-0.9.2.Linux_x86_64.tar.gz ../archive
ll

	-rw-rw-r--  1 syoung bioinfo  551 Oct 22 15:40 AUTHORS
	-rwxrwxr-x  1 syoung bioinfo 1.9M Oct 22 15:40 cuffcompare
	-rwxrwxr-x  1 syoung bioinfo  15M Oct 22 15:40 cuffdiff
	-rwxrwxr-x  1 syoung bioinfo  20M Oct 22 15:40 cufflinks
	-rw-rw-r--  1 syoung bioinfo 1.5K Oct 22 15:40 LICENSE
	-rw-rw-r--  1 syoung bioinfo 3.5K Oct 22 15:40 README


OK



INSTALL CUFFLINKS 0.9.2 FROM SOURCE

mkdir -p /share/apps/ccsngs/apps/cufflinks/0.9.2-src
cd /share/apps/ccsngs/apps/cufflinks/0.9.2-src



DOWNLOAD BOOST 1.44

cd /nethome/syoung/base/apps/libs/boost/downloads
wget http://sourceforge.net/projects/boost/files/boost/1.44.0/boost_1_44_0.tar.gz/download
tar xvfz boost_1_44_0.tar.gz
cd boost_1_44_0

mkdir -p /nethome/syoung/base/apps/libs/boost/1.44.0
./bootstrap.sh --prefix=/nethome/syoung/base/apps/libs/boost/1.44.0

	Building Boost.Jam with toolset gcc... tools/jam/src/bin.linuxx86_64/bjam
	Detecting Python version... 2.7
	Detecting Python root... /nethome/syoung/base/apps/python/python/2.7
	Unicode/ICU support for Boost.Regex?... not found.
	Generating Boost.Build configuration in project-config.jam...
	
	Bootstrapping is done. To build, run:
	
		./bjam
		
	To adjust configuration, edit 'project-config.jam'.
	Further information:
	
	   - Command line help:
		 ./bjam --help
		 
	   - Getting started guide: 
		 http://www.boost.org/more/getting_started/unix-variants.html
		 
	   - Boost.Build documentation:
		 http://www.boost.org/boost-build2/doc/html/index.html

./bjam install



NOTES
-----

Easy Build and Install
----------------------

http://www.boost.org/doc/libs/1_44_0/more/getting_started/unix-variants.html

Issue the following commands in the shell (don't type $; that represents the shell's prompt):

./bootstrap.sh --help
Select your configuration options and invoke ./bootstrap.sh again without the --help option. Unless you have write permission in your system's /usr/local/ directory, you'll probably want to at least use

$ ./bootstrap.sh --prefix=path/to/installation/prefix
to install somewhere else. Also, consider using the --show-libraries and --with-libraries=library-name-list options to limit the long wait you'll experience if you build everything. Finally,

$ ./bjam install



bootstrap.sh HELP
-----------------

./bootstrap.sh --help

`./bootstrap.sh' prepares Boost for building on a few kinds of systems.

Usage: ./bootstrap.sh [OPTION]... 

Defaults for the options are specified in brackets.

Configuration:
  -h, --help                display this help and exit
  --with-bjam=BJAM          use existing Boost.Jam executable (bjam)
                            [automatically built]
  --with-toolset=TOOLSET    use specific Boost.Build toolset
                            [automatically detected]
  --show-libraries          show the set of libraries that require build
                            and installation steps (i.e., those libraries
                            that can be used with --with-libraries or
                            --without-libraries), then exit
  --with-libraries=list     build only a particular set of libraries,
                            describing using either a comma-separated list of
                            library names or "all"
                            [all]
  --without-libraries=list  build all libraries except the ones listed []
  --with-icu                enable Unicode/ICU support in Regex 
                            [automatically detected]
  --without-icu             disable Unicode/ICU support in Regex
  --with-icu=DIR            specify the root of the ICU library installation
                            and enable Unicode/ICU support in Regex
                            [automatically detected]
  --with-python=PYTHON      specify the Python executable [python]
  --with-python-root=DIR    specify the root of the Python installation
                            [automatically detected]
  --with-python-version=X.Y specify the Python version as X.Y
                            [automatically detected]

Installation directories:
  --prefix=PREFIX           install Boost into the given PREFIX
                            [/usr/local]
  --exec-prefix=EPREFIX     install Boost binaries into the given EPREFIX
                            [PREFIX]

More precise control over installation directories:
  --libdir=DIR              install libraries here [EPREFIX/lib]
  --includedir=DIR          install headers here [PREFIX/include]







INSTALLATION INSTRUCTIONS
http://www.boost.org/doc/libs/1_44_0/more/getting_started/unix-variants.html

BOOST 1.42.0 FAILED TO INSTALL AGAIN, BUT THIS TIME USING --toolset=intel OPTION:
/nethome/syoung/base/apps/libs/boost-jam/3.1.17/bin/bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.42.0 --toolset=intel architecture=x86 address-model=64 link=static runtime-link=static stage install


cd /share/apps/ccsngs/apps/cufflinks/archive/cufflinks-0.9.2

./configure --prefix=/share/apps/ccsngs/apps/cufflinks/archive/0.9.2 \
--with-bam=/share/apps/ccsngs/apps/samtools/0.1.8 \
--with-boost=/share/apps/ccsngs/apps/lib/boost/1.42.0 \
--with-boost-libdir=ll \
--with-boost-thread=/share/apps/ccsngs/apps/lib/boost/1.42.0/lib/libboost_thread-gcc41-mt-1_39.so.1.42.0




NB: TRIED TO INSTALL cufflinks 0.9.2 FROM SOURCE


mkdir -p /share/apps/ccsngs/apps/cufflinks/archive/0.9.2
cd /share/apps/ccsngs/apps/cufflinks/archive
wget wget http://cufflinks.cbcb.umd.edu/downloads/cufflinks-0.9.2.tar.gz
tar xvfz cufflinks-0.9.2.tar.gz
cd cufflinks-0.9.2
./configure --prefix=/share/apps/ccsngs/apps/cufflinks/archive/0.9.2 \
--with-bam=/share/apps/ccsngs/apps/samtools/0.1.8 \
--with-boost=/share/apps/ccsngs/apps/lib/boost/1.39.0 \
--with-boost-libdir=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib \
--with-boost-thread=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0

	...
	configure: creating ./config.status
	config.status: creating Makefile
	config.status: creating src/Makefile
	config.status: creating config.h
	config.status: executing depfiles commands
	
	-- cufflinks 0.9.2 Configuration Results --
	  C++ compiler:        g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wuninitialized -m64 -O3  -DNDEBUG  -pthread -I/share/apps/ccsngs/apps/lib/boost/1.39.0/include/boost-1_39 -I/share/apps/ccsngs/apps/samtools/0.1.8/include 
	  GCC version:         gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-46)
	  Host System type:    x86_64-unknown-linux-gnu
	  Install prefix:      /share/apps/ccsngs/apps/cufflinks/archive/0.9.2
	  Install eprefix:     ${prefix}
	
	  See config.h for further configuration information.
	  Email <cole@cs.umd.edu> with questions and bug reports.

make
	
	make  all-recursive
	make[1]: Entering directory `/share/apps/ccsngs/apps/cufflinks/archive/cufflinks-0.9.2'
	Making all in src
	make[2]: Entering directory `/share/apps/ccsngs/apps/cufflinks/archive/cufflinks-0.9.2/src'
	if g++ -DHAVE_CONFIG_H -I. -I. -I..  -I../src  -I/usr/include  -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wuninitialized -m64 -O3  -DNDEBUG  -pthread -I/share/apps/ccsngs/apps/lib/boost/1.39.0/include/boost-1_39 -I/share/apps/ccsngs/apps/samtools/0.1.8/include -MT clustering.o -MD -MP -MF ".deps/clustering.Tpo" -c -o clustering.o clustering.cpp; \
			then mv -f ".deps/clustering.Tpo" ".deps/clustering.Po"; else rm -f ".deps/clustering.Tpo"; exit 1; fi
	In file included from clustering.cpp:10:
	clustering.h:34:54: error: boost/property_map/vector_property_map.hpp: No such file or directory
	scaffolds.h: In constructor â€˜Scaffold::Scaffold(const MateHit&)â€™:
	scaffolds.h:247: warning: unused variable â€˜opâ€™
	make[2]: *** [clustering.o] Error 1
	make[2]: Leaving directory `/share/apps/ccsngs/apps/cufflinks/archive/cufflinks-0.9.2/src'
	make[1]: *** [all-recursive] Error 1
	make[1]: Leaving directory `/share/apps/ccsngs/apps/cufflinks/archive/cufflinks-0.9.2'
	make: *** [all] Error 2










</entry>



<entry [Wed Oct 13 17:05:56 EDT 2010] INSTALLED SOURCE VERSION OF cufflinks 0.9.1>




cd /share/apps/ccsngs/apps/cufflinks/archive/cufflinks-0.9.1
make clean
export LD_RUN_PATH=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib
export BAM_ROOT=/share/apps/ccsngs/apps/samtools/0.1.8

./configure --prefix=/share/apps/ccsngs/apps/cufflinks/0.9.1beta \
--with-bam=/share/apps/ccsngs/apps/samtools/0.1.8 \
--with-boost=/share/apps/ccsngs/apps/lib/boost/1.39.0 \
--with-boost-libdir=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib \
--with-boost-thread=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0

		configure: creating ./config.status
		config.status: creating Makefile
		config.status: creating src/Makefile
		config.status: creating config.h
		config.status: executing depfiles commands
		
		-- cufflinks 0.9.1 Configuration Results --
		  C++ compiler:        g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wuninitialized -m64 -O3  -DNDEBUG  -pthread -I/share/apps/ccsngs/apps/lib/boost/1.39.0/include/boost-1_39 -I/share/apps/ccsngs/apps/samtools/0.1.8/include 
		  GCC version:         gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-46)
		  Host System type:    x86_64-unknown-linux-gnu
		  Install prefix:      /share/apps/ccsngs/apps/cufflinks/0.9.1beta
		  Install eprefix:     ${prefix}
		
		  See config.h for further configuration information.
		  Email <cole@cs.umd.edu> with questions and bug reports.
		  
make
make install




NOTES
-----

PROBLEM:

CAN'T FIND BOOST LIB

checking for boostlib >= 1.38.0... configure: error: We could not detect the boost libraries (version 1.38 or higher). If you have a staged boost library (still not installed) please specify $BOOST_ROOT in your environment and do not give a PATH to --with-boost option.  If you are sure you have boost installed, then check your version number looking in <boost/version.hpp>. See http://randspringer.de/boost for more documentation.


DIAGNOSIS:

BOOST VERSION 1.33 INSTALLED HERE:

/usr/lib
/usr/lib64
/usr/include

BUT NEED VERSION 1.38 OR HIGHER


SOLUTION:

SPECIFY IN LD_RUN_PATH AND WITH configure OPTIONS:

export LD_RUN_PATH=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib

--with-boost=/share/apps/ccsngs/apps/lib/boost/1.39.0 \
--with-boost-libdir=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib \
--with-boost-thread=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0

I.E., RUN CONFIGURE AS FOLLOWS:

cd /share/apps/ccsngs/apps/cufflinks/archive/cufflinks-0.9.1
make clean
export LD_RUN_PATH=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib
./configure --prefix=/share/apps/ccsngs/apps/cufflinks/0.9.1beta \
--with-boost=/share/apps/ccsngs/apps/lib/boost/1.39.0 \
--with-boost-libdir=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib \
--with-boost-thread=/share/apps/ccsngs/apps/lib/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0
make
make install



PROBLEM

CAN'T FIND LIBBAM

checking for boostlib >= 1.38.0... yes
checking for bamlib... configure: error: We could not detect the bam libraries (version  or higher).

If you have a staged bam library (still not installed) please specify $BAM_ROOT in your environment and do not give a PATH to --with-bam option.  If you are sure you have bam installed, then check your version number looking in <bam/version.hpp>. See http://randspringer.de/bam for more documentation.


DIAGNOSIS


http://seqanswers.com/forums/showthread.php?p=26435

Actually, the answer is the same for Tophat as for Cufflinks;

In my case, I just changed the instructions to use /home/user/bin/samtools
Download the SAM tools
Unpack the SAM tools tarball and cd to the SAM tools source directory.
Build the SAM tools by typing make at the command line.
Choose a directory into which you wish to copy the SAM tools binary, the included library libbam.a, and the library headers. A common choice is /usr/local/. (I used /home/user/bin/samtools)

Copy libbam.a to the lib/ directory in the folder you've chosen above (e.g. /usr/local/lib/) - /home/user/bin/samtools/lib

Create a directory called "bam" in the include/ directory (e.g. /usr/local/include/bam) /home/user/bin/samtools/include/bam

Copy the headers (files ending in .h) to the include/bam directory you've created above (e.g. /usr/local/include/bam)

Copy the samtools binary to some directory in your PATH.


SOLUTION


CREATE DIRECTORY

/share/apps/ccsngs/apps/samtools/0.1.8

AND COPY libbam.a TO IT.


NB: USE THIS PATH WITH --with-bam:

--with-bam=/share/apps/ccsngs/apps/samtools/0.1.8


CREATE DIRECTORY

/share/apps/ccsngs/apps/samtools/0.1.8/include/bam

AND COPY HEADER FILES TO IT






PROBLEM




In file included from clustering.cpp:10:
clustering.h:34:54: error: boost/property_map/vector_property_map.hpp: No such file or directory
make[2]: *** [clustering.o] Error 1
make[2]: Leaving directory `/share/apps/ccsngs/apps/cufflinks/archive/cufflinks-0.9.1/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/share/apps/ccsngs/apps/cufflinks/archive/cufflinks-0.9.1'
make: *** [all] Error 2







</entry>



<entry [Thu Apr 15 11:54:40 EDT 2010] RUNNING CUFFCOMPARE>



(
	SEE Notes-project48-bixbylab.txt, Thu Apr 15 11:54:40 EDT 2010
	RAN CUFFCOMPARE ON COVERAGE ANALYSES
)

EXAMPLE

mkdir -p /scratch/syoung/base/pipeline/bixby/run1/cuffcompare/analyses9-12/9-12
cd /scratch/syoung/base/pipeline/bixby/run1/cuffcompare/analyses9-12/9-12

cat /scratch/syoung/base/pipeline/bixby/run1/cuffcompare/analyses9-12/9-12/cuffcompare-9-12.out

    # Cuffcompare v0.8.2 | Command line was:
    #/nethome/bioinfo/apps/CUFFLINKS/0.8.2/cuffcompare -o /scratch/syoung/base/pipeline/bixby/run1/cuffcompare/analyses9-12/9-12/cuffcompare-9-12.out /scratch/syoung/base/pipeline/bixby/run1/tophat/analysis9/chr1/transcripts.gtf /scratch/syoung/base/pipeline/bixby/run1/tophat/analysis10/chr1/transcripts.gtf /scratch/syoung/base/pipeline/bixby/run1/tophat/analysis11/chr1/transcripts.gtf /scratch/syoung/base/pipeline/bixby/run1/tophat/analysis12/chr1/transcripts.gtf
    #
    #> Genomic sequence: chr1 
    #     Query mRNAs :    1514 in    1030 loci  (1458 multi-exon transcripts)
    #            (325 multi-transcript loci, ~1.5 transcripts per locus)
    
    #= Summary for dataset: /scratch/syoung/base/pipeline/bixby/run1/tophat/analysis9/chr1/transcripts.gtf :
    #     Query mRNAs :    1514 in    1030 loci  (1458 multi-exon transcripts)
    #            (325 multi-transcript loci, ~1.5 transcripts per locus)
    #> Genomic sequence: chr1 
    #     Query mRNAs :    1595 in    1072 loci  (1536 multi-exon transcripts)
    #            (345 multi-transcript loci, ~1.5 transcripts per locus)
    
    #= Summary for dataset: /scratch/syoung/base/pipeline/bixby/run1/tophat/analysis10/chr1/transcripts.gtf :
    #     Query mRNAs :    1595 in    1072 loci  (1536 multi-exon transcripts)
    #            (345 multi-transcript loci, ~1.5 transcripts per locus)
    #> Genomic sequence: chr1 
    #     Query mRNAs :    1644 in    1097 loci  (1582 multi-exon transcripts)
    #            (360 multi-transcript loci, ~1.5 transcripts per locus)
    
    #= Summary for dataset: /scratch/syoung/base/pipeline/bixby/run1/tophat/analysis11/chr1/transcripts.gtf :
    #     Query mRNAs :    1644 in    1097 loci  (1582 multi-exon transcripts)
    #            (360 multi-transcript loci, ~1.5 transcripts per locus)
    #> Genomic sequence: chr1 
    #     Query mRNAs :    1670 in    1112 loci  (1607 multi-exon transcripts)
    #            (366 multi-transcript loci, ~1.5 transcripts per locus)
    
    #= Summary for dataset: /scratch/syoung/base/pipeline/bixby/run1/tophat/analysis12/chr1/transcripts.gtf :
    #     Query mRNAs :    1670 in    1112 loci  (1607 multi-exon transcripts)
    #            (366 multi-transcript loci, ~1.5 transcripts per locus)

 Total union super-loci across all datasets: 1116 
  (399 multi-transcript, ~1.6 transcripts per locus)
  
    
USAGE:
  
    cuffcompare [options]* <cuff1.gtf> [cuff2.gtf] ... [cuffN.gtf] 


Options: 	

	-o <outprefix> 	Write the summary stats into the text output file <outprefix>(instead of stdout)
	
	-r 				An optional "reference" annotation GTF. Each sample is matched against this file, and sample isoforms are tagged as overlapping, matching, or novel where appropriate. See the refmap and tmap output file descriptions below.
	
	-R 				If -r was specified, this option causes cuffcompare to ignore reference transcripts that are not overlapped by any transcript in one of cuff1.gtf,...,cuffN.gtf. Useful for ignoring annotated transcripts that are not present in your RNA-Seq samples and thus adjusting the "sensitivity" calculation in the accuracy report written in the <outprefix> file
	
	-s <seq_dir> 	Causes cuffcompare to look into for fasta files with the underlying genomic sequences (one file per contig) against which your reads were aligned for some optional classification functions. For example, Cufflinks transcripts consisting mostly of lower-case bases are classified as repeats. Note that <seq_dir> must contain one fasta file per reference chromosome, and each file must be named after the chromosome, and have a .fa or .fasta extension.
	
	-V 				(Mildly) more verbose processing mode



</entry>



<entry [Sat Apr 10 02:49:24 EDT 2010] INSTALLED CUFFLINKS 0.8.2 ON BOTH PEGASUS AND KRONOS>




DOWNLOADED LINUX BINARIES:

wget http://cufflinks.cbcb.umd.edu/downloads/cufflinks-0.8.2.Linux_x86_64.tar.gz


INSTALLED TO:

/nethome/bioinfo/apps/CUFFLINKS/0.8.2




Running Cufflinks
=================

http://cufflinks.cbcb.umd.edu/manual.html#cuffdiff


Run cufflinks from the command line as follows:

    Usage: cufflinks [options]* <aligned_reads.sam> 

The following is a detailed description of the options used to control Cufflinks:

Arguments: 	
<aligned_reads.sam> 	A file of RNA-Seq read alignments in the SAM format. SAM is a standard short read alignment, that allows aligners to attach custom tags to individual alignments, and Cufflinks requires that the alignments you supply have some of these tags. Please see Input formats for more details.
Options: 	
-h/--help 	Prints the help message and exits
-m/--inner-dist-mean <int> 	This is the expected (mean) inner distance between mate pairs. For, example, for paired end runs with fragments selected at 300bp, where each end is 50bp, you should set -r to be 200. The default is 45bp.
-s/--inner-dist-std-dev <int> 	The standard deviation for the distribution on inner distances between mate pairs. The default is 20bp.
-I/--max-intron-length <int> 	The minimum intron length. Cufflinks will not report transcripts with introns longer than this, and will ignore SAM alignments with REF_SKIP CIGAR operations longer than this. The default is 300,000.
-F/--min-isoform-fraction <0.0-1.0> 	After calculating isoform abundance for a gene, Cufflinks filters out transcripts that it believes are very low abundance, because isoforms expressed at extremely low levels often cannot reliably be assembled, and may even be artifacts of incompletely spliced precursors of processed transcripts. This parameter is also used to filter out introns that have far fewer spliced alignments supporting them. The default is 0.05, or 5% of the most abundant isoform (the major isoform) of the gene.
-j/--pre-mrna-fraction <0.0-1.0> 	Some RNA-Seq protocols produce a significant amount of reads that originate from incompletely spliced transcripts, and these reads can confound the assembly of fully spliced mRNAs. Cufflinks uses this parameter to filter out alignments that lie within the intronic intervals implied by the spliced alignments. The minimum depth of coverage in the intronic region covered by the alignment is divided by the number of spliced reads, and if the result is lower than this parameter value, the intronic alignments are ignored. The default is 5%.
-p/--num-threads <int> 	Use this many threads to align reads. The default is 1.
-Q/--min-mapqual <int> 	Instructs Cufflinks to ignore alignments with a SAM mapping quality lower than this number. The default is 0.
-L/--label 	Cufflinks will report transfrags in GTF format, with a prefix given by this option. The default prefix is "CUFF".
-G/--GTF 	Tells Cufflinks to use the supplied reference annotation to estimate isoform expression. It will not assemble novel transcripts, and the program will ignore alignments not structurally compatible with any reference transcript.
Advanced Options: 	
--num-importance-samples <int> 	Sets the number of importance samples generated for each locus during abundance estimation. Default: 1000
--max-mle-iterations <int> 	Sets the number of iterations allowed during maximum likelihood estimation of abundances. Default: 5000

Cufflinks Input

Cufflinks takes a text file of SAM alignments as input. For more details on the SAM format, see the specification. The RNA-Seq read mapper TopHat produces output in this format, and is recommended for use with Cufflinks. However Cufflinks will accept SAM alignments generated by any read mapper. Here's an example of an alignment Cufflinks will accept:

s6.25mer.txt-913508	16	chr1 4482736 255 14M431N11M * 0 0 \
   CAAGATGCTAGGCAAGTCTTGGAAG IIIIIIIIIIIIIIIIIIIIIIIII NM:i:0 XS:A:-
	

Note the use of the custom tag XS. This attribute, which must have a value of "+" or "-", indicates which strand the RNA that produced this read came from. While this tag can be applied to any alignment, including unspliced ones, it must be present for all spliced alignment records (those with a 'N' operation in the CIGAR string).

The SAM file supplied to Cufflinks must be sorted by reference position. If you aligned your reads with TopHat, your alignments will be properly sorted already. If you used another tool, you may want to make sure they are properly sorted as follows:

    sort -k 3,3 -k 4,4n hits.sam > hits.sam.sorted

NOTE: Cufflinks currently only supports SAM alignments with the CIGAR match ('M') and reference skip ('N') operations. Support for the other operations, such as insertions, deletions, and clipping, will be added in the future.

Cufflinks Output

Cufflinks produces three output files:

      1) transcripts.gtf

      This GTF file contains Cufflinks' assembled isoforms. The first 7 columns are standard GTF, and the last column contains attributes, some of which are also standardized ("gene_id", and "transcript_id"). There one GTF record per row, and each record represents either a transcript or an exon within a transcript. The columns are defined as follows:
      Column number	Column name	Example	Description
      1	seqname	chrX	Chromosome or contig name
      2	source	Cufflinks	The name of the program that generated this file (always 'Cufflinks')
      3	feature	exon	The type of record (always either "transcript" or "exon".
      4	start	77696957	The leftmost coordinate of this record (where 0 is the leftmost possible coordinate)
      5	end	77712009	The rightmost coordinate of this record, inclusive.
      6	score	77712009	The most abundant isoform for each gene is assigned a score of 1000. Minor isoforms are scored by the ratio (minor FPKM/major FPKM)
      7	strand	+	Cufflinks' guess for which strand the isoform came from. Always one of "+", "-", "."
      7	frame	.	Cufflinks does not predict where the start and stop codons (if any) are located within each transcript, so this field is not used.
      8	attributes	...	See below.
      Each GTF record is decorated with the following attributes:
      Attribute	Example	Description
      gene_id	CUFF.1	Cufflinks gene id
      transcript_id	CUFF.1.1	Cufflinks transcript id
      FPKM	101.267	Isoform-level relative abundance in Reads Per Kilobase of exon model per Million mapped reads
      frac	0.7647	Reserved. Please ignore, as this attribute may be deprecated in the future
      conf_lo	0.07	Lower bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, lower bound = FPKM * (1.0 - conf_lo)
      conf_hi	0.1102	Upper bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, upper bound = FPKM * (1.0 + conf_lo)
      cov	100.765	Estimate for the absolute depth of read coverage across the whole transcript

      2) transcripts.expr

      This file is simply a tab delimited file containing one row per transcript and with columns containing the attributes above. There are a few additional attributes not in the table above, but these are reserved for debugging, and may change or disappear in the future.

      3) genes.expr

      This file contains gene-level coordinates and expression values. 




Running Cuffcompare

Cufflinks includes a program that you can use to help analyze the transfrags you assemble. The program cuffcompare helps you:

    * Compare your assembled transcripts to a reference annotation
    * Track Cufflinks transcripts across multiple experiments (e.g. across a time course)

From the command line, run cuffcompare as follows:

    cuffcompare [options]* <cuff1.gtf> [cuff2.gtf] ... [cuffN.gtf] 


Cuffcompare Input

Cuffcompare takes Cufflinks' GTF output as input, and optionally can take a "reference" annotation (such as from Ensembl)
Arguments: 	
<cuff1.gtf> 	A GTF file produced by cufflinks.
Options: 	
-h/--help 	Prints the help message and exits
-o <outprefix> 	Write the summary stats into the text output file <outprefix>(instead of stdout)
-r 	An optional "reference" annotation GTF. Each sample is matched against this file, and sample isoforms are tagged as overlapping, matching, or novel where appropriate. See the refmap and tmap output file descriptions below.
-R 	If -r was specified, this option causes cuffcompare to ignore reference transcripts that are not overlapped by any transcript in one of cuff1.gtf,...,cuffN.gtf. Useful for ignoring annotated transcripts that are not present in your RNA-Seq samples and thus adjusting the "sensitivity" calculation in the accuracy report written in the <outprefix> file
-s <seq_dir> 	Causes cuffcompare to look into for fasta files with the underlying genomic sequences (one file per contig) against which your reads were aligned for some optional classification functions. For example, Cufflinks transcripts consisting mostly of lower-case bases are classified as repeats. Note that <seq_dir> must contain one fasta file per reference chromosome, and each file must be named after the chromosome, and have a .fa or .fasta extension.
-V 	(Mildly) more verbose processing mode

Cuffcompare Output

Cuffcompare produces the following output files:

      1) <outprefix>

      Cuffcompare reports various statistics related to the "accuracy" of the transcripts in each sample when compared to the reference annotation data. The typical gene finding measures of "sensitivity" and "specificity" (as defined in Burset, M., Guigó, R. : Evaluation of gene structure prediction programs (1996) Genomics, 34 (3), pp. 353-367. doi: 10.1006/geno.1996.0298) are calculated at various levels (nucleotide, exon, intron, transcript, gene) for each input file and reported in this file. The Sn and Sp columns show specificity and sensitivity values at each level, while the fSn and fSp columns are "fuzzy" variants of these same accuracy calculations, allowing for a very small variation in exon boundaries to still be counted as a "match". (If the -o option was not given, these stats will be shown at the standard output and the <outprefix> used for the other output file names below will become "stdout")

      2) <outprefix>.combined.gtf

      Cuffcompare reports a GTF file containing the "union" of all transfrags in each sample. If a transfrag is present in both samples, it is thus reported once in the combined gtf.

      3) <outprefix>.tracking

      This file matches transcripts up between samples. Each row contains a transcript structure that is present in one or more input GTF files. Because the transcripts will generally have different IDs (unless you assembled your RNA-Seq reads against a reference transcriptome), cuffcompare examines the structure of each the transcripts, matching transcripts that agree on the coordinates and order of all of their introns, as well as strand. Matching transcripts are allowed to differ on the length of the first and last exons, since these lengths will naturally vary from sample to sample due to the random nature of sequencing.

      If you ran cuffcompare with the -r option, the first and second columns contain the closest matching reference transcript to the one described by each row.

      Here's an example of a line from the tracking file:

      TCONS_00000045 XLOC_000023 Tcea|uc007afj.1	j	\
           q1:exp.115|exp.115.0|100|3.061355|0.350242|0.350207 \
           q2:60hr.292|60hr.292.0|100|4.094084|0.000000|0.000000
      		

      In this example, a transcript present in the two input files, called exp.115.0 in the first and 60hr.292.0 in the second, doesn't match any reference transcript exactly, but shares exons with uc007afj.1, an isoform of the gene Tcea, as indicated by the class code j. The first three columns are as follows:
      Column number 	Column name 	Example 	Description
      1 	Cufflinks transfrag id 	TCONS_00000045 	A unique internal id for the transfrag
      2 	Cufflinks locus id 	XLOC_000023 	A unique internal id for the locus
      3 	Reference gene id 	Tcea 	The gene_name attribute of the reference GTF record for this transcript, or '-' if no reference transcript overlaps this Cufflinks transcript
      4 	Reference transcript id 	uc007afj.1 	The transcript_id attribute of the reference GTF record for this transcript, or '-' if no reference transcript overlaps this Cufflinks transcript
      5 	Class code 	c 	The type of match between the Cufflinks transcripts in column 6 and the reference transcript. See class codes
      Each of the columns after the fifth have the following format:

          qJ:<gene_id>|<transcript_id>|<FMI>|<FPKM>|<conf_lo>|<conf_hi>


      A transcript need be present in all samples to be reported in the tracking file. A sample not containing a transcript will have a "-" in its entry in the row for that transcript.

      (The following output files are created for each of the <cuff_in> file given)

      4) <cuff_in>.refmap

      This tab delimited file lists, for each reference transcript, which cufflinks transcripts either fully or partially match it. There is one row per reference transcript, and the columns are as follows:
      Column number	Column name	Example	Description
      1	Reference gene name	Myog	The gene_name attribute of the reference GTF record for this transcript, if present. Otherwise gene_id is used.
      2	Reference transcript id	uc007crl.1	The transcript_id attribute of the reference GTF record for this transcript
      3	Class code	c	The type of match between the Cufflinks transcripts in column 4 and the reference transcript. One of either 'c' for partial match, or '=' for full match.
      4	Cufflinks matches	CUFF.23567.0,CUFF.24689.0	A comma separated list of Cufflinks transcript ids matching the reference transcript
      5) <cuff_in>.tmap

      This tab delimited file lists the most closely matching reference transcript for each Cufflinks transcript. There is one row per Cufflinks transcript, and the columns are as follows:
      Column number 	Column name 	Example 	Description
      1 	Reference gene name 	Myog 	The gene_name attribute of the reference GTF record for this transcript, if present. Otherwise gene_id is used.
      2 	Reference transcript id 	uc007crl.1 	The transcript_id attribute of the reference GTF record for this transcript
      3 	Class code 	c 	The type of match between the Cufflinks transcripts in column 4 and the reference transcript. One of either 'c' for partial match, or '=' for full match.
      4 	Cufflinks gene id 	CUFF.23567 	The Cufflinks internal gene id
      5 	Cufflinks transcript id 	CUFF.23567.0 	The Cufflinks internal transcript id
      6 	Fraction of major isoform (FMI) 	100 	The expression of this transcript expressed as a fraction of the major isoform for the gene. Ranges from 1 to 100.
      7 	FPKM 	1.4567 	The expression of this transcript expressed in FPKM
      8 	FPKM_conf_lo 	0.7778 	The upper limit of the 95% FPKM confidence interval
      9 	FPKM_conf_hi 	1.9776 	The lower limit of the 95% FPKM confidence interval
      10 	Coverage 	3.2687 	The estimated average depth of read coverage across the transcript.
      11 	Length 	1426 	The length of the transcript
      12 	Major isoform ID 	CUFF.23567.0 	The Cufflinks ID of the gene's major isoform


      Class Codes

      If you ran cuffcompare with the -r option, tracking rows will contain the following values. If you did not use -r, the rows will all contain "-" in their class code column.
      Priority 	Code 	Description
      1 	= 	Match
      2 	c 	Contained 	
      3 	j 	New isoform 	
      4 	e 	A single exon transcript overlapping a reference exon and at least 10 bp of a reference intron, indicating a possible pre-mRNA fragment. 	
      5 	i 	A single exon transcript falling entirely with a reference intron 	
      6 	r 	Repeat. Currently determined by looking at the reference sequence and applied to transcripts where at least 50% of the bases are lower case 	
      7 	p 	Possible polymerase run-on fragment 	
      8 	u 	Unknown, intergenic transcript 	
      9 	o 	Unknown, generic overlap with reference 	
      10 	. 	(.tracking file only, indicates multiple classifications) 	

      Running Cuffdiff

      Cufflinks includes a program, "Cuffdiff", that you can use to find significant changes in transcript expression, splicing, and promoter use. From the command line, run cuffdiff as follows:

          cuffdiff [options]* <transcripts.gtf> <sample1.sam> <sample2.sam>... [sampleN.sam] 


      Cuffdiff Input

      Cuffdiff takes a GTF file of transcripts as input, along with two or more SAM files containing the fragment alignments for two or more samples. It produces a number of output files that contain test results for changes in expression at the level of transcripts, primary transcripts, and genes. It also tracks changes in the relative abundance of transcripts sharing a common transcription start site, and in the relative abundances of the primary transcripts of each gene. Tracking the former allows one to see changes in splicing, and the latter lets one see changes in relative promoter use within a gene. Cuffdiff requires that transcripts in the input GTF be annotated with certain attributes in order to look for changes in primary transcript expression, splicing, coding output, and promoter use. These attributes are:
      Attribute 	Description
      tss_id 	The ID of this transcript's inferred start site. Determines which primary transcript this processed transcript is believed to come from.
      p_id 	The ID of the coding sequence this transcript contains. This is attribute is attached to Cuffcompare output by Cuffcompare only when it is run with a reference annotation that include CDS records. Further, differential CDS analysis is only performed when all isoforms of a gene have p_id attributes, because neither Cufflinks nor Cuffcompare attempt to assign an open reading frame to transcripts.

      Arguments: 	
      <transcripts.gtf> 	A transcript TF file produced by cufflinks, cuffcompare, or other source.
      <sample1.sam> 	A SAM file of aligned RNA-Seq reads. If more than two are provided, they are analyzed as a timeseries. That is, sample 1 is compared to sample 2, sample 2 is compared to sample 3, etc. Cuffdiff currently does not perform an all-pairs comparison.
      Options: 	
      -h/--help 	Prints the help message and exits
      -m/--inner-dist-mean <int> 	This is the expected (mean) inner distance between mate pairs. For, example, for paired end runs with fragments selected at 300bp, where each end is 50bp, you should set -r to be 200. The default is 45bp.
      -s/--inner-dist-std-dev <int> 	The standard deviation for the distribution on inner distances between mate pairs. The default is 20bp.
      -p/--num-threads <int> 	Use this many threads to align reads. The default is 1.
      -Q/--min-mapqual <int> 	Instructs Cufflinks to ignore alignments with a SAM mapping quality lower than this number. The default is 0.
      -c/--min-alignment-count <int> 	The minimum number of alignments in a locus for needed to conduct significance testing on changes in that locus observed between samples. If no testing is performed, changes in the locus are deemed not signficant, and the locus' observed changes don't contribute to correction for multiple testing. The default is 1,000 fragment alignments (up to 2,000 paired reads).
      --FDR <float> 	The allowed false discovery rate. The default is 0.05.
      Advanced Options: 	
      --num-importance-samples <int> 	Sets the number of importance samples generated for each locus during abundance estimation. Default: 1000
      --max-mle-iterations <int> 	Sets the number of iterations allowed during maximum likelihood estimation of abundances. Default: 5000

      Cuffdiff Output

      Cuffdiff produces many several output files for each pair of samples provided by the user. File names are prefixed with "<x>_<y>_", where x and y are numbers starting at zero. Thus, if you gave Cuffdiff two input files, it would produce a set of files with names that start "0_1_". Many of these have essentially the same format.

            1) FPKM tracking files

            Cuffdiff calculates the FPKM of each transcript, primary transcript, and gene in each sample. Primary transcript and gene FPKMs are computed by summing the FPKMs of transcripts in each primary transcript group or gene group. Each FPKM tracking file has the following format:
            Column number	Column name	Example	Description
            1	Tracking id	TCONS_00000001	A unique identifier describing the object (gene, transcript, CDS, primary transcript) being tested
            2	class_code	=	The class_code attribute for the transcript being tested, or "-" if not a transcript, or if class_code isn't present
            3	nearest_ref_id	NM_008866	The reference transcript to which the class code refers, if any
            4	Gene name	Lypla1	The gene_name(s) or gene_id(s) being tested
            5	TSS ID	TSS1	The tss_id attribute for the transcript/primary transcript being tested, or "-" if not a transcript/primary transcript, or if tss_id isn't present
            6	locus	chr1:4797771-4835363	Genomic coordinates for easy browsing to the genes or transcripts being tested.
            7	q0_FPKM	8.01089	FPKM of the object in sample 0
            8	q0_FPKM_lo	7.03583	the lower bound of the 95% confidence interval on the FPKM of the object in sample 0
            9	q0_FPKM_hi	8.98595	the upper bound of the 95% confidence interval on the FPKM of the object in sample 0
            10	q1_FPKM	8.55155	FPKM of the object in sample 1
            11	q1_FPKM_lo	7.77692	the lower bound of the 95% confidence interval on the FPKM of the object in sample 1
            12	q1_FPKM_hi	9.32617	the upper bound of the 95% confidence interval on the FPKM of the object in sample 1
            3N + 7	qN_FPKM	7.34115	FPKM of the object in sample N
            3N + 8	qN_FPKM_lo	6.33394	the lower bound of the 95% confidence interval on the FPKM of the object in sample N
            3N + 9	qN_FPKM_hi	8.34836	the upper bound of the 95% confidence interval on the FPKM of the object in sample N
            There are four FPKM tracking files:
            isoforms.fpkm_tracking	Transcript FPKMs
            genes.fpkm_tracking	Gene FPKMs. Tracks the summed FPKM of transcripts sharing each gene_id
            cds.fpkm_tracking	Primary transcript FPKMs. Tracks the summed FPKM of transcripts sharing each tss_id
            tss_groups.fpkm_tracking	Coding sequence FPKMs. Tracks the summed FPKM of transcripts sharing each p_id, independent of tss_id


            2) Differential expression tests

            This tab delimited file lists the results of differential expression testing between sample numbers x and y for spliced transcripts, primary transcripts, genes, and coding sequences. For each pair of samples x and y, four files are created
            x_y_isoform_exp.diff	Transcript differential FPKM.
            x_y_gene_exp.diff	Gene differential FPKM. Tests difference sin the summed FPKM of transcripts sharing each gene_id
            x_y_tss_group_exp.diff	Primary transcript differential FPKM. Tests differences in the summed FPKM of transcripts sharing each tss_id
            x_y_cds_exp.fpkm_tracking	Coding sequence differential FPKM. Tests differences in the summed FPKM of transcripts sharing each p_id independent of tss_id
            Each of the above files has the following format:
            Column number	Column name	Example	Description
            1	Tested id	XLOC_000001	A unique identifier describing the transcipt, gene, primary transcript, or CDS being tested
            2	gene	Lypla1	The gene_name(s) or gene_id(s) being tested
            3	locus	chr1:4797771-4835363	Genomic coordinates for easy browsing to the genes or transcripts being tested.
            4	Test status	NOTEST	Can be one of OK (test successful), NOTEST (not enough alignments for testing), or FAIL, when an ill-conditioned covariance matrix or other numerical exception prevents testing.
            5	FPKMx	8.01089	FPKM of the gene in sample x
            6	FPKMy	8.551545	FPKM of the gene in sample y
            7	ln(FPKMy/FPKMx)	0.06531	The natural log of the fold change y/x	
            8	test stat	0.860902	The value of the test statistic used to compute significance of the observed change in FPKM
            9	p value	0.389292	The uncorrected p-value of the test statistic
            10	significant	no	Can be either "yes" or "no", depending on whether p is greater then the FDR after Benjamini-Hochberg correction for multiple-testing
            3) Differential splicing tests (<x>_<y>_splicing.diff)

            This tab delimited file lists, for each primary transcript, the amount of overloading detected among its isoforms, i.e. how much differential splicing exists between isoforms processed from a single primary transcript. Only primary transcripts from which two or more isoforms are spliced are listed in this file.
            Column number	Column name	Example	Description
            1	Tested id	TSS10015	A unique identifier describing the primary transcript being tested.
            2	gene name	Rtkn	The gene_name or gene_id that the primary transcript being tested belongs to
            3	locus	chr6:83087311-83102572	Genomic coordinates for easy browsing to the genes or transcripts being tested.
            4	Test status	OK	Can be one of OK (test successful), NOTEST (not enough alignments for testing), or FAIL, when an ill-conditioned covariance matrix or other numerical exception prevents testing.
            5	Reserved	0	
            6	Reserved	0	
            7	?JS(x,y)	0.22115	The splice overloading of the primary transcript, as measured by the square root of the Jensen-Shannon divergence computed on the relative abundances of the splice variants	
            8	test stat	0.22115	The value of the test statistic used to compute significance of the observed overloading, equal to ?JS(x,y)
            9	p value	0.000174982	The uncorrected p-value of the test statistic.
            10	significant	yes	Can be either "yes" or "no", depending on whether p is greater then the FDR after Benjamini-Hochberg correction for multiple-testing
            4) (<x>_<y>_cds.diff)

            This tab delimited file lists, for each gene, the amount of overloading detected among its primary transcripts, i.e. how much differential promoter use exists between samples. Only genes producing two or more distinct primary transcripts (i.e. multi-promoter genes) are listed here.
            Column number	Column name	Example	Description
            1	Tested id	XLOC_000002-[chr1:5073200-5152501]	A unique identifier describing the gene being tested.
            2	gene name	Atp6v1h	The gene_name or gene_id
            3	locus	chr1:5073200-5152501	Genomic coordinates for easy browsing to the genes or transcripts being tested.
            4	Test status	OK	Can be one of OK (test successful), NOTEST (not enough alignments for testing), or FAIL, when an ill-conditioned covariance matrix or other numerical exception prevents testing.
            5	Reserved	0	
            6	Reserved	0	
            7	?JS(x,y)	0.0686517	The CDS overloading of the gene, as measured by the square root of the Jensen-Shannon divergence computed on the relative abundances of the coding sequences	
            8	test stat	0.0686517	The value of the test statistic used to compute significance of the observed overloading, equal to ?JS(x,y)
            9	p value	0.00546783	The uncorrected p-value of the test statistic
            10	significant	yes	Can be either "yes" or "no", depending on whether p is greater then the FDR after Benjamini-Hochberg correction for multiple-testing
            5) (<x>_<y>_promoters.diff)

            This tab delimited file lists, for each gene, the amount of overloading detected among its coding sequences, i.e. how much differential CDS output exists between samples. Only genes producing two or more distinct CDS (i.e. multi-protein genes) are listed here.
            Column number	Column name	Example	Description
            1	Tested id	XLOC_000019	A unique identifier describing the gene being tested.
            2	gene name	Tmem70	The gene_name or gene_id
            3	locus	chr1:16651657-16668357	Genomic coordinates for easy browsing to the genes or transcripts being tested.
            4	Test status	OK	Can be one of OK (test successful), NOTEST (not enough alignments for testing), or FAIL, when an ill-conditioned covariance matrix or other numerical exception prevents testing.
            5	Reserved	0	
            6	Reserved	0	
            7	?JS(x,y)	0.0124768	The promoter overloading of the gene, as measured by the square root of the Jensen-Shannon divergence computed on the relative abundances of the primary transcripts	
            8	test stat	0.0124768	The value of the test statistic used to compute significance of the observed overloading, equal to ?JS(x,y)
            9	p value	0.394327	The uncorrected p-value of the test statistic
            10	significant	no	Can be either "yes" or "no", depending on whether p is greater then the FDR after Benjamini-Hochberg correction for multiple-testing



####PATCH CUFFLINKS IN /nethome/bioinfo
####
####
####1. COPY PATCH
####
####cd /nethome/bioinfo/apps
####cp /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/cufflinks-0.7.0.patch 
####
####
####
####2. BACKUP cufflinks.cpp
####
####cp cufflinks.cpp cufflinks.cpp.orig
####
####
####
####3. RUN patch
####
####patch -p0 < cufflinks-0.7.0.patch 
####
####	patching file cufflinks.cpp
####
####
####
####4. RECOMPILE CUFFLINKS
####
####cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0
####make clean
####export LD_RUN_PATH=/nethome/syoung/base/apps/libs/boost/1.39.0/lib
####./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.39.0/lib --with-boost-thread=/nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0
####make
####make install




</entry>



<entry [Wed Mar 17 14:09:41 EDT 2010] RUN CUFFLINKS ON SOLID DATA >



http://seqanswers.com/forums/showthread.php?p=15573


I am using Bioscope mapping output .bam files as input into cufflinks. You have to first convert to .sam file, clean it up, and added the strand information by parsing the bitwise flag.

I was able to run this cleaned up version of .sam file through cufflinks with pretty good results. The only problem I am having is that most of the output is not showing any strand information. 

I think cufflink is only using strand information for spliced reads and ignoring unspliced read strand? So all the genes assembled with spliced read has strand information, but others don't?



 Today, 01:32 AM	   #10
damiankao
Junior Member
 
Join Date: Jan 2010
Location: UK
Posts: 7

Bioscope sam output includes unmapped reads. Lines that have no CIGAR string and no chromosome/contig ID are the umapped reads. I have no idea why BIoscope decided to include them, but you have to filter them out.

I ran about 250 million Bioscope mapped reads few days ago on our university's maths server. Cufflinks needed about 60-70 gigs of memory for that amount of reads. But at least it ran and gave me results. Now I just have to wade through 800,000 features that it predicted and filter out all the crap.






Posts: 7

Are you sure you have no alignments with empty CIGAR string? They usually are at the end of the sam file.
  	
 Today, 02:20 AM	   #13
Haneko
Member
 
Join Date: Jan 2010
Location: Singapore
Posts: 10

Yes, I'm quite certain. I reran cufflinks using the reads that map to chrX, and it still gave me the error.
  	
 Today, 02:27 AM	   #14
damiankao
Junior Member
 
Join Date: Jan 2010
Location: UK
Posts: 7

This doesn't seem likely to me, but do you have any alignments where the CIGAR string contains no 'M'?



</entry>



<entry [Wed Mar 17 14:13:17 EDT 2010] RUN CUFFCOMPARE ON bixby DATA>




Running Cuffcompare


Cufflinks includes a program that you can use to help analyze the transfrags you assemble.

The program cuffcompare helps you:

    * Compare your assembled transcripts to a reference annotation
    * Track Cufflinks transcripts across multiple experiments (e.g. across a time course)





</entry>



<entry [Mon Feb  8 15:11:31 EST 2010] RUN CUFFLINKS ON bixby DATA>



Usage:   cufflinks <hits.sam>
Options:

-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
-m/--transcript-score-thresh the minimum transcript score accepted                 [ default:      0 ]
-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
-G/--GTF                     quantitate against reference transcript annotations                      
-p/--num-threads             number of threads used during assembly                [ default:      1 ]



MANUAL TEST
===========

GOTCHAS
=======

1. CAN'T USE '-' IN --label VALUE

time /nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks \
--inner-dist-mean 200 \
--label bixby-ln \			<== BAD
--num-threads 8 \
/nethome/syoung/base/pipeline/bixby/run1/ln/cufflinks/accepted_hits.sam


2. CAN'T USE --num-threads ARGUMENT: USE -p INSTEAD


NB: HAD TO ADD THIS ARGUMENT MANUALLY AND RECOMPILE (SEE TROUBLESHOOTING BELOW)

-m/--transcript-score-thresh the minimum transcript score accepted                 [ default:      0 ]




LN SAMPLE
=========

STOPPED BEFORE COMPLETED BECAUSE CHANGED DIRECTORY NAMES... RERAN AND DOCUMENTED IN:

Notes-project-48-bixbylab.txt

mkdir -p /nethome/syoung/base/pipeline/bixby/run1/ln/cufflinks
ln -s /nethome/syoung/base/pipeline/bixby/run1/ln/tophat/accepted_hits.sam \
/nethome/syoung/base/pipeline/bixby/run1/ln/cufflinks/accepted_hits.sam

cd /nethome/syoung/base/pipeline/bixby/run1/ln/cufflinks

rm -fr cufflinks.sh
emacs cufflinks.sh
#!/bin/sh

#PBS -N cuf-bix-ln
#PBS -l ncpus=8
#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

time /nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks \
--inner-dist-mean 200 \
--label bixbyln \
--num-threads 8 \
/nethome/syoung/base/pipeline/bixby/run1/ln/cufflinks/accepted_hits.sam

exit;
#### END


chmod 755 cufflinks.sh
msub -q psmall cufflinks.sh

RUNNING

	Job id                    Name             User            Time Use S Queue
	------------------------- ---------------- --------------- -------- - -----
	243658.kronos             cuf-bix-ln       syoung          00:00:12 C psmall         
	243659.kronos             cuf-bix-ln       syoung                 0 R psmall         
	Wed Mar 17 16:57:33 EDT 2010





cspg SAMPLE
=========

mkdir -p /nethome/syoung/base/pipeline/bixby/run1/cspg/cufflinks
ln -s /nethome/syoung/base/pipeline/bixby/run1/cspg/tophat/accepted_hits.sam \
/nethome/syoung/base/pipeline/bixby/run1/cspg/cufflinks/accepted_hits.sam

cd /nethome/syoung/base/pipeline/bixby/run1/cspg/cufflinks

rm -fr cufflinks.sh
emacs cufflinks.sh
#!/bin/sh

#PBS -N cuf-bix-cspg
#PBS -l ncpus=8
#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

time /nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks \
--inner-dist-mean 200 \
--label bixbycs \
--num-threads 8 \
/nethome/syoung/base/pipeline/bixby/run1/cspg/cufflinks/accepted_hits.sam

exit;
#### END


chmod 755 cufflinks.sh
msub -q psmall cufflinks.sh

RUNNING

	Job id                    Name             User            Time Use S Queue
	------------------------- ---------------- --------------- -------- - -----
	243658.kronos             cuf-bix-ln       syoung          00:00:12 C psmall         
	243659.kronos             cuf-bix-ln       syoung          00:00:10 R psmall         
	243660.kronos             cuf-bix-cspg     syoung                 0 R psmall         
	Wed Mar 17 16:58:45 EDT 2010





CUFFLINKS OUTPUT FILES
======================

Cufflinks produces three output files:

      1) transcripts.gtf

      This GTF file contains Cufflinks' assembled isoforms. The first 7 columns are standard GTF, and the last column contains attributes, some of which are also standardized ("gene_id", and "transcript_id"). There one GTF record per row, and each record represents either a transcript or an exon within a transcript.
	  
	  The columns are defined as follows:
      Column number	Column name	Example	Description
      1	seqname	chrX	Chromosome or contig name
      2	source	Cufflinks	The name of the program that generated this file (always 'Cufflinks')
      3	feature	exon	The type of record (always either "transcript" or "exon".
      4	start	77696957	The leftmost coordinate of this record (where 0 is the leftmost possible coordinate)
      5	end	77712009	The rightmost coordinate of this record, inclusive.
      6	score	77712009	The most abundant isoform for each gene is assigned a score of 1000. Minor isoforms are scored by the ratio (minor RPKM/major RPKM)
      7	strand	+	Cufflinks' guess for which strand the isoform came from. Always one of "+", "-", "."
      7	frame	.	Cufflinks does not predict where the start and stop codons (if any) are located within each transcript, so this field is not used.
      8	attributes	...	See below.
      Each GTF record is decorated with the following attributes:
      Attribute	Example	Description
      gene_id	CUFF.1	Cufflinks gene id
      transcript_id	CUFF.1.1	Cufflinks transcript id
      RPKM	101.267	Isoform-level relative abundance in Reads Per Kilobase of exon model per Million mapped reads
      frac	0.7647	Reserved. Please ignore, as this attribute may be deprecated in the future
      conf_lo	0.07	Lower bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, lower bound = RPKM * (1.0 - conf_lo)
      conf_hi	0.1102	Upper bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, upper bound = RPKM * (1.0 + conf_lo)
      cov	100.765	Estimate for the absolute depth of read coverage across the whole transcript


      2) transcripts.expr

      This file is simply a tab delimited file containing one row per transcript and with columns containing the attributes above. There are a few additional attributes not in the table above, but these are reserved for debugging, and may change or disappear in the future.

      3) genes.expr

      This file contains gene-level coordinates and expression values.


TROUBLESHOOTING
===============

ERROR: 

cufflinks QUITS AND COMPLAINS ABOUT INPUT PARAMETER:

-t/--transcript-score-thresh must less than or equal to 0

WHERE --transcript-score-thresh IS NOT INCLUDED IN CUFFLINK'S USAGE INSTRUCTIONS.

WHEN REMOVED THIS ARGUMENT FROM THE INPUTS VERIFICATION LOOP, GOT THIS ERROR:

time /nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks \
--inner-dist-mean 200 \
--label bixby-ln \			
--num-threads 8 \			<== BAD
/nethome/syoung/base/pipeline/bixby/run1/ln/cufflinks/accepted_hits.sam


time /nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks \
--inner-dist-mean 200 \
--label bixby-ln \			
-p 8 \						<== OK
/nethome/syoung/base/pipeline/bixby/run1/ln/cufflinks/accepted_hits.sam



DIAGNOSIS:

	CLASH BETWEEN ARGUMENTS num-threads AND inner-dist-mean.  ARGUMENT --transcript-score-thresh IS ABSENT FROM USAGE EVEN THOUGH THE PARAMETER APPEARS IN VARIOUS CUFFLINKS FILES:
	
	grep -n transcript_score_thresh /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/*
	
		/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/assemble.cpp:1171:    vector<Scaffold>::iterator new_end = remove_if(hits.begin(), hits.end(), ScaffBelowThresh(transcript_score_thresh));
		...
		/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/cufflinks.cpp.bkp:87:                    transcript_score_thresh = parseFloat(-99999999, 0, "-t/--transcript-score-thresh must less than or equal to 0", print_usage);
		Binary file /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/libcufflinks.a matches
	


SOLUTION:

1. CORRECT LINE 46 IN cufflinks.cpp TO AVOID CLASH BETWEEN ARGUMENTS num-threads AND inner-dist-mean

emacs /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/cufflinks.cpp

CHANGE:

{"num-threads",                         required_argument,       0,          't'},

TO:

{"num-threads",                         required_argument,       0,          'p'},


2. ADD --transcript-score-thresh ARGUMENT TO cufflinks.cpp AT LINE 57:


	//NOTE: SPACES ONLY, bozo                                                                           
	fprintf(stderr, "Usage:   cufflinks <hits.sam>\n");
	 fprintf(stderr, "Options:\n\n");
	 fprintf(stderr, "-m/--inner-dist-mean         the average inner distance between mates             \
 [ default:     45 ]\n");
 


3. OR PATCH IT:

BACKUP cufflinks.cpp
cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/

cp cufflinks.cpp cufflinks.cpp.orig

RUN patch

patch -p0 < cufflinks-0.7.0.patch 

	patching file cufflinks.cpp



4. AND RECOMPILE CUFFLINKS:


cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0
make clean
export LD_RUN_PATH=/nethome/syoung/base/apps/libs/boost/1.39.0/lib
./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.39.0/lib --with-boost-thread=/nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0
make
make install




CREATED PATCH FILE AND SENT TO Cole Trapnell cole@:

diff -u cufflinks.cpp.orig  cufflinks.cpp > cufflinks-0.7.0.patch

cat cufflinks-0.7.0.patch 

	--- cufflinks.cpp.orig  2010-03-17 17:13:23.253099000 -0400
	+++ cufflinks.cpp       2010-03-17 16:55:10.576099000 -0400
	@@ -43,7 +43,7 @@
	 {"collapse-rounds",         required_argument,          0,                      'c'},
	 {"GTF",                                            required_argument,           0,                      'G'},
	 #if ENABLE_THREADS
	-{"num-threads",                                required_argument,       0,          't'},
	+{"num-threads",                                required_argument,       0,          'p'},
	 #endif
	 {0, 0, 0, 0} // terminator
	 };
	@@ -54,6 +54,7 @@
		 fprintf(stderr, "Usage:   cufflinks <hits.sam>\n");
			fprintf(stderr, "Options:\n\n");
			fprintf(stderr, "-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]\n");
	+       fprintf(stderr, "-m/--transcript-score-thresh the minimum transcript score accepted                 [ default:      0 ]\n");
			fprintf(stderr, "-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]\n");
			fprintf(stderr, "-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]\n");
			fprintf(stderr, "-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]\n");


HOW TO USE THE PATCH:

1. TRANSFER THE PATCH FILE TO THE SAME DIRECTORY AS THE UNPATCHED cufflinks.cpp FILE

ll
	-rw-r--r-- 1 syoung bioinfo 1.2K Mar 17 17:37 cufflinks-0.7.0.patch
	-rw-r--r-- 1 syoung bioinfo 6.1K Mar 17 17:37 cufflinks.cpp


2. BACKUP cufflinks.cpp

cp cufflinks.cpp cufflinks.cpp.orig


3. RUN patch

patch -p0 < cufflinks-0.7.0.patch 

	patching file cufflinks.cpp


4. CHECK DIFFERENCES BETWEEN PATCHED AND UNPATCHED WITH diff

diff cufflinks.cpp cufflinks.cpp.orig

	46c46
	< {"num-threads",                               required_argument,       0,          'p'},
	---
	> {"num-threads",                               required_argument,       0,          't'},
	57d56
	<       fprintf(stderr, "-m/--transcript-score-thresh the minimum transcript score accepted                 [ default:      0 ]\n");




</entry>



<entry [Mon Feb  8 15:11:31 EST 2010] CUFFLINKS - MUST PROVIDE CORRECT mate pair MEAN INNER DISTANCE>



http://cufflinks.cbcb.umd.edu/manual.html

NOTE:

Cufflinks assumes that library fragment lengths are size selected and normally
distributed. When using paired end RNA-Seq reads, you must take care to supply
Cufflinks with the mean and variance on the inner distances between mate 
pairs. For the moment, Cufflinks doesn't support assembling mixtures of paired
end reads from different fragment size distributions.  Mixtures of single 
ended reads (of varying lengths) with paired ends are supported.

Cufflinks also assumes that the donor does not contain major structural 
variations with respect to the reference.  Tumor genomes are often highly 
rearranged, and while Cufflinks may eventually identify gene fusions and 
gracefully handle genome breakpoints, users are encouraged to be careful when
using Cufflinks on tumor RNA-Seq experiments. 


Usage:   cufflinks <hits.sam>
Options:

-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
-G/--GTF                     quantitate against reference transcript annotations                      
-p/--num-threads             number of threads used during assembly                [ default:      1 ]


Cufflinks produces three output files:

	1) transcripts.gtf

	This GTF file contains Cufflinks' assembled isoforms. The first 7 columns are standard GTF, and the last column contains attributes, some of which are also standardized ("gene_id", and "transcript_id"). There one GTF record per row, and each record represents either a transcript or an exon within a transcript. The columns are defined as follows:
	Column number	Column name	Example	Description
	1	seqname	chrX	Chromosome or contig name
	2	source	Cufflinks	The name of the program that generated this file (always 'Cufflinks')
	3	feature	exon	The type of record (always either "transcript" or "exon".
	4	start	77696957	The leftmost coordinate of this record (where 0 is the leftmost possible coordinate)
	5	end	77712009	The rightmost coordinate of this record, inclusive.
	6	score	77712009	The most abundant isoform for each gene is assigned a score of 1000. Minor isoforms are scored by the ratio (minor RPKM/major RPKM)
	7	strand	+	Cufflinks' guess for which strand the isoform came from. Always one of "+", "-", "."
	7	frame	.	Cufflinks does not predict where the start and stop codons (if any) are located within each transcript, so this field is not used.
	8	attributes	...	See below.
	Each GTF record is decorated with the following attributes:
	Attribute	Example	Description
	gene_id	CUFF.1	Cufflinks gene id
	transcript_id	CUFF.1.1	Cufflinks transcript id
	RPKM	101.267	Isoform-level relative abundance in Reads Per Kilobase of exon model per Million mapped reads
	frac	0.7647	Reserved. Please ignore, as this attribute may be deprecated in the future
	conf_lo	0.07	Lower bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, lower bound = RPKM * (1.0 - conf_lo)
	conf_hi	0.1102	Upper bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, upper bound = RPKM * (1.0 + conf_lo)
	cov	100.765	Estimate for the absolute depth of read coverage across the whole transcript


	2) transcripts.expr

	This file is simply a tab delimited file containing one row per transcript and with columns containing the attributes above. There are a few additional attributes not in the table above, but these are reserved for debugging, and may change or disappear in the future.

	3) genes.expr

	This file contains gene-level coordinates and expression values.



Usage:
cuffcompare [-r <reference_mrna.gtf>][-R][-V][-s <seq_path>][-o <stats.txt>] 
    <input1.gtf> [<input2.gtf> <input3.gtf> ... <inputN.gtf>]

 Provides various statistics for GTF mRNA data.
 Tracks expression changes of loci across multiple input files, writing
 matching transcripts (intron chains) into <stats>.tracking.
 A file <input>.tmap is created for each input file, showing
 how its transcripts overlap reference transcripts, while the file 
 <input>.refmap shows the matching and contained transcripts for each
 reference transcript.

Options:
-o  write the stats into given file name <stats.txt> (instead of stdout)

-r  a set of known mRNAs to use as a reference for assessing 
    the accuracy of mRNAs or gene models given in <input.gtf>

-R  for -r option, reduce the set of reference transcripts to 
    only those found to overlap any of the input loci

-s  look into <seq_dir> for fasta files with the 
    underlying genomic sequences (one file per contig) and use
    lower case bases to classify input transcripts as repeats

-V  (mildly) verbose processing mode


README:


CUFFLINKS
----------------------------
Cufflinks is a reference-guided assembler for RNA-Seq experiments. It
simultaneously assembles transcripts from reads and estimates their relative
abundances, without using a reference annotation.  The software expects as 
input RNA-Seq read alignments in SAM format (http://samtools.sourceforge.net).

Here's an example spliced read alignment record:
s6.25mer.txt-913508     16      chr1    4482736 255     14M431N11M      *       0       0       CAAGATGCTAGGCAAGTCTTGGAAG       IIIIIIIIIIIIIIIIIIIIIIIII       NM:i:0  XS:A:-

This record includes a custom tag used by Cufflinks to determine the strand 
of the mRNA from which this read originated.  Often, RNA-Seq experiments lose
strand information, and so reads will map to either strand of the genome.  
However, strandedness of spliced alignments can often be inferred from the 
orientation of consensus splice sites, and Cufflinks requires that spliced 
aligments have the custom strand tag XS, which has SAM attribute type "A", and
can take values of "+" or "-".  If your RNA-Seq protocol is strand specific,
including this tag for all alignments, including unspliced alignments, will 
improve the assembly quality.

The SAM records MUST BE SORTED by reference coordinate, like so:

sort -k 3,3 -k 4,4n hits.sam 

The program is fully threaded, and when running with multiple threads, should
be run on a machine with plenty of RAM. 4 GB per thread is probably reasonable
for most experiments.  Since many experiments feature a handful of genes that
are very abundantly transcribed, Cufflinks will spend much of its time 
assembling" a few genes.  When using more than one thread, Cufflinks may 
appear to "hang" while these genes are being assembled.



What is Cufflinks?
----------------------------

Cufflinks is a program that assembles aligned RNA-Seq reads into transcripts and then estimates their abundances. Cufflinks runs on Linux and OS X.

How does Cufflinks assemble transcripts?

Cufflinks constructs a parsimonious set of transcripts that "explain" the reads observed in an RNA-Seq experiment. It does so by reducing the comparative assembly problem to a problem in maximum matching in bipartite graphs. In essence, Cufflinks implements a constructive proof of Dilworth's Theorem by constructing a covering relation on the read alignments, and finding a minimum path cover on the directed acyclic graph for the relation.

While Cufflinks works well with unpaired RNA-Seq reads, it is designed with paired reads in mind. The assembly algorithm explicitly handles paired end reads by treating the alignment for a given pair as a single object in the covering relation. The proof of Dilworth's theorem finds a maximum cardinality matching on the bipartite graph of the transitive closure of the DAG, but there is not necessarily a unique maximum cardinality matching, reflecting the fact that due to the limited size of RNA-Seq cDNA fragments, we may not know with certainty which outcomes of alternative splicing events go together in the same transcripts. Cufflinks tries to find the correct parsimonious set of transcripts by performing a minimum cost maximum matching. This matching is then extended to a minimum cost path cover of the DAG, with each path representing a different transcript.

The algorithm is in many ways a generalization of the ShoRAH algorithm for haplotype abundance estimation in viral populations, described in:

    * Nicholas Eriksson, Lior Pachter, Yumi Mitsuya, Soo-Yon Rhee, Chunlin Wang, Baback Gharizadeh, Mostafa Ronaghi, Robert W. Shafer, Niko Beerenwinkel Viral population estimation using pyrosequencing, PLoS Computational Biology, 4(5):e1000074 


Cufflinks is implemented in C++ and makes substantial use of the Boost Libraries as well as the LEMON Graph Library, which was launched by the Egerváry Research Group on Combinatorial Optimization (EGRES).

How does Cufflinks calculate transcript abundances?

RNA-Seq read counts can be used as a measure of relative abundance of transcripts, and Cufflinks measures transcript abundances in RPKM, originally proposed in:

    * Ali Mortazavi, Brian A Williams, Kenneth McCue, Lorian Schaeffer and Barbara Wold Mapping and quantifying mammalian transcriptomes by RNA-Seq Nature Methods, volume 5, 621 - 628 (2008) 


To estimate isoform-level abundances, one must assign reads to individual transcripts, which may be difficult because a read may align to multiple isoforms of the same gene. Cufflinks models the sequencing process by asking what the probability is of observing each read, given a set of transcripts and a set of abundances. The program then multiplies these probabilities to compute the overall likelihood that one would observe the reads in the experiment, given the proposed abundances on the transcripts. Because Cufflinks' statistical model is linear, the likelihood function has a unique maximum value, and Cufflinks finds it with a numerical optimization algorithm.

When some isoforms have much lower abundance than another from the same gene, or when the number of reads for the locus is very small, this numerical procedure is less accurate. To place confidences on the reported abundances, we have adapted the bayesian inference procedure developed by Hui Jiang and Wing Wong in:

    * Hui Jiang and Wing Hung Wong, Statistical Inferences for isoform expression, Bioinformatics, 2009 25(8):1026-1032 


Using these statistical methods, Cufflinks can estimate the abundances of the isoforms present in the sample, either using a known "reference" annotation, or after comparatively assembling the transcripts against the genome from scratch.

Prerequisites

Cufflinks runs on intel-based computers running Linux or Mac OS X and that have GCC 4.0 or greater installed. You can install pre-compiled binaries or build Cufflinks from the source code. If you wish to build Cufflinks yourself, you will need to install the Boost C++ libraries. See Installing Boost, on the getting started page.

Running Cufflinks

The following is a detailed description of the options used to control Cufflinks:

    Usage: cufflinks [options]* <aligned_reads.sam> 

Arguments: 	
<aligned_reads.sam> 	A file of RNA-Seq read alignments in the SAM format. SAM is a standard short read alignment, that allows aligners to attach custom tags to individual alignments, and Cufflinks requires that the alignments you supply have some of these tags. Please see Input formats for more details.
Options: 	
-h/--help 	Prints the help message and exits
-m/--inner-dist-mean <int> 	This is the expected (mean) inner distance between mate pairs. For, example, for paired end runs with fragments selected at 300bp, where each end is 50bp, you should set -r to be 200. The default is 45bp.
-s/--inner-dist-std-dev <int> 	The standard deviation for the distribution on inner distances between mate pairs. The default is 20bp.
-I/--max-intron-length <int> 	The minimum intron length. Cufflinks will not report transcripts with introns longer than this, and will ignore SAM alignments with REF_SKIP CIGAR operations longer than this. The default is 300,000.
-F/--min-isoform-fraction <0.0-1.0> 	After calculating isoform abundance for a gene, Cufflinks filters out transcripts that it believes are very low abundance, because isoforms expressed at extremely low levels often cannot reliably be assembled, and may even be artifacts of incompletely spliced precursors of processed transcripts. This parameter is also used to filter out introns that have far fewer spliced alignments supporting them. The default is 0.05, or 5% of the most abundant isoform (the major isoform) of the gene.
-j/--pre-mrna-fraction <0.0-1.0> 	Some RNA-Seq protocols produce a significant amount of reads that originate from incompletely spliced transcripts, and these reads can confound the assembly of fully spliced mRNAs. Cufflinks uses this parameter to filter out alignments that lie within the intronic intervals implied by the spliced alignments. The minimum depth of coverage in the intronic region covered by the alignment is divided by the number of spliced reads, and if the result is lower than this parameter value, the intronic alignments are ignored. The default is 5%.
-p/--num-threads <int> 	Use this many threads to align reads. The default is 1.
-Q/--min-mapqual <int> 	Instructs Cufflinks to ignore alignments with a SAM mapping quality lower than this number. The default is 0.
-L/--label 	Cufflinks will report transfrags in GTF format, with a prefix given by this option. The default prefix is "CUFF".
-G/--GTF 	Tells Cufflinks to use the supplied reference annotation to estimate isoform expression. It will not assemble novel transcripts, and the program will ignore alignments not structurally compatible with any reference transcript.


Cufflinks Input

Cufflinks takes a text file of SAM alignments as input. For more details on the SAM format, see the specification. The RNA-Seq read mapper TopHat produces output in this format, though you are not required to use TopHat to align your reads. Here's an example of an alignment Cufflinks will accept:

s6.25mer.txt-913508	16	chr1 4482736 255 14M431N11M * 0 0 \
   CAAGATGCTAGGCAAGTCTTGGAAG IIIIIIIIIIIIIIIIIIIIIIIII NM:i:0 XS:A:-
	

Note the use of the custom tag XS. This attribute, which must have a value of "+" or "-", indicates which strand the RNA that produced this read came from. While this tag can be applied to any alignment, including unspliced ones, it must be present for all spliced alignment records (those with a 'N' operation in the CIGAR string).

The SAM file supplied to Cufflinks must be sorted by reference position. If you aligned your reads with TopHat, your alignments will be properly sorted already. If you used another tool, you may want to make sure they are properly sorted as follows:

    sort -k 3,3 -k 4,4n hits.sam > hits.sam.sorted

NOTE: Cufflinks currently only supports SAM alignments with the CIGAR match ('M') and reference skip ('N') operations. Support for the other operations, such as insertions, deletions, and clipping, will be added in the future.

Cufflinks Output

Cufflinks produces three output files:

      1) transcripts.gtf

      This GTF file contains Cufflinks' assembled isoforms. The first 7 columns are standard GTF, and the last column contains attributes, some of which are also standardized ("gene_id", and "transcript_id"). There one GTF record per row, and each record represents either a transcript or an exon within a transcript. The columns are defined as follows:
      Column number	Column name	Example	Description
      1	seqname	chrX	Chromosome or contig name
      2	source	Cufflinks	The name of the program that generated this file (always 'Cufflinks')
      3	feature	exon	The type of record (always either "transcript" or "exon".
      4	start	77696957	The leftmost coordinate of this record (where 0 is the leftmost possible coordinate)
      5	end	77712009	The rightmost coordinate of this record, inclusive.
      6	score	77712009	The most abundant isoform for each gene is assigned a score of 1000. Minor isoforms are scored by the ratio (minor RPKM/major RPKM)
      7	strand	+	Cufflinks' guess for which strand the isoform came from. Always one of "+", "-", "."
      7	frame	.	Cufflinks does not predict where the start and stop codons (if any) are located within each transcript, so this field is not used.
      8	attributes	...	See below.
      Each GTF record is decorated with the following attributes:
      Attribute	Example	Description
      gene_id	CUFF.1	Cufflinks gene id
      transcript_id	CUFF.1.1	Cufflinks transcript id
      RPKM	101.267	Isoform-level relative abundance in Reads Per Kilobase of exon model per Million mapped reads
      frac	0.7647	Reserved. Please ignore, as this attribute may be deprecated in the future
      conf_lo	0.07	Lower bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, lower bound = RPKM * (1.0 - conf_lo)
      conf_hi	0.1102	Upper bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, upper bound = RPKM * (1.0 + conf_lo)
      cov	100.765	Estimate for the absolute depth of read coverage across the whole transcript

      2) transcripts.expr

      This file is simply a tab delimited file containing one row per transcript and with columns containing the attributes above. There are a few additional attributes not in the table above, but these are reserved for debugging, and may change or disappear in the future.

      3) genes.expr

      This file contains gene-level coordinates and expression values.

Running Cuffcompare

Cufflinks includes a program that you can use to help analyze the transfrags you assemble. The program cuffcompare helps you:

    * Compare your assembled transcripts to a reference annotation
    * Track Cufflinks transcripts across multiple experiments (e.g. across a time course)


Cuffcompare Input

Cuffcompare takes Cufflinks' GTF output as input, and optionally can take a "reference" annotation (such as from Ensembl)

    Usage: cuffcompare [options]* <cuff1.gtf> [cuff2.gtf] ... [cuffN.gtf] 

Arguments: 	
<cuff1.gtf> 	A GTF file produced by cufflinks.
Options: 	
-h/--help 	Prints the help message and exits
-o <filename> 	Write the summary stats into given file name (instead of stdout)
-r 	An optional "reference" annotation GTF. Each sample is matched against this file, and sample isoforms are tagged as overlapping, matching, or novel where appropriate. See the refmap and tmap output file descriptions below.
-R 	If -r was specified, this option causes cuffcompare to ignore reference transcripts that are not overlapped by any transcript in one of cuff1.gtf,...,cuffN.gtf. Useful for ignoring annotated transcripts that are not present in your RNA-Seq samples.
-s <seq_dir> 	Causes cuffcompare to look into for fasta files with the underlying genomic sequences (one file per contig) against which your reads were aligned for some optional classification functions. For example, Cufflinks transcripts consisting mostly of lower-case bases are classified as repeats. Note that <seq_dir> must contain one fasta file per reference chromosome, and each file must be named after the chromosome, and have a .fa or .fasta extension.
-V 	(Mildly) more verbose processing mode

Cuffcompare Output

Cuffcompare produces three output files:

      1) <cuff_in>.refmap

      This tab delimited file lists, for each reference transcript, which cufflinks transcripts either fully or partially match it. There is one row per reference transcript, and the columns are as follows:
      Column number	Column name	Example	Description
      1	Reference gene id	Myog	The gene_id attribute of the reference GTF record for this transcript
      2	Reference transcript id	uc007crl.1	The transcript_id attribute of the reference GTF record for this transcript
      3	Class code	c	The type of match between the Cufflinks transcripts in column 4 and the reference transcript. One of either 'c' for partial match, or '=' for full match.
      4	Cufflinks matches	CUFF.23567.0,CUFF.24689.0	A comma separated list of Cufflinks transcript ids matching the reference transcript
      2) <cuff_in>.tmap

      This tab delimited file lists the most closely matching reference transcript for each Cufflinks transcript. There is one row per Cufflinks transcript, and the columns are as follows:
      Column number 	Column name 	Example 	Description
      1 	Reference gene id 	Myog 	The gene_id attribute of the reference GTF record for this transcript
      2 	Reference transcript id 	uc007crl.1 	The transcript_id attribute of the reference GTF record for this transcript
      3 	Class code 	c 	The type of match between the Cufflinks transcripts in column 4 and the reference transcript. One of either 'c' for partial match, or '=' for full match.
      4 	Cufflinks gene id 	CUFF.23567 	The Cufflinks internal gene id
      5 	Cufflinks transcript id 	CUFF.23567.0 	The Cufflinks internal transcript id
      6 	Fraction of major isoform (FMI) 	100 	The expression of this transcript expressed as a fraction of the major isoform for the gene. Ranges from 1 to 100.
      7 	RPKM 	1.4567 	The expression of this transcript expressed in RPKM
      8 	Coverage 	3.2687 	The estimated average depth of read coverage across the transcript.
      9 	Length 	1426 	The length of the transcript
      9 	Major isoform ID 	CUFF.23567.0 	The Cufflinks ID of the gene's major isoform
      3) <out_prefix>.tracking

      This file matches transcripts up between samples. Each row contains a transcript structure that is present in one or more input GTF files. Because the transcripts will generally have different IDs (unless you assembled your RNA-Seq reads against a reference transcriptome), cuffcompare examines the structure of each the transcripts, matching transcripts that agree on the coordinates and order of all of their introns, as well as strand. Matching transcripts are allowed to differ on the length of the first and last exons, since these lengths will naturally vary from sample to sample due to the random nature of sequencing.

      If you ran cuffcompare with the -r option, the first and second columns contain the closest matching reference transcript to the one described by each row.

      Here's an example of a line from the tracking file:

      Tcea uc007afj.1	j	q1:exp.115|exp.115.0|100|3.061355|0.350242|0.350207 \
           q2:60hr.292|60hr.292.0|100|4.094084|0.000000|0.000000
      		

      In this example, a transcript present in the two input files, called exp.115.0 in the first and 60hr.292.0 in the second, doesn't match any reference transcript exactly, but shares exons with uc007afj.1, an isoform of the gene Tcea, as indicated by the class code j. The first three columns are as follows:
      Column number 	Column name 	Example 	Description
      1 	Reference gene id 	Tcea 	The gene_id attribute of the reference GTF record for this transcript, or '-' if no reference transcript overlaps this Cufflinks transcript
      2 	Reference transcript id 	uc007afj.1 	The transcript_id attribute of the reference GTF record for this transcript, or '-' if no reference transcript overlaps this Cufflinks transcript
      3 	Class code 	c 	The type of match between the Cufflinks transcripts in column 4 and the reference transcript. See class codes
      Each of the columns after the third have the following format:

          qJ:<gene_id>|<transcript_id>|<FMI>|<RPKM>|<conf_lo>|<conf_hi>


      A transcript need be present in all samples to be reported in the tracking file. A sample not containing a transcript will have a "-" in its entry in the row for that transcript.

      Class Codes

      If you ran cuffcompare with the -r option, tracking rows will contain the following values. If you did not use -r, the rows will all contain "-" in their class code column.
      Priority 	Code 	Description
      1 	= 	Match
      2 	c 	Contained 	
      3 	j 	New isoform 	
      4 	e 	A single exon transcript overlapping a reference exon and at least 10 bp of a reference intron, indicating a possible pre-mRNA fragment. 	
      5 	i 	A single exon transcript falling entirely with a reference intron 	
      6 	r 	Repeat. Currently determined by looking at the reference sequence and applied to transcripts where at least 50% of the bases are lower case 	
      7 	u 	Unknown, intergenic transcript 	

      This research was supported in part by NIH grants R01-LM06845 and R01-GM083873 and NSF grant CCF-0347992. 	Administrator: Cole Trapnell. Design by David Herreman








</entry>



<entry [Mon Feb 8 15:00:21 EST 2010] FINAL SOLUTION: SET 'LD_RUN_PATH' TO RESOLVE 'error while loading shared libraries: libboost_thread-gcc41-mt-1_39.so.1.39.0' ERROR >





SHARED LIBRARIES
http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html
http://www.linux.org/docs/ldp/howto/Program-Library-HOWTO/shared-libraries.html#AEN49

LIB FILE LOCATIONS
http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html

SHARED LIBRARY SEARCH PATHS - LD_RUN_PATH
http://www.eyrie.org/~eagle/notes/rpath.html



MOVE OLD BIN:
mv /nethome/syoung/base/apps/cufflinks/0.7.0/bin  /nethome/syoung/base/apps/cufflinks/0.7.0/bin-bad3


SET LD_RUN_PATH

export LD_RUN_PATH=/nethome/syoung/base/apps/libs/boost/1.39.0/lib


INSTALL cufflinks

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0
make clean

./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.39.0/lib --with-boost-thread=/nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0

make
make install

WORKS IN SRC DIRECTORY:

src/cufflinks

	Usage:   cufflinks <hits.sam>
	Options:
	
	-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
	-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
	-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
	-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
	-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
	-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
	-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
	-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
	-G/--GTF                     quantitate against reference transcript annotations                      
	-p/--num-threads             number of threads used during assembly                [ default:      1 ]


AND WORKS IN THE INSTALLATION DIRECTORY TOO:

/nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks
	
	Usage:   cufflinks <hits.sam>
	Options:
	
	-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
	-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
	-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
	-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
	-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
	-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
	-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
	-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
	-G/--GTF                     quantitate against reference transcript annotations                      
	-p/--num-threads             number of threads used during assembly                [ default:      1 ]




NB: SETTING LDFLAGS DID NOT WORK. GOT THIS ERROR ON CONFIGURE:

./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.39.0/lib --with-boost-thread=/nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0

	checking for a BSD-compatible install... /usr/bin/install -c
	checking whether build environment is sane... yes
	checking for a thread-safe mkdir -p... /bin/mkdir -p
	checking for gawk... gawk
	checking whether make sets $(MAKE)... yes
	checking for gawk... (cached) gawk
	checking for g++... g++
	checking for C++ compiler default output file name... 
	configure: error: in `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0':
	configure: error: C++ compiler cannot create executable
	See `config.log' for more details.






</entry>



<entry [Mon Feb 8 03:00:21 EST 2010] USE export LD_LIBRARY_PATH TO RESOLVE 'error while loading shared libraries: libboost_thread-gcc41-mt-1_39.so.1.39.0' ERROR>




REINSTALLED cufflinks USING COPIED BOOST ON KRONOS-X

ll /usr/local/include/boost-1_39/boost/
ll /lib | grep boost

	/lib/libboost_date_time-gcc41-mt-1_39.a


COPY ONTO /nethome

mkdir -p /nethome/syoung/base/apps/libs/boost/1.39.0/lib
mkdir -p /nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39

cp /lib/* /nethome/syoung/base/apps/libs/boost/1.39.0/lib
cp -r /usr/local/include/boost-1_39/* /nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39



INSTALL cufflinks

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0


###./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.39.0/lib
###
###./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0
###


ll /nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0

	-rwxr-xr-x 1 syoung bioinfo 84K Feb  4 23:41 /nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0


./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.39.0/lib --with-boost-thread=/nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0


make
make install

src/cufflinks: error while loading shared libraries: libboost_thread-gcc41-mt-1_39.so.1.39.0: cannot open shared object file: No such file or directory

/nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks

/nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks: error while loading shared libraries: libboost_thread-gcc41-mt-1_39.so.1.39.0: cannot open shared object file: No such file or directory


SET LD_LIBRARY_PATH DURING INSTALLATION TO TELL ldconfig WHERE TO LOOK:

[syoung@u01 cufflinks-0.7.0]$ echo $LD_LIBRARY_PATH
/usr/local/qt/lib:/usr/lib:/home/apps/alta-cyclic/0.1.0/gsl/lib:

export LD_LIBRARY_PATH=/nethome/syoung/base/apps/libs/boost/1.39.0/lib:$LD_LIBRARY_PATH





CHECK RESULTS:

IN BOOST DIR:

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src
grep -n libboost_thread-gcc41-mt-1_39 *


[syoung@u01 src]$ grep -n libboost_thread-gcc41-mt-1_39 *

Binary file cufflinks matches
Makefile:103:BOOST_THREAD_LIB = /nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0


IN INSTALL DIR

cd /nethome/syoung/base/apps/cufflinks/0.7.0

BASED ON:
http://www.linux.org/docs/ldp/howto/Program-Library-HOWTO/shared-libraries.html#AEN49
HAVE TO SET LD_LIBRARY_PATH ON kronos-x:


export LD_LIBRARY_PATH=/nethome/syoung/base/apps/libs/boost/1.39.0/lib:$LD_LIBRARY_PATH

/nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks 

	Usage:   cufflinks <hits.sam>
	Options:
	
	-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
	-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
	-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
	-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
	-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
	-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
	-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
	-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
	-G/--GTF                     quantitate against reference transcript annotations                      
	-p/--num-threads             number of threads used during assembly                [ default:      1 ]



/usr/bin/install -c cufflinks cuffcompare '/nethome/syoung/base/apps/cufflinks/0.7.0/bin'



TEST ON NGSDEV:

cd /nethome/syoung/base/apps/cufflinks/0.7.0/bin
./cufflinks


	Usage:   cufflinks <hits.sam>
	Options:
	
	-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
	-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
	-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
	-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
	-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
	-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
	-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
	-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
	-G/--GTF                     quantitate against reference transcript annotations                      
	-p/--num-threads             number of threads used during assembly                [ default:      1 ]


NO EFFECT WHEN RESET LD_LIBRARY_PATH TO ''
echo $LD_LIBRARY_PATH
	/usr/local/qt/lib:/usr/lib:/home/apps/alta-cyclic/0.1.0/gsl/lib:
export LD_LIBRARY_PATH=''


BUT GAVE THE PREVIOUS ERROR WHEN MOVED /lib TO /lib.bkp

[root@ngsdev local]# mv /lib /lib.bkp
[root@ngsdev local]# cd /nethome/syoung/base/apps/cufflinks/0.7.0/bin
[root@ngsdev local]# exit

[syoung@ngsdev local]$ cd /nethome/syoung/base/apps/cufflinks/0.7.0/bin
[syoung@ngsdev bin]$ ./cufflinks
./cufflinks: error while loading shared libraries: libboost_thread-gcc41-mt-1_39.so.1.39.0: cannot open shared object file: No such file or directory


AND REVERTED TO NORMAL FUNCTION WHEN RENAMED /lib.bkp BACK TO /lib

[syoung@ngsdev bin]$ sudo su
[root@ngsdev bin]# mv /lib.bkp/ /lib
[root@ngsdev bin]# exit

[syoung@ngsdev bin]$ ./cufflinks

	Usage:   cufflinks <hits.sam>
	Options:
	
	-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
	-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
	-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
	-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
	-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
	-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
	-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
	-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
	-G/--GTF                     quantitate against reference transcript annotations                      
	-p/--num-threads             number of threads used during assembly                [ default:      1 ]


SUBSTITUTING LOCALLY INSTALLED (WITH PREFIX) COPY OF BOOST LIB ALSO WORKED:

STOPS WORKING WHEN MOVE /lib:

[root@ngsdev bin]# mv /lib /lib.bkp
[syoung@ngsdev bin]$ ./cufflinks
./cufflinks: error while loading shared libraries: libboost_thread-gcc41-mt-1_39.so.1.39.0: cannot open shared object file: No such file or directory


RESUMES NORMAL FUNCTION WHEN SUBSTITUTE LOCAL COPY OF BOOST LIB:


[root@ngsdev bin]# ln -s /nethome/syoung/base/apps/libs/boost/1.39.0/lib /lib

[syoung@ngsdev bin]$ ./cufflinks
Usage:   cufflinks <hits.sam>
Options:

-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
-G/--GTF                     quantitate against reference transcript annotations                      
-p/--num-threads             number of threads used during assembly                [ default:      1 ]









LIB FILE LOCATIONS
http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html

The GNU standards recommend source code distributions should install by default all libraries in:

/usr/local/lib

and all commands should go into

/usr/local/bin

(They also define the convention for overriding these defaults and for invoking the installation routines.)


The Filesystem Hierarchy Standard (FHS) discusses what should go where in a distribution
http://www.pathname.com/fhs

According to the FHS, most libraries should be installed in

/usr/lib

but libraries required for startup should be in

/lib

and libraries that are not part of the system should be in

/usr/local/lib



Note that if your library calls programs that can only be called via libraries, you should place those programs in

/usr/local/libexec

(which becomes /usr/libexec in a distribution).


NB: Red Hat-derived systems don't include

/usr/local/lib

by default in their search for libraries; see the discussion below about /etc/ld.so.conf.


Other standard library locations include

/usr/X11R6/lib for X-windows

Note that /lib/security is used for PAM modules, but those are usually loaded as DL libraries (also discussed below)








SO HOW TO SPECIFY LIBRARY PATH DURING INSTALLATION SO THAT THE RESULTING BINARY FILE KNOWS TO LOOK HERE:

/nethome/syoung/base/apps/libs/boost/1.39.0/lib

http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html


During development, there's the potential problem of modifying a library that's also used by many other programs -- and you don't want the other programs to use the ``developmental''library, only a particular application that you're testing against it. One link option you might use is

USE ld's rpath OPTION TO SPECIFY THE RUNTIME LIBRARY SEARCH PATH:

From gcc, you can invoke the rpath option by specifying it this way:

 -Wl,-rpath,$(DEFAULT_LIB_INSTALL_PATH)

If you use this option when building the library client program, you don't need to bother with LD_LIBRARY_PATH (described next) other than to ensure it's not conflicting, or using other techniques to hide the library.



http://www.eyrie.org/~eagle/notes/rpath.html

Shared Library Search Paths

It's becoming more and more common these days to link everything against shared libraries, and in fact many software packages (Tcl and Cyrus SASL come to mind) basically just don't work properly static. This means that one has to more frequently deal with the issues involved in finding the appropriate libraries at runtime.

Here's a brief primer on the way that this works on Solaris and Linux. The search paths for libraries come from three sources: the environment variable LD_LIBRARY_PATH (if set), any rpath encoded in the binary (more on this later), and the system default search paths. They're searched in this order, and the first matching library found is used.

LD_LIBRARY_PATH is broken and should not be used if at all possible. It's broken because it overrides the search paths for all binaries that you run using it, not just the one that you care about, and it doesn't add easily to other competing settings of LD_LIBRARY_PATH. It has a tendency to cause odd breakage, and it's best to only use it with commercial applications like Oracle where there's no other choice (and then to set it only in a wrapper around a particular application, and never in your general shell environment).

Now, more about the other two mechanisms in detail.


1. System default paths

Far and away the best way of handling shared libraries is to add every directory into which you install shared libraries to the system default paths. This doesn't work if you install a variety of conflicting libraries, but that's a rare case. If you're just installing software into /usr/local/lib, for example, then just add /usr/local/lib to your system default search paths.

On Linux, you do this by adding those directories to /etc/ld.so.conf and then running ldconfig. On Solaris, you do this by using the crle command (see the man page for more details).

This doesn't always work, though. The main case where this doesn't work is when you're installing shared libraries into a shared network file system for use throughout your cluster or enterprise. Then, you probably don't want to add that network file system to the default system search path, since that search path is used for every binary on the system, including ones integral to the operation of the system. If the network file system goes down, and the default search path includes it, the system will become unusable.

That leads to the next approach.

2. Encoding rpath in applications

ELF binaries (used by Solaris and Linux) can contain in the binary supplemental paths for shared libraries. (Shared libraries can also contain their own supplemental paths for finding other shared libraries, but that's not as commonly used.) This path is searched before the system default paths (but is overridden by LD_LIBRARY_PATH, if set).

This path must be encoded at compile time and after that doesn't change. The advantage of this approach over the LD_LIBRARY_PATH approach, apart from the other problems caused by LD_LIBRARY_PATH, is that the work is born by the person building the software rather than the person running it. That means the work of configuring library paths only has to be done once, by a fairly clued person, rather than by every user who may or may not understand the issues.

There are two basic ways of telling a compiler to encode a search path in the binary (called an rpath):


LD_RUN_PATH
===========

Set the environment variable LD_RUN_PATH to the search path (colon-separated) you want to encode. You don't need to include the system default search directories (and indeed should not, since you may interfere with future changes in how the native library searching algorithm works). This environment variable will be picked up by the compiler when it links the binary.

Add -R /usr/local/lib (or whatever path) to the link command line. You can repeat this flag multiple times with different paths, similar to -L. Its order in the command line doesn't matter.

make CC="gcc -R /my/lib/path"
=============================

Either can be used, so normally I use LD_RUN_PATH since it's less intrusive. However, note that if there are any -R flags on the command line, the LD_RUN_PATH setting will be ignored. This means that if the normal build process of the software adds -R flags, you'll need to get it to add your -R flags as well (unless it helpfully includes a -R flag for the installation directory, which it sometimes does).

If the software package uses Autoconf, generally the easiest way to do this is to set LDFLAGS to "-R /usr/local/lib" (or whatever directory) before running configure, which will then stick it into the Makefile:

export LDFLAGS="-R /usr/local/lib" 



Failing that, I'll sometimes do something like:

    make CC="gcc -R /usr/local/lib"
	
to build the software, which generally does the right thing.

Note that software that uses libtool to link its libraries and to link against libraries will more frequently do the right thing and encode rpath properly when it builds the final binaries, but not always. Thankfully libtool also understands the -R flag and does the right thing when it's provided.

Checking the binaries

To verify that a binary is doing the right thing, use the command ldd on the binary. This will list all of the libraries and either where they came from (if found) or something like "(not found)" if the library wasn't found. On Mac OS X, use otool -L.



Solaris has the very useful -s option to ldd that will additionally show the full library search path, so you can confirm that you encoded the right rpath in the binary.

A partial equivalent under Linux is:

    readelf -d <binary> | grep RPATH
but note that this only shows the rpath for a particular binary (executable or library). If a shared library depends on other shared libraries, those shared libraries may be searched for using the rpath of the shared library that is loading them. To make sure that the search path is correct on Linux, you may need to use the above readelf command on the binary and all libraries other than system libraries that it uses. readelf comes with binutils, so if you're compiling software you will probably already have it installed.


NOTE THAT CUFFLINKS DOES NOT HAVE THE FULL PATH FOR THE libboost_thread-gcc41-mt-1_39.so.1.39.0 SHARED LIBRARY:

[syoung@ngsdev bin]$ readelf -d cufflinks 

	Dynamic section at offset 0x8d420 contains 25 entries:
	  Tag        Type                         Name/Value
	 0x0000000000000001 (NEEDED)             Shared library: [libboost_thread-gcc41-mt-1_39.so.1.39.0]
	 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]
	 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]
	 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]
	 0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]
	 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
	 0x000000000000000c (INIT)               0x407058
	 0x000000000000000d (FINI)               0x472ba8
	 0x000000006ffffef5 (GNU_HASH)           0x400240
	 0x0000000000000005 (STRTAB)             0x402660
	 0x0000000000000006 (SYMTAB)             0x4007a0
	 0x000000000000000a (STRSZ)              13593 (bytes)
	 0x000000000000000b (SYMENT)             24 (bytes)
	 0x0000000000000015 (DEBUG)              0x0
	 0x0000000000000003 (PLTGOT)             0x68d608
	 0x0000000000000002 (PLTRELSZ)           3936 (bytes)
	 0x0000000000000014 (PLTREL)             RELA
	 0x0000000000000017 (JMPREL)             0x4060f8
	 0x0000000000000007 (RELA)               0x405ed0
	 0x0000000000000008 (RELASZ)             552 (bytes)
	 0x0000000000000009 (RELAENT)            24 (bytes)
	 0x000000006ffffffe (VERNEED)            0x405e10
	 0x000000006fffffff (VERNEEDNUM)         5
	 0x000000006ffffff0 (VERSYM)             0x405b7a
	 0x0000000000000000 (NULL)               0x0


Changing the rpath

On Linux, a utility called chrpath is available that can modify or remove the rpath, but not add one if one was not already present (at least as of this writing). The maintainer's FTP site used to be at ftp://ftp.hungry.com/pub/hungry/chrpath/ but has been unreachable for some time. At this point, the best source is probably the Debian package. This utility reportedly also works on Solaris 10. (I'm not sure about earlier versions of Solaris.)




Other platforms

I'm afraid I don't have as much helpful information about Tru64, HP-UX, AIX, or IRIX. HP-UX and AIX don't use ELF, and therefore have a completely different linking mechanism. Tru64 and IRIX seem to often encode library locations at build time based on where the library was found and therefore don't need either of these mechanisms, but I don't know exactly how that works. HP-UX and AIX may do something similar.

Note that another option is to just build your software against the static libraries. This is what we used to do at Stanford on all platforms other than Solaris and Linux (and the BSDs, although I don't normally build on BSD systems), since the handling of shared library versioning and dependencies is considerably less robust on other systems.







[syoung@ngsdev bin]$ make --help
Usage: make [options] [target] ...
Options:
  -b, -m                      Ignored for compatibility.
  -B, --always-make           Unconditionally make all targets.
  -C DIRECTORY, --directory=DIRECTORY
                              Change to DIRECTORY before doing anything.
  -d                          Print lots of debugging information.
  --debug[=FLAGS]             Print various types of debugging information.
  -e, --environment-overrides
                              Environment variables override makefiles.
  -f FILE, --file=FILE, --makefile=FILE
                              Read FILE as a makefile.
  -h, --help                  Print this message and exit.
  -i, --ignore-errors         Ignore errors from commands.
  -I DIRECTORY, --include-dir=DIRECTORY
                              Search DIRECTORY for included makefiles.
  -j [N], --jobs[=N]          Allow N jobs at once; infinite jobs with no arg.
  -k, --keep-going            Keep going when some targets can't be made.
  -l [N], --load-average[=N], --max-load[=N]
                              Don't start multiple jobs unless load is below N.
  -L, --check-symlink-times   Use the latest mtime between symlinks and target.
  -n, --just-print, --dry-run, --recon
                              Don't actually run any commands; just print them.
  -o FILE, --old-file=FILE, --assume-old=FILE
                              Consider FILE to be very old and don't remake it.
  -p, --print-data-base       Print make's internal database.
  -q, --question              Run no commands; exit status says if up to date.
  -r, --no-builtin-rules      Disable the built-in implicit rules.
  -R, --no-builtin-variables  Disable the built-in variable settings.
  -s, --silent, --quiet       Don't echo commands.
  -S, --no-keep-going, --stop
                              Turns off -k.
  -t, --touch                 Touch targets instead of remaking them.
  -v, --version               Print the version number of make and exit.
  -w, --print-directory       Print the current directory.
  --no-print-directory        Turn off -w, even if it was turned on implicitly.
  -W FILE, --what-if=FILE, --new-file=FILE, --assume-new=FILE
                              Consider FILE to be infinitely new.
  --warn-undefined-variables  Warn when an undefined variable is referenced.

This program built for x86_64-redhat-linux-gnu
Report bugs to <bug-make@gnu.org>






NB: USING /lib/ld-linux.so.2 DOESN'T WORK:

If you don't want to set the LD_LIBRARY_PATH environment variable, on Linux you can even invoke the program loader directly and pass it arguments. For example, the following will use the given PATH instead of the content of the environment variable LD_LIBRARY_PATH, and run the given executable:

/lib/ld-linux.so.2 --library-path PATH EXECUTABLE

/lib/ld-linux.so.2 --library-path /nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0 /nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks 

	/nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks: error while loading shared libraries: /nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks: wrong ELF class: ELFCLASS64






FULL INSTALL OUTPUT:


[syoung@u01 cufflinks-0.7.0]$ ./configure --prefix= --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.39.0/lib --with-boost-thread=/nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for gawk... (cached) gawk
checking for g++... g++
checking for C++ compiler default output file name... a.out
checking whether the C++ compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for style of include used by make... GNU
checking dependency style of g++... gcc3
checking for gcc... gcc
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking dependency style of gcc... gcc3
checking whether make sets $(MAKE)... (cached) yes
checking for ranlib... ranlib
checking for a BSD-compatible install... /usr/bin/install -c
checking for boostlib >= 1.38.0... yes
checking build system type... x86_64-unknown-linux-gnu
checking whether the Boost::Thread library is available... yes
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking for unistd.h... (cached) yes
checking for stdbool.h that conforms to C99... yes
checking for _Bool... yes
checking for inline... inline
checking for pid_t... yes
checking for size_t... yes
checking for ptrdiff_t... yes
checking host system type... x86_64-unknown-linux-gnu
checking if gcc accepts -m64... yes
checking for struct sysinfo.totalram... yes
checking whether sysctl is declared... yes
checking whether CTL_HW is declared... no
checking whether HW_PHYSMEM is declared... no
checking how to create a ustar tar archive... gnutar
checking dependency style of gcc... (cached) gcc3
checking dependency style of g++... (cached) gcc3
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating config.h
config.status: config.h is unchanged
config.status: executing depfiles commands

-- cufflinks 0.7.0 Configuration Results --
  C compiler:          gcc -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG 
  C++ compiler:        g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39
  GCC version:         gcc (GCC) 4.1.2 20070626 (Red Hat 4.1.2-14)
  Host System type:    x86_64-unknown-linux-gnu
  Install prefix:      
  Install eprefix:     ${prefix}

  See config.h for further configuration information.
  Email <cole@cs.umd.edu> with questions and bug reports.

[syoung@u01 cufflinks-0.7.0]$ make
make  all-recursive
make[1]: Entering directory `/home/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
Making all in src
make[2]: Entering directory `/home/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT common.o -MD -MP -MF .deps/common.Tpo -c -o common.o common.cpp
mv -f .deps/common.Tpo .deps/common.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT assemble.o -MD -MP -MF .deps/assemble.Tpo -c -o assemble.o assemble.cpp
mv -f .deps/assemble.Tpo .deps/assemble.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT tokenize.o -MD -MP -MF .deps/tokenize.Tpo -c -o tokenize.o tokenize.cpp
mv -f .deps/tokenize.Tpo .deps/tokenize.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT abundances.o -MD -MP -MF .deps/abundances.Tpo -c -o abundances.o abundances.cpp
mv -f .deps/abundances.Tpo .deps/abundances.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT scaffolds.o -MD -MP -MF .deps/scaffolds.Tpo -c -o scaffolds.o scaffolds.cpp
mv -f .deps/scaffolds.Tpo .deps/scaffolds.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT hits.o -MD -MP -MF .deps/hits.Tpo -c -o hits.o hits.cpp
hits.cpp: In member function âvirtual bool SAMHitFactory::get_hit_from_buf(const char*, ReadHit&, bool, char*, char*)â:
hits.cpp:348: warning: comparison between signed and unsigned integer expressions
mv -f .deps/hits.Tpo .deps/hits.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT genes.o -MD -MP -MF .deps/genes.Tpo -c -o genes.o genes.cpp
genes.cpp:114:2: warning: no newline at end of file
genes.cpp: In member function âvoid Isoform::get_gtf(std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >&, const RefSequenceTable&) constâ:
genes.cpp:45: warning: converting to âintâ from âdoubleâ
mv -f .deps/genes.Tpo .deps/genes.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT bundles.o -MD -MP -MF .deps/bundles.Tpo -c -o bundles.o bundles.cpp
mv -f .deps/bundles.Tpo .deps/bundles.Po
rm -f libcufflinks.a
ar cru libcufflinks.a common.o assemble.o tokenize.o abundances.o scaffolds.o hits.o genes.o bundles.o 
ranlib libcufflinks.a
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT codons.o -MD -MP -MF .deps/codons.Tpo -c -o codons.o codons.cpp
mv -f .deps/codons.Tpo .deps/codons.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT GArgs.o -MD -MP -MF .deps/GArgs.Tpo -c -o GArgs.o GArgs.cpp
mv -f .deps/GArgs.Tpo .deps/GArgs.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT GBase.o -MD -MP -MF .deps/GBase.Tpo -c -o GBase.o GBase.cpp
mv -f .deps/GBase.Tpo .deps/GBase.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT gdna.o -MD -MP -MF .deps/gdna.Tpo -c -o gdna.o gdna.cpp
mv -f .deps/gdna.Tpo .deps/gdna.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT GStr.o -MD -MP -MF .deps/GStr.Tpo -c -o GStr.o GStr.cpp
mv -f .deps/GStr.Tpo .deps/GStr.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT GFaSeqGet.o -MD -MP -MF .deps/GFaSeqGet.Tpo -c -o GFaSeqGet.o GFaSeqGet.cpp
mv -f .deps/GFaSeqGet.Tpo .deps/GFaSeqGet.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT gff.o -MD -MP -MF .deps/gff.Tpo -c -o gff.o gff.cpp
mv -f .deps/gff.Tpo .deps/gff.Po
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT gtf_tracking.o -MD -MP -MF .deps/gtf_tracking.Tpo -c -o gtf_tracking.o gtf_tracking.cpp
mv -f .deps/gtf_tracking.Tpo .deps/gtf_tracking.Po
rm -f libgc.a
ar cru libgc.a codons.o GArgs.o GBase.o gdna.o GStr.o GFaSeqGet.o gff.o gtf_tracking.o 
ranlib libgc.a
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT cufflinks.o -MD -MP -MF .deps/cufflinks.Tpo -c -o cufflinks.o cufflinks.cpp
mv -f .deps/cufflinks.Tpo .deps/cufflinks.Po
g++  -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -L/nethome/syoung/base/apps/libs/boost/1.39.0/lib   -o cufflinks cufflinks.o libcufflinks.a libgc.a /nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0 
g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT cuffcompare.o -MD -MP -MF .deps/cuffcompare.Tpo -c -o cuffcompare.o cuffcompare.cpp
mv -f .deps/cuffcompare.Tpo .deps/cuffcompare.Po
g++  -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39   -o cuffcompare cuffcompare.o libgc.a 
make[2]: Leaving directory `/home/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
make[2]: Entering directory `/home/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make[2]: Leaving directory `/home/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make[1]: Leaving directory `/home/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
[syoung@u01 cufflinks-0.7.0]$ pwd


</entry>



<entry [Sun Feb  7 23:00:21 EST 2010] DOWNLOADED LATEST VERSIONS OF BOOST AND BOOST-JAM>



NB: USE OF stage AND install WITH BJAM

http://www.indexdata.com/metaproxy/doc/installation.html
Metaproxy needs components thread and test from Boost.

     gunzip -c boost-version.tar.gz|tar xf -
     cd boost-version
     ./configure --with-libraries=thread,test --with-toolset=gcc
     make
     su
     make install
    
However, under the hood bjam is used. You can invoke that with

     ./bjam --toolset=gcc --with-thread --with-test stage
    
Replace stage with clean / install to perform clean and install respectively.

Add --prefix=DIR to install Boost in other prefix than /usr/local.





ADDED --with-thread AND --with-test:

BACKUP OLD INSTALLED DIR:
mv /nethome/syoung/base/apps/libs/boost/1.42.0 /nethome/syoung/base/apps/libs/boost/1.42.0-old
mkdir /nethome/syoung/base/apps/libs/boost/1.42.0

REINSTALL:
screen -S install-boost
export PATH=/nethome/syoung/base/apps/libs/boost-jam/3.1.17/bin:$PATH
cd /nethome/syoung/base/apps/libs/boost/downloads/boost_1_42_0

/nethome/syoung/base/apps/libs/boost-jam/3.1.17/bin/bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.42.0 --toolset=gcc --with-thread --with-test architecture=x86 address-model=64 link=static runtime-link=static stage install

ls

	common.mkdir /nethome/syoung/base/apps/libs/boost/1.42.0/lib
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.42.0/lib>libboost_prg_exec_monitor.a for lack of <pbin.v2/libs/test/build/gcc-4.1.2/release/address-model-64/architecture-x86/link-static/runtime-link-static/threading-multi>libboost_prg_exec_monitor.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.42.0/lib>libboost_test_exec_monitor.a for lack of <pbin.v2/libs/test/build/gcc-4.1.2/release/address-model-64/architecture-x86/link-static/runtime-link-static/threading-multi>libboost_test_exec_monitor.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.42.0/lib>libboost_unit_test_framework.a for lack of <pbin.v2/libs/test/build/gcc-4.1.2/release/address-model-64/architecture-x86/link-static/runtime-link-static/threading-multi>libboost_unit_test_framework.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.42.0/lib>libboost_thread.a for lack of <pbin.v2/libs/thread/build/gcc-4.1.2/release/address-model-64/architecture-x86/link-static/runtime-link-static/threading-multi>libboost_thread.a...
	...failed updating 23 targets...
	...skipped 16 targets...
	...updated 7704 targets...







1. INSTALLED BOOST-JAM 3.1.17
(NB: NOT THE LINUX BINARY THAT USED BEFORE: boost-jam-3.1.17-1-linuxx86)

tar xvfz boost-jam*
cd /nethome/syoung/base/apps/libs/boost/downloads/boost-jam-3.1.17
./build.sh
ln -s bin.linuxx86_64 bin

ADDED NEW bjam TO PATH:

export PATH=/nethome/syoung/base/apps/libs/boost-jam/3.1.17/bin:$PATH



2. INSTALLED BOOST 1.42.0

ON KRONOS-X:

cd /nethome/syoung/base/apps/libs/boost/downloads
tar xvfz *42*
cd /nethome/syoung/base/apps/libs/boost/downloads/boost_1_42_0
	

MAKE INSTALLATION DIR:

mkdir /nethome/syoung/base/apps/libs/boost/1.42.0


screen -S install-boost

export PATH=/nethome/syoung/base/apps/libs/boost-jam/3.1.17/bin:$PATH
cd /nethome/syoung/base/apps/libs/boost/downloads/boost_1_42_0

/nethome/syoung/base/apps/libs/boost-jam/3.1.17/bin/bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.42.0 --toolset=gcc architecture=x86 address-model=64 link=static runtime-link=static stage install

l
common.copy /nethome/syoung/base/apps/libs/boost/1.42.0/include/boost/tr1/tr1/valarray
...on 8000th target...
common.copy /nethome/syoung/base/apps/libs/boost/1.42.0/include/boost/tr1/tr1/vector
...failed updating 149 targets...
...skipped 214 targets...
...updated 7851 targets...


FIX: USE --toolset=intel


screen -S install-boost
/nethome/syoung/base/apps/libs/boost-jam/3.1.17/bin/bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.42.0 --toolset=intel architecture=x86 address-model=64 link=static runtime-link=static stage install

	...
	...failed updating 149 targets...
	...skipped 214 targets...
	...updated 114 targets...



###screen -S install-boost
###export PATH=/nethome/syoung/base/apps/libs/boost-jam:$PATH
###bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.38.0 --with-thread --toolset=gcc architecture=x86 address-model=64 link=static runtime-link=static stage install -lboost_thread
###
###
###USE link=shared ?
http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html

Produce a shared object which can then be linked with other objects to form an executable. Not all systems support this option. For predictable results, you must also specify the same set of options that were used to generate code (-fpic, -fPIC, or model suboptions) when you specify this option.1 

###
###cd /nethome/syoung/base/apps/libs/boost/downloads/boost_1_39_0
###
###bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-thread --toolset=gcc architecture=x86 address-model=64 link=shared runtime-link=shared stage install -lboost_thread
###


PREVIOUS INSTALL:


	common.copy /nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/spirit/core/composite/actions.hpp
	common.mkdir /nethome/syoung/base/apps/libs/boost/1.38.0/lib
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s-1_38.a for lack of <pbin.v2/libs/thread/build/gcc-4.1.2/release/address-model-64/architecture-x86/link-static/runtime-link-static/threading-multi>libboost_thread-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s-1_38.a...
	...failed updating 3 targets...
	...skipped 6 targets...
	...updated 7220 targets...




</entry>



<entry [Fri Feb  5 01:13:37 EST 2010] TEST cufflinks - WORKS ON ngsdev BUT NOT ON kronos-x (NEED TO REINSTALL WITH LOCAL BOOST FLAG)>




mkdir -p /nethome/syoung/base/apps/cufflinks/test
cd /nethome/syoung/base/apps/cufflinks/test


DOWNLOAD TEST DATA

wget http://cufflinks.cbcb.umd.edu/downloads/test_data.sam


RUN CUFFLINKS 

export PATH=/nethome/syoung/base/apps/libs/boost/1.39.0/lib:$PATH

cd /nethome/syoung/base/apps/libs/boost/1.39.0
/nethome/syoung/base/apps/cufflinks/0.7.0/bin-ok/cufflinks  ./test_data.sam




[syoung@u01 test]$ /nethome/syoung/base/apps/cufflinks/0.7.0/bin-ok/cufflinks  ./test_data.sam
/nethome/syoung/base/apps/cufflinks/0.7.0/bin-ok/cufflinks: error while loading shared libraries: libboost_thread-gcc41-mt-1_39.so.1.39.0: cannot open shared object file: No such file or directory




cd /nethome/syoung/base/apps/cufflinks/test
/nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks  ./test_data.sam



/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0
cd /nethome/syoung/base/apps/cufflinks/0.7.0




RUNS ON NGSDEV:

cd /nethome/syoung/base/apps/cufflinks/test
/nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks  ./test_data.sam

	Counting hits in map
		Total map density: 13725.000000
	Processing bundle [ test_chromosome:52-550 ] with 99 non-redundant alignments

[syoung@ngsdev test]$ ll

	-rw-r--r-- 1 syoung bioinfo 105 Feb  5 01:25 genes.expr
	-rw-r--r-- 1 syoung bioinfo 41K Sep 26 19:15 test_data.sam
	-rw-r--r-- 1 syoung bioinfo 185 Feb  5 01:25 transcripts.expr
	-rw-r--r-- 1 syoung bioinfo 827 Feb  5 01:25 transcripts.gtf

head *

	==> genes.expr <==
	gene_id bundle_id       chr     left    right   bundle_fraction density RPKM
	CUFF.1  6       test_chromosome 52      550     3.3557e+06
	
	==> test_data.sam <==
	test_mRNA_3_187_51      99      test_chromosome 53      255     75M     =       163     0       TACTATTTGACTAGACTGGAGGCGCTTGCGACTGAGCTAGGACGTGCCACTACGGGGATGACGACTCGGACTACG IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:2
	test_mRNA_4_191_5d      163     test_chromosome 54      255     75M     =       167     0       ACTATCTGACGAGACTGGAGGCGCTTGCGACTGAGCTAGGACGTACCATTACGCGGATGACGACTAGGACTACGG IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:4
	test_mRNA_5_197_46      97      test_chromosome 55      255     75M     =       173     0       CTATCTGACTAGACTCGAGGCGCTTGCGTCTGAGCTAGGACGTGCCACTACGGGGATGACGACTAGGACTACGGA IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:2
	test_mRNA_6_182_59      99      test_chromosome 56      255     75M     =       158     0       TATCTGACTAGACTGGAGGCGCTTGCGACTGAGCTAGGACGTGCCAGTACGGGGATGACGACTAGGACTACGGAC IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:1
	test_mRNA_8_155_9       163     test_chromosome 58      255     75M     =       131     0       TGTGACTAGACTGGAGGCGCTTGCGACTGAGCTAGGACGTGCCACTACGGGGATGACGACTAGGACTACGGACGG IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:1
	test_mRNA_8_197_1       99      test_chromosome 58      255     75M     =       173     0       TCTGACTAGACTGGAGGCGCTTGCGACTGAGCTAGGACGTGACACTACGGGGATGGCGACTAGGACTACGGACGG IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:2
	test_mRNA_9_179_52      163     test_chromosome 59      255     75M     =       155     0       CTGACTAGACTGGAGGCGCTCGCGACTGAGCTAGGACGTGCCACTACGGGGATGACGACTAGGACTACGGACGGA IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:1
	test_mRNA_11_190_1a     99      test_chromosome 61      255     75M     =       166     0       GACTAGACTGGAGGCGCTTGCGACTGAGCTAGGACGTGCCACTACGGGGATGACGACTAGGACTACGGACGGACT IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:0
	test_mRNA_16_194_10     163     test_chromosome 66      255     75M     =       170     0       GACTGGATGCGCTTGCGACTGAGCTAGGACGTGCCACTACGGGGATGACGACTCGGACTACGGACGGACTTAAAG IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:3
	test_mRNA_21_208_24     163     test_chromosome 71      255     75M     =       184     0       GAGGCGCTTGCGACTGAGCTAGGACGTGCCACTACGGGGATGACGACTAGGACTACGGACGGACTTAGAGCGTCA IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII NM:i:0
	
	==> transcripts.expr <==
	trans_id        bundle_id       chr     left    right   total_score     avg_read_score  RPKM    FMI     frac    conf_low    conf_hi coverage
	CUFF.1.0        6       test_chromosome 52      550     -1.201506       -0.011553       3.3557e+06      1       1  00       46.057  298
	
	==> transcripts.gtf <==
	test_chromosome Cufflinks       transcript      53      550     1000    +       .       gene_id "CUFF.1"; transcript_id "CUFF.1.0"; RPKM "3355704.6979865772"; frac "1.000000"; conf_lo "0.000000"; conf_hi "0.000000"; cov "46.057047";
	test_chromosome Cufflinks       exon    53      250     1000    +       .       gene_id "CUFF.1"; transcript_id "CUFF.1.0"; exon_number "1"; RPKM "3355704.6979865772"; frac "1.000000"; conf_lo "0.000000"; conf_hi "0.000000"; cov "46.057047";
	test_chromosome Cufflinks       exon    351     400     1000    +       .       gene_id "CUFF.1"; transcript_id "CUFF.1.0"; exon_number "2"; RPKM "3355704.6979865772"; frac "1.000000"; conf_lo "0.000000"; conf_hi "0.000000"; cov "46.057047";
	test_chromosome Cufflinks       exon    501     550     1000    +       .       gene_id "CUFF.1"; transcript_id "CUFF.1.0"; exon_number "3"; RPKM "3355704.6979865772"; frac "1.000000"; conf_lo "0.000000"; conf_hi "0.000000"; cov "46.057047";




(SEE DESCRIPTION OF OUTPUT FILES BELOW)


BUT NOT ON KRONOS

cd /nethome/syoung/base/apps/cufflinks/test
/nethome/syoung/base/apps/cufflinks/0.7.0/bin/cufflinks  ./test_data.sam

/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/cufflinks 
/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/cufflinks: error while loading shared libraries: libboost_thread-gcc41-mt-1_39.so.1.39.0: cannot open shared object file: No such file or directory


SO NEED TO INSTALL AGAIN ON KRONOS WITH LOCATION OF LOCAL BOOST 1.39.0



</entry>



<entry [Fri Feb  5 01:12:48 EST 2010] INSTALLED cufflinks AFTER COPYING BOOST ONTO NETHOME FROM ALREADY INSTALLED BOOST ON ngsdev BUT WORKS ONLY ON ngsdev, NOT ON kronos-x>



NGSDEV

ll /usr/local/include/boost-1_39/boost/
ll /lib | grep boost

	/lib/libboost_date_time-gcc41-mt-1_39.a


COPY ONTO /nethome

mkdir -p /nethome/syoung/base/apps/libs/boost/1.39.0/lib
mkdir -p /nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39

cp /lib/* /nethome/syoung/base/apps/libs/boost/1.39.0/lib
cp -r /usr/local/include/boost-1_39/* /nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39



INSTALL cufflinks

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0


###./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.39.0/lib
###
###./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0
###


ll /nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0

	-rwxr-xr-x 1 syoung bioinfo 84K Feb  4 23:41 /nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0

./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.39.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.39.0/lib --with-boost-thread=/nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0

make

	g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT gtf_tracking.o -MD -MP -MF .deps/gtf_tracking.Tpo -c -o gtf_tracking.o gtf_tracking.cpp
	mv -f .deps/gtf_tracking.Tpo .deps/gtf_tracking.Po
	rm -f libgc.a
	ar cru libgc.a codons.o GArgs.o GBase.o gdna.o GStr.o GFaSeqGet.o gff.o gtf_tracking.o 
	ranlib libgc.a
	g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT cufflinks.o -MD -MP -MF .deps/cufflinks.Tpo -c -o cufflinks.o cufflinks.cpp
	mv -f .deps/cufflinks.Tpo .deps/cufflinks.Po
	g++  -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -L/nethome/syoung/base/apps/libs/boost/1.39.0/lib   -o cufflinks cufflinks.o libcufflinks.a libgc.a /nethome/syoung/base/apps/libs/boost/1.39.0/lib/libboost_thread-gcc41-mt-1_39.so.1.39.0 
	g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT cuffcompare.o -MD -MP -MF .deps/cuffcompare.Tpo -c -o cuffcompare.o cuffcompare.cpp
	mv -f .deps/cuffcompare.Tpo .deps/cuffcompare.Po
	g++  -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39   -o cuffcompare cuffcompare.o libgc.a 
	make[2]: warning:  Clock skew detected.  Your build may be incomplete.
	make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[1]: warning:  Clock skew detected.  Your build may be incomplete.
	make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make: warning:  Clock skew detected.  Your build may be incomplete.




[syoung@ngsdev cufflinks-0.7.0]$ make install


	Making install in src
	make[1]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	test -z "/nethome/syoung/base/apps/cufflinks/0.7.0/bin" || /bin/mkdir -p "/nethome/syoung/base/apps/cufflinks/0.7.0/bin"
	  /usr/bin/install -c cufflinks cuffcompare '/nethome/syoung/base/apps/cufflinks/0.7.0/bin'
	make[2]: Nothing to be done for `install-data-am'.
	make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	make[1]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[2]: Nothing to be done for `install-exec-am'.
	make[2]: Nothing to be done for `install-data-am'.
	make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	[syoung@ngsdev cufflinks-0.7.0]$ 


CHECK cufflinks ON kronos-x:


/nethome/syoung/base/apps/cufflinks/0.7.0



LOCATE MISSING LIB FILE:

[syoung@u01 ~]$ cd /nethome/syoung/base/apps/cufflinks/0.7.0/bin
[syoung@u01 bin]$ ./cufflinks 

export BOOST_ROOT=/nethome/syoung/base/apps/libs/boost/1.39.0
./cufflinks: error while loading shared libraries: libboost_thread-gcc41-mt-1_39.so.1.39.0: cannot open shared object file: No such file or directory



/nethome/syoung/base/apps/libs/boost/1.39.0/lib | grep libboost_thread-gcc41-mt-1_39
 
	-rwxr-xr-x 1 syoung bioinfo  84K Feb  4 23:41 libboost_thread-gcc41-mt-1_39.so

ll /nethome/syoung/base/apps/libs/boost/1.39.0/lib | grep libboost_thread-gcc41-mt-1_39
 
	-rwxr-xr-x 1 syoung bioinfo  84K Feb  4 23:41 libboost_thread-gcc41-mt-1_39.so
	-rwxr-xr-x 1 syoung bioinfo  84K Feb  4 23:41 libboost_thread-gcc41-mt-1_39.so.1.39.0



 



checking how to create a ustar tar archive... gnutar
checking dependency style of gcc... (cached) gcc3
checking dependency style of g++... (cached) gcc3
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating config.h
config.status: config.h is unchanged
config.status: executing depfiles commands

-- cufflinks 0.7.0 Configuration Results --
  C compiler:          gcc -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG 
  C++ compiler:        g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39
  GCC version:         gcc (GCC) 4.1.2 20071124 (Red Hat 4.1.2-42)
  Host System type:    x86_64-unknown-linux-gnu
  Install prefix:      /nethome/syoung/base/apps/cufflinks/0.7.0
  Install eprefix:     ${prefix}

  See config.h for further configuration information.
  Email <cole@cs.umd.edu> with questions and bug reports.

[syoung@ngsdev cufflinks-0.7.0]$ make
make: Warning: File `Makefile' has modification time 65 s in the future
make  all-recursive
make[1]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make[1]: Warning: File `Makefile' has modification time 65 s in the future
Making all in src
make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
make[2]: Warning: File `Makefile' has modification time 65 s in the future
make[2]: Nothing to be done for `all'.
make[2]: warning:  Clock skew detected.  Your build may be incomplete.
make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make[2]: Warning: File `Makefile' has modification time 48 s in the future
make[2]: warning:  Clock skew detected.  Your build may be incomplete.
make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make[1]: warning:  Clock skew detected.  Your build may be incomplete.
make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make: warning:  Clock skew detected.  Your build may be incomplete.
[syoung@ngsdev cufflinks-0.7.0]$


[syoung@ngsdev cufflinks-0.7.0]$ make install
Making install in src
make[1]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
test -z "/nethome/syoung/base/apps/cufflinks/0.7.0/bin" || /bin/mkdir -p "/nethome/syoung/base/apps/cufflinks/0.7.0/bin"
  /usr/bin/install -c cufflinks cuffcompare '/nethome/syoung/base/apps/cufflinks/0.7.0/bin'
make[2]: Nothing to be done for `install-data-am'.
make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
make[1]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make[2]: Nothing to be done for `install-exec-am'.
make[2]: Nothing to be done for `install-data-am'.
make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'












	
	
	checking build system type... x86_64-unknown-linux-gnu
	checking whether the Boost::Thread library is available... yes
	checking for exit in -lboost_thread-gcc41-mt-1_39... yes
	checking how to run the C preprocessor... gcc -E
	checking for grep that handles long lines and -e... /bin/grep
	checking for egrep... /bin/grep -E
	checking for ANSI C header files... yes
	checking for sys/types.h... yes
	checking for sys/stat.h... yes
	checking for stdlib.h... yes
	checking for string.h... yes
	checking for memory.h... yes
	checking for strings.h... yes
	checking for inttypes.h... yes
	checking for stdint.h... yes
	checking for unistd.h... yes
	checking for stdlib.h... (cached) yes
	checking for string.h... (cached) yes
	checking for unistd.h... (cached) yes
	checking for stdbool.h that conforms to C99... yes
	checking for _Bool... yes
	checking for inline... inline
	checking for pid_t... yes
	checking for size_t... yes
	checking for ptrdiff_t... yes
	checking host system type... x86_64-unknown-linux-gnu
	checking if gcc accepts -m64... yes
	checking for struct sysinfo.totalram... yes
	checking whether sysctl is declared... yes
	checking whether CTL_HW is declared... no
	checking whether HW_PHYSMEM is declared... no
	checking how to create a ustar tar archive... gnutar
	checking dependency style of gcc... (cached) gcc3
	checking dependency style of g++... (cached) gcc3
	configure: creating ./config.status
	config.status: creating Makefile
	config.status: creating src/Makefile
	config.status: creating config.h
	config.status: config.h is unchanged
	config.status: executing depfiles commands
	
	-- cufflinks 0.7.0 Configuration Results --
	  C compiler:          gcc -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG 
	  C++ compiler:        g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39
	  GCC version:         gcc (GCC) 4.1.2 20071124 (Red Hat 4.1.2-42)
	  Host System type:    x86_64-unknown-linux-gnu
	  Install prefix:      /nethome/syoung/base/apps/cufflinks/0.7.0
	  Install eprefix:     ${prefix}
	
	  See config.h for further configuration information.
	  Email <cole@cs.umd.edu> with questions and bug reports.


make

	[syoung@ngsdev cufflinks-0.7.0]$ make
	make  all-recursive
	make[1]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	Making all in src
	make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	g++  -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -L/nethome/syoung/base/apps/libs/boost/1.39.0/lib   -o cufflinks cufflinks.o libcufflinks.a libgc.a -lboost_thread-gcc41-mt-1_39 
	g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39 -MT cuffcompare.o -MD -MP -MF .deps/cuffcompare.Tpo -c -o cuffcompare.o cuffcompare.cpp
	mv -f .deps/cuffcompare.Tpo .deps/cuffcompare.Po
	g++  -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.39.0/include/boost-1_39   -o cuffcompare cuffcompare.o libgc.a 
	make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'



cd src
[syoung@ngsdev src]$ ./cufflinks 
Usage:   cufflinks <hits.sam>
Options:

-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
-G/--GTF                     quantitate against reference transcript annotations                      
-p/--num-threads             number of threads used during assembly                [ default:      1 ]




[syoung@ngsdev cufflinks-0.7.0]$ make install

	Making install in src
	make[1]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	test -z "/nethome/syoung/base/apps/cufflinks/0.7.0/bin" || /bin/mkdir -p "/nethome/syoung/base/apps/cufflinks/0.7.0/bin"
	  /usr/bin/install -c cufflinks cuffcompare '/nethome/syoung/base/apps/cufflinks/0.7.0/bin'
	make[2]: Nothing to be done for `install-data-am'.
	make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
	make[1]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[2]: Entering directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[2]: Nothing to be done for `install-exec-am'.
	make[2]: Nothing to be done for `install-data-am'.
	make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
	make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'






[syoung@ngsdev cufflinks-0.7.0]$ ll /nethome/syoung/base/apps/cufflinks/0.7.0
total 48K
drwxr-xr-x 3 syoung bioinfo 16K Feb  5  2010 .
drwxr-xr-x 5 syoung bioinfo 16K Jan 15 16:20 ..
drwxr-xr-x 2 syoung bioinfo 16K Feb  5  2010 bin
[syoung@ngsdev cufflinks-0.7.0]$ ll /nethome/syoung/base/apps/cufflinks/0.7.0/bin
total 8.7M
drwxr-xr-x 2 syoung bioinfo  16K Feb  5  2010 .
drwxr-xr-x 3 syoung bioinfo  16K Feb  5  2010 ..
-rwxr-xr-x 1 syoung bioinfo 910K Feb  5  2010 cuffcompare
-rwxr-xr-x 1 syoung bioinfo 7.8M Feb  5  2010 cufflinks


OK!!!



</entry>



<entry [Thu Feb  4 23:00:34 EST 2010] TRIED TO INSTALL BOOST LOCALLY ON NGSDEV>



[root@ngsdev syoung]# yum install boost boost-dev boost-doc

	Setting up Install Process
	Parsing package install arguments
	No package boost-dev available.
	Resolving Dependencies
	--> Running transaction check
	---> Package boost.x86_64 0:1.33.1-10.el5 set to be updated
	---> Package boost.i386 0:1.33.1-10.el5 set to be updated
	--> Processing Dependency: libicuuc.so.36 for package: boost
	--> Processing Dependency: libicui18n.so.36 for package: boost
	---> Package boost-doc.x86_64 0:1.33.1-10.el5 set to be updated
	--> Running transaction check
	---> Package libicu.i386 0:3.6-5.11.1 set to be updated
	--> Finished Dependency Resolution
	
	Dependencies Resolved
	
	=============================================================================
	 Package                 Arch       Version          Repository        Size 
	=============================================================================
	Installing:
	 boost-doc               x86_64     1.33.1-10.el5    base              938 k
	Installing for dependencies:
	 boost                   x86_64     1.33.1-10.el5    base              861 k
	 boost                   i386       1.33.1-10.el5    base              863 k
	 libicu                  i386       3.6-5.11.1       base              5.2 M
	
	Transaction Summary
	=============================================================================
	Install      4 Package(s)         
	Update       0 Package(s)         
	Remove       0 Package(s)         
	
	Total download size: 7.8 M
	Is this ok [y/N]: y
	Downloading Packages:
	(1/4): boost-doc-1.33.1-1 100% |=========================| 938 kB    00:00     
	(2/4): libicu-3.6-5.11.1. 100% |=========================| 5.2 MB    00:00     
	(3/4): boost-1.33.1-10.el 100% |=========================| 863 kB    00:00     
	(4/4): boost-1.33.1-10.el 100% |=========================| 861 kB    00:00     
	Running rpm_check_debug
	Running Transaction Test
	Finished Transaction Test
	Transaction Test Succeeded
	Running Transaction
	  Installing: boost                        ######################### [1/4] 
	  Installing: libicu                       ######################### [2/4] 
	  Installing: boost                        ######################### [3/4] 
	  Installing: boost-doc                    ######################### [4/4] 
	
	Installed: boost-doc.x86_64 0:1.33.1-10.el5
	Dependency Installed: boost.x86_64 0:1.33.1-10.el5 boost.i386 0:1.33.1-10.el5 libicu.i386 0:3.6-5.11.1
	Complete!




[root@ngsdev syoung]# yum install boost boost-devel


Setting up Install Process
Parsing package install arguments
Package boost - 1.33.1-10.el5.x86_64 is already installed.
Package boost - 1.33.1-10.el5.i386 is already installed.
Resolving Dependencies
--> Running transaction check
---> Package boost-devel.i386 0:1.33.1-10.el5 set to be updated
---> Package boost-devel.x86_64 0:1.33.1-10.el5 set to be updated
--> Finished Dependency Resolution

Dependencies Resolved

=============================================================================
 Package                 Arch       Version          Repository        Size 
=============================================================================
Installing:
 boost-devel             i386       1.33.1-10.el5    base              4.3 M
 boost-devel             x86_64     1.33.1-10.el5    base              4.4 M

Transaction Summary
=============================================================================
Install      2 Package(s)         
Update       0 Package(s)         
Remove       0 Package(s)         

Total download size: 8.7 M
Is this ok [y/N]: y
Downloading Packages:
(1/2): boost-devel-1.33.1 100% |=========================| 4.4 MB    00:00     
(2/2): boost-devel-1.33.1 100% |=========================| 4.3 MB    00:00     
Running rpm_check_debug
Running Transaction Test
Finished Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing: boost-devel                  ######################### [1/2] 
  Installing: boost-devel                  ######################### [2/2] 

Installed: boost-devel.i386 0:1.33.1-10.el5 boost-devel.x86_64 0:1.33.1-10.el5
Complete!
[root@ngsdev syoung]# ls /usr/local/lib
libpng12.a     libpng12.so.0.29.0  libpng.so.3       libtorque.so        libxerces-c.a
libpng12.la    libpng.a            libpng.so.3.29.0  libtorque.so.2      libxerces-c.la
libpng12.so    libpng.la           libtorque.a       libtorque.so.2.0.0  libxerces-c.so
libpng12.so.0  libpng.so           libtorque.la      libxerces-c-3.0.so  pkgconfig
[root@ngsdev syoung]# ls /usr/local/include
boost-1_39  libpng12  pbs_error.h  pbs_ifl.h  pngconf.h  png.h  rm.h  rpp.h  tm_.h  tm.h  xercescll




</entry>



<entry [Thu Feb  4 22:17:08 EST 2010] TRIED REINSTALLING boost USING -lboost_thread FLAG WITH bjam>



1. BACKED UP OLD COPY OF boost-1.38.0:

mv /nethome/syoung/base/apps/libs/boost/1.38.0 /nethome/syoung/base/apps/libs/boost/1.38.0-old3

cd /nethome/syoung/base/apps/libs/boost/downloads/boost_1_38_0
export PATH=/nethome/syoung/base/apps/libs/boost-jam:$PATH
	
2. INSTALLED BOOST TO /nethome/syoung/base/apps/libs/boost/1.38.0:

screen -S install-boost
export PATH=/nethome/syoung/base/apps/libs/boost-jam:$PATH
bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.38.0 --with-thread --toolset=gcc architecture=x86 address-model=64 link=static runtime-link=static stage install -lboost_thread

	common.copy /nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/spirit/core/composite/actions.hpp
	common.mkdir /nethome/syoung/base/apps/libs/boost/1.38.0/lib
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s-1_38.a for lack o
	f <pbin.v2/libs/thread/build/gcc-4.1.2/release/address-model-64/architecture-x86/link-static/runtime-link-static/threading-multi>libboost_thread-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s-1_38.a...
	...failed updating 3 targets...
	...skipped 6 targets...
	...updated 7220 targets...


3. INSTALLED CUFFLINKS

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0

./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.38.0


GET THIS ERROR:
	
	g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3 -DNDEBUG -pthread -I/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38 -L/nethome/syoung/base/apps/libs/boost/1.38.0/lib -o cufflinks cufflinks.o libcufflinks.a libgc.a  
	libcufflinks.a(assemble.o): In function `mutex':
	/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/thread/pthread/mutex.hpp:40: undefined reference to `boost::thread_resource_error::thread_resource_error()'











export PATH=/nethome/syoung/base/apps/libs/boost-jam:$PATH
bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.38.0 --with-thread --toolset=gcc architecture=x86 address-model=64 link=static runtime-link=static stage install

	...
	common.copy /nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/spirit/core/composite/actions.hpp
	common.mkdir /nethome/syoung/base/apps/libs/boost/1.38.0/lib
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s-1_38.a for lack o
	f <pbin.v2/libs/thread/build/gcc-4.1.2/release/address-model-64/architecture-x86/link-static/runtime-link-static/threading-multi>libboost_thread-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s-1_38.a...
	...failed updating 3 targets...
	...skipped 6 targets...
	...updated 7219 targets...


SO SKIPPED ONLY 6 TARGETS THIS TIME! COMPARED TO PREVIOUS 175 TARGETS:

	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1l-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1l-gcc41-mt-s-1_38.a...
	...failed updating 227 targets...
	...skipped 175 targets...
	...updated 7220 targets...



THEN INSTALLED cufflinks --with-boost OPTION AND --prefix OPTION:


cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0

./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.38.0

##--with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.38.0/lib


	
	checking for a BSD-compatible install... /usr/bin/install -c
	checking whether build environment is sane... yes
	checking for a thread-safe mkdir -p... /bin/mkdir -p
	checking for gawk... gawk
	checking whether make sets $(MAKE)... yes
	checking for gawk... (cached) gawk
	checking for g++... g++
	checking for C++ compiler default output file name... a.out
	checking whether the C++ compiler works... yes
	checking whether we are cross compiling... no
	checking for suffix of executables... 
	checking for suffix of object files... o
	checking whether we are using the GNU C++ compiler... yes
	checking whether g++ accepts -g... yes
	checking for style of include used by make... GNU
	checking dependency style of g++... gcc3
	checking for gcc... gcc
	checking whether we are using the GNU C compiler... yes
	checking whether gcc accepts -g... yes
	checking for gcc option to accept ISO C89... none needed
	checking dependency style of gcc... gcc3
	checking whether make sets $(MAKE)... (cached) yes
	checking for ranlib... ranlib
	checking for a BSD-compatible install... /usr/bin/install -c
	checking for boostlib >= 1.38.0... yes
	checking build system type... x86_64-unknown-linux-gnu
	checking whether the Boost::Thread library is available... yes
	checking how to run the C preprocessor... gcc -E
	checking for grep that handles long lines and -e... /bin/grep
	checking for egrep... /bin/grep -E
	checking for ANSI C header files... yes
	checking for sys/types.h... yes
	checking for sys/stat.h... yes
	checking for stdlib.h... yes
	checking for string.h... yes
	checking for memory.h... yes
	checking for strings.h... yes
	checking for inttypes.h... yes
	checking for stdint.h... yes
	checking for unistd.h... yes
	checking for stdlib.h... (cached) yes
	checking for string.h... (cached) yes
	checking for unistd.h... (cached) yes
	checking for stdbool.h that conforms to C99... yes
	checking for _Bool... yes
	checking for inline... inline
	checking for pid_t... yes
	checking for size_t... yes
	checking for ptrdiff_t... yes
	checking host system type... x86_64-unknown-linux-gnu
	checking if gcc accepts -m64... yes
	checking for struct sysinfo.totalram... yes
	checking whether sysctl is declared... yes
	checking whether CTL_HW is declared... no
	checking whether HW_PHYSMEM is declared... no
	checking how to create a ustar tar archive... gnutar
	checking dependency style of gcc... (cached) gcc3
	checking dependency style of g++... (cached) gcc3
	configure: creating ./config.status
	config.status: creating Makefile
	config.status: creating src/Makefile
	config.status: creating config.h
	config.status: config.h is unchanged
	config.status: executing depfiles commands
	
	-- cufflinks 0.7.0 Configuration Results --
	  C compiler:          gcc -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG 
	  C++ compiler:        g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38
	  GCC version:         gcc (GCC) 4.1.2 20070626 (Red Hat 4.1.2-14)
	  Host System type:    x86_64-unknown-linux-gnu
	  Install prefix:      /nethome/syoung/base/apps/cufflinks/0.7.0
	  Install eprefix:     ${prefix}
	
	  See config.h for further configuration information.
	  Email <cole@cs.umd.edu> with questions and bug reports.


make






cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0

make clean

./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/ --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.38.0/lib



















TRIED TO INSTALL BOOST LOCALLY USING YUM AND COPY OVER BUT YUM WOULD NOT WORK (SEE BELOW)

1. DOWNLOAD RPM

mkdir /boost
cd /boost
wget ftp://rpmfind.net/linux/fedora/releases/12/Everything/i386/os/Packages/boost-1.39.0-8.fc12.i686.rpm

wget ftp://rpmfind.net/linux/fedora/releases/12/Everything/i386/os/Packages/boost-date-time-1.39.0-8.fc12.i686.rpm

wget ftp://rpmfind.net/linux/fedora/releases/12/Everything/i386/os/Packages/boost-devel-1.39.0-8.fc12.i686.rpm


INSTALL WITH RPMS


yum localinstall   boost-date-time-1.39.0-8.fc12.i686.rpm --installroot=/boost

yum localinstall  boost-1.39.0-8.fc12.i686.rpm --installroot=/boost

yum localinstall  boost-1.39.0-8.fc12.i686.rpm boost-devel-1.39.0-8.fc12.i686.rpm --installroot=/boost



BASIC COMMAND


yum --installroot=/boost localinstall boost boost-devel boost-doc


yum localinstall -help
Loading "rhnplugin" plugin
Loading "security" plugin
Loading "installonlyn" plugin
usage: yum [options] < grouplist, localinstall, groupinfo, localupdate, resolvedep, erase, deplist, groupremove, makecache
, upgrade, provides, shell, install, whatprovides, groupinstall, update, groupupdate, info, search, check-update, list, remove, clean, grouperase >

options:
  -h, --help            show this help message and exit
  -t, --tolerant        be tolerant of errors
  -C                    run entirely from cache, don't update cache
  -c  [config file]     config file location
  -R  [minutes]         maximum command wait time
  -d  [debug level]     debugging output level
  -e  [error level]     error output level
  -y                    answer yes for all questions
  --version             show Yum version and exit
  --installroot=[path]  set install root
  --enablerepo=[repo]   enable one or more repositories (wildcards allowed)
  --disablerepo=[repo]  disable one or more repositories (wildcards allowed)
  -x [package], --exclude=[package]
                        exclude package(s) by name or glob
  --obsoletes           enable obsoletes processing during updates
  --noplugins           disable Yum plugins
  --security            Include security relevant packages
  --cve=CVE             Include packages needed to fix the given CVE
  --bz=BZ               Include packages needed to fix the given BZ
  --advisory=ADVISORY   Include packages needed to fix the given advisory
[syoung@u01 cufflinks-0.7.0]$ 



AVOID yum INSTALL ERROR (DUE TO DISPLACEMENT OF 5.2 PACKAGES TO VAULT):

[root@ngsdev cgi-bin]# yum --installroot=/boost localinstall boost boost-devel boost-doc
Setting up Local Package Process
rpmforge                  100% |=========================| 1.1 kB    00:00     
primary.xml.gz            100% |=========================| 3.6 MB    --:--     
rpmforge  : ################################################## 9865/9865
http://ftp.usf.edu/pub/centos/5.2/os/x86_64/repodata/repomd.xml: [Errno 14] HTTP Error 404: Not Found
Trying other mirror.
Error: Cannot retrieve repository metadata (repomd.xml) for repository: base. Please verify its path and try again
[root@ngsdev cgi-bin]# yum --installroot=/boost localinstall boost boost-devel boost-doc



BY SUBSTITUTING VAULT baseurl IN FILE:

/etc/yum.repos.d/CentOS-Base.repo

LINES:

#baseurl=http://ftp.usf.edu/pub/centos/5.2/os/x86_64
baseurl=http://ftp.usf.edu/pub/centos/5/os/x86_64

#####baseurl=http://ftp.usf.edu/pub/centos/5.2/os/x86_64
####baseurl=http://vault.centos.org/5.2/os/x86_64


BASED ON INFO HERE:
http://mirror.centos.org/centos/5.2/readme


This directory (and version of CentOS) is depreciated.  For normal users,
you should use /5/ and not /5.2/ in your path. Please see this FAQ
concerning the CentOS release scheme:

http://www.centos.org/modules/smartfaq/faq.php?faqid=34

If you know what you are doing, and absolutely want to remain at the 5.2
level, go to http://vault.centos.org/ for packages.




CAN'T DO THIS BECAUSE DON'T HAVE ROOT ON /nethome TO AVOID THIS ERROR AS ROOT USER:

ll /nethome/syoung/base/apps/libs/boost/1.38.0/var/lib/rpm
ls: /nethome/syoung/base/apps/libs/boost/1.38.0/var/lib/rpm: Permission denied
[root@ngsdev cgi-bin]# 

DO THIS AS syoung:

ll /nethome/syoung/base/apps/libs/boost/1.38.0/var/lib/rpm






REINSTALL BOOST USING ENVIRONMENT VARIABLE BOOST_ROOT 


BACKED UP OLD COPY OF boost-1.38.0:

mv /nethome/syoung/base/apps/libs/boost/1.38.0 /nethome/syoung/base/apps/libs/boost/1.38.0-old


MOVED TO UNPACKED BOOST SOURCE DIRECTORY (BOOST_ROOT in documentation) AND SET ENVIRONMENT VARIABLES:

cd /nethome/syoung/base/apps/libs/boost/downloads/boost_1_38_0
export PATH=/nethome/syoung/base/apps/libs/boost-jam:$PATH
BOOST_ROOT=/nethome/syoung/base/apps/libs/boost/downloads/boost_1_38_0
	

INSTALLED TO:

/nethome/syoung/base/apps/libs/boost/1.38.0

screen -S install-boost
bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.38.0 --toolset=gcc architecture=x86 address-model=64 link=static runtime-link=static stage install

	warning: Graph library does not contain optional GraphML reader.
	note: to enable GraphML support, set EXPAT_INCLUDE and EXPAT_LIBPATH to the
	note: directories containing the Expat headers and libraries, respectively.
	warning: skipping optional Message Passing Interface (MPI) library.
	note: to enable MPI support, add "using mpi ;" to user-config.jam.
	note: to suppress this message, pass "--without-mpi" to bjam.
	note: otherwise, you can safely ignore this message.
	Building Boost.Regex with the optional Unicode/ICU support disabled.
	Note: Please refer to the Boost.Regex documentation for more information
	Note: this is a strictly optional feature.
	...patience...
	...patience...
		
	...	
	
	common.copy /nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/thread/detail/singleton.hpp
	common.copy /nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/thread/detail/thread.hpp
	common.copy /nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/thread/detail/thread_heap_alloc.hpp
	common.copy /nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/thread/detail/tss_hooks.hpp
	common.copy /nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/thread/pthread/condition_variable.hpp
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_c99-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_c99-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_c99f-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_c99f-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_c99l-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_c99l-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_program_options-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_program_options-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_python-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_python-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_regex-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_regex-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_serialization-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_serialization-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_wserialization-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_wserialization-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_signals-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_signals-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_prg_exec_monitor-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_prg_exec_monitor-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_test_exec_monitor-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_test_exec_monitor-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_unit_test_framework-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_unit_test_framework-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_thread-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_wave-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_wave-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_date_time-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_date_time-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_system-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_system-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_filesystem-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_filesystem-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_graph-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_graph-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_iostreams-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_iostreams-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1f-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1f-gcc41-mt-s-1_38.a...
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1l-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1l-gcc41-mt-s-1_38.a...
	...failed updating 227 targets...
	...skipped 175 targets...
	...updated 7220 targets...




skipped libboost_thread-gcc41-mt-s.a for lack of libboost_thread-gcc41-mt-s-1_38.a

END OF PREVIOUS INSTALL OUTPUT:
	
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1l-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1l-gcc41-mt-s-1_38.a...
	...failed updating 227 targets...
	...skipped 175 targets...
	...updated 7364 targets...



</entry>



<entry [Thu Feb  4 02:04:31 EST 2010] TRIED TO FIX undefined reference to `boost::thread::~thread() COMPILE ERROR OF cufflinks>




cufflinks CONFIGURATION HELP:

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0

./configure --help

	Optional Packages:
	  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
	  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
	  --with-boost[=DIR]      use boost (default is yes) - it is possible to
							  specify the root directory for boost (optional)
	  --with-boost-libdir=LIB_DIR
							  Force given directory for boost libraries. Note that
							  this will overwrite library path detection, so use
							  this parameter only if default library detection
							  fails and you know exactly where your boost
							  libraries are located.
	  --with-boost-thread[=special-lib]
							  use the Thread library from boost - it is possible
							  to specify a certain library for the linker e.g.
							  --with-boost-thread=boost_thread-gcc-mt


/nethome/syoung/base/apps/libs/boost/1.38.0

INSTALL cufflinks USING --with-boost OPTION AND --prefix OPTION:

screen -S comp-cuff

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0

./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.38.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.38.0/lib


NOW GET THIS ERROR:

libcufflinks.a(assemble.o): In function `mutex':/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/thread/pthread/mutex.hpp:40: undefined reference to `boost::thread_resource_error::thread_resource_error()'


#SO USE --with-boost-thread AS WELL:
#
#FIRST LOCATE boost_thread FILE:
#
#cd /nethome/syoung/base/apps/libs/boost/1.38.0
#find . -name thread
#




cd /nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/thread
grep thread_resource_error *

	exceptions.hpp:    class thread_resource_error:
	exceptions.hpp:        thread_resource_error()
	exceptions.hpp:        thread_resource_error(int sys_err_code):
	exceptions.hpp:        ~thread_resource_error() throw()
	exceptions.hpp:            return "boost::thread_resource_error";


EDIT mutex.hpp TO INCLUDE exceptions.hpp:


//// HACK TO INCLUDE thread_resource_error
#include <boost/thread/exceptions.hpp>


BUT GOT THIS ERROR:

g++  -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38 -L/nethome/syoung/base/apps/libs/boost/1.38.0/lib   -o cufflinks cufflinks.o libcufflinks.a libgc.a  
libcufflinks.a(assemble.o): In function `mutex':/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/thread/pthread/mutex.hpp:40: undefined reference to `boost::thread_resource_error::thread_resource_error()'


DON'T WANT TO MESS WITH mutex.hpp SO INCLUDED LIBS IN g++ LINE:


TRIED WITH -pthread:

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0

g++  -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38 -L/nethome/syoung/base/apps/libs/boost/1.38.0/lib   -o cufflinks cufflinks.o libcufflinks.a libgc.a -pthread


./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.38.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.41.0/include/boost







./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.38.0 --with-boost-libdir=/nethome/syoung/base/apps/libs/boost/1.38.0/lib --with-boost-thread=boost_thread-gcc-mt




TEST COMPILED cufflinks:

cufflinks ./test_data.sam




/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38/boost/thread

/nethome/syoung/base/apps/libs/boost/1.38.0/include




-L/usr/local/boost_1_39_0/boost/stage/lib/libboost_thread-gcc43-mt-1_39.a



INCLUDE include AND lib IN COMPILATION:

-I/usr/local/include -L/usr/local/lib -lboost_thread -lpthread 



On Mon, Jan 01, 2007 at 06:57:23PM -0600, mailbox44_at_[hidden] wrote: 
> I think my problem is a simple linking problem. I have looked through the 
> archives and tried a few things to no avail. 
Try linking with -lboost_threads AND -lpthread 
I can force the same errors you get, and then fix it by doing this: 

> g++ test.cpp -I/usr/local/include -L/usr/local/lib -lboost_thread -lpthread 

Of course, the -I and -L are specific to my boost location. 
I bet this will do in your situation: 
> g++ test.cpp -lboost_thread -lpthread 
I had no problem on my Linxu box, but FreeBSD was complaining about the 
same issues and that fixed it for me with the code you sent. 
Good luck, 
Pete 






total 83G
-rw-r----- 1 syoung bioinfo 2.9G Jan 15 15:14 s_1_eland_extended.txt
-rw-r----- 1 syoung bioinfo 2.8G Jan 15 15:29 s_1_eland_multi.txt
-rw-r----- 1 syoung bioinfo 4.2G Jan 15 15:44 s_1_export.txt
-rw-r----- 1 syoung bioinfo 1.4G Jan 15 14:56 s_1_sequence.txt
-rw-r----- 1 syoung bioinfo 3.1G Jan 15 15:16 s_2_eland_extended.txt
-rw-r----- 1 syoung bioinfo 2.9G Jan 15 15:31 s_2_eland_multi.txt
-rw-r----- 1 syoung bioinfo 4.4G Jan 15 15:47 s_2_export.txt
-rw-r----- 1 syoung bioinfo 3.4G Jan 15 15:18 s_3_eland_extended.txt
-rw-r----- 1 syoung bioinfo 3.2G Jan 15 15:33 s_3_eland_multi.txt
-rw-r----- 1 syoung bioinfo 4.9G Jan 15 15:50 s_3_export.txt
-rw-r----- 1 syoung bioinfo 3.3G Jan 15 15:20 s_4_eland_extended.txt
-rw-r----- 1 syoung bioinfo 3.1G Jan 15 15:35 s_4_eland_multi.txt
-rw-r----- 1 syoung bioinfo 4.7G Jan 15 15:53 s_4_export.txt
-rw-r----- 1 syoung bioinfo 2.4G Jan 15 15:22 s_5_eland_extended.txt
-rw-r----- 1 syoung bioinfo 2.3G Jan 15 15:36 s_5_eland_multi.txt
-rw-r----- 1 syoung bioinfo 3.7G Jan 15 15:56 s_5_export.txt
-rw-r----- 1 syoung bioinfo 3.1G Jan 15 15:24 s_6_eland_extended.txt
-rw-r----- 1 syoung bioinfo 2.9G Jan 15 15:38 s_6_eland_multi.txt
-rw-r----- 1 syoung bioinfo 4.4G Jan 15 15:58 s_6_export.txt
-rw-r----- 1 syoung bioinfo 3.0G Jan 15 15:25 s_7_eland_extended.txt
-rw-r----- 1 syoung bioinfo 2.8G Jan 15 15:40 s_7_eland_multi.txt
-rw-r----- 1 syoung bioinfo 4.3G Jan 15 16:01 s_7_export.txt
-rw-r----- 1 syoung bioinfo 3.1G Jan 15 15:27 s_8_eland_extended.txt
-rw-r----- 1 syoung bioinfo 3.0G Jan 15 15:42 s_8_eland_multi.txt
-rw-r----- 1 syoung bioinfo 4.6G Jan 15 16:04 s_8_export.txt
[syoung@u01 run1]$ 




</entry>



<entry [Wed Feb  3 05:23:27 EST 2010] TRIED TO REINSTALL WITH version 1.38.0>




DOWNLOADED BOOST AND BOOST-JAM
http://sourceforge.net/projects/boost/files/boost/1.38.0/

EXTRACTED bjam AND ADDED TO PATH:

export PATH=/nethome/syoung/base/apps/libs/boost-jam:$PATH


MOVED TO UNPACKED BOOST SOURCE DIRECTORY (BOOST_ROOT in documentation):

cd /nethome/syoung/base/apps/libs/boost/downloads/boost_1_38_0
	

INSTALLED TO /nethome/syoung/base/apps/libs/boost/1.38.0:


screen -S install-boost
export PATH=/nethome/syoung/base/apps/libs/boost-jam:$PATH
bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.38.0 --toolset=gcc architecture=x86 address-model=64 link=static runtime-link=static stage install

	
	...skipped <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1l-gcc41-mt-s.a for lack of <p/nethome/syoung/base/apps/libs/boost/1.38.0/lib>libboost_math_tr1l-gcc41-mt-s-1_38.a...
	...failed updating 227 targets...
	...skipped 175 targets...
	...updated 7364 targets...



INSTALLED cufflinks USING --with-boost OPTION AND --prefix OPTION:

screen -S comp-cuff

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0


./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.38.0


	configure: creating ./config.status
	config.status: creating Makefile
	config.status: creating src/Makefile
	config.status: creating config.h
	config.status: config.h is unchanged
	config.status: executing depfiles commands
	
	-- cufflinks 0.7.0 Configuration Results --
	  C compiler:          gcc -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG 
	  C++ compiler:        g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.38.0/include/boost-1_38
	  GCC version:         gcc (GCC) 4.1.2 20070626 (Red Hat 4.1.2-14)
	  Host System type:    x86_64-unknown-linux-gnu
	  Install prefix:      /nethome/syoung/base/apps/cufflinks/0.7.0
	  Install eprefix:     ${prefix}
	
	  See config.h for further configuration information.
	  Email <cole@cs.umd.edu> with questions and bug reports.
	
	[syoung@u01 cufflinks-0.7.0]$ 


SAME ERROR. SO LINK thread* LIBRARY SOMEHOW?:

-L/usr/local/boost_1_39_0/boost/stage/lib/libboost_thread-gcc43-mt-1_39.a



</entry>



<entry [Fri Jan 15 05:51:06 EST 2010] DOWNLOADED CUFFLINKS AND BOOST C++ LIBRARY>



BOOST C++ LIBRARY

http://cufflinks.cbcb.umd.edu/tutorial.html#boost

DOWNLOADED BOOST AND BOOST-JAM
http://sourceforge.net/projects/boost/files/boost/1.41.0/

EXTRACTED bjam AND ADDED TO PATH:

export PATH=/nethome/syoung/base/apps/libs/boost-jam:$PATH


MOVED TO UNPACKED BOOST SOURCE DIRECTORY (BOOST_ROOT in documentation):

cd /nethome/syoung/base/apps/libs/boost/downloads/boost_1_41_0
	

INSTALLED TO /nethome/syoung/base/apps/libs/boost/1.41.0:


screen -S install-boost
export PATH=/nethome/syoung/base/apps/libs/boost-jam:$PATH
bjam --prefix=/nethome/syoung/base/apps/libs/boost/1.41.0 --toolset=gcc architecture=x86 address-model=64 link=static runtime-link=static stage install

		...
		common.copy /nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/tr1/tr1/valarray
		common.copy /nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/tr1/tr1/vector
		...failed updating 147 targets...
		...skipped 214 targets...
		...updated 7790 targets...


*** NB: IT SHOULD BE 'address-model' NOT address_model AS IT SAYS IN THE DOCUMENTATION ***



INSTALLED cufflinks TO HERE:

/nethome/syoung/base/apps/cufflinks/0.7.0

USE boost1.38.0!!!!

FAILED WITH THIS ERROR:


g++ -DHAVE_CONFIG_H -I. -I..  -I../src    -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.41.0/include -MT cufflinks.o -MD -MP -MF .deps/cufflinks.Tpo -c -o cufflinks.o cufflinks.cpp
mv -f .deps/cufflinks.Tpo .deps/cufflinks.Po
g++  -Wall -Wno-strict-aliasing -g -gdwarf-2 -m64 -O3  -DNDEBUG  -pthread -I/nethome/syoung/base/apps/libs/boost/1.41.0/include -L/nethome/syoung/base/apps/libs/boost/1.41.0/lib   -o cufflinks cufflinks.o libcufflinks.a libgc.a
libcufflinks.a(assemble.o): In function `sleep<boost::posix_time::milliseconds>':
/nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/thread/pthread/thread_data.hpp:122: undefined reference to `boost::this_thread::sleep(boost::posix_time::ptime const&)'
libcufflinks.a(assemble.o): In function `thread_data_base':
/nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/thread/pthread/thread_data.hpp:65: undefined reference to `vtable for boost::detail::thread_data_base'
libcufflinks.a(assemble.o): In function `thread<void (*)(const RefSequenceTable&, HitBundle*, long double, FILE*, FILE*, FILE*), boost::reference_wrapper<const RefSequenceTable>, HitBundle*, long double, FILE*, FILE*, FILE*>':
/nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/thread/detail/thread.hpp:273: undefined reference to `boost::thread::start_thread()'
libcufflinks.a(assemble.o): In function `assemble_hits(BundleFactory&)':
/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src/assemble.cpp:2962: undefined reference to `boost::thread::~thread()'
libcufflinks.a(assemble.o): In function `sleep<boost::posix_time::milliseconds>':
/nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/thread/pthread/thread_data.hpp:122: undefined reference to `boost::this_thread::sleep(boost::posix_time::ptime const&)'
libcufflinks.a(assemble.o): In function `at_thread_exit<void (*)()>':
/nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/thread/detail/thread.hpp:476: undefined reference to `boost::detail::add_thread_exit_function(boost::detail::thread_exit_function_base*)'
libcufflinks.a(assemble.o): In function `~thread_data':
/nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/thread/detail/thread.hpp:40: undefined reference to `boost::detail::thread_data_base::~thread_data_base()'
/nethome/syoung/base/apps/libs/boost/1.41.0/include/boost/thread/detail/thread.hpp:40: undefined reference to `boost::detail::thread_data_base::~thread_data_base()'
libcufflinks.a(assemble.o):(.rodata._ZTIN5boost6detail11thread_dataINS_3_bi6bind_tIvPFvRK16RefSequenceTableP9HitBundleeP8_IO_FILESA_SA_ENS2_5list6INS_17reference_wrapperIS5_EENS2_5valueIS8_EENSG_IeEENSG_ISA_EESJ_SJ_EEEEEE[typeinfo for boost::detail::thread_data<boost::_bi::bind_t<void, void (*)(RefSequenceTable const&, HitBundle*, long double, _IO_FILE*, _IO_FILE*, _IO_FILE*), boost::_bi::list6<boost::reference_wrapper<RefSequenceTable const>, boost::_bi::value<HitBundle*>, boost::_bi::value<long double>, boost::_bi::value<_IO_FILE*>, boost::_bi::value<_IO_FILE*>, boost::_bi::value<_IO_FILE*> > > >]+0x10): undefined reference to `typeinfo for boost::detail::thread_data_base'
collect2: ld returned 1 exit status
make[2]: *** [cufflinks] Error 1
make[2]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0'
make: *** [all] Error 2
[syoung@u01 cufflinks-0.7.0]$ 





INSTALLED cufflinks USING --with-boost OPTION AND --prefix OPTION:

screen -S comp-cuff

cd /nethome/syoung/base/apps/cufflinks/downloads/cufflinks-0.7.0

./configure --prefix=/nethome/syoung/base/apps/cufflinks/0.7.0 --with-boost=/nethome/syoung/base/apps/libs/boost/1.41.0


      If you see any errors during configuration, verify that you are using Boost version 1.38 or higher, and that the directory you specified via --with-boost contains the boost header files and libraries. See the Boost Getting started page for more details.
   4. Finally, make and install Cufflinks.

          make

          make install


Testing the installation

   1. Download the test data
   2. In the directory where you placed the test file, type:

          cufflinks ./test_data.sam


      You should see the following output:

      Counting hits in map
      	Total map density: 13725.000000
      Processing bundle [ test_chromosome:52-550 ] with 99 non-redundant alignments
      				

   3. Verify that the file transcripts.gtf is in the current directory and looks like this (your file will have GTF attributes, omitted here for clarity)

      test_chromosome Cufflinks       exon    53      250     1000    +       . 
      test_chromosome Cufflinks       exon    351     400     1000    +       . 
      test_chromosome Cufflinks       exon    501     550     1000    +       .
      		
			
			


Installing Boost

   1. Download Boost and the bjam build engine.
   2. Unpack bjam and add it to your PATH.
   3. Unpack the Boost tarball and cd to the Boost source directory. This directory is called the BOOST_ROOT in some Boost installation instructions.
   4. Build Boost. Note that you can specify where to put Boost with the --prefix option. The default Boost installation directory is /usr/local. Take note of the boost installation directory, because you will need to tell the Cufflinks installer where to find Boost later on.

      If you are on Mac OS X, type (all on one line):

          bjam --prefix=<YOUR_BOOST_INSTALL_DIRECTORY> --toolset=darwin architecture=x86 address_model=32_64 link=static runtime-link=static --layout=versioned stage install

      If you are on a 32-bit Linux system, type (all on one line):

          bjam --prefix=<YOUR_BOOST_INSTALL_DIRECTORY> --toolset=gcc architecture=x86 address_model=32 link=static runtime-link=static stage install

      If you are on a 64-bit Linux system, type (all on one line):

          bjam --prefix=<YOUR_BOOST_INSTALL_DIRECTORY> --toolset=gcc architecture=x86 address_model=64 link=static runtime-link=static stage install


Building Cufflinks

   1. Unpack the Cufflinks source tarball:

          tar zxvf cufflinks-0.7.0.tar.gz


   2. Change to the Cufflinks directory:

          cd cufflinks-0.7.0


   3. Configure Cufflinks. If Boost is installed somewhere other than /usr/local, you will need to tell the installer where to find it using the --with-boost option. Specify where to install Cufflinks using the --prefix option.

          ./configure --prefix=/path/to/cufflinks/install --with-boost=/path/to/boost
print "print "\n";\n";
      If you see any errors during configuration, verify that you are using Boost version 1.38 or higher, and that the directory you specified via --with-boost contains the boost header files and libraries. See the Boost Getting started page for more details.
   4. Finally, make and install Cufflinks.

          make

          make install


Testing the installation

   1. Download the test data
   2. In the directory where you placed the test file, type:

          cufflinks ./test_data.sam


      You should see the following output:

      Counting hits in map
      	Total map density: 13725.000000
      Processing bundle [ test_chromosome:52-550 ] with 99 non-redundant alignments
      				

   3. Verify that the file transcripts.gtf is in the current directory and looks like this (your file will have GTF attributes, omitted here for clarity)

      test_chromosome Cufflinks       exon    53      250     1000    +       . 
      test_chromosome Cufflinks       exon    351     400     1000    +       . 
      test_chromosome Cufflinks       exon    501     550     1000    +       .
      					
      				





cufflinks

/nethome/syoung/base/apps/cufflinks/0.7.0

-rw-r--r-- 1 syoung bioinfo     443 Jan 15 05:50 AUTHORS
-rw-r--r-- 1 syoung bioinfo    1624 Jan 15 05:50 COPYING
-rwxr-xr-x 1 syoung bioinfo  925217 Jan 15 05:50 cuffcompare
-rwxr-xr-x 1 syoung bioinfo 7739828 Jan 15 05:50 cufflinks
-rw-r--r-- 1 syoung bioinfo    3529 Jan 15 05:50 README



[syoung@u01 0.7.0]$ ./cufflinks 
Usage:   cufflinks <hits.sam>
Options:

-m/--inner-dist-mean         the average inner distance between mates              [ default:     45 ]
-s/--inner-dist-std-dev      the inner distance standard deviation                 [ default:     20 ]
-c/--collapse-rounds         rounds of pre-assembly alignment collapse             [ default:      1 ]
-F/--min-isoform-fraction    suppress transcripts below this abundance level       [ default:   0.05 ]
-j/--pre-mrna-fraction       suppress intra-intronic transcripts below this level  [ default:   0.05 ]
-I/--max-intron-length       ignore alignments with gaps longer than this          [ default: 300000 ]
-Q/--min-map-qual            ignore alignments with lower than this mapping qual   [ default:      0 ]
-L/--label                   all transcripts have this prefix in their IDs         [ default:   CUFF ]
-G/--GTF                     quantitate against reference transcript annotations                      
-p/--num-threads             number of threads used during assembly                [ default:      1 ]



Usage:
cuffcompare [-r <reference_mrna.gtf>][-R][-V][-s <seq_path>][-o <stats.txt>] 
    <input1.gtf> [<input2.gtf> <input3.gtf> ... <inputN.gtf>]

 Provides various statistics for GTF mRNA data.
 Tracks expression changes of loci across multiple input files, writing
 matching transcripts (intron chains) into <stats>.tracking.
 A file <input>.tmap is created for each input file, showing
 how its transcripts overlap reference transcripts, while the file 
 <input>.refmap shows the matching and contained transcripts for each
 reference transcript.

Options:
-o  write the stats into given file name <stats.txt> (instead of stdout)

-r  a set of known mRNAs to use as a reference for assessing 
    the accuracy of mRNAs or gene models given in <input.gtf>

-R  for -r option, reduce the set of reference transcripts to 
    only those found to overlap any of the input loci

-s  look into <seq_dir> for fasta files with the 
    underlying genomic sequences (one file per contig) and use
    lower case bases to classify input transcripts as repeats

-V  (mildly) verbose processing mode


README:


CUFFLINKS
----------------------------
Cufflinks is a reference-guided assembler for RNA-Seq experiments. It
simultaneously assembles transcripts from reads and estimates their relative
abundances, without using a reference annotation.  The software expects as 
input RNA-Seq read alignments in SAM format (http://samtools.sourceforge.net).

Here's an example spliced read alignment record:
s6.25mer.txt-913508     16      chr1    4482736 255     14M431N11M      *       0       0       CAAGATGCTAGGCAAGTCTTGGAAG       IIIIIIIIIIIIIIIIIIIIIIIII       NM:i:0  XS:A:-

This record includes a custom tag used by Cufflinks to determine the strand 
of the mRNA from which this read originated.  Often, RNA-Seq experiments lose
strand information, and so reads will map to either strand of the genome.  
However, strandedness of spliced alignments can often be inferred from the 
orientation of consensus splice sites, and Cufflinks requires that spliced 
aligments have the custom strand tag XS, which has SAM attribute type "A", and
can take values of "+" or "-".  If your RNA-Seq protocol is strand specific,
including this tag for all alignments, including unspliced alignments, will 
improve the assembly quality.

The SAM records MUST BE SORTED by reference coordinate, like so:

sort -k 3,3 -k 4,4n hits.sam 

The program is fully threaded, and when running with multiple threads, should
be run on a machine with plenty of RAM. 4 GB per thread is probably reasonable
for most experiments.  Since many experiments feature a handful of genes that
are very abundantly transcribed, Cufflinks will spend much of its time 
assembling" a few genes.  When using more than one thread, Cufflinks may 
appear to "hang" while these genes are being assembled.

Cufflinks assumes that library fragment lengths are size selected and normally
distributed. When using paired end RNA-Seq reads, you must take care to supply
Cufflinks with the mean and variance on the inner distances between mate 
pairs. For the moment, Cufflinks doesn't support assembling mixtures of paired
end reads from different fragment size distributions.  Mixtures of single 
ended reads (of varying lengths) with paired ends are supported.

Cufflinks also assumes that the donor does not contain major structural 
variations with respect to the reference.  Tumor genomes are often highly 
rearranged, and while Cufflinks may eventually identify gene fusions and 
gracefully handle genome breakpoints, users are encouraged to be careful when
using Cufflinks on tumor RNA-Seq experiments. 

The full manual may be found at http://cufflinks.cbcb.umd.edu

CUFFCOMPARE
----------------------------
Please see http://cufflinks.cbcb.umd.edu/manual.html

REQUIREMENTS
---------------------------

Cufflinks is a standalone tool that requires gcc 4.0 or greater, and runs on
Linux and OS X.  It depends on Boost (http://www.boost.org) version 1.38 or 
higher.

REFERENCES
---------------------------
Cufflinks uses some ideas originally proposed by others, particularly in:

Ali Mortazavi, Brian A Williams, Kenneth McCue, Lorian Schaeffer and Barbara 
Wold, "Mapping and quantifying mammalian transcriptomes by RNA-Seq",Nature 
Methods, volume 5, 621 - 628 (2008)

Hui Jiang and Wing Hung Wong, "Statistical Inferences for isoform expression", 
Bioinformatics, 2009 25(8):1026-1032

Nicholas Eriksson, Lior Pachter, Yumi Mitsuya, Soo-Yon Rhee, Chunlin Wang, 
Baback Gharizadeh, Mostafa Ronaghi, Robert W. Shafer, Niko Beerenwinkel, "Viral 
population estimation using pyrosequencing", PLoS Computational Biology, 
4(5):e1000074







Cufflinks ONLINE MANUAL

http://cufflinks.cbcb.umd.edu/manual.html


Transcript assembly and abundance estimation for RNA-Seq
	
  
Please Note If you have questions about how to use Cufflinks or would like more information about the software, please email Cole Trapnell. 	
Site Map

    * Home
    * Getting started
    * Manual

Releases

      version 0.7.0 (BETA) 	9/26/2009
         Source code
         Linux x86_64 binary
         Mac OS X x86_64 binary

Related Tools

    * TopHat: Alignment of short RNA-Seq reads
    * Bowtie: Ultrafast short read alignment

Publications

    * (Cufflinks manuscript coming soon)
    *

      Trapnell C, Pachter L, Salzberg SL. TopHat: discovering splice junctions with RNA-Seq. Bioinformatics doi:10.1093/bioinformatics/btp120

    *

      Langmead B, Trapnell C, Pop M, Salzberg SL. Ultrafast and memory-efficient alignment of short DNA sequences to the human genome. Genome Biology 10:R25. 

Contributors

    * Cole Trapnell
    * Geo Pertea
    * Brian Williams
    * Ali Mortazavi
    * Jeltje van Baren
    * Steven Salzberg
    * Barbara Wold
    * Lior Pachter

Links

    * Berkeley LMCB
    * UMD CBCB
    * Wold Lab

Manual

    * What is Cufflinks?
          o How does Cufflinks assemble transcripts?
          o How does Cufflinks calculate transcript abundances?
    * Prerequisites
    * Running Cufflinks
          o Input Format
          o Output Format
    * Running Cuffcompare
          o Input Format
          o Output Format


What is Cufflinks?

Cufflinks is a program that assembles aligned RNA-Seq reads into transcripts and then estimates their abundances. Cufflinks runs on Linux and OS X.

How does Cufflinks assemble transcripts?

Cufflinks constructs a parsimonious set of transcripts that "explain" the reads observed in an RNA-Seq experiment. It does so by reducing the comparative assembly problem to a problem in maximum matching in bipartite graphs. In essence, Cufflinks implements a constructive proof of Dilworth's Theorem by constructing a covering relation on the read alignments, and finding a minimum path cover on the directed acyclic graph for the relation.

While Cufflinks works well with unpaired RNA-Seq reads, it is designed with paired reads in mind. The assembly algorithm explicitly handles paired end reads by treating the alignment for a given pair as a single object in the covering relation. The proof of Dilworth's theorem finds a maximum cardinality matching on the bipartite graph of the transitive closure of the DAG, but there is not necessarily a unique maximum cardinality matching, reflecting the fact that due to the limited size of RNA-Seq cDNA fragments, we may not know with certainty which outcomes of alternative splicing events go together in the same transcripts. Cufflinks tries to find the correct parsimonious set of transcripts by performing a minimum cost maximum matching. This matching is then extended to a minimum cost path cover of the DAG, with each path representing a different transcript.

The algorithm is in many ways a generalization of the ShoRAH algorithm for haplotype abundance estimation in viral populations, described in:

    * Nicholas Eriksson, Lior Pachter, Yumi Mitsuya, Soo-Yon Rhee, Chunlin Wang, Baback Gharizadeh, Mostafa Ronaghi, Robert W. Shafer, Niko Beerenwinkel Viral population estimation using pyrosequencing, PLoS Computational Biology, 4(5):e1000074 


Cufflinks is implemented in C++ and makes substantial use of the Boost Libraries as well as the LEMON Graph Library, which was launched by the Egerváry Research Group on Combinatorial Optimization (EGRES).

How does Cufflinks calculate transcript abundances?

RNA-Seq read counts can be used as a measure of relative abundance of transcripts, and Cufflinks measures transcript abundances in RPKM, originally proposed in:

    * Ali Mortazavi, Brian A Williams, Kenneth McCue, Lorian Schaeffer and Barbara Wold Mapping and quantifying mammalian transcriptomes by RNA-Seq Nature Methods, volume 5, 621 - 628 (2008) 


To estimate isoform-level abundances, one must assign reads to individual transcripts, which may be difficult because a read may align to multiple isoforms of the same gene. Cufflinks models the sequencing process by asking what the probability is of observing each read, given a set of transcripts and a set of abundances. The program then multiplies these probabilities to compute the overall likelihood that one would observe the reads in the experiment, given the proposed abundances on the transcripts. Because Cufflinks' statistical model is linear, the likelihood function has a unique maximum value, and Cufflinks finds it with a numerical optimization algorithm.

When some isoforms have much lower abundance than another from the same gene, or when the number of reads for the locus is very small, this numerical procedure is less accurate. To place confidences on the reported abundances, we have adapted the bayesian inference procedure developed by Hui Jiang and Wing Wong in:

    * Hui Jiang and Wing Hung Wong, Statistical Inferences for isoform expression, Bioinformatics, 2009 25(8):1026-1032 


Using these statistical methods, Cufflinks can estimate the abundances of the isoforms present in the sample, either using a known "reference" annotation, or after comparatively assembling the transcripts against the genome from scratch.

Prerequisites

Cufflinks runs on intel-based computers running Linux or Mac OS X and that have GCC 4.0 or greater installed. You can install pre-compiled binaries or build Cufflinks from the source code. If you wish to build Cufflinks yourself, you will need to install the Boost C++ libraries. See Installing Boost, on the getting started page.

Running Cufflinks

The following is a detailed description of the options used to control Cufflinks:

    Usage: cufflinks [options]* <aligned_reads.sam> 

Arguments: 	
<aligned_reads.sam> 	A file of RNA-Seq read alignments in the SAM format. SAM is a standard short read alignment, that allows aligners to attach custom tags to individual alignments, and Cufflinks requires that the alignments you supply have some of these tags. Please see Input formats for more details.
Options: 	
-h/--help 	Prints the help message and exits
-m/--inner-dist-mean <int> 	This is the expected (mean) inner distance between mate pairs. For, example, for paired end runs with fragments selected at 300bp, where each end is 50bp, you should set -r to be 200. The default is 45bp.
-s/--inner-dist-std-dev <int> 	The standard deviation for the distribution on inner distances between mate pairs. The default is 20bp.
-I/--max-intron-length <int> 	The minimum intron length. Cufflinks will not report transcripts with introns longer than this, and will ignore SAM alignments with REF_SKIP CIGAR operations longer than this. The default is 300,000.
-F/--min-isoform-fraction <0.0-1.0> 	After calculating isoform abundance for a gene, Cufflinks filters out transcripts that it believes are very low abundance, because isoforms expressed at extremely low levels often cannot reliably be assembled, and may even be artifacts of incompletely spliced precursors of processed transcripts. This parameter is also used to filter out introns that have far fewer spliced alignments supporting them. The default is 0.05, or 5% of the most abundant isoform (the major isoform) of the gene.
-j/--pre-mrna-fraction <0.0-1.0> 	Some RNA-Seq protocols produce a significant amount of reads that originate from incompletely spliced transcripts, and these reads can confound the assembly of fully spliced mRNAs. Cufflinks uses this parameter to filter out alignments that lie within the intronic intervals implied by the spliced alignments. The minimum depth of coverage in the intronic region covered by the alignment is divided by the number of spliced reads, and if the result is lower than this parameter value, the intronic alignments are ignored. The default is 5%.
-p/--num-threads <int> 	Use this many threads to align reads. The default is 1.
-Q/--min-mapqual <int> 	Instructs Cufflinks to ignore alignments with a SAM mapping quality lower than this number. The default is 0.
-L/--label 	Cufflinks will report transfrags in GTF format, with a prefix given by this option. The default prefix is "CUFF".
-G/--GTF 	Tells Cufflinks to use the supplied reference annotation to estimate isoform expression. It will not assemble novel transcripts, and the program will ignore alignments not structurally compatible with any reference transcript.

Cufflinks Input

Cufflinks takes a text file of SAM alignments as input. For more details on the SAM format, see the specification. The RNA-Seq read mapper TopHat produces output in this format, though you are not required to use TopHat to align your reads. Here's an example of an alignment Cufflinks will accept:

s6.25mer.txt-913508	16	chr1 4482736 255 14M431N11M * 0 0 \
   CAAGATGCTAGGCAAGTCTTGGAAG IIIIIIIIIIIIIIIIIIIIIIIII NM:i:0 XS:A:-
	

Note the use of the custom tag XS. This attribute, which must have a value of "+" or "-", indicates which strand the RNA that produced this read came from. While this tag can be applied to any alignment, including unspliced ones, it must be present for all spliced alignment records (those with a 'N' operation in the CIGAR string).

The SAM file supplied to Cufflinks must be sorted by reference position. If you aligned your reads with TopHat, your alignments will be properly sorted already. If you used another tool, you may want to make sure they are properly sorted as follows:

    sort -k 3,3 -k 4,4n hits.sam > hits.sam.sorted

NOTE: Cufflinks currently only supports SAM alignments with the CIGAR match ('M') and reference skip ('N') operations. Support for the other operations, such as insertions, deletions, and clipping, will be added in the future.

Cufflinks Output

Cufflinks produces three output files:

      1) transcripts.gtf

      This GTF file contains Cufflinks' assembled isoforms. The first 7 columns are standard GTF, and the last column contains attributes, some of which are also standardized ("gene_id", and "transcript_id"). There one GTF record per row, and each record represents either a transcript or an exon within a transcript. The columns are defined as follows:
      Column number	Column name	Example	Description
      1	seqname	chrX	Chromosome or contig name
      2	source	Cufflinks	The name of the program that generated this file (always 'Cufflinks')
      3	feature	exon	The type of record (always either "transcript" or "exon".
      4	start	77696957	The leftmost coordinate of this record (where 0 is the leftmost possible coordinate)
      5	end	77712009	The rightmost coordinate of this record, inclusive.
      6	score	77712009	The most abundant isoform for each gene is assigned a score of 1000. Minor isoforms are scored by the ratio (minor RPKM/major RPKM)
      7	strand	+	Cufflinks' guess for which strand the isoform came from. Always one of "+", "-", "."
      7	frame	.	Cufflinks does not predict where the start and stop codons (if any) are located within each transcript, so this field is not used.
      8	attributes	...	See below.
      Each GTF record is decorated with the following attributes:
      Attribute	Example	Description
      gene_id	CUFF.1	Cufflinks gene id
      transcript_id	CUFF.1.1	Cufflinks transcript id
      RPKM	101.267	Isoform-level relative abundance in Reads Per Kilobase of exon model per Million mapped reads
      frac	0.7647	Reserved. Please ignore, as this attribute may be deprecated in the future
      conf_lo	0.07	Lower bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, lower bound = RPKM * (1.0 - conf_lo)
      conf_hi	0.1102	Upper bound of the 95% confidence interval of the abundance of this isoform, as a fraction of the isoform abundance. That is, upper bound = RPKM * (1.0 + conf_lo)
      cov	100.765	Estimate for the absolute depth of read coverage across the whole transcript

      2) transcripts.expr

      This file is simply a tab delimited file containing one row per transcript and with columns containing the attributes above. There are a few additional attributes not in the table above, but these are reserved for debugging, and may change or disappear in the future.

      3) genes.expr

      This file contains gene-level coordinates and expression values.

Running Cuffcompare

Cufflinks includes a program that you can use to help analyze the transfrags you assemble. The program cuffcompare helps you:

    * Compare your assembled transcripts to a reference annotation
    * Track Cufflinks transcripts across multiple experiments (e.g. across a time course)


Cuffcompare Input

Cuffcompare takes Cufflinks' GTF output as input, and optionally can take a "reference" annotation (such as from Ensembl)

    Usage: cuffcompare [options]* <cuff1.gtf> [cuff2.gtf] ... [cuffN.gtf] 

Arguments: 	
<cuff1.gtf> 	A GTF file produced by cufflinks.
Options: 	
-h/--help 	Prints the help message and exits
-o <filename> 	Write the summary stats into given file name (instead of stdout)
-r 	An optional "reference" annotation GTF. Each sample is matched against this file, and sample isoforms are tagged as overlapping, matching, or novel where appropriate. See the refmap and tmap output file descriptions below.
-R 	If -r was specified, this option causes cuffcompare to ignore reference transcripts that are not overlapped by any transcript in one of cuff1.gtf,...,cuffN.gtf. Useful for ignoring annotated transcripts that are not present in your RNA-Seq samples.
-s <seq_dir> 	Causes cuffcompare to look into for fasta files with the underlying genomic sequences (one file per contig) against which your reads were aligned for some optional classification functions. For example, Cufflinks transcripts consisting mostly of lower-case bases are classified as repeats. Note that <seq_dir> must contain one fasta file per reference chromosome, and each file must be named after the chromosome, and have a .fa or .fasta extension.
-V 	(Mildly) more verbose processing mode

Cuffcompare Output

Cuffcompare produces three output files:

      1) <cuff_in>.refmap

      This tab delimited file lists, for each reference transcript, which cufflinks transcripts either fully or partially match it. There is one row per reference transcript, and the columns are as follows:
      Column number	Column name	Example	Description
      1	Reference gene id	Myog	The gene_id attribute of the reference GTF record for this transcript
      2	Reference transcript id	uc007crl.1	The transcript_id attribute of the reference GTF record for this transcript
      3	Class code	c	The type of match between the Cufflinks transcripts in column 4 and the reference transcript. One of either 'c' for partial match, or '=' for full match.
      4	Cufflinks matches	CUFF.23567.0,CUFF.24689.0	A comma separated list of Cufflinks transcript ids matching the reference transcript
      2) <cuff_in>.tmap

      This tab delimited file lists the most closely matching reference transcript for each Cufflinks transcript. There is one row per Cufflinks transcript, and the columns are as follows:
      Column number 	Column name 	Example 	Description
      1 	Reference gene id 	Myog 	The gene_id attribute of the reference GTF record for this transcript
      2 	Reference transcript id 	uc007crl.1 	The transcript_id attribute of the reference GTF record for this transcript
      3 	Class code 	c 	The type of match between the Cufflinks transcripts in column 4 and the reference transcript. One of either 'c' for partial match, or '=' for full match.
      4 	Cufflinks gene id 	CUFF.23567 	The Cufflinks internal gene id
      5 	Cufflinks transcript id 	CUFF.23567.0 	The Cufflinks internal transcript id
      6 	Fraction of major isoform (FMI) 	100 	The expression of this transcript expressed as a fraction of the major isoform for the gene. Ranges from 1 to 100.
      7 	RPKM 	1.4567 	The expression of this transcript expressed in RPKM
      8 	Coverage 	3.2687 	The estimated average depth of read coverage across the transcript.
      9 	Length 	1426 	The length of the transcript
      9 	Major isoform ID 	CUFF.23567.0 	The Cufflinks ID of the gene's major isoform
      3) <out_prefix>.tracking

      This file matches transcripts up between samples. Each row contains a transcript structure that is present in one or more input GTF files. Because the transcripts will generally have different IDs (unless you assembled your RNA-Seq reads against a reference transcriptome), cuffcompare examines the structure of each the transcripts, matching transcripts that agree on the coordinates and order of all of their introns, as well as strand. Matching transcripts are allowed to differ on the length of the first and last exons, since these lengths will naturally vary from sample to sample due to the random nature of sequencing.

      If you ran cuffcompare with the -r option, the first and second columns contain the closest matching reference transcript to the one described by each row.

      Here's an example of a line from the tracking file:

      Tcea uc007afj.1	j	q1:exp.115|exp.115.0|100|3.061355|0.350242|0.350207 \
           q2:60hr.292|60hr.292.0|100|4.094084|0.000000|0.000000
      		

      In this example, a transcript present in the two input files, called exp.115.0 in the first and 60hr.292.0 in the second, doesn't match any reference transcript exactly, but shares exons with uc007afj.1, an isoform of the gene Tcea, as indicated by the class code j. The first three columns are as follows:
      Column number 	Column name 	Example 	Description
      1 	Reference gene id 	Tcea 	The gene_id attribute of the reference GTF record for this transcript, or '-' if no reference transcript overlaps this Cufflinks transcript
      2 	Reference transcript id 	uc007afj.1 	The transcript_id attribute of the reference GTF record for this transcript, or '-' if no reference transcript overlaps this Cufflinks transcript
      3 	Class code 	c 	The type of match between the Cufflinks transcripts in column 4 and the reference transcript. See class codes
      Each of the columns after the third have the following format:

          qJ:<gene_id>|<transcript_id>|<FMI>|<RPKM>|<conf_lo>|<conf_hi>


      A transcript need be present in all samples to be reported in the tracking file. A sample not containing a transcript will have a "-" in its entry in the row for that transcript.

      Class Codes

      If you ran cuffcompare with the -r option, tracking rows will contain the following values. If you did not use -r, the rows will all contain "-" in their class code column.
      Priority 	Code 	Description
      1 	= 	Match
      2 	c 	Contained 	
      3 	j 	New isoform 	
      4 	e 	A single exon transcript overlapping a reference exon and at least 10 bp of a reference intron, indicating a possible pre-mRNA fragment. 	
      5 	i 	A single exon transcript falling entirely with a reference intron 	
      6 	r 	Repeat. Currently determined by looking at the reference sequence and applied to transcripts where at least 50% of the bases are lower case 	
      7 	u 	Unknown, intergenic transcript 	

      This research was supported in part by NIH grants R01-LM06845 and R01-GM083873 and NSF grant CCF-0347992. 	Administrator: Cole Trapnell. Design by David Herreman
