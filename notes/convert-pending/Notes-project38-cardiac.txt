Notes-project38-cardiac.txt

</entry>



<entry [Wed Feb 10 16:34:27 EST 2010] RECAP CASAVA RUN OUTPUT>




CASAVA OUTPUT FILES

SNP CALLS WRITTEN TO cN.snp.txt FILE FOR EACH CHROMOSOME, EACH WITHIN THE SPECIFIC CHROMOSOME DIRECTORY:
    
    outputdir/build/Parsed*/cN
    
WHERE N = 1,2,3,..,X,Y

LOCATION OF CARDIAC SAMPLE CASAVA SNP FILES:

/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casava/Parsed_18-08-09/run12+15-lane2-SNPs


SAMPLE OF OUTPUT FILES CONTENT:

[syoung@ngsdev run12+15-lane2-SNPs]$ head c1.snp.txt 
#position       A       C       G       T       modified_call   used    total   score           reference   type
4770    1       0       5       0       G       6       6       14.90           A       SNP_diff
4793    3       0       9       0       G       12      12      23.69:7.80              A       SNP_diff
554323  0       0       23      0       G       23      23      75.50           C       SNP_diff
554326  0       0       104     1       G       106     105     331.27          A       SNP_diff
554461  20      17      1719    23      G       1860    1779    5100.90:16.20           A       SNP_diff
554517  1027    12      11      7       A       1098    1057    2796.20:9.55            G       SNP_diff
554677  65      4       54      0       AG      125     123     203.41:156.93           G       SNP_het2
554725  1       110     0       0       C       111     111     356.49          T       SNP_diff
554731  0       110     1       0       C       115     111     350.85          T       SNP_diff

[syoung@ngsdev run12+15-lane2-SNPs]$ head c1.snp.gff
##gff-version 3
#Illumina CASAVA SNP file
#Created 15:15:26 18-08-09
##sequence-region chr1 4770 247111613
browser position sequence-region chr1:4770-247111613
track name=Illumina_SNP description="Illumina SNPs generated by CASAVA" color=darkturquoise
chr1    Illumina_CASAVA SNP     4770    4770    1000    +       .       ID=chr1_4770;Name=G_hom
chr1    Illumina_CASAVA SNP     4793    4793    1000    +       .       ID=chr1_4793;Name=G_hom
chr1    Illumina_CASAVA SNP     554323  554323  1000    +       .       ID=chr1_554323;Name=G_hom
chr1    Illumina_CASAVA SNP     554326  554326  1000    +       .       ID=chr1_554326;Name=G_hom



</entry>



<entry [Mon Jan 25 22:52:47 EST 2010] UNMATCHED READ COUNT>



MAQ ANALYSIS FOR BOTH RUNS 12 AND 15



LANE 1

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maq

lines run12+15-s_1_1.fastq 
    run12+15-s_1_1.fastq: 100847740

lines run12+15-s_1_2.fastq 
    run12+15-s_1_2.fastq: 100847740


LANE 2

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2


lines run12+15-s_2_1.fastq 
    run12+15-s_2_1.fastq: 113166204


lines run12+15-s_2_2.fastq 
    run12+15-s_2_2.fastq: 113166204











RUN 12


/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_1_export.txt


RUN 15

/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data






</entry>



<entry [Wed Aug 19 15:09:33 EDT 2009] SNP FILE COLUMN HEADINGS>




Hi Duan,

The MAQ out.SNPfilter file columns are:

1. Chromosome
2. Position
3. Reference base
4. Consensus base
5. Consensus quality
(A Phred-like quality value. Considered the key criterion for judging the reliability of a SNP.)
6. Read depth
7. Repetitive region
(Average number of hits of reads covering this position. Indicates whether the site falls in a repetitive region. If no read covering the site can be mapped with high mapping quality, the flanking region is possibly repetitive or in the lack of good reads. A SNP at such site is usually not reliable.)
8. Highest mapping quality
(Highest mapping quality of the reads covering the position. Roughly gives the copy number of the flanking region in the reference genome. In most cases, this number approaches 1.00, which means the region is about unique. Sometimes you may see non-zero read depth but 0.00 at the 7th column. This indicates that all the reads covering the position have at least two mismatches. Maq only counts the number of 0- and 1-mismatch hits to the reference. This is due to a complex technical issue.)
9. Min. flanking quality
(Minimum consensus quality in the 3bp flanking regions at each side of the site (6bp in total). This gives the neighbouring quality. Filtering on this column is also required to get reliable SNPs. This idea is inspired by NQS, although NQS is initially designed for a single read instead of a consensus.)
10. Second best call
11. Log likelihood ratio of the second best and the third best call 
12. Third best call

The CASAVA SNP file columns are:

1. Position—The position of the SNP on the indicated chromosome.
2. A—Number of A bases called on the reads.
3. C—Number of C bases called on the reads.
4. G—Number of G bases called on the reads.
5. T—Number of T bases called on the reads.
6. Modified_call—The base called.
7. Used—Bases used for making the call.
8. Total—Total bases called at that position.
9. Score—The score of the call, followed by the score of the second call, if
applicable.
10. Reference—The reference base at that position.
11. Type—The call type:
• SNP_diff—difference with the reference is a homozygous call.
In any heterozygote calls, the strongest call is given first:
• SNP_het1—the heterozygote has the reference base as the stronger
call and a non-reference base as the minor allele.
• SNP_het2—the heterozygote has a non-reference base as major call
and the reference base as the minor allele
• SNP_het_other—this is a heterozygous call where both of the called
alleles are different from the reference base
head 
Cheers,

Stuart.


</entry>



<entry [Wed Aug 19 01:31:18 EDT 2009] MESSAGE DUAN - SNP PREDICTION RESULTS FOR MAQ AND CASAVA>




Hi Duan,

The last job finished at 7PM today. So, finally, here are your SNP predictions using both MAQ and CASAVA attached.

In the end, I had to reduce the length of the reads to 37 bp to allow them to pass MAQ's input filter, which may be the reason why MAQ predicts less SNPs than CASAVA. The SNP predictions were generated by alignment of the reads against the whole nuclear human genome (i.e., not mtDNA), genome build version 36.1.

The MAQ SNPs are in the same format as previously. I've attached the manual for CASAVA which explains the SNP output files (p.106) and the CASAVA html files (also attached) which show read coverage and SNP distributions. (From a first glance, it appears that the higher the coverage on a chromosome, the larger the number of predicted SNPs.)

I appreciate your patience for what has taken a lot longer than any of us anticipated. Now that the initial problems have been identified, when you come to do this analysis again it should be fairly straightforward. And you should be able to do it yourself with Aqwa - more details soon.

Cheers,

Stuart.


</entry>



<entry [Wed Aug 12 06:31:18 EDT 2009] RERUN CASAVA workflowAuto ON RUN12+15 ***LANE 2 ONLY*** WITH --snpCovCutoff=-1 >




CASAVA
------

LANE 1 (RUN 12 AND RUN 15) ON NODE 1
------------------------------------


mkdir -p /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casava
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casava
rm -fr workflowAuto.sh
emacs workflowAuto.sh
#!/bin/sh

#PBS -j oe

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casava

time /nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1 \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=1 \
--projectDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casava \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina \
--workflowAuto \
--snpCovCutoff=-1 

echo `/usr/local/bin/qstat -f $PBS_ID > workflowAuto.usage`;
echo "Printed usage file: workflowAuto.usage" 

#### END


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casava

qsub -q psmall -l walltime=96:00:00 -l nodes=n01:ppn=8 workflowAuto.sh; date; sleep 5; qstat 


USAGE:

Job Id: 71982.kronos.ccs.miami.edu
    Job_Name = workflowAuto.sh
    Job_Owner = syoung@kronos.ccs.miami.edu
    resources_used.cput = 16:52:17
    resources_used.mem = 3645280kb
    resources_used.vmem = 5537264kb
    resources_used.walltime = 05:44:15
    job_state = R
    queue = psmall
    server = kronos.ccs.miami.edu
    Checkpoint = u
    ctime = Tue Aug 18 08:35:33 2009
    Error_Path = kronos.ccs.miami.edu:/p/NGS/syoung/base/pipeline/run12+15/1.4
        .0/lane1/casava/workflowAuto.sh.e71982
    exec_host = n01/7+n01/6+n01/5+n01/4+n01/3+n01/2+n01/1+n01/0
    Hold_Types = n
    Join_Path = oe
    Keep_Files = n
    Mail_Points = a
    mtime = Tue Aug 18 08:35:35 2009
    Output_Path = kronos.ccs.miami.edu:/p/NGS/syoung/base/pipeline/run12+15/1.
        4.0/lane1/casava/workflowAuto.sh.o71982
    Priority = 0
    qtime = Tue Aug 18 08:35:33 2009
    Rerunable = True
    Resource_List.nodect = 1
    Resource_List.nodes = n01:ppn=8
    Resource_List.walltime = 96:00:00
    session_id = 14077
    Variable_List = PBS_O_HOME=/nethome/syoung,PBS_O_LANG=en_US.UTF-8,
        PBS_O_LOGNAME=syoung,
        PBS_O_PATH=/sw/bin:/nethome/syoung/base/bin:/usr/X11R6/bin:/nethome/s
        young/base/bin/utils:/home/syoung/base/bin/nextgen:/home/syoung/base/a
        pps/amos/bin:/usr/local/qt/bin:/home/apps/alta-cyclic/0.1.0/external.p
        rograms/libsvm-2.86:/home/apps/alta-cyclic/0.1.0/blat/bin/i386:/home/a
        pps/alta-cyclic/0.1.0/perlmods/lib64/perl5/site_perl/5.8.8/x86_64-linu
        x-thread-multi/auto:/home/apps/alta-cyclic/0.1.0/perlexternal:/home/bi
        oinfo/apps/ngs/bin/nextgen:/home/bioinfo/apps/ngs/bin/exome:/home/bioi
        nfo/apps/ngs/bin/utils:/home/bioinfo/apps/ngs/bin:/usr/local/bin:/bin:
        /usr/bin:/usr/lpp/mmfs/bin,PBS_O_MAIL=/var/spool/mail/syoung,
        PBS_O_SHELL=/bin/bash,PBS_SERVER=kronos.ccs.miami.edu,
        PBS_O_HOST=kronos.ccs.miami.edu,
        PBS_O_WORKDIR=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casava
        ,PBS_O_QUEUE=psmall
    etime = Tue Aug 18 08:35:33 2009
    submit_args = -q psmall -l walltime=96:00:00 -l nodes=n01:ppn=8 workflowAu
        to.sh

    Printed usage file: workflowAuto.usage

SUMMARY:

    resources_used.cput = 16:52:17
    resources_used.mem = 3645280kb
    resources_used.vmem = 5537264kb
    resources_used.walltime = 05:44:15


tail workflowAuto.sh.o71982

    real    344m46.889s
    user    8m34.731s
    sys     0m8.726s
    




LANE 2 (RUN 12 AND RUN 15) ON NODE 2
------------------------------------

mkdir -p /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casava
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casava
rm -fr workflowAuto.sh
emacs workflowAuto.sh
#!/bin/sh

#PBS -j oe

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casava

time /nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2 \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casava \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina \
--workflowAuto \
--snpCovCutoff=-1 

echo `/usr/local/bin/qstat -f $PBS_ID > workflowAuto.usage`;
echo "Printed usage file: workflowAuto.usage" 

#### END


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casava

qsub -q psmall -l walltime=96:00:00 -l nodes=n02:ppn=8 workflowAuto.sh; date; sleep 5; qstat 

		
		71983.kronos.ccs.miami.edu
		Tue Aug 18 08:39:20 EDT 2009
		Job id                    Name             User            Time Use S Queue
		------------------------- ---------------- --------------- -------- - -----
		71947.kronos              maq.sh           syoung          03:38:49 R psmall         
		71948.kronos              maq.sh           syoung          03:38:59 R psmall         
		71949.kronos              maq.sh           syoung          03:38:49 R psmall         
		71950.kronos              maq.sh           syoung          03:38:08 R psmall         
		71951.kronos              maq.sh           syoung          03:38:24 R psmall         
		71952.kronos              maq.sh           syoung          03:39:02 R psmall         
		71953.kronos              maq.sh           syoung          03:39:02 R psmall         
		71954.kronos              maq.sh           syoung          00:00:00 R psmall         
		71974.kronos              maq.sh           syoung          00:12:21 R psmall         
		71975.kronos              maq.sh           syoung          00:11:41 R psmall         
		71976.kronos              maq.sh           syoung          00:11:16 R psmall         
		71977.kronos              maq.sh           syoung          00:10:44 R psmall         
		71978.kronos              maq.sh           syoung          00:10:28 R psmall         
		71979.kronos              maq.sh           syoung          00:10:24 R psmall         
		71980.kronos              maq.sh           syoung          00:10:18 R psmall         
		71981.kronos              maq.sh           syoung          00:10:11 R psmall         
		71982.kronos              workflowAuto.sh  syoung          00:03:01 R psmall         
		71983.kronos              workflowAuto.sh  syoung                 0 R psmall 





real    406m54.152s
user    10m25.927s
sys     0m8.233s
pbs_iff: file not setuid root, likely misconfigured
pbs_iff: cannot connect to kronos.ccs.miami.edu:15001 - fatal error, errno=13 (Permission denied\
) cannot bind to reserved port in client_to_svr
No Permission.
qstat: cannot connect to server kronos.ccs.miami.edu (errno=15007)

Printed usage file: workflowAuto.usage




</entry>



<entry [Wed Aug 12 04:31:18 EDT 2009] RERUN MAQ ON LANES 1 AND 2>



MAQ
---

LANE 1 (RUNS 12 + 15) ON NODE 4
-------------------------------

STARTED RUNNING Tue Aug 18 02:54:27 EDT 2009


(USING 37-BP READS)


mkdir -p /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maq
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maq

screen -S duan-lane1-maq

/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maq \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/s_1_1_sequence.fastq,/p/NGS/syoung/base/pipeline/run12/lane1/s_1_2_sequence.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome-bfa/genome.bfa \
--reads  1000000 \
--jobs 8 \
--queue "-q psmall -l walltime=96:00:00  -l nodes=n04:ppn=1" \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maq/duan-lane1-clusterMAQ.log


LANE 2 (RUNS 12 + 15) ON NODE 3
-------------------------------

STARTED RUNNING Tue Aug 18 02:54:27 EDT 2009


mkdir -p /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/maq
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/maq

screen -S duan-lane2-maq

/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/maq \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome-bfa/genome.bfa \
--reads  1000000 \
--clean \
--jobs 8 \
--queue "-q psmall -l walltime=96:00:00  -l nodes=n03:ppn=1" \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/maq/duan-lane2-clusterMAQ.log



ALSO COPIED TO:

Notes-project22-aqwa.txt
Fri Aug 14 06:31:18 EDT 2009
PROFILING OF AQWA PIPELINE APPS - cluster-image2eland.pl, clusterMAQ.pl AND clusterEland.pl



mkdir -p /p/NGS/syoung/base/pipeline/profile/clusterMAQ-1M
cd /p/NGS/syoung/base/pipeline/profile/clusterMAQ-1M

screen -S lane2-clusterMAQ-1M

/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/profile/clusterMAQ-1M \
--inputfile /p/NGS/syoung/base/pipeline/run12/lane1/s_1_1_sequence.fastq,/p/NGS/syoung/base/pipeline/run12/lane1/s_1_2_sequence.fastq \
--referencefile /p/NGS/syoung/base/pipeline/run12/lane1/CCDS_nucleotide.20080430.fa \
--reads  1000000 \
--clean \
--jobs 16 \
--queue "-q psmall -M syoung@med.miami.edu -m abe -N ln2-cMAQ-1M -l ncpus=8" \
&> /p/NGS/syoung/base/pipeline/profile/clusterMAQ-1M/ln2-cMAQ-1M.log



NOTES
-----



LANE 1 (RUNS 12 + 15) AGAINST CCDS ONLY
---------------------------------------

mkdir -p /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maq/ccds
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maq/ccds

screen -S l1s1M

/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maq/ccds \
--inputfile /p/NGS/syoung/base/pipeline/run12/lane1/s_1_1_sequence.fastq,/p/NGS/syoung/base/pipeline/run12/lane1/s_1_2_sequence.fastq \
--referencefile /p/NGS/syoung/base/pipeline/run12/lane1/CCDS_nucleotide.20080430.fa \
--reads  1000000 \
--clean \
--jobs 16 \
--queue "-q psmall -M syoung@med.miami.edu -m abe -N l1s1M" \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maq/ccds/clusterMAQ-l1s1M.log

ll
	-rw-rw----+  1 syoung bioinfo 1.3M Aug 12 17:15 assemble.log
	-rw-rw----+  1 syoung bioinfo 1.1M Aug 12 17:19 clusterMAQ-l1s1M.log
	-rw-rw----+  1 syoung bioinfo  65M Aug 12 17:15 cns.fq
	-rw-rw----+  1 syoung bioinfo 6.0M Aug 12 17:15 cns.snp
	-rw-rw----+  1 syoung bioinfo  42M Aug 12 17:15 consensus.cns
	-rw-rw----+  1 syoung bioinfo  538 Aug 12 17:13 mapcheck.txt
	-rw-rw----+  1 syoung bioinfo  442 Aug 12 15:59 miniMAQ.log
	-rw-rw----+  1 syoung bioinfo  660 Aug 12 15:55 miniMAQ.sh
	-rw-------+  1 syoung bioinfo    0 Aug 12 16:00 miniMAQ.sh.o70598
	-rw-rw----+  1 syoung bioinfo 5.2M Aug 12 17:18 out.indelpe
	-rw-rw----+  1 syoung bioinfo 766K Aug 12 17:19 out.indelsoa
	-rw-rw----+  1 syoung bioinfo  28K Aug 12 17:19 out.indelsoa.filter
	-rw-rw----+  1 syoung bioinfo 310M Aug 12 17:13 out.map
	-rw-rw----+  1 syoung bioinfo 270M Aug 12 17:18 out.rmdup
	-rw-rw----+  1 syoung bioinfo 1.9M Aug 13 05:05 out.SNPfilter
	-rw-rw----+  1 syoung bioinfo 1.7K Aug 12 16:48 splitfiles
	-rw-rw----+  1 syoung bioinfo 310M Aug 12 17:13 temp.map
	drwxrwx---+  2 syoung bioinfo 4.0K Aug 12 16:42 test









WIKI PAGES
----------

RUN 12
http://gouda.ccs.miami.edu:8090/display/NextGen/090508_3031UAAXX

RUN 15
http://gouda.ccs.miami.edu:8090/display/NextGen/090528_42C1TAAXX


RUN DATA
--------

RUN 12

Run Folder: S:\pipeline_in\090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3

Lane 1) R-F19-4002	    3pM
Lane 2) R-R-F12-3005	3pM


Paired-end run. 

FlowCell ID: 3031UAAXX
Lane description: For this run we performed 52 cycles by 52 cycles. A 36 cycle and a 18 cycle kit was combined into one for each read.
All bases after cycle 38 for read1 will be trimmed in the analysis due to an error in timing of the top off. Cycles 38-42 did not receive scan mix. Read2 performed successfully.


RUN 15

/p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

Lane	Sample	    Owner	 
1	    RF19-4002   Duan    3.5 pM 
2	    RF12-3005	Duan	3   pM 

FlowCell ID: 42C1TAAXX
Run folder: 090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
Run type: paired end

Paired-End Run

For this run we performed 54 cycles by 54 cycles. A 36 cycle and a 18 cycle kit was combined into one for each read.




</entry>



<entry [Fri Aug  7 13:14:45 EDT 2009] RERUN CASAVA workflowAuto ON RUN12+15 ***LANE 2 ONLY*** WITH --snpCovCutoff=-1 >



(MOVED PREVIOUS ERRONEOUS RUN OF LANES 1 AND 2 COMBINED FROM build TO build-old)

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2

rm -fr workflowAuto.sh
emacs workflowAuto.sh
#!/bin/sh

#PBS -N lsnr2csM2
#PBS -l ncpus=8
#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2

time /nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p d  \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2/build \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina \
--workflowAuto \
--snpCovCutoff=-1 

echo `/usr/local/bin/qstat -f $PBS_ID > workflowAuto.usage`;
echo "Printed usage file: workflowAuto.usage" 

#### END



RUN CASAVA WITH workflowAuto


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2
qsub -q psmall workflowAuto.sh ; date; sleep 5 ; qstat
    




</entry>



<entry [Fri Aug  7 13:14:45 EDT 2009] RERUN CASAVA workflowAuto ON RUN12+15 ***LANE 1*** WITH --snpCovCutoff=-1 >




1. CREATE OUTPUT DIRECTORY

mkdir -p /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casavaMerged2
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casavaMerged2


2. MERGE RUN 12 AND RUN 15 *export.txt FILES INTO A SINGLE FILE FOR EACH READ IN OUTPUT DIR 

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casavaMerged2

RUN 12 + RUN 15 s_1_1

cat /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_1_export.txt /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_1_export.txt > s_1_1_export.txt 

RUN 12 + RUN 15 s_1_2

cat /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_2_export.txt /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_2_export.txt > s_1_2_export.txt 



3. COPY NEEDED ANCILLARY FILES

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casavaMerged
ll ..

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_pair.xml  ./

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_pair.xml  ./

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/Summary.htm  ./

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/config.xml  ./


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casavaMerged2
[syoung@ngsdev casavaMerged2]$ ll
total 9.9G
drwxrwx---+  2 syoung bioinfo 4.0K Aug 12 22:10 .
drwxrwx---+ 29 syoung bioinfo 4.0K Aug 12 21:30 ..
-rw-rw----+  1 syoung bioinfo 5.5K Aug 12 22:10 config.xml
-rw-rw----+  1 syoung bioinfo 5.0G Aug  7 14:59 s_1_1_export.txt
-rw-rw----+  1 syoung bioinfo 4.9G Aug  7 15:00 s_1_2_export.txt
-rw-rw----+  1 syoung bioinfo 7.7K Aug 12 22:10 s_1_pair.xml
-rw-rw----+  1 syoung bioinfo 7.7K Aug 12 22:10 s_2_pair.xml
-rw-rw----+  1 syoung bioinfo  94K Aug 12 22:10 Summary.htm




4. MOVE TO BUILD DIR AND CREATE .sh FILE

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casavaMerged2

rm -fr workflowAuto.sh
emacs workflowAuto.sh
#!/bin/sh

#PBS -N l1-casAuto
#PBS -l ncpus=8
#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casavaMerged2/build

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casavaMerged2 \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=1 \
--projectDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/casavaMerged2/build \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina \
--workflowAuto \
--snpCovCutoff=-1

#### END




5. RUN CASAVA WITH workflowAuto ON CLUSTER

qsub -q psmall workflowAuto.sh ; date ; sleep 5; qstat
    
        
    70867.kronos.ccs.miami.edu
    Thu Aug 13 04:41:28 EDT 2009
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    70867.kronos              l1-casAuto       syoung                 0 Q psmall         
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    70867.kronos              l1-casAuto       syoung                 0 R psmall 








</entry>



<entry [Fri Aug  7 13:14:45 EDT 2009] RERUN CASAVA workflowAuto ON RUN12+15 LANE 2 WITH --snpCovCutoff=-1 (ELAND GENOMIC ALIGNMENT OF RNA SAMPLE)>




1. MOVE TO BUILD DIR 

mkdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2



2. COPY INPUT FILES FROM casavaMerged DIR

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2
cp ../casavaMerged/*xml ./
cp ../casavaMerged/*htm ./
cp ../casavaMerged/*txt ./

ln -s s_1_1_export.txt s_1_export.txt
ln -s s_2_1_export.txt s_2_export.txt



3. CREATE .sh FILE

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2

rm -fr workflowAuto.sh
emacs workflowAuto.sh
#!/bin/sh

#PBS -q cvaMerged
#PBS -l ncpus=8
#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/pcd \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2/build \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina \
--readMode=single \
--workflowAuto \
--snpCovCutoff=-1



4. RUN ON CLUSTER


qsub -q psmall workflowAuto.sh ; date; qstat
    
    70177.kronos.ccs.miami.edu
        Tue Aug 11 16:03:47 EDT 2009
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    70175.kronos              workflowAuto.sh  syoung          00:00:00 C psmall         
    70176.kronos              workflowAuto.sh  syoung          00:00:00 C psmall         
    70177.kronos              workflowAuto.sh  syoung                 0 Q psmall         
    [syoung@kronos casavaMerged2]$ qstat
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    70175.kronos              workflowAuto.sh  syoung          00:00:00 C psmall         
    70176.kronos              workflowAuto.sh  syoung          00:00:00 C psmall         
    70177.kronos              workflowAuto.sh  syoung                 0 R psmall 


5. GET RUN DURATION

APPROX. 4 HOURS 6 MINS

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2
emacs workflowAuto.sh.o70177

    [11/08/09 16:03:49] CHECK Directory structure                      [OK]
    ...
    [11/08/09 20:09:42] perl /home/syoung/base/apps/casava/1.0.10.1/bin/generateReports.pl --projectDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2/build --target=depth









MESSAGE TO EUGENE GOLTSMAN
Wed Aug 12 20:50:03 EDT 2009


Hi Eugene,

Thanks for your help with my run (using the Eland alignment of RNA samples against whole human chromosomes). The CASAVA run completed successfully using --snpCovCuttoff=-1 parameter. Here's a peek into the SNP files produced:

[syoung@ngsdev c1]$ head c1.snp.*
==> c1.snp.gff <==
##gff-version 3
#Illumina CASAVA SNP file
#Created 19:49:56 11-08-09
##sequence-region chr1 4770 247117388
browser position sequence-region chr1:4770-247117388
track name=Illumina_SNP description="Illumina SNPs generated by CASAVA" color=darkturquoise
chr1    Illumina_CASAVA SNP     4770    4770    1000    +       .       ID=chr1_4770;Name=G_hom
chr1    Illumina_CASAVA SNP     4793    4793    1000    +       .       ID=chr1_4793;Name=GA_het2
chr1    Illumina_CASAVA SNP     554305  554305  1000    +       .       ID=chr1_554305;Name=A_hom
chr1    Illumina_CASAVA SNP     554306  554306  1000    +       .       ID=chr1_554306;Name=C_hom

==> c1.snp.txt <==
#position       A       C       G       T       modified_call   used    total   score          reference        type
4770    0       0       4       0       G       4       4       12.20           A       SNP_diff
4793    6       0       12      0       GA      18      18      32.38:12.12             A      SNP_het2
554305  224     60      4       0       A       292     288     21.44           T       SNP_diff
554306  2       288     2       2       C       296     294     27.87           T       SNP_diff
554307  2       346     2       0       C       352     350     33.52           T       SNP_diff
554308  6       1756    12      0       C       1786    1774    170.54          G       SNP_diff
554309  4       2056    12      6       C       2090    2078    199.78          A       SNP_diff
554311  18      100     160     2606    T       2892    2884    244.21          C       SNP_diff
554313  24      2620    112     10      C       2922    2766    257.99:8.58             T      SNP_diff



Next, I'll try rerunning CASAVA with exome-only Eland alignment data using the --applicationType=RNA option and see how that looks.

Many thanks again!

Cheers,

Stuart.



</entry>



<entry [Fri Aug  7 13:14:45 EDT 2009] MESSAGE Eugene Goltsman: TEST RUN DIDN'T WORK. OWN workflowAuto, ETC. CASAVA RUNS ALSO HAVE EMPTY OUTPUT FILES>



1) I’ve copied the results of the test run below. I’m not sure if it worked correctly as the E_coli output files were empty. I looked for the chromosome.snp.txt file as described in the manual (see ‘Casava output files’ image copied below).

2) I ran run.pl with -–workflowAuto on a single node (8 CPUs) and it seemed to end okay but again the output files were empty

3) The single-processor runs that we started while we were on the phone later timed out on our system here so I’m running them again overnight.

Cheers,

Stuart.


Test run results

total 128K
drwxr-xr-x 7 syoung bioinfo  16K Aug  6 21:13 .
drwxr-xr-x 7 syoung bioinfo  16K Aug  6 21:13 ..
-rw-r--r-- 1 syoung bioinfo 9.8K Aug  6 21:18 CASAVA.log
drwxr-xr-x 2 syoung bioinfo  16K Aug  6 21:13 conf
drwxr-xr-x 4 syoung bioinfo  16K Aug  6 21:13 export
drwxr-xr-x 6 syoung bioinfo  16K Aug  6 21:18 html
drwxr-xr-x 4 syoung bioinfo  16K Aug  6 21:13 Parsed_06-08-09
drwxr-xr-x 3 syoung bioinfo  16K Aug  6 21:18 stats
[syoung@kronos TestProject]$ cd Parsed_06-08-09/
[syoung@kronos Parsed_06-08-09]$ ll
total 64K
drwxr-xr-x 4 syoung bioinfo 16K Aug  6 21:13 .
drwxr-xr-x 7 syoung bioinfo 16K Aug  6 21:13 ..
drwxr-xr-x 3 syoung bioinfo 16K Aug  6 21:18 E_coli
drwxr-xr-x 2 syoung bioinfo 16K Aug  6 21:13 NMNM
[syoung@kronos Parsed_06-08-09]$ l E_coli/
0000  E_coli.snp.gff  E_coli.snp.txt  snpStats.txt
[syoung@kronos Parsed_06-08-09]$ cd E_coli/
[syoung@kronos E_coli]$ ll
ls: E_coli.snp.txt: Operation not permitted
ls: snpStats.txt: Operation not permitted
ls: E_coli.snp.gff: Operation not permitted
total 96K
drwxr-xr-x 3 syoung bioinfo 16K Aug  6 21:18 .
drwxr-xr-x 4 syoung bioinfo 16K Aug  6 21:13 ..
drwxr-xr-x 2 syoung bioinfo 16K Aug  6 21:18 0000
-rw-r--r-- 1 syoung bioinfo 161 Aug  6 21:18 E_coli.snp.gff
-rw-r--r-- 1 syoung bioinfo  65 Aug  6 21:18 E_coli.snp.txt
-rw-r--r-- 1 syoung bioinfo  22 Aug  6 21:18 snpStats.txt
[syoung@kronos E_coli]$ hea
==> E_coli.snp.gff <==
##gff-version 3
#Illumina CASAVA SNP file
#Created 21:18:49 06-08-09
track name=Illumina_SNP description="Illumina SNPs generated by CASAVA" color=darkturquoise

==> E_coli.snp.txt <==
#position       A       C       G       T       modified_call   used    total   score           reference       type

==> snpStats.txt <==
Total   E_coli          0       0       0       0


[syoung@kronos TestProject]$ tail CASAVA.log 
[06/08/09 21:16:36] alleleCaller for  E_coli/0000
[06/08/09 21:16:36] perl /home/syoung/base/apps/casava/1.0.10.1/bin/allele_call_PairsOnly_QV_cutoff.pl --chrom=E_coli --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --binId=0000  
[06/08/09 21:17:54] Finished at 21_17_54_06_08_09[06/08/09 21:17:55]  SNPCaller for E_coli/0000
[06/08/09 21:17:55] perl /home/syoung/base/apps/casava/1.0.10.1/bin/SNPcaller.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --referenceSeq=TestData/genomes/E_coli.fa --snpFile=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli/E_coli.snp.txt --chrom=E_coli --sortCountFile=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli/0000/sort.count --binId=0000 
[06/08/09 21:18:48] save stats from 
[06/08/09 21:18:48] save stats to /home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli
[06/08/09 21:18:48] perl /home/syoung/base/apps/casava/1.0.10.1/bin/snp2gff.pl  --snpFile=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli/E_coli.snp.txt  --gffFile=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli/E_coli.snp.gff -c E_coli --binSize=10000000
[06/08/09 21:18:49] perl /home/syoung/base/apps/casava/1.0.10.1/bin/generateStats.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=snp
[06/08/09 21:18:50] perl /home/syoung/base/apps/casava/1.0.10.1/bin/generateStats.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=coverage
[06/08/09 21:18:50] perl /home/syoung/base/apps/casava/1.0.10.1/bin/generateReports.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=depth



</entry>



<entry [Fri Aug  7 13:14:45 EDT 2009] RUN CASAVA ON RUN 12 AND RUN 15 MERGED *export.txt FILES (BOTH LANES 1 AND 2) USING run.pl AND --workflowAuto>



CREATE DIRECTORIES

BASE DIR WITH SEQUENCES

mkdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged

BUILD DIR

mkdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged/build
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged/build



COPY OVER ELAND OUTPUT export FILES


RUN 15

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/
ll *sorted.txt
    -rw-rw----+ 1 syoung bioinfo 1.8G Jul 13 17:58 s_1_1_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 1.7G Jul 13 17:59 s_1_2_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 2.2G Jul 13 19:49 s_2_1_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 2.1G Jul 13 19:48 s_2_2_sorted.txt


RUN 12

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/
ll *sorted.txt
    -rw-rw----+ 1 syoung bioinfo 1.5G Jul 12 09:51 s_1_1_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 1.2G Jul 12 09:47 s_1_2_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 1.7G Jul 12 10:49 s_2_1_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 1.2G Jul 12 10:49 s_2_2_sorted.txt



CHECK READLENGTHS:


RUN 15

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/

perl /nethome/syoung/base/bin/utils/readLengths.pl --inputfile s_1_1_sequence.txt --type fastq

    Length  Sequences
    53      13469207
    
    Run time: 00:01:16
    Completed /nethome/syoung/base/bin/utils/readLengths.pl
    2:18PM, 7 August 2009
    ****************************************

perl /nethome/syoung/base/bin/utils/readLengths.pl --inputfile s_2_1_sequence.txt --type fastq

    Length  Sequences
    53      15876862
    
    Run time: 00:01:43
    Completed /nethome/syoung/base/bin/utils/readLengths.pl
    2:22PM, 7 August 2009
    ****************************************




RUN 12

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/

perl /nethome/syoung/base/bin/utils/readLengths.pl --inputfile s_1_1_sequence.txt --type fastq

    Length  Sequences
    55      11742728
    
    Run time: 00:01:17
    Completed /nethome/syoung/base/bin/utils/readLengths.pl
    2:23PM, 7 August 2009
    ****************************************

perl /nethome/syoung/base/bin/utils/readLengths.pl --inputfile s_2_1_sequence.txt --type fastq

    Length  Sequences
    53      15876862
    
    Run time: 00:01:43
    Completed /nethome/syoung/base/bin/utils/readLengths.pl
    2:22PM, 7 August 2009
    ****************************************



MERGE DIFFERENT RUN *sorted.txt FILES INTO A SINGLE FILE FOR EACH READ

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged

RUN 12 + RUN 15 s_1_1

cat /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_1_export.txt /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_1_export.txt > s_1_1_export.txt 

RUN 12 + RUN 15 s_1_2

cat /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_2_export.txt /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_2_export.txt > s_1_2_export.txt 

RUN 12 + RUN 15 s_2_1

cat /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_1_export.txt /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_1_export.txt > s_2_1_export.txt 

RUN 12 + RUN 15 s_2_2

cat /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_2_export.txt /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_2_export.txt > s_2_2_export.txt 


COPY REQUIRED FILES FROM RUN DIRECTORY:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged
ll ..

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_pair.xml  ./

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_pair.xml  ./

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/Summary.htm  ./

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/config.xml  ./



MOVE TO BUILD DIR AND CREATE .sh FILE

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged/build

rm -fr workflowAuto.sh
emacs workflowAuto.sh
#!/bin/sh

#PBS -q cvaMerged
#PBS -l ncpus=8
#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged/build

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged/build \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina \
--workflowAuto



RUN CASAVA WITH workflowAuto



qsub -q psmall workflowAuto.sh ; date; qstat
    
    RUNNING

    68676.kronos.ccs.miami.edu
    Fri Aug  7 18:33:53 EDT 2009
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    68676.kronos              workflowAuto.sh  syoung                 0 R psmall 



COMPLETED BUT SNP FILES ARE EMPTY

==> c1.snp.gff <==
##gff-version 3
#Illumina CASAVA SNP file
#Created 17:51:56 07-08-09
track name=Illumina_SNP description="Illumina SNPs generated by CASAVA" color=darkturquoise

==> c1.snp.txt <==
#position       A       C       G       T       modified_call   used    total   score           reference       type


CHECK LOG:

tail CASAVA.log

    [07/08/09 17:29:00] save stats from 0004
    [07/08/09 17:29:00] save stats to /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto/Parsed_07-08-09/c22/0004
    [07/08/09 17:32:47] save stats from 0006
    [07/08/09 17:32:47] save stats to /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto/Parsed_07-08-09/c20/0006
    [07/08/09 17:38:07] save stats from 0018
    [07/08/09 17:38:07] save stats to /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto/Parsed_07-08-09/c5/0018
    [07/08/09 17:51:55] save stats from 0024
    [07/08/09 17:51:55] save stats to /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto/Parsed_07-08-09/c1/0024
    [07/08/09 18:10:33] save stats from 0024
    [07/08/09 18:10:33] save stats to /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto/Parsed_07-08-09/c2/0024

ll /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto/Parsed_07-08-09/c2/0024

    total 119M
    -rw-rw----+  1 syoung bioinfo    0 Aug  7 15:16 c21.sort_wrong_export.txt
    -rw-rw----+  1 syoung bioinfo    0 Aug  7 15:16 cM.sort_wrong_export.txt
    -rw-rw----+  1 syoung bioinfo   70 Aug  7 18:08 coverage.txt
    -rw-rw----+  1 syoung bioinfo   45 Aug  7 15:52 reads.count
    -rw-rw----+  1 syoung bioinfo   22 Aug  7 18:08 snpStats.txt
    -rw-rw----+  1 syoung bioinfo 106M Aug  7 15:52 sort.count
    -rw-rw----+  1 syoung bioinfo  14M Aug  7 15:16 sorted.txt
    -rw-rw----+  1 syoung bioinfo    0 Aug  7 15:16 sort.merge.finished
    -rw-rw----+  1 syoung bioinfo    0 Aug  7 15:15 sort.merge.start













NOTES
-----


ERROR

--readMode=single REQUIRES s_N_export.txt FILES



ERROR repairNonUniqueRunIds() Couldn't open file handle for /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged2/s_1_export.txt No such f\
ile or directory

ln -s ../casavaMerged/s_1_1_export.txt ./s_1_1_export.txt
ln -s ../casavaMerged/s_1_2_export.txt ./s_1_2_export.txt
ln -s ../casavaMerged/s_2_1_export.txt ./s_2_1_export.txt
ln -s ../casavaMerged/s_2_2_export.txt ./s_2_2_export.txt


    -rw-rw----+  1 syoung bioinfo 5.5K Aug 11 14:59 config.xml
    lrwxrwxrwx   1 syoung bioinfo   32 Aug 11 14:59 s_1_1_export.txt -> ../casavaMerged/s_1_1_export.txt
    lrwxrwxrwx   1 syoung bioinfo   32 Aug 11 14:59 s_1_2_export.txt -> ../casavaMerged/s_1_2_export.txt
    -rw-rw----+  1 syoung bioinfo 7.7K Aug 11 14:59 s_1_pair.xml
    lrwxrwxrwx   1 syoung bioinfo   32 Aug 11 14:59 s_2_1_export.txt -> ../casavaMerged/s_2_1_export.txt
    lrwxrwxrwx   1 syoung bioinfo   32 Aug 11 14:59 s_2_2_export.txt -> ../casavaMerged/s_2_2_export.txt
    -rw-rw----+  1 syoung bioinfo 7.7K Aug 11 14:59 s_2_pair.xml
    -rw-rw----+  1 syoung bioinfo  94K Aug 11 14:59 Summary.htm






INITIALLY RAN WITHOUT COPYING RUN FILES AND FOUND conf/BullFrogApp.conf HAD BEEN CREATED IN THE BUILD DIRECTORY:

l -R 
./conf:
BullFrogApp.conf  project.conf  run.conf.xml


REQUIRED RUN FILES:


    /var/spool/torque/mom_priv/jobs/68535.krono.SC: line 9: cd: /p/NGS/syoung/base/pi\
    peline/run12+15/1.4.0/lane2/casavaMerged/build: No such file or directory
    [07/08/09 16:01:24] CHECK Directory structure                      [OK]
    [07/08/09 16:01:24] CHECK Reference sequence exists                [OK]


    ERROR: Could not find one of the files - /p/NGS/syoung/base/pipeline/run12+15/1.4\
    .0/lane2/casavaMerged/s_1_pair.xml defined 1



SO COPIED RUN 15 s_1_pair.xml AND s_2_pair.xml FILES TO SOURCE DIRECTORY:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_pair.xml  ./

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_pair.xml  ./


AND RERAN:


/nethome/syoung/base/apps/casava/1.0.10.1/run.pl --projectDir=/p/NGS/syoung/base/\
pipeline/run12+15/1.4.0/lane2/casavaMerged/build --target=allClean

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged --genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged/build --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --refSequences=/nethome/syoung/base/pipeline/human-genome/illumina --workflowAuto
    

    ERROR: Could not find one of the files - /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged/Summary.htm


COPIED Summary.htm TO SOURCE DIR:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/Summary.htm  ./


    ERROR:
    
    cp: cannot stat `/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged/config.xml': No such file or directory


COPIED:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/casavaMerged

cp /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/config.xml  ./







</entry>



<entry [Fri Aug  7 13:14:45 EDT 2009] RUN BOTH LANES USING run.pl AND --workflowAuto>



ON NODE 06

ssh c06

screen -S casavaWorkflowAuto

mkdir /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto

RUN BUILD

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina \
--workflowAuto



    [07/08/09 13:18:13] CHECK Directory structure                      [OK]
    [07/08/09 13:18:13] CHECK Reference sequence exists                [OK]
    [07/08/09 13:18:13] CHECK All input files exist                    [OK]
    [07/08/09 13:18:13] CHECK Creating/updating data directories       [IN-PROGRESS]
    [07/08/09 13:18:35] CHECK Creating/updating data directories       [DONE]
    [07/08/09 13:18:54] Running perl /home/syoung/base/apps/casava/1.0.10.1/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto/tasks.13_18_12_07_08_09.txt -h c06 -p 8001 -n 8 -s
    server 1 c06 8001
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskServer.pl -p 8001 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto/tasks.13_18_12_07_08_09.txt --sge=0 --queue=custom.q -h c06
    [07/08/09 13:18:54] Support for qsub ON
    [07/08/09 13:18:54] Using port 8001 to set up server on host c06...
    [07/08/09 13:18:54] Server ready.  Waiting for connections . . .
    [07/08/09 13:18:54] Log saved every 1 tasks
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c06 -p 8001 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c06 -p 8001 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c06 -p 8001 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c06 -p 8001 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c06 -p 8001 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c06 -p 8001 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c06 -p 8001 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c06 -p 8001 -d 0
    [07/08/09 13:18:55] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto --target=check
    Warning: <a> element has non-unique value in 'name' key attribute: Lane1 at /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl line 149
    Warning: <a> element has non-unique value in 'name' key attribute: Lane2 at /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl line 149
    Warning: <a> element has non-unique value in 'name' key attribute: Lane5 at /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl line 149
    [07/08/09 13:18:59] perl /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto
    ...


FINISHED - BUT SNP FILES ARE EMPTY!
    
cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/workflowAuto/Parsed_07-08-09/c1
ll
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 17:49 0018
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 17:49 0019
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 17:49 0020
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 17:49 0021
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 17:49 0022
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 17:49 0023
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 17:49 0024
    -rw-rw----+  1 syoung bioinfo  161 Aug  7 17:49 c1.snp.gff
    -rw-rw----+  1 syoung bioinfo   65 Aug  7 17:49 c1.snp.txt

head c1.snp*
    ==> c1.snp.gff <==
    ##gff-version 3
    #Illumina CASAVA SNP file
    #Created 17:51:56 07-08-09
    track name=Illumina_SNP description="Illumina SNPs generated by CASAVA" color=darkturquoise
    
    ==> c1.snp.txt <==
    #position       A       C       G       T       modified_call   used    total   score           reference       type


    
SIMILAR TO casava-1.10.0.1 RUN (SINGLE CPU SIMPLE RUN, GOT INTERRUPTED):

    ll Parsed
    
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:22 0020
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:23 0021
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:24 0022
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:26 0023
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:26 0024
    -rw-rw----+  1 syoung bioinfo    0 Aug  7 20:40 c1.snp.txt





</entry>



<entry [Thu Aug  6 21:40:49 EDT 2009] RUN BOTH LANES (RUN 15) USING run.pl AND SGE>



CREATE DIRECTORY

mkdir /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/sge1

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/sge1


GENERATE BUILD

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/sge1 \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina \
--workflow

    [07/08/09 12:43:26] CHECK Directory structure                      [OK]
    [07/08/09 12:43:26] CHECK Reference sequence exists                [OK]
    [07/08/09 12:43:26] CHECK All input files exist                    [OK]
    [07/08/09 12:43:26] CHECK Creating/updating data directories       [IN-PROGRESS]
    [07/08/09 12:43:55] CHECK Creating/updating data directories       [DONE]
    [07/08/09 12:44:11] Task description in /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/sge1/tasks.12_43_25_07_08_09.txt.
    [07/08/09 12:44:11] Support for SGE (qsub) ON
    [07/08/09 12:44:11] Run on SGE node with X == number of SGE nodes:
    perl /home/syoung/base/apps/casava/1.0.10.1/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/sge1/tasks.12_43_25_07_08_09.txt -h kronos.ccs.miami.edu -p 8001 '--queue=isilon.q' --sge=X -s



RUN WITH runTasks.pl


perl /home/syoung/base/apps/casava/1.0.10.1/bin/../TaskManager/runTasks.pl -t \
/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/sge1/tasks.12_43_25_07_08_09.txt \
-n 8


    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h kronos.ccs.miami.edu -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h kronos.ccs.miami.edu -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h kronos.ccs.miami.edu -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h kronos.ccs.miami.edu -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h kronos.ccs.miami.edu -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h kronos.ccs.miami.edu -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h kronos.ccs.miami.edu -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h kronos.ccs.miami.edu -p 8002 -d 0
    ERROR: loadConfiguration() CASAVA configuration /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/conf/BullFrogApp.conf cannot be found


THE FILE IS NOT FOUND BECAUSE THIS DIRECTORY STRUCTURE DOES NOT EXIST:

casava/conf/BullFrogApp.conf


THE conf DIRECTORY IN VERSION 1.0.10.1 ONLY CONTAINS THE global.conf FILE:

ll ~/base/apps/casava/1.0.10.1/conf
-rw-r--r--  1 syoung bioinfo 2.8K May  1 12:56 global.conf


AND I COULDN'T FIND BullFrogApp.conf IN VERSION 1.0.10.1 OR VERSION 1.0.8:

find ~/base/apps/casava/1.0.10.1/conf -type f -name BullFrog
    <NO RESULT>

find  ~/base/apps/casava/1.0.8 -type f -name BullFrog
    <NO RESULT>
    
    
ls ~/base/apps/casava/1.0.8/conf
    BAC_plus_vector_gs.xml  E_coli_gs.xml  human_genomes_size_chr.xml  human_rna_size_22.xml   human_rna_size.xml
capon_gs.xml            global.conf    human_genomes_size.xml      human_rna_size_chr.xml

ls ~/base/apps/casava/1.0.8
    bin  Changes  conf  COPYRIGHT  doc  lib  README  run.pl  runRNA.pl  t  TaskManager  templates






</entry>



<entry [Thu Aug  6 21:40:49 EDT 2009] CASAVA WORKS ON LANE 2 ONLY USING run.pl (NOT runTasks.pl)>




CREATE NEW DIRECTORY FOR LANE 2 OUTPUT

ON NODE 11

ssh c11
screen -S casava-lane2

mkdir /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/lane2

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/lane2

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/lane2 \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina 
    
    
cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1

    

</entry>



<entry [Thu Aug  6 21:41:49 EDT 2009] RUN clusterMAQ.pl ON FAILED INPUT SUBFILE 3 AT 10,000 READS PER FILE>



TEST WITH CLEAN SAMPLE OF TOP OF 2_1.3 FILE:

OK!

mkdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/test
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/test

chopfile ../run12+15-s_2_1.3.fastq s_2_1.3-10000.fastq 10000
    OUTPUTFILE s_2_1.3-10000.fastq CREATED (10000 LINES)

chopfile ../run12+15-s_2_2.3.fastq s_2_2.3-10000.fastq 10000
    OUTPUTFILE s_2_2.3-10000.fastq CREATED (10000 LINES)

time /nethome/syoung/base/apps/maq/0.7.1/maq fastq2bfq s_2_1.3-10000.fastq s_2_1.3-10000.bfq

    -- finish writing file 's_2_1.3-10000.bfq'
    -- 2500 sequences were loaded.

time /nethome/syoung/base/apps/maq/0.7.1/maq fastq2bfq s_2_2.3-10000.fastq s_2_2.3-10000.bfq

    -- finish writing file 's_2_2.3-10000.bfq'
    -- 2500 sequences were loaded.


time /nethome/syoung/base/apps/maq/0.7.1/maq match out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa s_2_1.3-10000.bfq s_2_2.3-10000.bfq


    -- maq-0.7.1
    [ma_load_reads] loading reads...
    [ma_load_reads] set length of the first read as 52.
    [ma_load_reads] set length of the second read as 52.
    [ma_load_reads] 2500*2 reads loaded.
    [ma_longread2read] encoding reads... 5000 sequences processed.
    [ma_match] set the minimum insert size as 53.
    [match_core] Total length of the reference: 3080419480
    [match_core] round 1/3...
    [match_core] making index...
    [match_search]   0% processed in 3.697 sec: 0 / 0 = 0.000
    [match_search]   1% processed in 19.535 sec: 1903 / 262080 = 0.007
    [match_search]   2% processed in 36.953 sec: 1004 / 196560 = 0.005
    [match_search]   3% processed in 53.709 sec: 873 / 163800 = 0.005
    [match_search]   4% processed in 68.723 sec: 720 / 131040 = 0.005
    [match_search]   5% processed in 76.268 sec: 566 / 98280 = 0.006
    [match_search]   6% processed in 93.001 sec: 909 / 163801 = 0.006
    ...
    



</entry>



<entry [Thu Aug  6 21:40:49 EDT 2009] RUN clusterMAQ.pl ON FAILED INPUT SUBFILE 3 AT 10,000 READS PER FILE>



cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3


100 SUBFILES GENERATED BY clusterMAQ.pl.

SUBFILES 1, 2, 3, 4, 5, AND 6 HAD maq.sh SCRIPTS THAT RAN SUCCESSFULLY
    
E.G., SUBFILE 6 WORKED:

[syoung@kronos failed-3]$ 6/maq.sh 
Converting solexa Sanger fastq files to MAQ binary fastq (.bfq) files...
-- maq-0.7.1
[ma_load_reads] loading reads...
[ma_load_reads] set length of the first read as 52.
[ma_load_reads] set length of the second read as 52.
[ma_load_reads] 10000*2 reads loaded.
[ma_longread2read] encoding reads... 20000 sequences processed.
[ma_match] set the minimum insert size as 53.
[match_core] Total length of the reference: 3080419480
[match_core] round 1/3...
[match_core] making index...

        NB:
        emacs 6/maq.sh
        #!/bin/sh                                                                                     
        
        #PBS -j oe                                                                                    
        echo 'Converting solexa Sanger fastq files to MAQ binary fastq (.bfq) files...'
        time /nethome/syoung/base/apps/maq/0.7.1/maq match /p/NGS/syoung/base/pipeline/run12+\
        15/1.4.0/lane2/failed-3/6/out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa\
         /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/6/run12+15-s_2_1.6.bfq /mi\
        hg/data/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/6/run12+15-s_2_2.6.bfq



... BUT SUBFILES 7, 8, 9, ..., 100 DIDN'T WORK:

[syoung@kronos failed-3]$ 7/maq.sh
Converting solexa Sanger fastq files to MAQ binary fastq (.bfq) files...
-- maq-0.7.1
[ma_load_reads] loading reads...
[ma_load_reads] set length of the first read as 52.
[ma_load_reads] set length of the second read as 52.
[ma_load_reads] 10000*2 reads loaded.
[ma_longread2read] encoding reads... 20000 sequences processed.
[ma_match] set the minimum insert size as 53.
[match_core] Total length of the reference: 3080419480
[match_core] round 1/3...
[match_core] making index...
[match_index_sorted] no reasonable reads are available. Exit!

real    0m0.076s
user    0m0.067s
sys     0m0.009s


WHERE THE maq.sh FILE IS AS FOLLOWS:

emacs 7/maq.sh
    #!/bin/sh                                                                                     
    
    #PBS -j oe                                                                                    
    echo 'Converting solexa Sanger fastq files to MAQ binary fastq (.bfq) files...'
    time /nethome/syoung/base/apps/maq/0.7.1/maq match /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/run12+15-s_2_1.7.bfq /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/run12+15-s_2_2.7.bfq

... FAILS WHEREAS THIS SUCCEEDS:

    time /nethome/syoung/base/apps/maq/0.7.1/maq match /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/6/out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/6/run12+15-s_2_1.6.bfq /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/6/run12+15-s_2_2.6.bfq


    
CHECKED DIFFERENCE BETWEEN TOP OF FILES

[syoung@kronos failed-3]$ 7/maq.sh head 7/run12+15-s_2_1.7.fastq 
Converting solexa Sanger fastq files to MAQ binary fastq (.bfq) files...
-- maq-0.7.1
[ma_load_reads] loading reads...
[ma_load_reads] set length of the first read as 52.
[ma_load_reads] set length of the second read as 52.
[ma_load_reads] 10000*2 reads loaded.
[ma_longread2read] encoding reads... 20000 sequences processed.
[ma_match] set the minimum insert size as 53.
[match_core] Total length of the reference: 3080419480
[match_core] round 1/3...
[match_core] making index...
[match_index_sorted] no reasonable reads are available. Exit!

real    0m0.086s
user    0m0.064s
sys     0m0.010s


[syoung@kronos failed-3]$  head 7/run12+15-s_2_1.7.fastq 
@HWI-EAS185:2:13:123:1922#0/1
CTACCTTTGCACGGTTAGGGTACCGCGGCCGTTAAACATNNNNCACTGGGCA
+HWI-EAS185:2:13:123:1922#0/1
abbbbab]_bababZa`aaa^abbaa\aaBBBBBBBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:13:123:680#0/1
GTTTGCTCTTCTTCAGCTTTGGGTGGGTTGGCGGAAAATNNNNGCAGAAAAG
+HWI-EAS185:2:13:123:680#0/1
aab`b__`aba`aba[_a_b^aURYaZ]`^a_aaT\][KDDDDL^V]U_W[_
@HWI-EAS185:2:13:123:549#0/1
TTCGAGGGTGATGGTCTTACCAGTCAGGGTCTTCACGATNNNNTGCATCCCA


[syoung@kronos failed-3]$  head 6/run12+15-s_2_1.6.fastq 
@HWI-EAS185:2:12:1918:608#0/1
CGTCGGGGCATTCCGGATAGGCCGAGAAAGTGTTGTGGGNNNAAAGTTATAT
+HWI-EAS185:2:12:1918:608#0/1
`baabbba_abbab`b`babbaaa_a_]`bWb_BBBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:12:1918:533#0/1
ATTTGGCTGGGCATGGTCGTTTGCCGGTTTTTAGAGATGNNNACTTCCCAAT
+HWI-EAS185:2:12:1918:533#0/1
`baaaaaab_aa``aa_aa^a^X\aaaZ_aaBBBBBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:12:1918:1545#0/1
CTAGTCAGTTGCCAAAGCCTCCGATTATGATGGGTATTANNNTGAAGAAGAT



RAN readLengths.pl TO CHECK FOR ANY HEADER AND SEQUENCE ABNORMALITIES:


REM: FILES

GOOD (MAQ PAIRED END ASSEMBLY OKAY)
/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/6/run12+15-s_2_1.6.fastq 

BAD (MAQ PAIRED END ASSEMBLY FAILS)
/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/run12+15-s_2_1.7.fastq 



perl /nethome/syoung/base/bin/utils/readLengths.pl --inputfile 6/run12+15-s_2_1.6.fastq --type fastq

    Length  Sequences
    53      10000
    
    Run time: 00:00:00
    Completed /nethome/syoung/base/bin/utils/readLengths.pl
    2:10AM, 7 August 2009
    ****************************************


perl /nethome/syoung/base/bin/utils/readLengths.pl --inputfile 7/run12+15-s_2_1.7.fastq --type fastq

    Length  Sequences
    53      10000
    
    Run time: 00:00:00
    Completed /nethome/syoung/base/bin/utils/readLengths.pl
    2:10AM, 7 August 2009
    ****************************************



RAN compareChars.pl TO CHECK FOR DIFFERENCES IN CHARACTERS BETWEEN THE TWO FILES:


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3

perl /nethome/syoung/base/bin/utils/compareChars.pl --inputfile1 6/run12+15-s_2_1.6.fastq --inputfile2 7/run12+15-s_2_1.7.fastq


RESULT: SAME NUMBER OF '\n' CHARACTERS AND NO CHARACTERS FOUND IN ONE FILE AND NOT THE OTHER:

7/run12+15-s_2_1.7.fastq size: 1649380
7/run12+15-s_2_1.7.fastq chars:
$VAR1 = {
          'S' => 22076,
          '/' => 20000,
          'a' => 146223,
          'T' => 113893,
          'N' => 42056,
          '7' => 9836,
          'K' => 960,
          'Y' => 5281,
          '2' => 37946,
          'E' => 20221,
          'Z' => 9018,
          '1' => 92628,
          'J' => 492,
          'W' => 23522,
          'B' => 74770,
          '
' => 40000,
          'H' => 21217,
          '^' => 20595,

6/run12+15-s_2_1.6.fastq size: 1640916
6/run12+15-s_2_1.6.fastq chars:
$VAR1 = {
          'S' => 22295,
          '/' => 20000,
          'a' => 138613,
          'T' => 113968,
          'N' => 40810,
          'K' => 936,
          '7' => 9512,
          'Y' => 5976,
          '2' => 36128,
          'E' => 20207,
          'Z' => 8992,
          '1' => 87430,
          'J' => 454,
          'W' => 24491,
          'B' => 96543,
          '
' => 40000,
          'H' => 21083,
          '^' => 19849,



TRY REDUCING SUBFILE 7 INTO SMALLER FILES USING clusterMAQ.pl


GET FIRST 1000 LINES OF BOTH PAIRED READS:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7
chopfile run12+15-s_2_1.7.fastq run12+15-s_2_1.7-1000.fastq 4000
    OUTPUTFILE run12+15-s_2_1.7-1000.fastq CREATED (4000 LINES)
chopfile run12+15-s_2_2.7.fastq run12+15-s_2_2.7-1000.fastq 4000
    OUTPUTFILE run12+15-s_2_2.7-1000.fastq CREATED (4000 LINES)


RUN MAQ:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7

/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/run12+15-s_2_1.7-1000.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/run12+15-s_2_2.7-1000.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--reads  10 \
--queue "-q psmall" \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/outerr.txt




RAN clusterMAQ.pl ON SUBFILE 7, THEN CHECKED IF COULD RUN MAQ ON ITS SUBFILES

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7



$ 29/maq.sh 

Converting solexa Sanger fastq files to MAQ binary fastq (.bfq) files...
-- finish writing file '/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_1.29.bfq'
-- 10 sequences were loaded.

real    0m0.018s
user    0m0.001s
sys     0m0.003s
-- finish writing file '/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_2.29.bfq'
-- 10 sequences were loaded.

real    0m0.009s
user    0m0.003s
sys     0m0.000s
-- maq-0.7.1
[ma_load_reads] loading reads...
[ma_load_reads] set length of the first read as 52.
[ma_load_reads] set length of the second read as 52.
[ma_load_reads] 10*2 reads loaded.
[ma_longread2read] encoding reads... 20 sequences processed.
[ma_match] set the minimum insert size as 53.
[match_core] Total length of the reference: 3080419480
[match_core] round 1/3...
[match_core] making index...
[match_index_sorted] no reasonable reads are available. Exit!

real    0m0.006s
user    0m0.000s
sys     0m0.003s



THE CONTENTS OF THE 'BAD' FILE:


emacs /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_2.29.fastq

@HWI-EAS185:2:13:126:1134#0/2
GTAGGTTTGGTCTAGGGTGTAGCCTGAGAATAGGGGAAATCAGTGAATGAAG
+HWI-EAS185:2:13:126:1134#0/2
aaa`a^aaa`^`aaaa`Z_^`_a`aa\a_``^``__`aZ]__V^`_^_^^]Y
@HWI-EAS185:2:13:126:1580#0/2
GTACGGGATGCAGTCTAGGGAGCTGGATTCCCTGATCCAGCCAAGGGGCATG
+HWI-EAS185:2:13:126:1580#0/2
_^`a``]````^a]a`_Y\Z\\`a`\X```^^Z]^[^^\]]_\\XOXX\VZX
@HWI-EAS185:2:13:126:1516#0/2
GGCTCGGCCTCAGCTGCCTGGGTTGTGGCCGCCCTAGCATCCTGTATGCCCA
+HWI-EAS185:2:13:126:1516#0/2
_aaaa___[__T_\`[XXXN_PNVZGR__Q_QQZZQBBBBBBBBBBBBBBBB
@HWI-EAS185:2:13:126:1345#0/2
TCAGCGCCTGCAACTCATTCAGGTCCTTCTCCATGCGCTTCCGGTGGATGTC
+HWI-EAS185:2:13:126:1345#0/2
aaaba`Z_a^aba]aaa^\]a^a^`_`aaaa`a\]aa_`````\Sa\\\aSB
@HWI-EAS185:2:13:126:1333#0/2
CGCTTCAGGACTCGTGCTCGCTTGACACTGTGGCATGCAGGGGCTTCCCCTA
+HWI-EAS185:2:13:126:1333#0/2
R[aTZ\Z_TX_XJZTTaZJTXJ`\K[__RITaaaaaV[]HOJ__`BBBBBBB
@HWI-EAS185:2:13:126:1400#0/2
CAGACCCTGGCTGCACATCCCATTGCCAACTTCCCTTTGCAGCGCTTACTGG
+HWI-EAS185:2:13:126:1400#0/2
aaRa`a_Q]Sb\]]]`]_ba`MZ]\]SY^SU_XS\Z\VZ\XGU^^WUX^BBB
@HWI-EAS185:2:13:126:1834#0/2
AGGAGAGAGTGGCACTGTATCGTCTTCAAAGGAAAAAGCAGTCACAGTTGCT
+HWI-EAS185:2:13:126:1834#0/2
aa`a`aaaaX^_aaaa`]a`a`[a`aa[`^]__aaaaZ^_^T^^``\V^^^X
@HWI-EAS185:2:13:126:215#0/2
TCCAGCTTGAACTCGCTCTTCTCCTTCTCCAGCTTCTGCTTCACCCGCTGCA
+HWI-EAS185:2:13:126:215#0/2
a]`ZNYZaYTZPYVaV^V^]P_SQa`PZMMYVVU^X]^M^]MPWWPUUPWPW
@HWI-EAS185:2:13:126:1787#0/2
GTAGTGGGTGCTGTGATTTTGTTTTCATCAGAATTGTTTGGAGTTGGGCTAT
+HWI-EAS185:2:13:126:1787#0/2
a[a\Ya]`[`_\a\a_^`a_a^_aa`_Y^``_``a`]_^Z^]_Z[L]]]^Y_
@HWI-EAS185:2:13:126:1313#0/2
CACATTTTCTACCAAATCCTGTCTAACAAAAAGCCTGAGCTGCTGGACATGC
+HWI-EAS185:2:13:126:1313#0/2
ab`_a`aaaab`aa`a``a`a]aa`aaaa_aa`aZ`a`_a`a_`]```a`]_



GOOD FILE READS:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/6/

head -n 40 run12+15-s_2_1.6.fastq

@HWI-EAS185:2:12:1918:608#0/1
CGTCGGGGCATTCCGGATAGGCCGAGAAAGTGTTGTGGGNNNAAAGTTATAT
+HWI-EAS185:2:12:1918:608#0/1
`baabbba_abbab`b`babbaaa_a_]`bWb_BBBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:12:1918:533#0/1
ATTTGGCTGGGCATGGTCGTTTGCCGGTTTTTAGAGATGNNNACTTCCCAAT
+HWI-EAS185:2:12:1918:533#0/1
`baaaaaab_aa``aa_aa^a^X\aaaZ_aaBBBBBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:12:1918:1545#0/1
CTAGTCAGTTGCCAAAGCCTCCGATTATGATGGGTATTANNNTGAAGAAGAT
+HWI-EAS185:2:12:1918:1545#0/1
a``aabaa`aaaaaa`aa^_`aa\_a[`a_`a`_W[^^NDDDN`ZW]^^_]_
@HWI-EAS185:2:12:1918:417#0/1
GAAGACATGGAGAACGAGATCGACGAGCTGCTGCAGGATNNNTAGGAGAAGA
+HWI-EAS185:2:12:1918:417#0/1
abbbbbbbaababbabbba`a`abaa_aaaaaaaa`]XEDDDHOZ[UYWWSZ
@HWI-EAS185:2:12:1918:1671#0/1
GTCTCAAGCAGCCCGGAGGAGACTGACGGCCCCCCGGACNNNACCAGCCCCC
+HWI-EAS185:2:12:1918:1671#0/1
``aa`[_aa_aa_[`aZX_a`X`TBBBBBBBBBBBBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:12:1918:1271#0/1
CGTGCAGGTAGAGGCTTACTAGAAGTGTGAAAACGTAGTNNNGGATTAAGGC
+HWI-EAS185:2:12:1918:1271#0/1
aa_baaba_aaabaaaaa_a^a```]a^a_[aa``V_\DDDDIWXXWWVUUU
@HWI-EAS185:2:12:1918:1066#0/1
GGTCCAATTGGGTGTGAGGAGTTCCTGTCCTTTCGTTCTNNNTGTGAGGGGC
+HWI-EAS185:2:12:1918:1066#0/1
`bZbabbabb_a_bbbaabba`bbabbaababbbaBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:12:1918:1048#0/1
GAAACATCCTATCATCTGTAGGCTCATTCATTTCTCTAANNNCAGTAATATT
+HWI-EAS185:2:12:1918:1048#0/1
abbbb`bbbbbbbbbbbbaaaababbabbbbbababa`MDDDM]_Z[_`^^`
@HWI-EAS185:2:12:1918:1250#0/1
CAAATATTCAAACGAGAACTTTGAAGGCCGAAGTGGAGANNNTCTCTCCTGA
+HWI-EAS185:2:12:1918:1250#0/1
ab[[abbbaaaabbabaaaaaab`XYaa`a^`BBBBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:12:1918:1124#0/1
GTGAACCAGCAACGCATCCCCAAGCAAGTACTGATCATCNNNATTGAAGGTA
+HWI-EAS185:2:12:1918:1124#0/1
abbbabbbbbbbabaaabaaa]`aaa]a_`_aaa`a_^KDDDD]^___a^P[



AVERAGE READ QUALITY IS ROUGHLY THE SAME FOR THE 'GOOD' AND 'BAD' FILES (IN FACT HIGHER FOR THE 'BAD' FILE):

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3

perl /nethome/syoung/base/bin/utils/readQuality.pl --inputfile 7/run12+15-s_2_1.7.fastq --type fastq

    Number reads: 0
    Read quality stats for 7/run12+15-s_2_1.7.fastq
    Number reads   : 10000
    Average quality: 2925.778
    
    Run time: 00:00:07
    Completed /nethome/syoung/base/bin/utils/readQuality.pl
    0:06AM, 8 August 2009
    ****************************************


perl /nethome/syoung/base/bin/utils/readQuality.pl --inputfile 6/run12+15-s_2_1.6.fastq --type fastq

    Number reads: 0
    Read quality stats for 6/run12+15-s_2_1.6.fastq
    Number reads   : 10000
    Average quality: 2870.9082
    
    Run time: 00:00:08
    Completed /nethome/syoung/base/bin/utils/readQuality.pl
    0:06AM, 8 August 2009
    ****************************************
    






TEST WHOLE BAD FILE AGAIN:

/nethome/syoung/base/apps/maq/0.7.1/maq fastq2bfq run12+15-s_2_2.29.fastq  run12+15-s_2_2.29.bfq
    
    -- finish writing file 'run12+15-s_2_2.29.bfq'
    -- 10 sequences were loaded.

time /nethome/syoung/base/apps/maq/0.7.1/maq match out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa run12+15-s_2_2.29.bfq

FAILED AS EXPECTED.



EXTRACTED THE FIRST RECORD FROM A BAD FILE TO INVESTIGATE WHETHER ONE OR TWO RECORDS ARE BAD:

mkdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/test
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/test


emacs s_2_2.29.record1.fastq
@HWI-EAS185:2:13:126:1134#0/2
GTAGGTTTGGTCTAGGGTGTAGCCTGAGAATAGGGGAAATCAGTGAATGAAG
+HWI-EAS185:2:13:126:1134#0/2
aaa`a^aaa`^`aaaa`Z_^`_a`aa\a_``^``__`aZ]__V^`_^_^^]Y

CONVERT TO .bfq


/nethome/syoung/base/apps/maq/0.7.1/maq fastq2bfq run12+15-s_2_2.29.record1.fastq  run12+15-s_2_2.29.record1.bfq

    -- finish writing file 'run12+15-s_2_2.29.record1.bfq'
    -- 2 sequences were loaded.


time /nethome/syoung/base/apps/maq/0.7.1/maq match out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa run12+15-s_2_2.29.record1.bfq

OK

time /nethome/syoung/base/apps/maq/0.7.1/maq fastq2bfq /p/NGS/syoung/base/pipeline\
/run12+15/1.4.0/lane2/failed-3/7/1/run12+15-s_2_2.1.fastq /p/NGS/syoung/base/pipel\
ine/run12+15/1.4.0/lane2/failed-3/7/1/run12+15-s_2_2.1.bfq

time /nethome/syoung/base/apps/maq/0.7.1/maq match /p/NGS/syoung/base/pipeline/run\
12+15/1.4.0/lane2/failed-3/7/1/out.map /p/NGS/syoung/base/pipeline/human-genome/ge\
nome.bfa /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/1/run12+15-s_\
2_1.1.bfq /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/1/run12+15-s\
_2_2.1.bfq


/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/test \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/test/run12+15-s_2_2.29.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--reads  1 \
--queue "-q psmall" \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/test/outerr.txt



USING PAIRED READS DOESN'T WORK

time /nethome/syoung/base/apps/maq/0.7.1/maq match /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_1.29.bfq /p/NGS/syoung/base/ pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_2.29.bfq

[match_index_sorted] no reasonable reads are available. Exit!

NEITHER DOES USING '-1 READLENGTH -2 READLENGTH' OPTIONS

time /nethome/syoung/base/apps/maq/0.7.1/maq match -1 52 -2 52 /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_1.29.bfq /p/NGS/syoung/base/ pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_2.29.bfq

[match_index_sorted] no reasonable reads are available. Exit!


BUT USING A SINGLE READ FILE WORKS!

time /nethome/syoung/base/apps/maq/0.7.1/maq match /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_2.29.bfq

BUT THE OTHER FILE IN THE PAIR FAILS!

time /nethome/syoung/base/apps/maq/0.7.1/maq match /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_1.29.bfq



... WHICH SUGGESTS THAT PERHAPS ONLY ONE FILE IN THE READ PAIR HAS A PROBLEM. RETURNING TO THE 'GOOD' AND 'BAD' EXAMPLE ABOVE, USED compareChars.pl TO SEE IF ANY CHARACTERS ARE DIFFERENT:


RAN readLengths.pl TO CHECK FOR ANY HEADER AND SEQUENCE ABNORMALITIES:


REM: FILES

GOOD (MAQ PAIRED END ASSEMBLY OKAY)
/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/6/run12+15-s_2_1.6.fastq 

BAD (MAQ PAIRED END ASSEMBLY FAILS)
/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/run12+15-s_2_1.7.fastq 





perl /nethome/syoung/base/bin/utils/compareChars.pl --inputfile1  /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_1.29.fastq  --inputfile2  /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_2.29.fastq 

    compareChars counts:
    both    46
    S       1
    /       1
    T       1
    a       1
    N       1
    K       1
    7       1
    E       1
    2       1
    Y       1
    Z       1
    1       1
    J       1
    W       1
    B       1
    
            1
    H       1
    ^       1
    b       1
    I       1
    G       1
    `       1
    U       1
    \       1
    :       1
    V       1
    -       1
    Q       1
    M       1
    0       1
    C       1
    @       1
    [       1
    A       1
    6       1
    3       1
    ]       1
    X       1
    #       1
    P       1
    _       1
    +       1
    8       1
    4       1
    R       1
    5       1
    file2_only      2
    L       1
    O       2
    file1_only      1
    D       36
    
    Run time: 00:00:00
    Completed /nethome/syoung/base/bin/utils/compareChars.pl
    0:23AM, 8 August 2009
    ****************************************



A LOOK INSIDE THE BAD FILE SHOWS A REGION OF 'NNNN' WITH LOW QUALITY:

emacs /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_1.29.fastq

HWI-EAS185:2:13:126:1134#0/1
TCTGCTGCAGTGCTCTGAGCCCTAGGATTCATCTTTCTANNNNCCGTAGGTG
+HWI-EAS185:2:13:126:1134#0/1
abbbbbabbbabbbbbbaabbba__a\bb_^abbabb^DDDDD\^`^^``[a
@HWI-EAS185:2:13:126:1580#0/1
CCTTGGCTGACTGGGGCTGGGGTGAGAGAGGAAAGACCANNNNTCCCTCTCC
+HWI-EAS185:2:13:126:1580#0/1
aaaaa^aaaaa``_a\a_\\[[\``^```]^\`[```ZDDDDD[````_``a
@HWI-EAS185:2:13:126:1516#0/1
TGGCACCCAGCTGTGGAGGGGACACTGTCTTTGAGGCAGNNNNGGTTCCACA
+HWI-EAS185:2:13:126:1516#0/1
VY_aa__a_Xa_[_[aa_R`aKa_`_ZQYaa_`\P[_JEDDDDW_Z`^aZ`T
@HWI-EAS185:2:13:126:1345#0/1
TGAAGAGCAGGAGGAGGCAGCGGAAGAGGATGCTGAAGCNNNNGCTGAGACC
+HWI-EAS185:2:13:126:1345#0/1
_aaa_aaaaa_aaaa_``aaaa`^]`a_a_\a]`^^aYIDDDD[^]^VXX[\
@HWI-EAS185:2:13:126:1333#0/1
AGATGTTAGGGGAGCTTTTGGAAGAGTCCCAGATGGAATNNNNCAGGCTCCG
+HWI-EAS185:2:13:126:1333#0/1
ZZa]T_baZ_VT^aa`a`aWQWK]^[Ma`bBBBBBBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:13:126:1400#0/1
CGGGATGAGGGCTCTGCACAGTGGAATGCCTCCAACAACNNNNGTAGGACCT
+HWI-EAS185:2:13:126:1400#0/1
`]bbaab`aZ]baaaUabb`_a``\`b_babb^[`a]SEDDDDXS`]]]V]`
@HWI-EAS185:2:13:126:1834#0/1
GGAGNAGGTGTGAATATGGGTTCCCATCAAAAATGGAACNNNNGCGAAATTG
+HWI-EAS185:2:13:126:1834#0/1
a``^D[bbaa`bbbbbaa_a_abbbaaaaaaaaaa_^[HDDDDZa`\]^`[_
@HWI-EAS185:2:13:126:215#0/1
CAGCGAGCGGCTGGAAGAGGCCGGCGGGGCCACGGCCGCNNNNATGGAGAGT
+HWI-EAS185:2:13:126:215#0/1
aa_aa[aaa_^_X_`\K\\__`__Z`Z]BBBBBBBBBBBBBBBBBBBBBBBB
@HWI-EAS185:2:13:126:1787#0/1
GTCTGGATGGAGATTCCAGATGATGACGATCTTCCAACGNNNNAGGAGCTGG
+HWI-EAS185:2:13:126:1787#0/1
`bbb``babaababaaa^_aabaaaaaaa__aa]_PXUHDDDDPX_Y]Y[P`

WHEREAS THE 'GOOD' READ PARTNER FILE SHOWS NO LONG 'NNNN' REGIONS:

emacs /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29/run12+15-s_2_2.29.fastq

HWI-EAS185:2:13:126:1134#0/2
GTAGGTTTGGTCTAGGGTGTAGCCTGAGAATAGGGGAAATCAGTGAATGAAG
+HWI-EAS185:2:13:126:1134#0/2
aaa`a^aaa`^`aaaa`Z_^`_a`aa\a_``^``__`aZ]__V^`_^_^^]Y
@HWI-EAS185:2:13:126:1580#0/2
GTACGGGATGCAGTCTAGGGAGCTGGATTCCCTGATCCAGCCAAGGGGCATG
+HWI-EAS185:2:13:126:1580#0/2
_^`a``]````^a]a`_Y\Z\\`a`\X```^^Z]^[^^\]]_\\XOXX\VZX
@HWI-EAS185:2:13:126:1516#0/2
GGCTCGGCCTCAGCTGCCTGGGTTGTGGCCGCCCTAGCATCCTGTATGCCCA
+HWI-EAS185:2:13:126:1516#0/2
_aaaa___[__T_\`[XXXN_PNVZGR__Q_QQZZQBBBBBBBBBBBBBBBB
@HWI-EAS185:2:13:126:1345#0/2
TCAGCGCCTGCAACTCATTCAGGTCCTTCTCCATGCGCTTCCGGTGGATGTC
+HWI-EAS185:2:13:126:1345#0/2
aaaba`Z_a^aba]aaa^\]a^a^`_`aaaa`a\]aa_`````\Sa\\\aSB
@HWI-EAS185:2:13:126:1333#0/2
CGCTTCAGGACTCGTGCTCGCTTGACACTGTGGCATGCAGGGGCTTCCCCTA
+HWI-EAS185:2:13:126:1333#0/2
R[aTZ\Z_TX_XJZTTaZJTXJ`\K[__RITaaaaaV[]HOJ__`BBBBBBB
@HWI-EAS185:2:13:126:1400#0/2
CAGACCCTGGCTGCACATCCCATTGCCAACTTCCCTTTGCAGCGCTTACTGG
+HWI-EAS185:2:13:126:1400#0/2
aaRa`a_Q]Sb\]]]`]_ba`MZ]\]SY^SU_XS\Z\VZ\XGU^^WUX^BBB
@HWI-EAS185:2:13:126:1834#0/2
AGGAGAGAGTGGCACTGTATCGTCTTCAAAGGAAAAAGCAGTCACAGTTGCT
+HWI-EAS185:2:13:126:1834#0/2
aa`a`aaaaX^_aaaa`]a`a`[a`aa[`^]__aaaaZ^_^T^^``\V^^^X
@HWI-EAS185:2:13:126:215#0/2
TCCAGCTTGAACTCGCTCTTCTCCTTCTCCAGCTTCTGCTTCACCCGCTGCA
+HWI-EAS185:2:13:126:215#0/2
a]`ZNYZaYTZPYVaV^V^]P_SQa`PZMMYVVU^X]^M^]MPWWPUUPWPW
@HWI-EAS185:2:13:126:1787#0/2
GTAGTGGGTGCTGTGATTTTGTTTTCATCAGAATTGTTTGGAGTTGGGCTAT
+HWI-EAS185:2:13:126:1787#0/2
a[a\Ya]`[`_\a\a_^`a_a^_aa`_Y^``_``a`]_^Z^]_Z[L]]]^Y_


DIAGNOSIS

ITS THE 37 BASE PAIR CUTOFF FROM RUN 12 (RAN OUT OF REAGENT)



SOLUTION

SOLUTION 1. TRY CONVERTING 'BAD' FILE WITH maq sol2sanger AND RUN WITH MAQ

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29

time /nethome/syoung/base/apps/maq/0.7.1/maq sol2sanger run12+15-s_2_1.29.fastq run12+15-s_2_1.29-sanger.fastq

CONVERT TO .bfq

time /nethome/syoung/base/apps/maq/0.7.1/maq fastq2bfq run12+15-s_2_1.29-sanger.fastq run12+15-s_2_1.29-sanger.bfq

RUN match



time /nethome/syoung/base/apps/maq/0.7.1/maq match out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa run12+15-s_2_1.29-sanger.bfq

    [match_core] making index...
    [match_index_sorted] no reasonable reads are available. Exit!

FAILS!! -- SO IT IS NOT A QUALITY ISSUE PER SE, RATHER A QUESTION OF DUBIOUS 'NNNN' REGIONS


JUST TO CHECK, RERAN ORIGINAL 'BAD' FILE

time /nethome/syoung/base/apps/maq/0.7.1/maq match out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa run12+15-s_2_1.29.bfq

    [match_core] making index...
    [match_index_sorted] no reasonable reads are available. Exit!


WHICH FAILS, AS EXPECTED.


SOLUTION 2. REDUCE READS TO 37 BASE PAIRS
 

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29
ll

    drwxrwx---+ 2 syoung bioinfo   48 Aug  7 06:41 1
    drwxrwx---+ 2 syoung bioinfo   49 Aug  7 06:41 10
    drwxrwx---+ 2 syoung bioinfo   48 Aug  7 06:41 2
    drwxrwx---+ 2 syoung bioinfo   48 Aug  7 06:41 3
    drwxrwx---+ 2 syoung bioinfo   48 Aug  7 06:41 4
    drwxrwx---+ 2 syoung bioinfo   48 Aug  7 06:41 5
    drwxrwx---+ 2 syoung bioinfo   48 Aug  7 06:41 6
    drwxrwx---+ 2 syoung bioinfo   85 Aug  8 01:44 7
    drwxrwx---+ 2 syoung bioinfo   48 Aug  7 06:41 8
    drwxrwx---+ 2 syoung bioinfo   48 Aug  7 06:41 9
    -rwxrwxrwx+ 1 syoung bioinfo  964 Aug  7 04:49 maq.sh
    -rw-rw----+ 1 syoung bioinfo  489 Aug  7 07:00 run12+15-s_2_1.29.bfq
    -rw-rw----+ 1 syoung bioinfo 1657 Aug  8 00:42 #run12+15-s_2_1.29.fastq#
    -rw-rw----+ 1 syoung bioinfo 1658 Aug  7 04:49 run12+15-s_2_1.29.fastq
    -rw-rw----+ 1 syoung bioinfo  528 Aug  8 00:52 run12+15-s_2_1.29-sanger.bfq
    -rw-rw----+ 1 syoung bioinfo 1379 Aug  8 00:50 run12+15-s_2_1.29-sanger.fastq
    -rw-rw----+ 1 syoung bioinfo  543 Aug  7 07:00 run12+15-s_2_2.29.bfq
    -rw-rw----+ 1 syoung bioinfo 1657 Aug  8 00:45 #run12+15-s_2_2.29.fastq#
    -rw-rw----+ 1 syoung bioinfo 1658 Aug  7 04:49 run12+15-s_2_2.29.fastq
    -rw-rw----+ 1 syoung bioinfo 1002 Aug  7 06:41 splitfiles


perl /nethome/syoung/base/bin/utils/reduceReads.pl --inputfile run12+15-s_2_2.29.fastq --outputfile run12+15-s_2_1.29-reduced.fastq --type fastq --length 37

emacs run12+15-s_2_2.29-reduced.fastq

    @HWI-EAS185:2:13:126:1134#0/2
    GTAGGTTTGGTCTAGGGTGTAGCCTGAGAATAGGGGA
    +HWI-EAS185:2:13:126:1134#0/2
    aaa`a^aaa`^`aaaa`Z_^`_a`aa\a_``^``__`
    @HWI-EAS185:2:13:126:1580#0/2
    GTACGGGATGCAGTCTAGGGAGCTGGATTCCCTGATC
    +HWI-EAS185:2:13:126:1580#0/2
    _^`a``]````^a]a`_Y\Z\\`a`\X```^^Z]^[^
    @HWI-EAS185:2:13:126:1516#0/2
    GGCTCGGCCTCAGCTGCCTGGGTTGTGGCCGCCCTAG
    +HWI-EAS185:2:13:126:1516#0/2
    _aaaa___[__T_\`[XXXN_PNVZGR__Q_QQZZQB
    @HWI-EAS185:2:13:126:1345#0/2
    TCAGCGCCTGCAACTCATTCAGGTCCTTCTCCATGCG
    +HWI-EAS185:2:13:126:1345#0/2
    aaaba`Z_a^aba]aaa^\]a^a^`_`aaaa`a\]aa
    @HWI-EAS185:2:13:126:1333#0/2
    CGCTTCAGGACTCGTGCTCGCTTGACACTGTGGCATG
    +HWI-EAS185:2:13:126:1333#0/2
    R[aTZ\Z_TX_XJZTTaZJTXJ`\K[__RITaaaaaV
    @HWI-EAS185:2:13:126:1400#0/2
    CAGACCCTGGCTGCACATCCCATTGCCAACTTCCCTT
    +HWI-EAS185:2:13:126:1400#0/2
    aaRa`a_Q]Sb\]]]`]_ba`MZ]\]SY^SU_XS\Z\
    @HWI-EAS185:2:13:126:1834#0/2
    AGGAGAGAGTGGCACTGTATCGTCTTCAAAGGAAAAA
    +HWI-EAS185:2:13:126:1834#0/2
    aa`a`aaaaX^_aaaa`]a`a`[a`aa[`^]__aaaa
    @HWI-EAS185:2:13:126:215#0/2
    TCCAGCTTGAACTCGCTCTTCTCCTTCTCCAGCTTCT
    +HWI-EAS185:2:13:126:215#0/2
    a]`ZNYZaYTZPYVaV^V^]P_SQa`PZMMYVVU^X]
    @HWI-EAS185:2:13:126:1787#0/2
    GTAGTGGGTGCTGTGATTTTGTTTTCATCAGAATTGT
    +HWI-EAS185:2:13:126:1787#0/2
    a[a\Ya]`[`_\a\a_^`a_a^_aa`_Y^``_``a`]


CONVERT TO .bfq


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29

time /nethome/syoung/base/apps/maq/0.7.1/maq fastq2bfq run12+15-s_2_1.29-reduced.fastq run12+15-s_2_1.29-reduced.bfq

OK



RUN match

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/7/29

time /nethome/syoung/base/apps/maq/0.7.1/maq match out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa run12+15-s_2_1.29-reduced.bfq

37-BASE READ FILE - MAQ RUNS OK!!!



... SO REDUCE THE ORIGINAL MERGED READ FILES AND RERUN WITH MAQ


LANE 2 (RUN 12 + RUN 15)
------------------------

REDUCE READ FILES

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/

ll run12+15*fastq
-rw-rw----+   1 syoung bioinfo 4737271348 Jul 23 01:48 run12+15-s_2_1.fastq
-rw-rw----+   1 syoung bioinfo 4737271348 Jul 23 01:53 run12+15-s_2_2.fastq

mv run12+15-s_2_1.fastq run12+15-s_2_1-original.fastq
mv run12+15-s_2_2.fastq run12+15-s_2_2-original.fastq

perl /nethome/syoung/base/bin/utils/reduceReads.pl --inputfile run12+15-s_2_1-original.fastq --outputfile run12+15-s_2_1.fastq --type fastq --length 37

    Run time: 00:03:24
    Completed /nethome/syoung/base/bin/utils/reduceReads.pl
    2:16AM, 8 August 2009
    ****************************************


perl /nethome/syoung/base/bin/utils/reduceReads.pl --inputfile run12+15-s_2_2-original.fastq --outputfile run12+15-s_2_2.fastq --type fastq --length 37

    Run time: 00:03:34
    Completed /nethome/syoung/base/bin/utils/reduceReads.pl
    2:21AM, 8 August 2009
    ****************************************


RERUN MAQ

ON KRONOS:

screen -S clusterMaq-lane2

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2

/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/ \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome-bfa/genome.bfa \
--clean \
--reads  1000000 \
--queue "-q plarge" \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/outerr.txt






3. MONITOR OUTPUT AS ITS RUNNING

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3
tail -f /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/outerr.txt



        ####Run time: 01:41:19
        ####Completed /nethome/syoung/base/bin/nextgen/run-maq.pl
        ####3:32PM, 28 July 2009
        ####****************************************










LANE 1 (RUN 12 + RUN 15)
------------------------

REDUCE READ FILES

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/
ll run12+15*fastq

    -rw-rw----+ 1 syoung bioinfo 4.0G Jul 23 01:46 run12+15-s_1_1.fastq
    -rw-rw----+ 1 syoung bioinfo 4.0G Jul 23 01:52 run12+15-s_1_2.fastq

mv run12+15-s_1_1.fastq run12+15-s_1_1-original.fastq
mv run12+15-s_1_2.fastq run12+15-s_1_2-original.fastq


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/

perl /nethome/syoung/base/bin/utils/reduceReads.pl --inputfile run12+15-s_1_1-original.fastq --outputfile run12+15-s_1_1.fastq --type fastq --length 37

    ...
    25210000
    Finished printing reduced reads (length 37)
    
    Run time: 00:05:31
    Completed /nethome/syoung/base/bin/utils/reduceReads.pl
    4:33AM, 8 August 2009
    ****************************************
    
    
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/

perl /nethome/syoung/base/bin/utils/reduceReads.pl --inputfile run12+15-s_1_2-original.fastq --outputfile run12+15-s_1_2.fastq --type fastq --length 37

    Run time: 00:05:31
    Completed /nethome/syoung/base/bin/utils/reduceReads.pl
    4:34AM, 8 August 2009
    ****************************************



RERUN MAQ WITH CHUNKS OF 1M READS

ON KRONOS:

screen -S clusterMaq-lane1

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1

/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/ \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome-bfa/genome.bfa \
--clean \
--reads  1000000 \
--queue "-q plarge" \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/outerr.txt






3. MONITOR OUTPUT AS ITS RUNNING

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/failed-3
tail -f /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/failed-3/outerr.txt



        ####Run time: 01:41:19
        ####Completed /nethome/syoung/base/bin/nextgen/run-maq.pl
        ####3:32PM, 28 July 2009
        ####****************************************













NOTES
-----


1. INPUT FILES WERE GENERATED PREVIOUSLY

mkdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3

COPY 

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/3

cp run12+15-s_2_1.3.fastq ../failed-3
cp run12+15-s_2_2.3.fastq ../failed-3



2. RUN clusterMAQ.pl 

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3

NO CLEAN:

/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/run12+15-s_2_1.3.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/run12+15-s_2_2.3.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--reads  10000 \
--queue "-q psmall" \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/outerr.txt



WITH CLEAN:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3

/nethome/syoung/base/bin/nextgen/clusterMAQ.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3 cd \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/run12+15-s_2_1.3.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/run12+15-s_2_2.3.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--reads  10000 \
--clean \
--queue "-q psmall" \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/outerr.txt



3. MONITOR OUTPUT AS ITS RUNNING

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3
tail -f /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/outerr.txt



        ####Run time: 01:41:19
        ####Completed /nethome/syoung/base/bin/nextgen/run-maq.pl
        ####3:32PM, 28 July 2009
        ####****************************************



</entry>



<entry [Thu Aug  6 13:14:07 EDT 2009] RUN CASAVA TESTDATA>




MOVE TO CASAVA HOME DIR:

cd /nethome/syoung/base/apps/casava/1.0.10.1

RUN IN ONE GO:

# Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for test E_coli data run Test lanes 1 and 2 (PE)

./run.pl -r Test --projectDir=./TestData/TestProject -e ./TestData/GERALD -l 1,2 -g ./features/E_coli_gs.xml --refSequences=./TestData/genomes/

OK
    
    [06/08/09 21:13:06] CHECK Directory structure                      [OK]
    [06/08/09 21:13:06] CHECK Reference sequence exists                [OK]
    [06/08/09 21:13:06] CHECK All input files exist                    [OK]
    [06/08/09 21:13:06] CHECK Creating/updating data directories       [IN-PROGRESS]
    [06/08/09 21:13:06] CHECK Creating/updating data directories       [DONE]
    [06/08/09 21:13:07] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=check
    [06/08/09 21:13:07] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --exportDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/GERALD --lane=1 --runId=Test --target=split
    [06/08/09 21:13:31] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --exportDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/GERALD --lane=2 --runId=Test --target=split
    [06/08/09 21:13:31] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=commit
    [06/08/09 21:13:31] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=mergeNMNM
    [06/08/09 21:13:32] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --chrom=E_coli --binId=0000 --target=merge
    [06/08/09 21:13:33] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=removeTemps
    [06/08/09 21:13:34] perl /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject
    [06/08/09 21:16:03] perl /home/syoung/base/apps/casava/1.0.10.1/bin/rmDupFromSort.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --chrom=E_coli --binId=0000
    [06/08/09 21:16:12] perl /home/syoung/base/apps/casava/1.0.10.1/bin/generateStats.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=duplicates
    [06/08/09 21:16:13] perl /home/syoung/base/apps/casava/1.0.10.1/bin/generateReports.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=duplicates
    [06/08/09 21:16:13] perl /home/syoung/base/apps/casava/1.0.10.1/bin/splitUnSorted.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --chrom=E_coli --binId=0000 --target=split
    [06/08/09 21:16:31] perl /home/syoung/base/apps/casava/1.0.10.1/bin/splitUnSorted.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --chrom=E_coli --binId=0000 --target=merge
    [06/08/09 21:16:35] perl /home/syoung/base/apps/casava/1.0.10.1/bin/splitUnSorted.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=removeTemps
    [06/08/09 21:16:36] perl /home/syoung/base/apps/casava/1.0.10.1/bin/allele_call_PairsOnly_QV_cutoff.pl --chrom=E_coli --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --binId=0000  
    [06/08/09 21:17:55] perl /home/syoung/base/apps/casava/1.0.10.1/bin/SNPcaller.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --referenceSeq=TestData/genomes/E_coli.fa --snpFile=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli/E_coli.snp.txt --chrom=E_coli --sortCountFile=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli/0000/sort.count --binId=0000 
    [06/08/09 21:18:48] save stats from 
    [06/08/09 21:18:48] save stats to /home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli
    [06/08/09 21:18:48] perl /home/syoung/base/apps/casava/1.0.10.1/bin/snp2gff.pl  --snpFile=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli/E_coli.snp.txt  --gffFile=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject/Parsed_06-08-09/E_coli/E_coli.snp.gff -c E_coli --binSize=10000000
    [06/08/09 21:18:49] perl /home/syoung/base/apps/casava/1.0.10.1/bin/generateStats.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=snp
    [06/08/09 21:18:50] perl /home/syoung/base/apps/casava/1.0.10.1/bin/generateStats.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=coverage
    [06/08/09 21:18:50] perl /home/syoung/base/apps/casava/1.0.10.1/bin/generateReports.pl --projectDir=/home/syoung/base/apps/casava/1.0.10.1/TestData/TestProject --target=depth



# Run CASAVA_RNA sortExport.pl splitUnSorted.pl allele and SNPCaller for Human_UHR c22 data run TestRNA lanes 4 (SE)

./runRNA.pl -r HUMAN_BRAIN -p ./TestData/RNA_BRAIN_22 -e ./TestData/BRAIN_22_GERALD/ -l 3 -g ./features/human_rna_size_22.xml -ref ./TestData/genom\
es/



# Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for test E_coli data run Test lanes 1 amd 2 (SE)

./run.pl -r Test --projectDir=./TestData/TestProject -e ./TestData/GERALD -l 1,2 --readMode=single -g ./features/E_coli_gs.xml -ref ./TestData/geno\
mes/



# Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for lanes 1 2 3 4 -o E_coli

./run.pl --projectDir=/data/CASAVA --runId=TestRun --exportDir=/data/date/Firecrest/Bustard/Gerald/ --lanes=1,2,3,4 -g ./features/E_coli_gs.xml




</entry>



<entry [Thu Aug  6 21:39:49 EDT 2009] USE MULTIPLE CPUS FOR CASAVA WITH runTasks.pl>



USE THE DOWNLOADED GENOME WITH FILES RENAMED TO c1.fa CONVENTION:


cd /nethome/syoung/base/pipeline/human-genome/illumina
ll
    -rw-rw-rw- 1 syoung bioinfo 138082239 Aug  6 16:30 c10.fa
    -rw-rw-rw- 1 syoung bioinfo 137141439 Aug  6 16:33 c11.fa
    -rw-rw-rw- 1 syoung bioinfo 134996532 Aug  6 16:36 c12.fa
    -rw-rw-rw- 1 syoung bioinfo 116425847 Aug  6 16:38 c13.fa
    -rw-rw-rw- 1 syoung bioinfo 108495964 Aug  6 16:40 c14.fa
    -rw-rw-rw- 1 syoung bioinfo 102345701 Aug  6 16:42 c15.fa
    -rw-rw-rw- 1 syoung bioinfo  90603807 Aug  6 16:44 c16.fa
    -rw-rw-rw- 1 syoung bioinfo  80350244 Aug  6 16:45 c17.fa
    -rw-rw-rw- 1 syoung bioinfo  77639504 Aug  6 16:46 c18.fa
    -rw-rw-rw- 1 syoung bioinfo  65087892 Aug  6 16:48 c19.fa
    -rw-rw-rw- 1 syoung bioinfo 252194720 Aug  6 16:26 c1.fa
    -rw-rw-rw- 1 syoung bioinfo  63684691 Aug  6 16:53 c20.fa
    -rw-rw-rw- 1 syoung bioinfo  47883217 Aug  6 16:54 c21.fa
    -rw-rw-rw- 1 syoung bioinfo  50685268 Aug  6 16:55 c22.fa
    -rw-rw-rw- 1 syoung bioinfo 247810178 Aug  6 16:51 c2.fa
    -rw-rw-rw- 1 syoung bioinfo 203491870 Aug  6 16:58 c3.fa
    -rw-rw-rw- 1 syoung bioinfo 195098531 Aug  6 17:02 c4.fa
    -rw-rw-rw- 1 syoung bioinfo 184475030 Aug  6 17:06 c5.fa
    -rw-rw-rw- 1 syoung bioinfo 174317998 Aug  6 17:09 c6.fa
    -rw-rw-rw- 1 syoung bioinfo 161997859 Aug  6 17:14 c7.fa
    -rw-rw-rw- 1 syoung bioinfo 149200329 Aug  6 17:17 c8.fa
    -rw-rw-rw- 1 syoung bioinfo 143078724 Aug  6 17:21 c9.fa
    -rw-rw-rw- 1 syoung bioinfo     16909 Aug  6 17:26 cM.fa
    -rw-rw-rw- 1 syoung bioinfo 158012036 Aug  6 17:25 cX.fa
    -rw-rw-rw- 1 syoung bioinfo  58928420 Aug  6 17:26 cY.fa



MOVE TO c*.fa FORMAT:

mv chr1.fa c1.fa
mv chr1.fa c2.fa
...
mv chrX.fa cX.fa



SQUASH GENOME:

cd /nethome/syoung/base/pipeline/human-genome/illumina
/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/squashGenome `pwd` `ls c*fa`


MOVED OLD BUILD TO '*chr-genome':

mv /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UA
AXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1-chr-genome


CREATED NEW DIR FOR BUILD:

mkdir /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1


GENERATED BUILD DIRECTORIES:

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=c \
--verbose=2 --targets=configure


    [06/08/09 21:06:29] Workflow OFF
    [06/08/09 21:06:29] Runing [/nethome/syoung/base/apps/casava/1.0.10.1/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --applicationType=DNA --refSequences=/nethome/syoung/base/pipeline/human-genome/illumina --verbose=2 --targets=configure --force] at 21_06_29_06_08_09
    [06/08/09 21:06:29] CHECK Directory structure                      [OK]
    [06/08/09 21:06:29] CHECK Reference sequence exists                [OK]
    [06/08/09 21:06:30] CHECK All input files exist                    [OK]
    [06/08/09 21:06:30] CHECK Creating/updating data directories       [IN-PROGRESS]
    [06/08/09 21:06:34] CHECK Creating/updating data directories       [DONE]
    [06/08/09 21:06:35] /nethome/syoung/base/apps/casava/1.0.10.1/run.pl finished at 21_06_35_06_08_09



CREATE tasks*.txt FILE


cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--refSequences=/nethome/syoung/base/pipeline/human-genome/illumina \
--workflow --force


    [07/08/09 01:51:51] Workflow ON
    [07/08/09 01:51:51] Runing [/nethome/syoung/base/apps/casava/1.0.10.1/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/nethome/syoung/base/apps/casava/1.0.10.1/features/human_genome_size.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --refSequences=/nethome/syoung/base/pipeline/human-genome/illumina --workflow --force] at 01_51_51_07_08_09
    [07/08/09 01:51:51] CHECK Directory structure                      [OK]
    [07/08/09 01:51:52] CHECK Reference sequence exists                [OK]
    [07/08/09 01:51:52] CHECK All input files exist                    [OK]
    [07/08/09 01:51:52] CHECK Creating/updating data directories       [IN-PROGRESS]
    [07/08/09 01:51:58] CHECK Creating/updating data directories       [DONE]
    [07/08/09 01:52:04] Task description in /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.01_51_51_07_08_09.txt.
    [07/08/09 01:52:04] Support for SGE (qsub) ON
    [07/08/09 01:52:04] Run on SGE node with X == number of SGE nodes:
    perl /home/syoung/base/apps/casava/1.0.10.1/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.01_51_51_07_08_09.txt -h kronos.ccs.miami.edu -p 8001 '--queue=isilon.q' --sge=X -s
    [07/08/09 01:52:04] /nethome/syoung/base/apps/casava/1.0.10.1/run.pl finished at 01_52_04_07_08_09


WHICH CREATED THIS FILE:

-rw-rw----+  1 syoung bioinfo 727K Aug  7 01:49 tasks.01_51_51_07_08_09.txt



RUN WITH runTasks.pl


screen -S casava

#msub -I -l nodes=1:ppn=8 -q gdebug; date


cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1

emacs runTasks.sh
#!/bin/sh

#PBS -l ncpus=8
#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1

perl /home/syoung/base/apps/casava/1.0.10.1/bin/../TaskManager/runTasks.pl \
-t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.01_51_51_07_08_09.txt \
-h c21 \
--numberOfProcesses=8 \
--server \
&> /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/runTasks.out



qsub -q psmall runTasks.sh; date

    68328.kronos.ccs.miami.edu
    Fri Aug  7 02:32:44 EDT 2009

OKAY!!!



CHECK OUTPUT


cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1


MISSING:

Parsed-XX-xx-xx/chromosome.name/chromosome.snp.txt
Parsed-XX-xx-xx/chromosome.name/exon_count.txt
Parsed-XX-xx-xx/chromosome.name/splice_count.txt
Parsed-XX-xx-xx/chromosome.name/gene_count.txt


SIMILAR TO casava-1.10.0.1 RUN:

    ll Parsed
    
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:22 0020
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:23 0021
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:24 0022
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:26 0023
    drwxrwx---+  2 syoung bioinfo 4.0K Aug  7 16:26 0024
    -rw-rw----+  1 syoung bioinfo    0 Aug  7 20:40 c1.snp.txt


tail CASAVA.log

    /GERALD_12-07-2009_syoung/casava-1.0.10.1/Parsed_07-08-09/c1/0017/sort.count --binId=0017 --sortCountFile=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/Parsed_07-08-09/c1/0018/sort.count --binId=0018 --sortCountFile=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/Parsed_07-08-09/c1/0019/sort.count --binId=0019 --sortCountFile=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/Parsed_07-08-09/c1/0020/sort.count --binId=0020 --sortCountFile=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/Parsed_07-08-09/c1/0021/sort.count --binId=0021 --sortCountFile=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/Parsed_07-08-09/c1/0022/sort.count --binId=0022 --sortCountFile=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/Parsed_07-08-09/c1/0023/sort.count --binId=0023 --sortCountFile=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/Parsed_07-08-09/c1/0024/sort.count --binId=0024





+++++++++</entry>



<entry [Thu Aug  6 15:39:49 EDT 2009] RUN CASAVA USING runTasks.pl ON ORIGINAL human-genome DATA (NOT DOWNLOADED FROM ILLUMINA)>



TaskManager - simple task management application. The script allows running
multiple dependent tasks(jobs) on SGE and/or multi-processor machine. 

runTasks.pl [options]
        -t, --tasksFile            - file with task description
        -n, --numberOfProcesses    - number of clients to start (if 0 the SGE will not be used)
        -p, --port                 - port where is the server
        -h, --host                 - hostname where is the server
        -s, --server               - Start also server
        -q, --queue                - SGE queue name (default research.q)
        --sge                      - number of SGE nodes (if 0 the SGE will not be used)

EXAMPLE

Run task description tasks.txt using two processors
        ./runTasks.pl -t tasks.txt -h localhost -p 8001 -n 2 -s
Run task description tasks.txt using two processors on SGE
        ./runTasks.pl -t tasks.txt -h localhost -p 8001 --sge=2 -s        





1. GENERATE BUILD DIRECTORIES:

mkdir /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1

/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 --targets=configure


cat CASAVA.log

    [06/08/09 16:32:09] cp -r /home/syoung/base/apps/casava/1.0.10.1/bin/../templates/css/ /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/html/
    [06/08/09 16:32:09] cp -r /home/syoung/base/apps/casava/1.0.10.1/bin/../templates/js/ /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/html
    [06/08/09 16:32:09] cp -r /home/syoung/base/apps/casava/1.0.10.1/bin/../templates/images/ /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/html
    [06/08/09 16:32:09] /home/syoung/base/apps/casava/1.0.10.1/bin/../run.pl --help
    [06/08/09 16:32:10] Usage: CASAVA run.pl [options]
            -e, --exportDir=PATH       - source directory PATH also known as GERALD directory or run directory
            -g, --genomeSize=PATH      - full file PATH to xml with chromosome/genome sizes see example ./features/E_coli_gs.xml
            -l, --lanes=NUMBER_LIST    - list of the lanes to use
            -p, --projectDir=PATH      - project directory PATH (where we keep CASAVA build)
            -r, --runId=STRING         - unique identifier of each run
    OPTIONAL (ANALYSIS)
            -a, --applicationType=TYPE - type of analysis [DNA, RNA] default DNA
            --featureFileName=FILE     - FILE name of exons definition file in feature directory (default exon_coords.txt)
            -rm, --readMode            - Run read-mode for all runs [paired, single] (default paired)
            -ref, --refSequences=PATH  - directory PATH of the reference genome sequences where fasta (.fa) file are stored (default projectDir/genomes/)
            --snpThreshold=NUMBER      - sets the SNPCaller threshold to NUMBER (default 10)
            --snpMaxRatio=NUMBER       - sets the SNPCaller max ratio to NUMBER (default 3)
            --snpCovCutoff=NUMBER      - sets the SNPCaller coverage cutoff to NUMBER (default 3 for DNA-Seq, -1 for RNA-Seq)
            --spliceJunction=NAME      - NAME of splice junction set in features directory (default splice_sites-28)
            --QVCutoff=NUMBER          - sets the alleleCaller minimum read alignment score to NUMBER (default 6)
    OPTIONAL (BEHAVIOUR)
            -b, --buildDir=DIR         - the destination DIR of the final build directory (default projectDir)
            -f, --force                - ignore errors from previous run
            -h, --help                 - prints this information
            -rt, --removeTemps=ON/OFF  - removes temporary data (default ON)
            --regExpScaffold=REGEXP    - Match all scaffold names to REGEXP and change to EXP
            --replaceScaffold=EXP      - All names matching regExpScaffold will be change to EXP
            --sge                      - automatically run on sge (to be implemented)
            -t, --targets=LIST         - LIST of targets to run [export,duplicates,sort,allele,snp] (default all)
            -w, --workflow             - instead of running the program generates the workflow definition the the FILE.
            --workflowAuto             - instead of running the program generates the workflow definition the the FILE and runs it using all processors.
            --workflowFile=FILE        - if --workflow provided then FILE is the name of workflow file. (default workflow.date.txt)
            --verbose=NUMBER           - sets the verbose level (default 0 - minimum)
            --version                  - prints version information
    TARGETS
            configure                  - configure the build (should be run when starting new build)
            listRuns                   - lists all runs in the configuration
            removeRun                  - removes run from the configuration
            export                     - loads the export files to export directory
            duplicates                 - removes duplicates reads from export directory
            sort                       - sorts reads and moves them to bins in the buld directory (Parsed_...)
            allele                     - allele calling in the build directory
            snp                        - finds SNP and exports them to GFF format
            allClean                   - removes all data
            snpClean                   - removes snp data
            sortClean                  - removes sort data
            duplicatesClean            - removes duplicates data
            alleleClean                - removes allele data
    NOTE
            SNPCaller assumes that reference sequence file organism.fa exist in projectDir/genomes directory or that --refSequences parameter is provided
    EXAMPLES
            ./run.pl -r Test --projectDir=./TestData/TestProject -e ./TestData/GERALD -l 1,2 -g ./features/E_coli_gs.xml --refSequences=./TestData/genomes/
    Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for test E_coli data run Test lanes 1 and 2 (PE)
            ./runRNA.pl -r HUMAN_BRAIN -p ./TestData/RNA_BRAIN_22 -e ./TestData/BRAIN_22_GERALD/ -l 3 -g ./features/human_rna_size_22.xml -ref ./TestData/genomes/
    Run CASAVA_RNA sortExport.pl splitUnSorted.pl allele and SNPCaller for Human_UHR c22 data run TestRNA lanes 4 (SE)
            ./run.pl -r Test --projectDir=./TestData/TestProject -e ./TestData/GERALD -l 1,2 --readMode=single -g ./features/E_coli_gs.xml -ref ./TestData/genomes/
    Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for test E_coli data run Test lanes 1 amd 2 (SE)
            ./run.pl --projectDir=/data/CASAVA --runId=TestRun --exportDir=/data/date/Firecrest/Bustard/Gerald/ --lanes=1,2,3,4 -g ./features/E_coli_gs.xml
    Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for lanes 1 2 3 4 -o E_coli



GENERATED THESE DIRECTORIES:

[syoung@kronos casava-1.0.10.1]$ ll
total 1.1M
drwxrwx---+  7 syoung bioinfo 4.0K Aug  6 16:35 .
drwxrwx---+  8 syoung bioinfo  40K Aug  6 16:29 ..
-rw-rw----+  1 syoung bioinfo 121K Aug  6 16:35 CASAVA.log
drwxrwx---+  2 syoung bioinfo  105 Aug  6 16:29 conf
drwxrwx---+ 27 syoung bioinfo 4.0K Aug  6 16:29 export
drwxrwx---+  6 syoung bioinfo 4.0K Aug  6 16:29 html
drwxrwx---+ 27 syoung bioinfo 4.0K Aug  6 16:29 Parsed_06-08-09
drwxrwx---+  3 syoung bioinfo   17 Aug  6 16:29 stats
[syoung@kronos casava-1.0.10.1]$ 





1. CREATE tasks.*.txt FILE:


RUNNING INSTRUCTIONS
In order to make the build run.pl script should be used. The script controls parameters,
paths and configuration for appropriate sub scripts. To run.pl.pl you don't have to be
in the same directory where the script is located. run.pl will discover where default
configuration and library paths is. Html version of reports can be found in see html\Home.html.
Creating the build - one command:
./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1 -g ./conf/E_coli_gs.xml --refSequences=./TestData/TestPro\
ject/genomes/



/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--workflow --force

OK


    [06/08/09 16:36:08] Workflow ON
    [06/08/09 16:36:08] Runing [/nethome/syoung/base/apps/casava/1.0.10.1/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --applicationType=DNA --refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes --workflow --force] at 16_36_08_06_08_09
    [06/08/09 16:36:08] CHECK Directory structure                      [OK]
    [06/08/09 16:36:08] CHECK Reference sequence exists                [OK]
    [06/08/09 16:36:08] CHECK All input files exist                    [OK]
    [06/08/09 16:36:08] CHECK Creating/updating data directories       [IN-PROGRESS]
    [06/08/09 16:36:14] CHECK Creating/updating data directories       [DONE]
    [06/08/09 16:36:20] Task description in /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.16_36_08_06_08_09.txt.
    [06/08/09 16:36:20] Support for SGE (qsub) ON
    [06/08/09 16:36:20] Run on SGE node with X == number of SGE nodes:
    perl /home/syoung/base/apps/casava/1.0.10.1/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.16_36_08_06_08_09.txt -h kronos.ccs.miami.edu -p 8001 '--queue=isilon.q' --sge=X -s
    [06/08/09 16:36:20] /nethome/syoung/base/apps/casava/1.0.10.1/run.pl finished at 16_36_20_06_08_09


GENERATED A tasks.*.txt FILE

[syoung@kronos casava-1.0.10.1]$ ll
total 1.1M
drwxrwx---+  7 syoung bioinfo 4.0K Aug  6 16:35 .
drwxrwx---+  8 syoung bioinfo  40K Aug  6 16:29 ..
-rw-rw----+  1 syoung bioinfo 121K Aug  6 16:35 CASAVA.log
drwxrwx---+  2 syoung bioinfo  105 Aug  6 16:29 conf
drwxrwx---+ 27 syoung bioinfo 4.0K Aug  6 16:29 export
drwxrwx---+  6 syoung bioinfo 4.0K Aug  6 16:29 html
drwxrwx---+ 27 syoung bioinfo 4.0K Aug  6 16:29 Parsed_06-08-09
drwxrwx---+  3 syoung bioinfo   17 Aug  6 16:29 stats
-rw-rw----+  1 syoung bioinfo 724K Aug  6 16:33 tasks.16_36_08_06_08_09.txt
[syoung@kronos casava-1.0.10.1]$ 




3. LOAD DATA
---------


/nethome/syoung/base/apps/casava/1.0.10.1/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--target=export

OK

    [06/08/09 16:37:24] Workflow ON
    [06/08/09 16:37:24] Runing [/nethome/syoung/base/apps/casava/1.0.10.1/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --applicationType=DNA --refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes --target=export] at 16_37_24_06_08_09
    [06/08/09 16:37:24] CHECK Directory structure                      [OK]
    [06/08/09 16:37:24] CHECK Reference sequence exists                [OK]
    [06/08/09 16:37:24] CHECK All input files exist                    [OK]
    [06/08/09 16:37:24] CHECK Creating/updating data directories       [IN-PROGRESS]
    [06/08/09 16:37:30] CHECK Creating/updating data directories       [DONE]
    [06/08/09 16:37:32] Task description in /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.16_37_24_06_08_09.txt.
    [06/08/09 16:37:32] Support for SGE (qsub) ON
    [06/08/09 16:37:32] Run on SGE node with X == number of SGE nodes:
    perl /home/syoung/base/apps/casava/1.0.10.1/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.16_37_24_06_08_09.txt -h kronos.ccs.miami.edu -p 8001 '--queue=isilon.q' --sge=X -s
    [06/08/09 16:37:32] /nethome/syoung/base/apps/casava/1.0.10.1/run.pl finished at 16_37_32_06_08_09


GENERATED ANOTHER tasks.*.txt FILE:

[syoung@kronos casava-1.0.10.1]$ ll
    total 1.1M
    drwxrwx---+  7 syoung bioinfo 4.0K Aug  6 16:35 .
    drwxrwx---+  8 syoung bioinfo  40K Aug  6 16:29 ..
    -rw-rw----+  1 syoung bioinfo 121K Aug  6 16:35 CASAVA.log
    drwxrwx---+  2 syoung bioinfo  105 Aug  6 16:29 conf
    drwxrwx---+ 27 syoung bioinfo 4.0K Aug  6 16:29 export
    drwxrwx---+  6 syoung bioinfo 4.0K Aug  6 16:29 html
    drwxrwx---+ 27 syoung bioinfo 4.0K Aug  6 16:29 Parsed_06-08-09
    drwxrwx---+  3 syoung bioinfo   17 Aug  6 16:29 stats
    -rw-rw----+  1 syoung bioinfo 724K Aug  6 16:33 tasks.16_36_08_06_08_09.txt
    -rw-rw----+  1 syoung bioinfo 123K Aug  6 16:35 tasks.16_37_24_06_08_09.txt




1. COMMANDEER A NODE AND RUN CASAVA ON ALL CPUS


screen -S casava
msub -I -l nodes=1:ppn=8 -q gdebug

    qsub: waiting for job 68170.kronos.ccs.miami.edu to start
    qsub: job 68170.kronos.ccs.miami.edu ready

    DROPPED ME ONTO NODE c20



RUN ON 8 CPUS ON REMOTE HOST:



cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1


perl /home/syoung/base/apps/casava/1.0.10.1/bin/../TaskManager/runTasks.pl \
-t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.16_37_24_06_08_09.txt \
-h c21 \
--numberOfProcesses=8 \
--server \
&> runTasks.out


    server 1 c21 8002
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskServer.pl -p 8002 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031U\
    AAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.16_37_24_06_0\
    8_09.txt --sge=0 --queue=custom.q -h c21
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    
    ERROR: sortExport /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syou\
    ng/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/export/lanes/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/1/Reads.idx already \
    added to this build. at /home/syoung/base/apps/casava/1.0.10.1/bin/../lib/Illumina/Sequencing/Target.pm line 283.
    
    
    [06/08/09 17:03:46] Support for qsub OFF
    [06/08/09 17:03:46] Using port 8002 to set up server on host c21...
    [06/08/09 17:03:46] Server ready.  Waiting for connections . . .
    [06/08/09 17:03:46] Log saved every 1 tasks
    [06/08/09 17:03:47] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HW\
    I-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 \
    --target=check
    [06/08/09 17:03:47] ERROR EXIT_CODE(9):c21












    server 1 c21 8002
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskServer.pl -p 8002 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-
    EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.16_37_24_06_08_09.txt --sge=0 --queue=custom.q -h c21
    [06/08/09 16:45:21] Support for qsub OFF
    [06/08/09 16:45:21] Using port 8002 to set up server on host c21...
    [06/08/09 16:45:21] Server ready.  Waiting for connections . . . 
    [06/08/09 16:45:21] Log saved every 1 tasks
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    [06/08/09 16:45:22] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run1
    2/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 --target=check
    Warning: <a> element has non-unique value in 'name' key attribute: Lane1 at /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl line 149
    Warning: <a> element has non-unique value in 'name' key attribute: Lane2 at /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl line 149
    Warning: <a> element has non-unique value in 'name' key attribute: Lane5 at /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl line 149
    [06/08/09 16:45:25] perl /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl --projectDir=/p/NGS/syoung/base/pipelin
    e/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1
    
    
    server 1 c21 8002
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskServer.pl -p 8002 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1/tasks.16_37_24_06_08_09.txt --sge=0 --queue=custom.q -h c21
    [06/08/09 16:45:21] Support for qsub OFF
    [06/08/09 16:45:21] Using port 8002 to set up server on host c21...
    [06/08/09 16:45:21] Server ready.  Waiting for connections . . .
    [06/08/09 16:45:21] Log saved every 1 tasks
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    /home/syoung/base/apps/casava/1.0.10.1/TaskManager/taskClient.pl -h c21 -p 8002 -d 0
    [06/08/09 16:45:22] perl /home/syoung/base/apps/casava/1.0.10.1/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1 --target=check
    Warning: <a> element has non-unique value in 'name' key attribute: Lane1 at /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl line 149
    Warning: <a> element has non-unique value in 'name' key attribute: Lane2 at /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl line 149
    Warning: <a> element has non-unique value in 'name' key attribute: Lane5 at /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl line 149
    [06/08/09 16:45:25] perl /home/syoung/base/apps/casava/1.0.10.1/bin/copyPipelineData.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava-1.0.10.1
    









REMOVE DUPLICATES
-----------------

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava

/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava \
--target=duplicates \


s_1_genomesize.xml

(./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1 --lanes=2 --target=duplicates ./conf/E_coli_gs.xml)

    OK

    Task description in /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.15_21_35_06_08_09.txt.
    Run on SGE node with X == number of SGE nodes:perl /home/syoung/base/apps/casava/1.0.8/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.15_21_35_06_08_09.txt -h kronos.ccs.miami.edu -p 8001 '--queue=isilon.q' --sge=X -s







ERROR:

Could not find one of the export files
/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_1_?_export.txt
No such file or directory

PROBLEM

USED --lanes=1_1,1_2  INSTEAD OF --lanes=1,2

./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1,2 --target=export ./conf/E_coli_gs.xml --refSequences=./T\
estData/TestProject/genomes/


CREATE THE FINAL sort.txt FILES
-------------------------------

(./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1 --lanes=2 --target=sort ./conf/E_coli_gs.xml)

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava

/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava \
--target=sort \




cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava

perl /home/syoung/base/apps/casava/1.0.8/bin/../TaskManager/runTasks.pl \
-t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.14_36_50_06_08_09.txt \
-h c20 \
--numberOfProcesses=8 \
--server




or you can trigger each step manually.


Loading Data:

./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1,2 --target=export ./conf/E_coli_gs.xml --refSequences=./T\
estData/TestProject/genomes/

This produces sort_dup.txt, sort_anom_dup.txt and sort_orph_dup.txt
(all sorted into 1000k bins by their 5 most start position) in the Project directory
Do that for all exps. Once all lanes and/or exps are loaded remove the dups.


Removing Duplicates:

./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1 --lanes=2 --target=duplicates ./conf/E_coli_gs.xml

This produces sorted and duplicate removed files sort.txt, sort_anom.txt and sort_orph.txt
in each of the intermediate directories (project directory)

This produces the sorted and duplicate removed files sort.txt, sort_anom.txt and sort_orph.txt in each of the intermediate directories.
It also produces a summary file DupCount.txt in Project Directory


Producing the final sort.txt files:

./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1 --lanes=2 --target=sort ./conf/E_coli_gs.xml

The script will build in the final build directory a directory for each chromosome
it finds and then bin the reads into sort.txt files in 10000k chunks.

The sort.txt is ready to run the allele caller

ll

Allele Call instructions:

Runs allele caller on sort.txt files and produces sort.count files.
    Position Type

./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1,2 --target=allele ./conf/E_coli_gs.xml --refSequences=./T\
estData/TestProject/genomes/
SNP Call instructions:

Runs the SNP analisys on sort.count files. Produces one snp.txt file for each chmomosome.

./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1,2 --target=snp ./conf/E_coli_gs.xml --refSequences=./Test\
Data/TestProject/genomes/



RUNNING IN PARALLEL

CASAVA has build in parallel TaskManager (Firestarter). It allows to use all available computer resorces to make the build.

At the moment only support for machine with many processor is full automated
Running on multiprocessor machine:

If you provide --workflowAuto parameter CASAVA will generate task description file tasks.TIME.txt and use the TaskManager to run it.

./run.pl --runId=Test --projectDir=/home/username/TestData/TestProject --exportDir=/home/username/TestData/GERALD --lanes=1,2 --organism=E_coli --workflowA\
uto



Running on SGE:

1. Generate  ask description file myTasks.txt

./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1,2 --target=export ./conf/E_coli_gs.xml --refSequences=./T\
estData/TestProject/genomes/ --workflow --workflowFile=myTasks.txt

2. Use TaskManager (Firestarter) to run tasks from myTasks.txt

TaskManager/runTasks.pl -t myTasks.txt -h fragles -p 8001 -n 0 -s --sge=number_of_sge_nodes --queue=sge_queue_name
Monitoring TaskManager:

Current state of computation is stored i n tasks.TIME.txt.current.


TaskManager/monitor -t tasks.TIME.txt.current


EXAMPLES
        ./run.pl -r Test --projectDir=./TestData/TestProject -e ./TestData/GERALD -l 1,2 -g ./conf/E_coli_gs.xml --refSequences=./TestData/genomes/
Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for test E_coli data run Test lanes 1 and 2 (PE)

        ./runRNA.pl -r HUMAN_BRAIN -p ./TestData/RNA_BRAIN_22 -e ./TestData/BRAIN_22_GERALD/ -l 3 -g ./conf/human_rna_size_22.xml -ref ./TestData/genomes/
Run CASAVA_RNA sortExport.pl splitUnSorted.pl allele and SNPCaller for Human_UHR c22 data run TestRNA lanes 4 (SE)

        ./run.pl -r Test --projectDir=./TestData/TestProject -e ./TestData/GERALD -l 1,2 --readMode=single -g ./conf/E_coli_gs.xml -ref ./TestData/genomes/
Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for test E_coli data run Test lanes 1 amd 2 (SE)

        ./run.pl --projectDir=/data/CASAVA --runId=TestRun --exportDir=/data/date/Firecrest/Bustard/Gerald/ --lanes=1,2,3,4 -g ./conf/E_coli_gs.xml
Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for lanes 1 2 3 4 -o E_coli

        ./run.pl -r Test --projectDir=./TestData/TestProject -e ./TestData/GERALD -l 2 --readMode=single -g ./conf/E_coli_gs.xml --refSequences=./TestData/\
TestProject/genomes/
Run sortExport.pl rmDupFromSort.pl splitUnSorted.pl allele and SNPCaller for test E_coli data run Test lanes 2 (single-read)

        ./run.pl --runId=Test1 --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1,2 ./conf/E_coli_gs.xml --refSequences=./TestData\
/TestProject/genomes/
        ./run.pl --runId=Test2 --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=3 ./conf/E_coli_gs.xml --refSequences=./TestData/T\
estProject/genomes/
Run sortExport.pl rmDupFromSort.pl, splitUnSorted.pl,, alleleCaller and SNPCaller for test data lanes 1 2 and then add to the build lane 3.

        ./run.pl --projectDir=./TestData/TestProject --runId=Test1 --exportDir=./TestData/GERALD1 --lanes=1,2 --runId=Test2 --exportDir=./TestData/GERALD2 \
--lanes=3 ./conf/E_coli_gs.xml --refSequences=./TestData/TestProject/genomes/
Run sortExport.pl rmDupFromSort.pl, splitUnSorted.pl, alleleCaller and SNPCaller for test data run Test1 lanes 1 2 and Test2 lane 3.

        ./run.pl --runId=Test --projectDir=/data/ --exportDir=/data/date/Firecrest/Bustard/Gerald/ --targets=export --targets=duplicates --targets=sort --t\
argets=allele  --lanes=1,2,3 ./conf/E_coli_gs.xml --refSequences=./TestData/TestProject/genomes/
Run sortExport.pl rmDupFromSort.pl, splitUnSorted.pl,, and alleleCaller for lanes 1 2 3.

        ./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=3 --targets=allClean ./conf/E_coli_gs.xml --refSequ\
ences=./TestData/TestProject/genomes/
Remove all data in project directory and in build directory (only current build will be removed).

        ./run.pl --runId=Test --projectDir=./TestData/TestProject --exportDir=./TestData/GERALD --lanes=1,2 --workflowAuto ./conf/E_coli_gs.xml --refSequen\
ces=./TestData/TestProject/genomes/
Run sortExport.pl rmDupFromSort.pl, splitUnSorted.pl, alleleCaller and SNPCaller  for test data lanes 1 and 2 on all available processors on current machin\
e.




COPYRIGHT AND LICENCE

Copyright (c) 2007,2008 Illumina
This source file is covered by the "Illumina Public Source License"
agreement and bound by the terms therein.













CONFIGURE BUILD:

/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 \
targets=configure


    Workflow ON
    Runing [/nethome/syoung/base/apps/casava/1.0.8/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia
    3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/p/NGS/syoung/base/pipeline/run1
    2/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1
    _genomesize.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.
    4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --applicationType=DNA --refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes --verbose=2 targets=configure] at 14_36_50_06_08_09
    CHECK Directory structure                      [OK]
    CHECK Reference sequence exists                [OK]
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=check
    CHECK All input files exist                    [OK]
    CHECK Creating/updating data directories       [IN-PROGRESS]
    CHECK Creating/updating data directories       [DONE]
    Task description in /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.14_36_50_06_08_09.txt.
    Run on SGE node with X == number of SGE nodes:
    perl /home/syoung/base/apps/casava/1.0.8/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_
    Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.14_36_50_06_08_09.txt -h c20 -p 8001 '--queue=isilon.q' --sge=X -s
    /nethome/syoung/base/apps/casava/1.0.8/run.pl finished at 14_37_24_06_08_09


RUN runTasks.pl


perl /home/syoung/base/apps/casava/1.0.8/bin/../TaskManager/runTasks.pl \
-t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.14_36_50_06_08_09.txt \
-h C19 \
--numberOfProcesses=8 \
--server

    ...
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=check

    ERROR: sortExport /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/export/lanes/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/1/Reads.idx already added to this build. at /home/syoung/base/apps/casava/1.0.8/bin/../lib/Illumina/Sequencing/Target.pm line 283.


REMOVED Reads.idx FILE:

rm -fr  /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/export/lanes/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/1/Reads.idx





/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
ll--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 --force --workflowAuto


MAKE CLEAN FIRST

/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 --targets=allClean




ERROR:


    Running perl /home/syoung/base/apps/casava/1.0.8/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.14_15_04_06_08_09.txt -h c20 -p 8001 -n 8 -s
    server 1 8001
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskServer.pl -p 8001 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.14_15_04_06_08_09.txt --sge=0 --queue=all.q
    Duplicate specification "help|h" for option "h"
    Support for qsub OFF
    Using port 8001 to set up server on host c20...
    Server ready.  Waiting for connections . . . 
    Log saved every 1 tasks
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c20 -d 0
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=check
    ERROR: sortExport /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/B
    ustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/export/lanes/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/1/Reads.idx already added to this build. at /home/syoung/base/apps/casava/1.0.8/bin/../lib/Illumina/Sequencing/Target.pm line 283.
    ERROR: sortExport /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/B
    ustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/export/lanes/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/2/Reads.idx already added to this build. at /home/syoung/base/apps/casava/1.0.8/bin/../lib/Illumina/Sequencing/Target.pm line 283.
    ERROR EXIT_CODE(9):c20
    /nethome/syoung/base/apps/casava/1.0.8/run.pl finished at 14_15_32_06_08_09
    [syoung@c20 ~]$ Warning: <a> element has non-unique value in 'name' key attribute: Lane1 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Warning: <a> element has non-unique value in 'name' key attribute: Lane2 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Warning: <a> element has non-unique value in 'name' key attribute: Lane5 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Use of uninitialized value in string eq at /home/syoung/base/apps/casava/1.0.8/bin/../lib/Illumina/Sequencing/DNASeqLib.pm line 727.






cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/

/nethome/syoung/base/apps/casava/1.0.8/TaskManager/runTasks.pl \
--host=c20 \
--tasksFile=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.txt \
--numberOfProcesses=8 \
--server


/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 \
--targets=snps \
&> makeClean.outerr


THE OUTPUT makeClean.outerr FILE CONTAINS DETAILS;

    Workflow OFF
    ----------RUN_22_49_23_22_07_09-----------------
    targets         = configure,export,duplicates,sort,allele,snp
    target          = all
    _runId          = 22_49_23_22_07_09
    argv            = --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-\
    2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_303\
    1UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml --lanes=1,2 --pro\
    jectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4\
    .0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --applicationType=DNA --refSequences=/p/NG\
    S/syoung/base/pipeline/human-chromosomes --verbose=2
    startTime               = 22_49_23_22_07_09
    currentStatus           = export
    force           = 0
    ------------------------------------------------
    
    ERROR: previous run [22_49_23_22_07_09] didn't finish
    To continue:
    /nethome/syoung/base/apps/casava/1.0.8/run.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=continue
    
    
    To remove ALL data and restart:
    /nethome/syoung/base/apps/casava/1.0.8/run.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data\
    /C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=allClean
    /nethome/syoung/base/apps/casava/1.0.8/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/\
    C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.\
    0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_geno\
    mesize.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_\
    12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --applicationType=DNA \
    --refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes --verbose=2
    To ignore this warning:
    /nethome/syoung/base/apps/casava/1.0.8/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/\
    C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.\
    0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_geno\
    mesize.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_\
    12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --applicationType=DNA \
    --refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes --verbose=2 --force





/nethome/syoung/base/apps/casava/1.0.8/TaskManager/runTasks.pl \
--host=c20 \
--tasksFile=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto/tasks.22_43_12_22_07_09.txt \
--numberOfProcesses=8 \
--server


FAILED WITH THIS OUTPUT:

    server 1 8002
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskServer.pl -p 8002 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto/tasks.22_43_12_22_07_09.txt --sge=0 --queue=all.q
    Duplicate specification "help|h" for option "h"
    Support for qsub OFF
    Using port 8002 to set up server on host c20...
    Server ready.  Waiting for connections . . . 
    Log saved every 1 tasks
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8002 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8002 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8002 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8002 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8002 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8002 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8002 -t c20 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8002 -t c20 -d 0
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto --target=check
    ERROR: sortExport /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto/export/lanes/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/1/Reads.idx already added to this build. at /home/syoung/base/apps/casava/1.0.8/bin/../lib/Illumina/Sequencing/Target.pm line 283.
    ERROR: sortExport /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto/export/lanes/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/2/Reads.idx already added to this build. at /home/syoung/base/apps/casava/1.0.8/bin/../lib/Illumina/Sequencing/Target.pm line 283.
    ERROR EXIT_CODE(9):c20
    [syoung@c20 casavaAuto]$ Warning: <a> element has non-unique value in 'name' key attribute: Lane1 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Warning: <a> element has non-unique value in 'name' key attribute: Lane2 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Warning: <a> element has non-unique value in 'name' key attribute: Lane5 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Use of uninitialized value in string eq at /home/syoung/base/apps/casava/1.0.8/bin/../lib/Illumina/Sequencing/DNASeqLib.pm line 727.
    cd ..




USING casavaAUTO (NB: RUN AS DNA)


cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto



GENERATED casavaAuto TASK FILE :


/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto/tasks.22_43_12_22_07_09.txt


WITH THIS COMMAND:



/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 \
--workflowAuto










</entry>



<entry [Wed Jul 22 22:04:06 EDT 2009] COMMANDEER A NODE AND RUN CASAVA ON ALL CPUS>



msub -I -l nodes=1:ppn=8 -q gdebug
qsub: waiting for job 65276.kronos.ccs.miami.edu to start
qsub: job 65276.kronos.ccs.miami.edu ready

WHICH DROPPED ME ONTO NODE 26:

[syoung@c26 ~]$ qstat -f 65276
[syoung@c26 ~]$ screen -S casava
[syoung@c26 ~]$ top


mkdir /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto


/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=RNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 \
--workflowAuto



FAILED RUNNING:

perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto --target=check



FULL OUTPUT:

    
    CHECK Directory structure                      [OK]
    CHECK Reference sequence exists                [OK]
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipel
    ine/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto --target=check
    CHECK All input files exist                    [OK]
    CHECK Creating/updating data directories       [IN-PROGRESS]
    CHECK Creating/updating data directories       [DONE]
    Running perl /home/syoung/base/apps/casava/1.0.8/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung
    /base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-
    2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto/tasks.22_43_12_22_07_09.txt -h c26 -p 8001 -n 8 -s
    server 1 8001
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskServer.pl -p 8001 -t /p/NGS/syoung/base/pipe
    line/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoun
    g/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto/tasks.22_43_12_22_07_09.txt --sge=0 --queue=all.q
    Duplicate specification "help|h" for option "h"
    Support for qsub OFF
    Using port 8001 to set up server on host c26...
    Server ready.  Waiting for connections . . . 
    Log saved every 1 tasks
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c26 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c26 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c26 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c26 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c26 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c26 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c26 -d 0
    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl -p 8001 -t c26 -d 0
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaAuto --target=check
    Warning: <a> element has non-unique value in 'name' key attribute: Lane1 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Warning: <a> element has non-unique value in 'name' key attribute: Lane2 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Warning: <a> element has non-unique value in 'name' key attribute: Lane5 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Use of uninitialized value in string eq at /home/syoung/base/apps/casava/1.0.8/bin/../lib/Illumina/Sequencing/DNASeqLib.pm line 727.
    ERROR EXIT_CODE(2):c26







</entry>



<entry [Wed Jul 22 16:05:09 EDT 2009] RUN CASAVA ON LANES 1 AND 2 OF RUN 12>





RUN MANUALLY ON node 26:



cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava

screen -S casava

/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 \
&> casava.outerr



    RUNNING
    Wed Jul 22 23:04:06 EDT 2009

    
    [syoung@c26 casava]$ tail -f casava.outerr 
    CHECK Directory structure                      [OK]
    CHECK Reference sequence exists                [OK]
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=check
    CHECK All input files exist                    [OK]
    CHECK Creating/updating data directories       [IN-PROGRESS]
    CHECK Creating/updating data directories       [DONE]
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=check
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --lane=1 --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --target=split

    
FAILED WITH THIS OUTPUT:    

tail casava.outerr 

    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=removeTemps
    perl /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava
    Warning: <a> element has non-unique value in 'name' key attribute: Lane1 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Warning: <a> element has non-unique value in 'name' key attribute: Lane2 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Warning: <a> element has non-unique value in 'name' key attribute: Lane5 at /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl line 142
    Use of uninitialized value in string eq at /home/syoung/base/apps/casava/1.0.8/bin/../lib/Illumina/Sequencing/DNASeqLib.pm line 727.
    ERROR: executeCmd() /home/syoung/base/apps/casava/1.0.8/bin/runSortExport.pl EXIT_CODE(2): perl /home/syoung/base/apps/casava/1.0.8/bin/copyPipelineData.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava  Inappropriate ioctl for device
    ERROR NUM(25): perl /home/syoung/base/apps/casava/1.0.8/bin/runSortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava
    To reproduce failed target type:
    /nethome/syoung/base/apps/casava/1.0.8/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --applicationType=DNA --refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes --verbose=2 --targets=export

    

    
TRY AGAIN WITH targets=configure:




mkdir /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaConfig

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaConfig

screen -S casavaConfig

/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaConfig \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 \
--targets=configure \
&> casavaConfig.outerr
    
    

    RUNNING ON NODE 26:
    Thu Jul 23 00:59:33 EDT 2009

     
THIS RAN FOR A FEW MINUTES AND GENERATED THE CONF FILE:

cat conf/run.conf.xml
<opt>
  <run id="090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3" exportRunId="4" fixId="none" machine="HWI-EAS185">
    <set setid="1" gerald="/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-\
07-2009_syoung" readMode="paired">
      <lanes>1</lanes>
      <lanes>2</lanes>
    </set>
  </run>
</opt>

AND
head conf/project.conf

# This section contains CASAVA parameters for PROJECT_CONFIGURATION

[PROJECT_CONFIGURATION]
QVCutoff            6
QVCutoffSingle      10
appVersion          1.0.8 : 1.6.2.9
applicationType     DNA
binSizeBuild        10000000


RERAN WITHOUT THE targets=configure OPTION ON NODE 26:


cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaConfig

screen -S casavaConfig

/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaConfig \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 \
&> casavaConfig2.outerr
    

RUNNING ON N26 @ Tue Jul 28 12:58:19 EDT 2009:

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaConfig

tail -f casavaConfig2.outerr

    Workflow OFF
    Runing [/nethome/syoung/base/apps/casava/1.0.8/run.pl --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml --lanes=1,2 --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaConfig --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --applicationType=DNA --refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes --verbose=2] at 12_56_39_28_07_09
    CHECK Directory structure                      [OK]
    CHECK Reference sequence exists                [OK]
    perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casavaConfig --target=check
    CHECK All input files exist                    [OK]
    CHECK Creating/updating data directories       [IN-PROGRESS]

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    













1. SET RUN COMMAND, DO WITH --workflow OPTION TO GET SGE COMMAND:

mkdir /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava

rm -fr casava.sh
emacs casava.sh
#!/bin/sh

#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

echo `hostname`;

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava

/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 \
--force

#### END

qsub -q psmall casava.sh ; date
        
    65274.kronos.ccs.miami.edu
    Wed Jul 22 22:17:35 EDT 2009

qstat

    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    65274.kronos              casava.sh        syoung                 0 R psmall      
    


    
    
RUN CASAVA WITH SGE (DIDN'T WORK BECAUSE IT USES SGE NOT PBS):
-------------------------------------------------------------


/nethome/syoung/base/apps/casava/1.0.8/run.pl \
--exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung \
--genomeSize=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_genomesize.xml \
--lanes=1,2 \
--projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava \
--runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--applicationType=DNA \
--refSequences=/p/NGS/syoung/base/pipeline/human-chromosomes \
--verbose=2 \
--workflow





THIS IS THE STDOUT OUTPUT:

CHECK Directory structure                      [OK]
CHECK Reference sequence exists                [OK]
perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=check
CHECK All input files exist                    [OK]
CHECK Creating/updating data directories       [IN-PROGRESS]
CHECK Creating/updating data directories       [DONE]
Task description in /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.
Run on SGE node with X == number of SGE nodes:

perl /home/syoung/base/apps/casava/1.0.8/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt -h kronos.ccs.miami.edu -p 8001 '--queue=isilon.q' --sge=X -s



AND THESE FILES WERE CREATED IN THE casava DIRECTORY:

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava

[syoung@kronos casava]$ ll
total 3.8M
drwxrwx---+  7 syoung bioinfo  109 Jul 22 18:46 .
drwxrwx---+  5 syoung bioinfo  40K Jul 22 18:32 ..
drwxrwx---+  2 syoung bioinfo  105 Jul 22 18:45 conf
drwxrwx---+ 27 syoung bioinfo 4.0K Jul 22 18:45 export
drwxrwx---+  6 syoung bioinfo 4.0K Jul 22 18:46 html
drwxrwx---+ 27 syoung bioinfo 4.0K Jul 22 18:45 Parsed_22-07-09
drwxrwx---+  3 syoung bioinfo   17 Jul 22 18:45 stats
-rw-rw----+  1 syoung bioinfo 3.7M Jul 22 18:46 tasks.18_47_52_22_07_09.txt

head tasks.18_47_52_22_07_09.txt
    SYNCH_EXPORT1   0       task    export1         waiting N/A             perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EA    S185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --target=check
    EXP_LANE_0      0       task    export2         waiting SYNCH_EXPORT1   perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EA    S185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508    _HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --lane=1 --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --tar    get=split
    EXP_LANE_1      0       task    export2         waiting SYNCH_EXPORT1   perl /home/syoung/base/apps/casava/1.0.8/bin/sortExport.pl --projectDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EA    S185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava --exportDir=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508    _HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung --lane=2 --runId=090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 --tar    get=split
    ...



2. SET SGE COMMAND:

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava

screen -S casava1

perl /home/syoung/base/apps/casava/1.0.8/bin/../TaskManager/runTasks.pl -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt -h kronos.ccs.miami.edu -p 8001 '--queue=psmall' --sge=32 -s





/home/syoung/base/apps/casava/1.0.8/TaskManager/taskServer.pl -p 8001 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt --sge=32 --queue=psmall
Duplicate specification "help|h" for option "h"
Support for qsub ON
Using port 8001 to set up server on host kronos.ccs.miami.edu...
Server ready.  Waiting for connections . . . 
Log saved every 1 tasks
qstat: invalid option -- g
usage: 
qstat [-f] [-1] [-W site_specific] [ job_identifier... | destination... ]
qstat [-a|-i|-r|-e] [-u user] [-n [-1]] [-s] [-G|-M] [-R] [job_id... | destination...]
qstat -Q [-f [-1]] [-W site_specific] [ destination... ]
qstat -q [-G|-M] [ destination... ]
qstat -B [-f [-1]] [-W site_specific] [ server_name... ]
Error - failed to submit qsub -cwd -t 1-1 -q 'psmall' -o /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.out.txt -e /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.err.txt -S /usr/bin/perl /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl --type=sge -p 8001 -t kronos.ccs.miami.edu -d 1 
 Respond = []


... LOOKS LIKE A DIFFERENCE BETWEEN SGE AND PBS QSTAT.

SGE QSTAT IS AS FOLLOWS:

The lookupQueueState subroutine is of most importance since it generates information regarding the current status of resources within the cluster. It starts by reporting the current status of the queue parsing the output generated by the $qstat -f | grep < name of the queue > SGE command. By default, all queues are able to receive and run jobs and therefore, the GlueCEStateStatus variable of the hash datastructure is filled with the Production string. However, If the queue is locally disabled, the Draining status is assigned to the GlueCEStateStatus. Other important variables such as the number of waiting jobs, number of running jobs, number of maximum running jobs, number of maximum total jobs, number of free CPUs or total number of CPUs are obtained within the same subroutine using the same previous procedures, either parsing the $qstat -s p -q < name of the queue > output or the $qstat -g c output.


CHECK FOR 'qstat -g' ENTRY IN CASAVA:

cd /nethome/syoung/base/apps/casava/1.0.8

[syoung@kronos 1.0.8]$ grep -nR "qstat -g" *
lib/Illumina/Common/SGE.pm:193:         system("qstat -g c");
lib/Illumina/Common/SGE.pm:206:=head1 The procedure runs the qstat -g c.
lib/Illumina/Common/SGE.pm:212:The procedure runs the qstat -g c and stores result in hash map.



SOLUTION:

COMMENT OUT LINE 193 IN

lib/Illumina/Common/SGE.pm:193:         system("qstat -g c");


emacs /nethome/syoung/base/apps/casava/1.0.8/lib/Illumina/Common/SGE.pm

    OK




TRIED AGAIN TO START CASAVA:

server 1 8001
/home/syoung/base/apps/casava/1.0.8/TaskManager/taskServer.pl -p 8001 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt --sge=32 --queue=psmall
Duplicate specification "help|h" for option "h"
Support for qsub ON
Using port 8001 to set up server on host kronos.ccs.miami.edu...
Server ready.  Waiting for connections . . . 
Log saved every 1 tasks
Error - failed to submit qsub -cwd -t 1-1 -q 'psmall' -o /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0
_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.out.txt -e /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4
.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.err.txt -S /usr/bin/perl /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl --type=sge -p 8001 -t kronos.ccs.miami.edu -d 1 


PROBLEM

-cwd OPTION NOT AVAILABLE ON PBS. THIS IS THE ERROR WHEN SUBMITTING THE qsub MANUALLY:

qsub: illegal -c value


SOLUTION:

REMOVE -cwd OPTION

[syoung@kronos 1.0.8]$ grep -nR cwd *
lib/Illumina/Common/SGE.pm:128:                 "qsub -cwd -t 1-%d $queueparam"
lib/Illumina/Common/SGE.pm~:128:                        "qsub -cwd -t 1-%d $queueparam"
[syoung@kronos 1.0.8]$ 

emacs /nethome/syoung/base/apps/casava/1.0.8/lib/Illumina/Common/SGE.pm

LINE 128:
#                       "qsub -cwd -t 1-%d $queueparam"                                   
                        "qsub -t 1-%d $queueparam"
     


RERUN AGAIN, GET 'failed to submit' qsub:



    /home/syoung/base/apps/casava/1.0.8/TaskManager/taskServer.pl -p 8001 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt --sge=32 --queue=psmall
    Duplicate specification "help|h" for option "h"
    Support for qsub ON
    Using port 8001 to set up server on host kronos.ccs.miami.edu...
    Server ready.  Waiting for connections . . . 
    Log saved every 1 tasks
    Error - failed to submit qsub -t 1-1 -q 'psmall' -o /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-0
    7-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.out.txt -e /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12
    -07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.err.txt -S /usr/bin/perl /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl --type=sge -p 8001 -t kronos.ccs.miami.edu -d 1 
     Respond = []


RUN MANUALLY TO GET ERRORS:

qsub -t 1-1 -q 'psmall' -o /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.out.txt -e /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.err.txt -S /usr/bin/perl /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl --type=sge -p 8001 -t kronos.ccs.miami.edu -d 1 



qsub: illegal -p value
qsub: illegal -t value (must be 1 through 99999)
qsub: cannot chdir to '1' errno: 2 (No such file or directory)


SOLUTION

REMOVE OPTION -p
# CHANGE OPTION -t TO A SINGLE INTEGER
REMOVE OPTION -t (BOTH FOR TASKS AND FOR HOSTNAME)
REMOVE OPTION -d
REMOVE OPTION --type

emacs /nethome/syoung/base/apps/casava/1.0.8/lib/Illumina/Common/SGE.pm

LINE 128:
#                       "qsub -cwd -t 1-%d $queueparam"                                                                      "qsub $queueparam"
                          . "-o $errorPath.out.txt "
                          . "-e $errorPath.err.txt "
#                         . "-S /usr/bin/perl $FindBin::Bin/taskClient.pl"
                          . "-S /usr/bin/perl $FindBin::Bin/taskClient.pl",
#                         . " --type=sge -p $port -t $hostname -d 1",  


RERAN AGAIN BUT AGAIN GOT 'failed to submit' ERROR:

qsub -q 'psmall' -o /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.out.txt -e /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.err.txt -S /usr/bin/perl /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl


emacs tasks.18_47_52_22_07_09.txt.err.txt                                                                                                         
    Bareword found where operator expected at - line 1, near "/var/spool"
            (Missing operator before pool?)
    Bareword found where operator expected at - line 1, near "65259.krono"
            (Missing operator before krono?)
    syntax error at - line 1, near "/var/spool"
    Execution of - aborted due to compilation errors.




    server 1 8001/home/syoung/base/apps/casava/1.0.8/TaskManager/taskServer.pl -p 8001 -t /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt --sge=32 --queue=psmall
    Duplicate specification "help|h" for option "h"
    Sup for qsub ON
    Using port 8001 to set up server on host kronos.ccs.miami.edu...
    Server ready.  Waiting for connections . . . 
    Log saved every 1 tasks
    65258.kronos.ccs.miami.edu
    Job Id: 65258.kronos.ccs.miami.edu
        Job_Name = taskClient.pl
        Job_Owner = syoung@kronos.ccs.miami.edu
        job_state = Q
        queue = psmall
        server = kronos.ccs.miami.edu
        Checkpoint = u
        ctime = Wed Jul 22 20:37:15 2009
        Error_Path = kronos.ccs.miami.edu:/p/NGS/syoung/base/pipeline/run1
            2/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecr
            est1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07
            -2009_syoung/casava/tasks.18_47_52_22_07_09.txt.err.txt
        Hold_Types = n
        Join_Path = n
        Keep_Files = n
        Mail_Points = a
        mtime = Wed Jul 22 20:37:15 2009
        Output_Path = kronos.ccs.miami.edu:/p/NGS/syoung/base/pipeline/run
            12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firec
            rest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-0
            7-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.out.txt
        Priority = 0
        qtime = Wed Jul 22 20:37:15 2009
        Rerunable = True
        Shell_Path_List = /usr/bin/perl
        Variable_List = PBS_O_HOME=/nethome/syoung,PBS_O_LANG=en_US.UTF-8,
            PBS_O_LOGNAME=syoung,
            PBS_O_PATH=/sw/bin:/nethome/syoung/base/bin:/usr/X11R6/bin:/nethome/s
            young/base/bin/utils:/home/syoung/base/bin/nextgen:/home/syoung/base/a
            pps/amos/bin:/usr/local/qt/bin:/home/apps/alta-cyclic/0.1.0/external.p
            rograms/libsvm-2.86:/home/apps/alta-cyclic/0.1.0/blat/bin/i386:/home/a
            pps/alta-cyclic/0.1.0/perlmods/lib64/perl5/site_perl/5.8.8/x86_64-linu
            x-thread-multi/auto:/home/apps/alta-cyclic/0.1.0/perlexternal:/home/bi
            oinfo/apps/ngs/bin/nextgen:/home/bioinfo/apps/ngs/bin/exome:/home/bioi
            nfo/apps/ngs/bin/utils:/home/bioinfo/apps/ngs/bin:/usr/local/bin:/bin:
            /usr/bin:/usr/lpp/mmfs/bin:/usr/lpp/mmfs/bin,
            PBS_O_MAIL=/var/spool/mail/syoung,PBS_O_SHELL=/bin/bash,
            PBS_SERVER=kronos.ccs.miami.edu,PBS_O_HOST=kronos.ccs.miami.edu,
            PBS_O_WORKDIR=/p/NGS/syoung/base/pipeline/run12/1.4.0/090508_
            HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-
            2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/ca
            sava,PBS_O_QUEUE=psmall
        etime = Wed Jul 22 20:37:15 2009
        submit_args = -q psmall -o /p/NGS/syoung/base/pipeline/run12/1.4.0
            /090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.
            0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_s
            young/casava/tasks.18_47_52_22_07_09.txt.out.txt -e /p/NGS/syo
            ung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_J
            ia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-20
            09_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.
            err.txt -S /usr/bin/perl /home/syoung/base/apps/casava/1.0.8/TaskManag
            er/taskClient.pl 
    Error - failed to submit qsub -q 'psmall' -o /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.out.txt -e /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.err.txt -S /usr/bin/perl /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl 
     Respond = [65258.kronos.ccs.miami.edu



OUTPUT FILE IS EMPTY:

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava
ll tasks.18_47_52_22_07_09.txt.out.txt



COULD BE -S OPTI0N, TRY WITHOUT:


qsub -q 'psmall' -o /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.out.txt -e /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.err.txt -S /usr/bin/perl /home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl



qsub -q 'psmall' \
-o /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.out.txt \
-e /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/casava/tasks.18_47_52_22_07_09.txt.err.txt \
/home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl



Warn: c29 couldn't connect to localhost:2345 - no socket Connection refused


THIS IS THE OFFENDING LINE IN

/home/syoung/base/apps/casava/1.0.8/TaskManager/taskClient.pl

LINE 48:

$port = 2345        unless $port;


CHECK WHAT PORT PBS IS RUNNING ON

[syoung@kronos casava]$ ps aux | grep pbs
syoung    1309  0.0  0.0  61156   712 pts/43   S+   20:52   0:00 grep pbs
root      4624  0.0  0.0  58904  6044 ?        Ss   Jul17   3:38 /usr/local/sbin/pbs_server


CHANGED TO 8001:


Warn: c29 couldn't connect to localhost:8001 - no socket Connection refused


BUT STILL GET SAME ERROR.













NOTES ON qstat
--------------

http://gridengine.sunsource.net/nonav/source/browse/~checkout~/gridengine/doc/htmlman/htmlman1/qstat.html

    -g {c|d|t}[+]
          The  -g  option  allows  for  controlling  grouping  of
          displayed objects.

          With -g c a cluster queue summary  is  displayed.  Find
          more information in the section OUTPUT FORMATS.

          With -g d array jobs are displayed verbosely in  a  one
          line  per  job task fashion. By default, array jobs are
          grouped and all tasks with the same status (for pending
          tasks  only)  are displayed in a single line. The array
          job task id range field in the output (see section OUT-
          PUT FORMATS) specifies the corresponding set of tasks.

          With -g t parallel jobs are displayed  verbosely  in  a
          one  line  per  parallel job task fashion. By  default,
          parallel job tasks are displayed in a single line. Also
          with  -g t option the function of each parallel task is
          displayed rather than the jobs slot amount (see section
          OUTPUT FORMATS).



"qstat -g c" returns:
	
	CLUSTER QUEUE                   CQLOAD   USED  AVAIL  
	TOTAL aoACDS  cdsuE  
	--------------------------------------------------------
	--------------------
	---
	all.q                             -NA-      0      0    
	  4      0      4 
	
	
	"qstat -f" returns:
	
	queuename                      qtype used/tot. load_avg 
	arch          states
	--------------------------------------------------------
	--------------------
	all.q at compute-0-0.local        BIP   0/4       -NA-     
	lx26-x86      au
	
	########################################################
	####################
	 - PENDING JOBS - PENDING JOBS - PENDING JOBS - PENDING 
	JOBS - PENDING JOBS 
	########################################################
	####################
	      8 0.55500 sleep.sh   jlforrest    qw    
	07/21/2007 10:37:52     1
	
	
	The job sitting in the queue is the one Jon attempted 
	to launch before he went out of town last week.  Let me 
	know if anything seems out of the ordinary with this, 
	otherwise I'm sure Jon will check out the previous 
	suggestions when he gets back and we'll get back to you












Running CASAVA on SGE
CASAVA can be run in multiple modes: single processor, multiple processors
on one machine, multiple-processor on multiple machines and on a Sun Grid
Engine cluster.
To run CASAVA on a multiple processor machine or SGE cluster:
1. Run the following command:
run.pl -p /Human/ --workflow
After up to 10 minutes this will produce something like this:

perl /opt/GOAT/CASAVA_1_0/TaskManager/runTasks.pl -t /Human/tasks.DATE.txt -h hostname.domainname -p 8001 --sge=X -s

2. Copy the result.

3. Add “--queue=custom.q” to specify the queue name of the cluster. This
defaults to isilon.q

4. Modify --sge=X to --sge=100 for a slots cpu (maximum 100 cpu will be
used).

5. Run the command:
perl /opt/GOAT/CASAVA_1_0/TaskManager/runTasks.pl -t /Human/tasks.DATE.txt -h hostname.domainname -p 8001 --sge=100 -s
After a few minutes you should be able to see sub-command being
executed.

6. You can monitor progress and errors on SGE by typing:
/opt/GOAT/CASAVA_1_0/TaskManager/monitor.pl -t tasks.DATE.txt
The results will be saved in the results directory; for a description, see
CASAVA Output Files on page 103.


NOTE

Configuring Multiple Runs
There are two methods to add multiple runs:
?? Command line method.
Run the command as in Configuring One Run, but then list all runs,
export directories, and lanes, which would look like this:
run.pl -p projectDir -t configure
-r RunId1 -e exportDir1 -l laneList1
-r RunId2 -e exportDir2 -l laneList2 ...
-r RunIdn -e exportDirn -l laneListn
Where RunId, exportDir, and laneList are respectively the run id, path to
the export file from the run, and comma separated list of lanes from the
run.


If you want to add export files from one run but in two (or
more) directories, list them twice (or more) with identical run
ID. For example:
run.pl -p projectDir -t configure -r
RunIdRun1 -e exportDir1Run1 -l laneList1Run1
-r RunIdRun1 -e exportDir2Run1 -l
laneList2Run1


?? Xml file edition method.
Instead of typing multiple run ids and paths on the command line you
can modify the run configuration file (run.conf.xml):
a. Go to /Human/conf/run.conf.xml.
b. Add appropriate entries to the run.conf.xml file.
c. Then run the configuration again by executing:
run.pl -p /Human/ -t configure




Browse Configuration
You should be able to see the build web page in projectDir/html. Open
home.html and look for all runs in the list.
In order to list all runs and lanes you can also execute
run.pl -p /Human/ -t listRuns
If there are no problems then go to the next step Running CASAVA on SGE.




NOTES

--genomeSize OPTION REFERS TO s_1_genomesize.xml, s_2_genomesize.xml (IDENTICAL) FILES FOUND IN GERALD DIR:

    <SequenceSizes>
    <chr10.fa>135374737</chr10.fa>
    <chr11.fa>134452384</chr11.fa>
    <chr12.fa>132289534</chr12.fa>
    <chr13.fa>114127980</chr13.fa>
    <chr14.fa>106360585</chr14.fa>
    <chr15.fa>100338915</chr15.fa>
    <chr16.fa>88822254</chr16.fa>
    <chr17.fa>78654742</chr17.fa>
    <chr18.fa>76117153</chr18.fa>
    <chr19.fa>63806651</chr19.fa>
    <chr6.fa>170896992</chr6.fa>
    <chr5.fa>180837866</chr5.fa>
    <chr4.fa>191263063</chr4.fa>
    <chr3.fa>199446827</chr3.fa>
    <chr2.fa>242751149</chr2.fa>
    <chr1.fa>247199719</chr1.fa>
    <chr7.fa>158821424</chr7.fa>
    <chr8.fa>146274826</chr8.fa>
    <chr9.fa>140273252</chr9.fa>
    <chr21.fa>46944323</chr21.fa>
    <chr20.fa>62435964</chr20.fa>
    <chr22.fa>49591432</chr22.fa>
    <chrX.fa>154913754</chrX.fa>



</entry>



<entry [Wed Jul 22 16:05:09 EDT 2009] RERUN MAQ mapmerge ON RUN 12 AND RUN 15 (LANES 1 AND 2)>



MISSING out.map FILES IN SUBFOLDERS ARE THE CAUSE OF THE FAILURE OF MAQ mapmerge




time /nethome/syoung/base/apps/maq/0.7.1/maq match /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/out.map /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/run12+15-s_1_1.3.bfq /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/run12+15-s_1_2.3.bfq


-- maq-0.7.1
[ma_load_reads] loading reads...
[ma_load_reads] set length of the first read as 52.
[ma_load_reads] set length of the second read as 52.
[ma_load_reads] 1000000*2 reads loaded.
[ma_longread2read] encoding reads... 2000000 sequences processed.
[ma_match] set the minimum insert size as 53.
[match_core] Total length of the reference: 3080419480
[match_core] round 1/3...
[match_core] making index...
[match_index_sorted] no reasonable reads are available. Exit!
Command exited with non-zero status 1
10.54user 1.69system 0:06.90elapsed 177%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (0major+150742minor)pagefaults 0swaps


MAY BE DUE TO READS OF DIFFERENT LENGTHS...

CREATED FileTools::readLengths TO CHECK:

    1. READ LENGTHS ARE UNIFORM
    2. SEQUENCE AND QUALITY HEADERS MATCH
    3. QUALITY LENGTH EQUALS SEQUENCE LENGTH

cd /nethome/syoung/base/bin/nextgen

[syoung@c30 nextgen]$ perl readLengths.pl --inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/run12+15-s_1_1.3.fastq --type fastq
    Length  Sequences
    53      1000000
    
    Run time: 00:00:03
    Completed readLengths.pl
    5:28PM, 22 July 2009
    ****************************************


[syoung@c30 nextgen]$ perl readLengths.pl --inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0
/lane1/3/run12+15-s_1_2.3.fastq --type fastq
    Length  Sequences
    53      1000000
    
    Run time: 00:00:03
    Completed readLengths.pl
    5:28PM, 22 July 2009
    ****************************************


... LOOKING AT THE FAILURE TO INDEX READS:

[match_index_sorted] no reasonable reads are available. Exit!

... IT COULD BE THAT NEED TO FIRST CONVERT FROM SOLEXA TO SANGER FASTQ.

SO RAN run-maq.pl ON lane1/3 USING --convert OPTION:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3
emacs /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/runmaq.sh
#!/bin/sh

#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

echo `hostname`;

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3
echo "pwd:";
echo `pwd`;

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/run12+15-s_1_1.3.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/run12+15-s_1_2.3.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--convert \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/runmaq.outerr

#### END

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3
qsub -q pbigmem runmaq.sh; date


        qsub -q pbigmem runmaq.sh; date
        65251.kronos.ccs.miami.edu
        Wed Jul 22 17:54:21 EDT 2009




cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/run12+15-s_1_1.3.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/run12+15-s_1_2.3.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--convert


GIVES THE SAME 'no reasonable reads' ERROR.


CHECK WHICH SUBDIRS HAVE out.map FILES:


LANE 1

MISSING SUBDIRS 3,4,8,11 OUT OF 26

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
ll */out.map
    -rw-rw----+ 1 syoung bioinfo 61M Jul 15 22:27 10/out.map
    -rw-rw----+ 1 syoung bioinfo 57M Jul 16 01:08 12/out.map
    -rw-rw----+ 1 syoung bioinfo 71M Jul 16 04:13 13/out.map
    -rw-rw----+ 1 syoung bioinfo 77M Jul 16 06:45 14/out.map
    -rw-rw----+ 1 syoung bioinfo 79M Jul 16 09:14 15/out.map
    -rw-rw----+ 1 syoung bioinfo 78M Jul 16 11:33 16/out.map
    -rw-rw----+ 1 syoung bioinfo 67M Jul 16 13:31 17/out.map
    -rw-rw----+ 1 syoung bioinfo 76M Jul 16 15:42 18/out.map
    -rw-rw----+ 1 syoung bioinfo 77M Jul 16 18:09 19/out.map
    -rw-rw----+ 1 syoung bioinfo 71M Jul 15 10:51 1/out.map
    -rw-rw----+ 1 syoung bioinfo 77M Jul 16 20:42 20/out.map
    -rw-rw----+ 1 syoung bioinfo 79M Jul 16 23:21 21/out.map
    -rw-rw----+ 1 syoung bioinfo 77M Jul 17 01:35 22/out.map
    -rw-rw----+ 1 syoung bioinfo 72M Jul 17 03:39 23/out.map
    -rw-rw----+ 1 syoung bioinfo 78M Jul 17 05:54 24/out.map
    -rw-rw----+ 1 syoung bioinfo 77M Jul 17 08:21 25/out.map
    -rw-rw----+ 1 syoung bioinfo 17M Jul 17 09:47 26/out.map
    -rw-rw----+ 1 syoung bioinfo 57M Jul 15 12:37 2/out.map
    -rw-rw----+ 1 syoung bioinfo 58M Jul 15 14:36 5/out.map
    -rw-rw----+ 1 syoung bioinfo 57M Jul 15 16:20 6/out.map
    -rw-rw----+ 1 syoung bioinfo 60M Jul 15 18:19 7/out.map
    -rw-rw----+ 1 syoung bioinfo 64M Jul 15 20:26 9/out.map


LANE 2

MISSING SUBDIRS 4,5,13 OUT OF 29

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
ll */out.map

    -rw-rw----+ 1 syoung bioinfo 73M Jul 16 00:32 10/out.map
    -rw-rw----+ 1 syoung bioinfo 74M Jul 16 02:37 11/out.map
    -rw-rw----+ 1 syoung bioinfo 65M Jul 16 04:22 12/out.map
    -rw-rw----+ 1 syoung bioinfo 63M Jul 16 06:28 14/out.map
    -rw-rw----+ 1 syoung bioinfo 76M Jul 16 08:53 15/out.map
    -rw-rw----+ 1 syoung bioinfo 78M Jul 16 10:57 16/out.map
    -rw-rw----+ 1 syoung bioinfo 77M Jul 16 12:57 17/out.map
    -rw-rw----+ 1 syoung bioinfo 65M Jul 16 14:50 18/out.map
    -rw-rw----+ 1 syoung bioinfo 76M Jul 16 16:48 19/out.map
    -rw-rw----+ 1 syoung bioinfo 77M Jul 15 10:45 1/out.map
    -rw-rw----+ 1 syoung bioinfo 68M Jul 16 18:46 20/out.map
    -rw-rw----+ 1 syoung bioinfo 79M Jul 16 20:49 21/out.map
    -rw-rw----+ 1 syoung bioinfo 76M Jul 16 22:55 22/out.map
    -rw-rw----+ 1 syoung bioinfo 77M Jul 17 01:04 23/out.map
    -rw-rw----+ 1 syoung bioinfo 78M Jul 17 03:13 24/out.map
    -rw-rw----+ 1 syoung bioinfo 80M Jul 17 05:21 25/out.map
    -rw-rw----+ 1 syoung bioinfo 79M Jul 17 07:25 26/out.map
    -rw-rw----+ 1 syoung bioinfo 70M Jul 17 09:23 27/out.map
    -rw-rw----+ 1 syoung bioinfo 65M Jul 17 11:09 28/out.map
    -rw-rw----+ 1 syoung bioinfo 20M Jul 17 12:27 29/out.map
    -rw-rw----+ 1 syoung bioinfo 75M Jul 15 12:53 2/out.map
    -rw-rw----+ 1 syoung bioinfo 62M Jul 15 14:30 3/out.map
    -rw-rw----+ 1 syoung bioinfo 63M Jul 15 16:17 6/out.map
    -rw-rw----+ 1 syoung bioinfo 74M Jul 15 18:23 7/out.map
    -rw-rw----+ 1 syoung bioinfo 72M Jul 15 20:23 8/out.map
    -rw-rw----+ 1 syoung bioinfo 72M Jul 15 22:27 9/out.map



SOLUTION

ADAPTED run-maq.pl TO CHECK FOR MISSING SUBDIR out.map FILES AND SKIP THEM


RERAN LANE 1:

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1

screen -S runmaqSKIP

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/runmaqSKIP.outerr


tail -f runmaqSKIP.outerr


emacs runmaqSKIP.outerr

    ...
    Missed maps:
    /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/3/out.map
    /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/8/out.map
    /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/11/out.map
    
    echo 'out.map: /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/out.map'
    out.map: /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/out.map
    
    echo 'temp.map: /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map'
    temp.map: /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map
    
    echo 'Merging out.map files...'
    Merging out.map files...
    
    echo 'Copying first submap file to temp.map...'
    
    Copying first submap file to temp.map...
    
    cp /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/1/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map
    
    
    ls -al /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map
    -rw-rw----+ 1 syoung bioinfo 73808337 Jul 22 23:06 /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map
    
    echo 'Doing submap 0 of 22'
    Doing submap 0 of 22
    
    time /nethome/syoung/base/apps/maq/0.7.1/maq mapmerge /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map /p/NGS/syoun\
    g/base/pipeline/run12+15/1.4.0/lane1/2/out.map



GOT Command terminated by signal 6 ERROR SO SWITCHED TO BIGMEM NODE. BUT THIS GAVE THE SAME ERROR (THOUGH THE NODE WAS BUSY WITH 7 JOBS):


echo 'Doing submap 0 of 22'
Doing submap 0 of 22

time /nethome/syoung/base/apps/maq/0.7.1/maq mapmerge /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map /p/NGS/syoun\
g/base/pipeline/run12+15/1.4.0/lane1/2/out.map
91.84user 0.72system 0:52.58elapsed 176%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (0major+394minor)pagefaults 0swaps

ls -al /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/out.map
-rw-rw----+ 1 syoung bioinfo 132223265 Jul 22 23:12 /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/out.map

mv /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map

ls -al /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map
-rw-rw----+ 1 syoung bioinfo 132223265 Jul 22 23:12 /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map

echo 'Doing submap 1 of 22'
Doing submap 1 of 22

time /nethome/syoung/base/apps/maq/0.7.1/maq mapmerge /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/temp.map /p/NGS/syoun\
g/base/pipeline/run12+15/1.4.0/lane1/4/out.map
maq: merge.cc:42: void mapping_merge_core(char*, int, char**): Assertion `fp[i]' failed.
Command terminated by signal 6
0.00user 0.03system 0:00.02elapsed 150%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (0major+332minor)pagefaults 0swaps






TRY AGAIN USING pbigmem QUEUE:



cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
rm -fr maqBigmem.sh
emacs /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maqBigmem.sh
#!/bin/sh

#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

echo `hostname`;

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
echo "pwd:";
echo `pwd`;


/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/runmaqBigmem.outerr

#### END


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
qsub -q pbigmem maqBigmem.sh; date ; qstat
    
    65280.kronos.ccs.miami.edu
    Wed Jul 22 23:25:46 EDT 2009
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    65280.kronos              maqBigmem.sh     syoung                 0 R pbigmem 


FAILED WITH USUAL ERROR:

    time /nethome/syoung/base/apps/maq/0.7.1/maq mapmerge /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/1/out.map /p/NGS/syou\
    ng/base/pipeline/run12+15/1.4.0/lane1/2/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/4/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/5/out.map /p/NGS/syoung/b\
    ase/pipeline/run12+15/1.4.0/lane1/6/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/7/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/9/out.map /p/NGS/syoung/base/\
    pipeline/run12+15/1.4.0/lane1/10/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/12/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/13/out.map /p/NGS/syoung/base/p\
    ipeline/run12+15/1.4.0/lane1/14/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/15/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/16/out.map /p/NGS/syoung/base/pi\
    peline/run12+15/1.4.0/lane1/17/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/18/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/19/out.map /p/NGS/syoung/base/pip\
    eline/run12+15/1.4.0/lane1/20/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/21/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/22/out.map /p/NGS/syoung/base/pipe\
    line/run12+15/1.4.0/lane1/23/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/24/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/25/out.map /p/NGS/syoung/base/pipel\
    ine/run12+15/1.4.0/lane1/26/out.map
    maq: merge.cc:42: void mapping_merge_core(char*, int, char**): Assertion `fp[i]' failed.
    Command terminated by signal 6
    0.00user 0.00system 0:00.15elapsed 0%CPU (0avgtext+0avgdata 0maxresident)k
    0inputs+0outputs (0major+338minor)pagefaults 0swaps
    Completed.


TRY AGAIN WITH HACKED merge.cc TO IDENTIFY THE fn[i] FILE:

LINE 42:
		fprintf(stderr, "Opening file ", fn[i], "...\n");



cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
qsub -q pbigmem maqBigmem.sh; date ; qstat
65283.kronos.ccs.miami.edu
Thu Jul 23 00:27:58 EDT 2009
Job id                    Name             User            Time Use S Queue
------------------------- ---------------- --------------- -------- - -----
65283.kronos              maqBigmem.sh     syoung                 0 Q pbigmem  



cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/runmaqBigmem.outerr



... AND FAILED AGAIN WITH NO FILE NAME PRINTED:

line/run12+15/1.4.0/lane1/26/out.map
Opening file Opening file Opening file maq: merge.cc:45: void mapping_merge_core(char*, int, char**): Assertion `fp[i]' failed.
Command terminated by signal 6
0.00user 0.00system 0:00.07elapsed 5%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (0major+341minor)pagefaults 0swaps
Completed.





    

COULD BE THAT FILES DON'T CONTAIN VALID QUALITY BECAUSE THEY SHOULD HAVE BEEN CONVERTED FROM SOLEXA TO SANGER VALUES.
    
RERUN WHOLE run12+15 DATA SET WITH run-maq.pl USING --convert OPTION TO CONVERT FROM SOLEXA TO SANGER:     


***************************************************
****** NB: MV'd CURRENT lane1 TO lane1.test ******
***************************************************

LANE 1
------


LINK READ FILES FROM lane1.safe:

####ln -s ../lane1.safe/run12+15-s_1_1.fastq run12+15-s_1_1.fastq
####ln -s ../lane1.safe/run12+15-s_1_2.fastq run12+15-s_1_2.fastq
cp ../lane1.safe/run12+15-s_1_1.fastq run12+15-s_1_1.fastq
cp ../lane1.safe/run12+15-s_1_2.fastq run12+15-s_1_2.fastq


#### DON'T NEED THIS:
###cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
###
###ln -s /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_1_sequence.txt run12-s_1_1_sequence.txt
###
###ln -s /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_2_sequence.txt run12-s_1_2_sequence.txt
###
###ln -s /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/s_1_1_sequence.txt run15-s_1_1_sequence.txt
###
###ln -s /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/s_1_2_sequence.txt run15-s_1_2_sequence.txt
####
####
####MERGE READS:
####cat run12-s_1_1_sequence.txt run15-s_1_1_sequence.txt > run12+15-s_1_1.fastq
####cat run12-s_1_2_sequence.txt run15-s_1_2_sequence.txt > run12+15-s_1_2.fastq


RUN run-maq.pl


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
rm -fr maqlane1.sh
emacs /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/maqlane1.sh
#!/bin/sh

#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

echo `hostname`;

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/outerr.txt

#### END


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
qsub -q pbigmem maqlane1.sh; date ; qstat
    
    
    65294.kronos.ccs.miami.edu
    Thu Jul 23 02:16:08 EDT 2009
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    65293.kronos              maqlane2.sh      syoung                 0 R pbigmem        
    65294.kronos              maqlane1.sh      syoung                 0 Q pbigmem 







NB:    EARLIER RUN USING LINKED INPUT FILES FINISHED WITH ERROR:

    cat outerr.txt

    maq: /nethome/syoung/base/apps/maq/0.7.1/maq
    inputfile: /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_2.fastq
    outputdir: /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
    referencefile: /p/NGS/syoung/base/pipeline/human-genome/genome.bfa
    namesfile: /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/splitfiles
    Generating split files...
    Can't open input file: /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_1.fastq
    [syoung@kronos lane1]$ ll run12+15-s_1_1.fastq
    lrwxrwxrwx 1 syoung bioinfo 34 Jul 23 01:29 run12+15-s_1_1.fastq -> ../lane1.safe/run12+15-s_1_1.fastq


    SOLUTION: ********* MUST COPY INPUT SEQUENCE FILES - CAN'T LINK THEM *********



LANE 2
------

LINK READ FILES FROM lane2.safe:

####ln -s ../lane2.safe/run12+15-s_2_1.fastq run12+15-s_2_1.fastq
####ln -s ../lane2.safe/run12+15-s_2_2.fastq run12+15-s_2_2.fastq
cp ../lane2.safe/run12+15-s_2_1.fastq run12+15-s_2_1.fastq
cp ../lane2.safe/run12+15-s_2_2.fastq run12+15-s_2_2.fastq


#### DON'T NEED THIS:
####cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
####
####ln -s /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_1_sequence.txt run12-s_2_1_sequence.txt
####ln -s /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_2_sequence.txt run12-s_2_2_sequence.txt
####ln -s /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/s_2_1_sequence.txt run15-s_2_1_sequence.txt
####ln -s /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/s_2_2_sequence.txt run15-s_2_2_sequence.txt 
####
####
####MERGE READS:
####cat run12-s_2_1_sequence.txt run15-s_2_1_sequence.txt > run12+15-s_2_1.fastq
####cat run12-s_2_2_sequence.txt run15-s_2_2_sequence.txt > run12+15-s_2_2.fastq


RUN run-maq.pl


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
rm -fr maqlane2.sh
emacs /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/maqlane2.sh
#!/bin/sh

#PBS -j oe
#PBS -M syoung@med.miami.edu
#PBS -m abe

echo `hostname`;

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/outerr.txt

#### END


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
qsub -q pbigmem maqlane2.sh; date ; qstat

    
    65293.kronos.ccs.miami.edu
    Thu Jul 23 02:15:28 EDT 2009
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    65293.kronos              maqlane2.sh      syoung                 0 Q pbigmem  



THE OVERALL JOB COMPLETED ON 25 JULY BUT THERE WERE THE SAME FAILURES TO ALIGN

WITH JOBS 4, 5 AND 13:

-rw-rw----+ 1 syoung bioinfo 73M Jul 23 18:52 10/out.map
-rw-rw----+ 1 syoung bioinfo 74M Jul 23 21:01 11/out.map
-rw-rw----+ 1 syoung bioinfo 65M Jul 23 22:54 12/out.map
-rw-rw----+ 1 syoung bioinfo 63M Jul 24 01:02 14/out.map
-rw-rw----+ 1 syoung bioinfo 76M Jul 24 03:32 15/out.map
-rw-rw----+ 1 syoung bioinfo 78M Jul 24 05:43 16/out.map
-rw-rw----+ 1 syoung bioinfo 77M Jul 24 07:50 17/out.map
-rw-rw----+ 1 syoung bioinfo 65M Jul 24 09:47 18/out.map
-rw-rw----+ 1 syoung bioinfo 76M Jul 24 11:57 19/out.map
-rw-rw----+ 1 syoung bioinfo 77M Jul 23 04:31 1/out.map
-rw-rw----+ 1 syoung bioinfo 68M Jul 24 14:01 20/out.map
-rw-rw----+ 1 syoung bioinfo 79M Jul 24 16:07 21/out.map
-rw-rw----+ 1 syoung bioinfo 76M Jul 24 18:20 22/out.map
-rw-rw----+ 1 syoung bioinfo 77M Jul 24 20:35 23/out.map
-rw-rw----+ 1 syoung bioinfo 78M Jul 24 22:52 24/out.map
-rw-rw----+ 1 syoung bioinfo 80M Jul 25 01:06 25/out.map
-rw-rw----+ 1 syoung bioinfo 79M Jul 25 03:18 26/out.map
-rw-rw----+ 1 syoung bioinfo 70M Jul 25 05:25 27/out.map
-rw-rw----+ 1 syoung bioinfo 65M Jul 25 07:23 28/out.map
-rw-rw----+ 1 syoung bioinfo 20M Jul 25 08:48 29/out.map
-rw-rw----+ 1 syoung bioinfo 75M Jul 23 06:41 2/out.map
-rw-rw----+ 1 syoung bioinfo 62M Jul 23 08:23 3/out.map
-rw-rw----+ 1 syoung bioinfo 63M Jul 23 10:16 6/out.map
-rw-rw----+ 1 syoung bioinfo 74M Jul 23 12:24 7/out.map
-rw-rw----+ 1 syoung bioinfo 72M Jul 23 14:33 8/out.map
-rw-rw----+ 1 syoung bioinfo 72M Jul 23 16:43 9/out.map


AND THE SAME FAILURE TO MERGE:


    time /nethome/syoung/base/apps/maq/0.7.1/maq mapmerge /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/out.map /p/NGS/syoung/base/pipeline/\
    run12+15/1.4.0/lane2/2/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/4/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/\
    6/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/8/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/10/out.map /p\
    /NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/12/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/14/out.map /p/NGS/syoung/base/pi\
    peline/run12+15/1.4.0/lane2/16/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/18/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4\
    .0/lane2/20/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/22/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/24/out.map\
     /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/26/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/28/out.map
    maq: merge.cc:42: void mapping_merge_core(char*, int, char**): Assertion `fp[i]' failed.
    Command terminated by signal 6
    0.00user 0.01system 0:00.09elapsed 17%CPU (0avgtext+0avgdata 0maxresident)k
    0inputs+0outputs (0major+333minor)pagefaults 0swaps
    
    
    Run time: 54:35:33
    Completed /nethome/syoung/base/bin/nextgen/run-maq.pl
    8:51AM, 25 July 2009
    ****************************************






SOLUTION:

1. GO WITH WHAT WE HAVE - MERGE INCREMENTALLY out.map FILES ON NODE 26 TO SEE IF
CAN CUMULATIVELY MERGE ALL FILES INTO ONE SINGLE FILE:


NODE 26 @ Tue Jul 28 13:17:17 EDT 2009

screen -S incremental-merge
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/outerr-incremental-merge.txt

tail -f /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/outerr-incremental-merge.txt


    RUNNING 
    Tue Jul 28 13:24:33 EDT 2009


2. SLICE FAILED INPUT FILES USING LOW LINE COUNT PER FILE IN run-maq.pl


1. USE SUBDIRECTORY 3 IN LANE 2


CREATE FAILED-3 DIRECTORY
mkdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/3

COPY 
cp run12+15-s_2_1.3.fastq ../failed-3
cp run12+15-s_2_2.3.fastq ../failed-3


RUN MAQ *** INCLUDING ALIGNMENT *** WITH ONE OF THE FAILED SMALL SIZE FILES:


ON NODE 26 @ Tue Jul 28 13:42:59 EDT 2009


screen3

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/run12+15-s_2_1.3.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/run12+15-s_2_2.3.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--clean \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/run-maq.outerr


tail -f /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/run-maq.outerr


RUNNING

     Tue Jul 28 13:52:49 EDT 2009

    
    echo 'Converting solexa Sanger fastq files to MAQ binary fastq (.bfq) files...'
    Converting solexa Sanger fastq files to MAQ binary fastq (.bfq) files...
    
    time /nethome/syoung/base/apps/maq/0.7.1/maq fastq2bfq /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/1/run12+15-s_2_1.1.fastq /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/failed-3/1/run12+15-s_2_1.1.bfq




        Run time: 01:41:19
        Completed /nethome/syoung/base/bin/nextgen/run-maq.pl
        3:32PM, 28 July 2009
        ****************************************


PROBLEM

FORGOT TO SET THE NUMBER OF LINES TO 100000, RATHER THAN THE DEFAULT 1M LINES 


SOLUTION

RERUN ABOVE








</entry>



<entry [Tue Jul 14 14:26:14 EDT 2009] RUN MAQ ON RUN 12 AND RUN 15 (LANES 1 AND 2) PAIRED END SEQUENCES>




REQUEST 1 CPU ON BIGMEM NODE FOR COMMAND LINE ACCESS

msub -I -l nodes=1:ppn=8 -q gdebug





LANE 1 (run 12 + run 15)
------------------------

1. CONVERT HUMAN GENOME TO BINARY FASTA

cd /p/NGS/syoung/base/pipeline/human-genome
[syoung@pluto human-genome]$ time /nethome/syoung/base/apps/maq/maq fasta2bfa genome.fa genome.bfa &> fasta2bfa.out

real    2m14.367s
user    1m55.908s
sys     0m9.001s


2. MERGE LANE 1 SEQUENCE FILES FOR RUN 12 AND RUN 15

mkdir -p /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1

LINK RUN 12 FILES

ln -s /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_1_sequence.txt \
run12-s_1_1_sequence.txt
ln -s /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_1_2_sequence.txt \
run12-s_1_2_sequence.txt

LINK RUN 15 FILES

ln -s /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/s_1_1_sequence.txt \
run15-s_1_1_sequence.txt
ln -s /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/s_1_2_sequence.txt \
run15-s_1_2_sequence.txt

MERGE FILES
cat run12-s_1_1_sequence.txt run15-s_1_1_sequence.txt > run12+15-s_1_1.fastq
cat run12-s_1_2_sequence.txt run15-s_1_2_sequence.txt > run12+15-s_1_2.fastq



3. RUN run-maq.pl ON LANE 1

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
rm -fr run-maq.sh
emacs run-maq.sh
#!/bin/sh

#PBS -j oe

#PBS -M syoung@med.miami.edu

#PBS -m abe

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--clean \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run-maq.outerr

#### END

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
qsub -q pbigmem run-maq.sh
date
qstat

    61004.kronos.ccs.miami.edu
    [syoung@kronos lane1]$ date
    Tue Jul 14 15:04:21 EDT 2009
    [syoung@kronos lane1]$ qstat
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    61001.kronos              run-maq.sh       syoung          00:02:30 C pbigmem        
    61004.kronos              run-maq.sh       syoung                 0 R pbigmem




LANE 2 (run 12 + run 15)
------------------------

1. CONVERT HUMAN GENOME TO BINARY FASTA   -- DID IN PREVIOUS STEP FOR LANE 1
####
####cd /p/NGS/syoung/base/pipeline/human-genome
####[syoung@pluto human-genome]$ time /nethome/syoung/base/apps/maq/maq fasta2bfa genome.fa genome.bfa &> fasta2bfa.out
####
####real    2m14.367s
####user    1m55.908s
####sys     0m9.001s


2. MERGE LANE 1 SEQUENCE FILES FOR RUN 12 AND RUN 15

mkdir -p /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2

LINK RUN 12 FILES

ln -s /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_1_sequence.txt \
run12-s_2_1_sequence.txt
ln -s /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung/s_2_2_sequence.txt \
run12-s_2_2_sequence.txt

LINK RUN 15 FILES

ln -s /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/s_2_1_sequence.txt \
run15-s_2_1_sequence.txt
ln -s /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung/s_2_2_sequence.txt \
run15-s_2_2_sequence.txt

MERGE FILES
cat run12-s_2_1_sequence.txt run15-s_2_1_sequence.txt > run12+15-s_2_1.fastq
cat run12-s_2_2_sequence.txt run15-s_2_2_sequence.txt > run12+15-s_2_2.fastq


3. RUN run-maq.pl

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
rm -fr run-maq.sh
emacs run-maq.sh
#!/bin/sh

#PBS -j oe

#PBS -M syoung@med.miami.edu

#PBS -m abe

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--clean \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run-maq.outerr

#### END


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
qsub -q pbigmem run-maq.sh
date
qstat
    
    61030.kronos.ccs.miami.edu
    [syoung@kronos lane2]$ date
    Tue Jul 14 15:07:24 EDT 2009
    [syoung@kronos lane2]$ qstat
    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    61001.kronos              run-maq.sh       syoung          00:02:30 C pbigmem        
    61004.kronos              run-maq.sh       syoung          00:00:57 R pbigmem        
    61030.kronos              run-maq.sh       syoung                 0 Q pbigmem        
    





LANE 1 AND LANE 2 COMPLETED SUCCESSFULLY (TOOK ~52 HOURS EACH)


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
tail run-maq.outerr

    real    0m0.042s
    user    0m0.000s
    sys     0m0.002s
    
    Run time: 50:50:40
    Completed /nethome/syoung/base/bin/nextgen/run-maq.pl
    10:58AM, 17 July 2009
    ****************************************


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
tail run-maq.outerr

    real    0m0.037s
    user    0m0.000s
    sys     0m0.000s
    
    Run time: 53:10:28
    Completed /nethome/syoung/base/bin/nextgen/run-maq.pl
    1:38PM, 17 July 2009
    ****************************************



GET COVERAGE STATS WITH MAPCHECK:

LANE 1

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/26

[syoung@kronos 26]$ head -n 20 mapcheck.txt 
Number of reference sequences: 24
Length of reference sequences exlcuding gaps: 2858012806
Length of gaps in the reference sequences: 222406674
Length of non-gap regions covered by reads: 6262575
Length of 24bp unique regions of the reference: 5526698
Reference nucleotide composition: A: 29.53%, C: 20.44%, G: 20.46%, T: 29.57%
Reads nucleotide composition:     A: 22.90%, C: 27.74%, G: 25.70%, T: 23.66%
Average depth across all non-gap regions: 0.006
Average depth across 24bp unique regions: 0.004

      A    C    G    T :  AC  AG  AT  CA  CG  CT  GA  GC  GT  TA  TC  TG :  0?  1?  2?  3?  4?  5?  6? :  0?  1?  2?  3?  4?  5?  6?
 1  9.5 43.8 32.4 14.3 :  38  38  35   2   2   5   2   7   4   3  57   6 :   1  28   0   0   3 137 829 : 865 999 166   0   0   0   0
 2 19.3 23.4 28.9 28.5 :   4  17   3   1   3   5   2   1   1   1   6   1 :   0   1   0   1   7 174 815 : 862 998 166 178  35  39   3
 3 23.4 26.2 29.1 21.3 :   2   9   1   1   1   4   3   1   0   1   9   1 :   0   0   0   1   8 189 800 : 727 166 166 189  35  26   2
 4 29.0 24.2 29.8 17.0 :   3   7   1   1   1   2   3   1   0   1   7   1 :   0   0   0   3  13 208 775 : 675 166 166 175  32  18   3
 5 29.9 21.6 29.0 19.5 :   4   6   1   1   0   3   3   1   0   2   8   2 :   0   0   0   3  15 221 759 : 707 166 166 149  33  23   2
 6 31.8 26.2 23.2 18.7 :   4   3   0   1   0   2   3   1   1   1   6   1 :   0   0   0   5  20 227 746 : 656 166 166 175  28  12   2
 7 13.6 27.4 20.6 38.4 :   2   6   1   1   0   6   2   1   0   1   5   0 :   0   0   0   3  13 217 767 : 914 166 166 162  26  15   2
 8 19.7 32.8 24.0 23.5 :   2   4   1   1   0   2   3   1   0   1   7   1 :   0   0   0   4  14 218 763 : 782 166 166 199  31  12   2
 9 18.6 31.1 23.0 27.2 :   2   4   0   1   0   3   2   1   0   1   6   0 :   0   0   0   3  14 221 761 : 826 166 166 142  25  13   2


LANE 2

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/29

[syoung@kronos 29]$ head -n 20 mapcheck.txt 
Number of reference sequences: 24
Length of reference sequences exlcuding gaps: 2858012806
Length of gaps in the reference sequences: 222406674
Length of non-gap regions covered by reads: 5220922
Length of 24bp unique regions of the reference: 4737209
Reference nucleotide composition: A: 29.53%, C: 20.44%, G: 20.46%, T: 29.57%
Reads nucleotide composition:     A: 23.15%, C: 27.68%, G: 24.94%, T: 24.24%
Average depth across all non-gap regions: 0.005
Average depth across 24bp unique regions: 0.004


      A    C    G    T :  AC  AG  AT  CA  CG  CT  GA  GC  GT  TA  TC  TG :  0?  1?  2?  3?  4?  5?  6? :  0?  1?  2?  3?  4?  5?  6?
 1 10.9 44.4 31.2 13.5 :  39  27  28   2   2   4   3   8   3   3  66   6 :   1  28   0   0   7 149 814 : 850 999 166   1   0   0   0
 2 20.2 21.6 29.1 29.1 :   3  14   3   1   2   6   3   1   1   1   4   1 :   0   0   0   1  10 185 803 : 718 997 166 159  31  39   1
 3 23.7 27.1 27.9 21.3 :   1   8   1   1   0   5   3   0   0   1   6   1 :   0   0   0   1   9 198 791 : 794 166 166 126  25  27   1
 4 29.6 23.6 29.2 17.6 :   1   8   1   1   1   3   2   0   0   1   5   0 :   0   0   0   1  10 204 784 : 664 166 166 159  21  23   1
 5 29.9 20.8 29.0 20.3 :   2   5   0   1   0   4   3   0   0   2   5   1 :   0   0   0   1  12 215 770 : 689 166 166  83  13  23   1
 6 33.0 24.6 23.3 19.1 :   0   3   0   1   0   3   3   0   0   1   5   1 :   0   0   0   1  13 218 766 : 604 166 166  45  17  16   1
 7 14.7 26.2 21.0 38.1 :   0   6   0   1   0   6   2   0   0   0   4   0 :   0   0   0   2  12 223 762 : 861 166 166  83  16  17   1
 8 19.0 32.0 24.5 24.4 :   1   4   0   1   0   1   2   0   0   1   5   0 :   0   0   0  10  26 253 710 : 740 166 166  16   7  11   1
 9 19.2 29.9 23.1 27.7 :   0   4   0   1   0   2   2   0   0   1   4   0 :   0   0   0   2  17 248 732 : 763 166 166  31   8  12   1


HOWEVER, mapmerge FAILED DUE TO LACK OF MEMORY:


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2

emacs run-maq.outerr
    ...
    time /nethome/syoung/base/apps/maq/0.7.1/maq mapmerge /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/out.map /p/NGS/syoung/base/pipeline/\
    run12+15/1.4.0/lane2/1/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/2/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/\
    3/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/4/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/5/out.map /p/\
    NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/6/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/7/out.map /p/NGS/syoung/base/pipel\
    ine/run12+15/1.4.0/lane2/8/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/9/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/la\
    ne2/10/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/11/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/12/out.map /mih\
    g/data/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/13/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/14/out.map /p/NGS/syoung/b\
    ase/pipeline/run12+15/1.4.0/lane2/15/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/16/out.map /p/NGS/syoung/base/pipeline/run12+\
    15/1.4.0/lane2/17/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/18/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/19/o\
    ut.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/20/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/21/out.map /p/N\
    GS/syoung/base/pipeline/run12+15/1.4.0/lane2/22/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/23/out.map /p/NGS/syoung/base/pipe\
    line/run12+15/1.4.0/lane2/24/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/25/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0\
    /lane2/26/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/27/out.map /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/28/out.map /\
    mihg/data/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/29/out.map
    maq: merge.cc:42: void mapping_merge_core(char*, int, char**): Assertion `fp[i]' failed.
    Command terminated by signal 6
    0.00user 0.05system 0:00.36elapsed 16%CPU (0avgtext+0avgdata 0maxresident)k
    0inputs+0outputs (0major+349minor)pagefaults 0swaps






RERUN run-maq.pl WITH CORRECT LOCATION FOR maq.pl TO GET SNPS
-------------------------------------------------------------


LANE 1

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
rm -fr run-maq.sh
emacs run-maq.sh
#!/bin/sh

#PBS -j oe

#PBS -M syoung@med.miami.edu

#PBS -m abe

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run12+15-s_1_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--clean \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1/run-maq.outerr

#### END

cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane1
qsub -q pbigmem run-maq.sh
date
qstat





LANE 2


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
rm -fr run-maq.sh
emacs run-maq.sh
#!/bin/sh

#PBS -j oe

#PBS -M syoung@med.miami.edu

#PBS -m abe

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2 \
--inputfile /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_1.fastq,/p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run12+15-s_2_2.fastq \
--referencefile /p/NGS/syoung/base/pipeline/human-genome/genome.bfa \
--clean \
&> /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2/run-maq.outerr

#### END


cd /p/NGS/syoung/base/pipeline/run12+15/1.4.0/lane2
qsub -q pbigmem run-maq.sh
date





</entry>



<entry [Sat Jul 11 02:37:06 EDT 2009] RUN 1.4.0 ON run12 LANES 1 AND 2 (NB: --control-lane=5)>



run12
-----

##CREATE MAKEFILE
cd /p/NGS/syoung/base/pipeline/run12/1.4.0
rm -fr run-goat.sh
emacs run-goat.sh
#!/bin/sh

#PBS -l ncpus=8

#PBS -j oe

#### CREATE MAKEFILES
cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run12/1.4.0/geraldfile.txt --tiles=s_1,s_2,s_5 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3

#### DO IMAGE PROCESSING
cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung

time make recursive -j8 &> /p/NGS/syoung/base/pipeline/run12/1.4.0/firecrest.outerr

#### DO BASE CALLING
cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung

time make recursive -j8 &> /p/NGS/syoung/base/pipeline/run12/1.4.0/bustard.outerr

#### RUN ELANDll


cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung

time make recursive -j8 &> /p/NGS/syoung/base/pipeline/run12/1.4.0/eland.outerr

#### END
exit;


chmod 755 run-goat.sh
qsub -q psmall run-goat.sh
date

    60737.kronos.ccs.miami.edu
    [syoung@kronos 1.4.0]$ date
    Sun Jul 12 03:54:33 EDT 2009


qstat
mshow


RERAN FROM FIRECREST MAKE ONWARDS AFTER CHANGING '108' TO '104' IN FIRECREST DIRECTORY NAME:


60738.kronos.ccs.miami.edu
[syoung@kronos 1.4.0]$ date
Sun Jul 12 12:47:37 EDT 2009


COMPLETED SUCCESSFULLY AT ~5PM ON MON 13TH JULY:

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/C1-104_Firecrest1.4.0_12-07-2009_syoung/Bustard1.4.0_12-07-2009_syoung/GERALD_12-07-2009_syoung

[syoung@ngsdev GERALD_12-07-2009_syoung]$ ll *eland*
-rw-rw----+ 1 syoung bioinfo 1.8G Jul 13 16:02 s_1_1_eland_extended.txt
-rw-rw----+ 1 syoung bioinfo 1.6G Jul 13 15:57 s_1_1_eland_multi.txt
-rw-rw----+ 1 syoung bioinfo 1.2G Jul 13 13:52 s_1_1_eland_query.txt
-rw-rw----+ 1 syoung bioinfo 1.8G Jul 13 15:51 s_1_2_eland_extended.txt
-rw-rw----+ 1 syoung bioinfo 1.6G Jul 13 15:45 s_1_2_eland_multi.txt
-rw-rw----+ 1 syoung bioinfo 1.2G Jul 13 13:52 s_1_2_eland_query.txt
-rw-rw----+ 1 syoung bioinfo 2.2G Jul 13 17:30 s_2_1_eland_extended.txt
-rw-rw----+ 1 syoung bioinfo 2.0G Jul 13 17:22 s_2_1_eland_multi.txt
-rw-rw----+ 1 syoung bioinfo 1.5G Jul 13 13:54 s_2_1_eland_query.txt
-rw-rw----+ 1 syoung bioinfo 2.1G Jul 13 17:26 s_2_2_eland_extended.txt
-rw-rw----+ 1 syoung bioinfo 2.0G Jul 13 17:19 s_2_2_eland_multi.txt
-rw-rw----+ 1 syoung bioinfo 1.5G Jul 13 13:54 s_2_2_eland_query.txt









NB: ERROR MESSAGE REGARDING CREATION OF .png FILES:

cd /p/NGS/syoung/base/pipeline/run12/1.4.0

tail -f eland.outerr

    Execution stack:
       %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1   3   %oparray_pop   --nostringval--
    Dictionary stack:
       --dict:1127/1686(ro)(G)--   --dict:0/20(G)--   --dict:103/200(L)--
    Current allocation mode is local
    ESP Ghostscript 815.02: Unrecoverable error, exit code 1
    convert: no decode delegate for this image format `Temp/tmp-plot_error_graphs-1008-16949.txt.ps'.
    convert: Postscript delegate failed `Temp/tmp-plot_error_graphs-1008-16949.txt.ps'.
    convert: missing an image filename `Plots/s_1_0100_errors.png'.
    touch s_1_finished.txt







NB: ALTERNATELY, USE image2eland-cluster.pl


perl /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl \
--type paired \
--rundir /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--imagedir /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Images \
--outputdir /p/NGS/syoung/base/pipeline/run12/1.4.0 \
--geraldfile /p/NGS/syoung/base/pipeline/run12/1.4.0/geraldfile.txt \
--readlength 54 \
--cpus 8 \
--queue "-q psmall" \
--control 5 \
--tiles s_1,s_2

    qsub -q psmall /p/NGS/syoung/base/pipeline/run12/1.4.0/run-image2eland.sh
    58678.kronos.ccs.miami.edu
    
    Run time: 00:00:00
    Completed /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl
    6:14AM, 7 July 2009
    ****************************************





PREVIOUS STEPS FOR COPYING OVER FILES/DIRS FROM ARCHIVE RUN FOLDER TO NEW RUN FOLDER:

##1. CREATE NEW RUN DIR

mkdir -p /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3

## LINK Images DIR

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3
ln -s /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Images Images


## CREATE geraldfile.txt IN BASE DIR

cd /p/NGS/syoung/base/pipeline/run12/1.4.0
emacs geraldfile.txt
12:ANALYSIS        eland_pair
5:ANALYSIS         sequence_pair
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


## COPY PairedEndInfo.xml

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3
cp /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/PairedEndInfo.xml ./

###em PairedEndInfo
###<?xml version="1.0"?>
###<FirstRead Length="52" />


##  COPY <RUNDIR>.params

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3
cp /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3.params ./



## CREATE Data DIR AND COPY .params

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3
mkdir Data
cp /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/.params Data


## COPY Config DIR

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3

cp -r /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Config ./


## COPY Calibration_* DIR

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3

cp -r /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Calibration_* ./


## COPY .xml AND .txt FILES

cd /p/NGS/syoung/base/pipeline/run12/1.4.0/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3

cp -r /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/*.xml ./
cp -r /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/*.txt ./
















</entry>



<entry [Fri Jul 10 01:11:06 EDT 2009] RUN 1.4.0 ON run15 LANES 1 AND 2 WITH CORRECT FORMAT FOR CONTROL LANE (I.E., --control-lane=5)>



#### CREATE GERALD FILE
emacs -nw /p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt
12:ANALYSIS        eland_pair
5:ANALYSIS         sequence_pair
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


#### CLEAN NEW RUN FOLDER
cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data
rm -fr C1-108_Firecrest1.4.0_08-07-2009_syoung.8


##CREATE MAKEFILE
cd /p/NGS/syoung/base/pipeline/run15/1.4.0
rm -fr run-goat.sh
emacs run-goat.sh
#!/bin/sh

#PBS -l ncpus=8

#PBS -j oe

#### CREATE MAKEFILES
cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt --tiles=s_1,s_2,s_5 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

#### DO IMAGE PROCESSING
cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung

time make recursive -j8 &> /p/NGS/syoung/base/pipeline/run15/1.4.0/firecrest.outerr

#### DO BASE CALLING
cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung

time make recursive -j8 &> /p/NGS/syoung/base/pipeline/run15/1.4.0/bustard.outerr

#### RUN ELAND

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung

time make recursive -j8 &> /p/NGS/syoung/base/pipeline/run15/1.4.0/eland.outerr

#### END
exit;


chmod 755 run-goat.sh
qsub -q psmall run-goat.sh
date

    60157.kronos.ccs.miami.edu
    [syoung@ngsdev 1.4.0]$ date
    Sat Jul 11 02:09:56 EDT 2009

qstat
mshow

60157                syoung    Running     8  4:22:07:48  Sat Jul 11 11:29:06



FINISHED. OUTPUT STDOUT AND STDERR ARE HERE:

CD /p/NGS/syoung/base/pipeline/run15/1.4.0

[syoung@kronos 1.4.0]$ ll -tr
total 36M
drwxrwx---+ 3 syoung bioinfo   23 Jul  7 02:04 Instruments
-rw-rw----+ 1 syoung bioinfo  185 Jul  7 02:29 geraldfile.txt-old
-rw-rw----+ 1 syoung bioinfo  185 Jul  7 02:32 geraldfile.txt~
-rw-rw----+ 1 syoung bioinfo  539 Jul  7 05:53 run-image2eland.sh
-rw-------+ 1 syoung bioinfo 2.9K Jul  7 17:08 run-image2eland.sh.o58675
drwxrwx---+ 4 syoung bioinfo 4.0K Jul  7 23:16 090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
drwxrwx---+ 3 syoung bioinfo  110 Jul  7 23:20 outdir
drwxrwx---+ 8 syoung bioinfo 4.0K Jul  8 01:11 ..
-rw-rw----+ 1 syoung bioinfo  218 Jul 11 02:06 geraldfile.txt
-rwxr-xr-x+ 1 syoung bioinfo 1.3K Jul 11 02:07 run-goat.sh
-rw-rw----+ 1 syoung bioinfo  30M Jul 12 01:48 firecrest.outerr
-rw-rw----+ 1 syoung bioinfo 3.2M Jul 12 06:20 bustard.outerr
drwxrwx---+ 5 syoung bioinfo 4.0K Jul 12 06:20 .
-rw-rw----+ 1 syoung bioinfo 3.2M Jul 12 10:52 eland.outerr

tail OF OUTERR FILES:

[syoung@kronos 1.4.0]$ tail *outerr
    ==> bustard.outerr <==
    Common::getBustardRunInfo     layer name: BaseCallParameters
    Common::getBustardRunInfo     Returning curr_hash_ref: HASH(0x89f9680)
    /home/syoung/base/apps/GAPipeline-1.4.0/bin/runReport.pl /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung localhost:25 domain.com http://host.domain.com/yourshare/ --strip 2 syoung  && touch finished.txt
    Could not connect to localhost:25 - Connection refused at /home/syoung/base/apps/GAPipeline-1.4.0/bin/runReport.pl line 136.
    echo Gerald analysis finished successfully. ; 
    Gerald analysis finished successfully.
    #find . -maxdepth 1 -name '*.txt' | egrep -v sorted | egrep -v qraw | egrep -v export.txt | egrep -v config.txt | egrep -v "finished.txt" | egrep -v eland_extended | xargs -i mv {} Temp/;
    find . -maxdepth 1 -name "*.txt" | egrep "(_align.txt|_prealign.txt|_realign.txt|_monotemplate.txt|_score.txt|_rescore.txt)" | xargs -i mv {} Temp/
    find . -maxdepth 1 -name "*.txt" | egrep "(_ub_qseq.txt|_ub_custom_qseq.txt|_error_pngs.txt)" | xargs -i mv {} Temp/
    make[1]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung'
    
    ==> eland.outerr <==
    Common::getBustardRunInfo     layer name: Bustard1.4.0_11-07-2009_syoung
    Common::getBustardRunInfo     layer name: BaseCallParameters
    Common::getBustardRunInfo     Returning curr_hash_ref: HASH(0x796c670)
    /home/syoung/base/apps/GAPipeline-1.4.0/bin/runReport.pl /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung localhost:25 domain.com http://host.domain.com/yourshare/ --strip 2 syoung  && touch finished.txt
    Could not connect to localhost:25 - Connection refused at /home/syoung/base/apps/GAPipeline-1.4.0/bin/runReport.pl line 136.
    echo Gerald analysis finished successfully. ; 
    Gerald analysis finished successfully.
    #find . -maxdepth 1 -name '*.txt' | egrep -v sorted | egrep -v qraw | egrep -v export.txt | egrep -v config.txt | egrep -v "finished.txt" | egrep -v eland_extended | xargs -i mv {} Temp/;
    find . -maxdepth 1 -name "*.txt" | egrep "(_align.txt|_prealign.txt|_realign.txt|_monotemplate.txt|_score.txt|_rescore.txt)" | xargs -i mv {} Temp/
    find . -maxdepth 1 -name "*.txt" | egrep "(_ub_qseq.txt|_ub_custom_qseq.txt|_error_pngs.txt)" | xargs -i mv {} Temp/
    
    ==> firecrest.outerr <==
    Common::getBustardRunInfo     Returning curr_hash_ref: HASH(0x9aa27e0)
    /home/syoung/base/apps/GAPipeline-1.4.0/bin/runReport.pl /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung localhost:25 domain.com http://host.domain.com/yourshare/ --strip 2 syoung  && touch finished.txt
    Could not connect to localhost:25 - Connection refused at /home/syoung/base/apps/GAPipeline-1.4.0/bin/runReport.pl line 136.
    echo Gerald analysis finished successfully. ; 
    Gerald analysis finished successfully.
    #find . -maxdepth 1 -name '*.txt' | egrep -v sorted | egrep -v qraw | egrep -v export.txt | egrep -v config.txt | egrep -v "finished.txt" | egrep -v eland_extended | xargs -i mv {} Temp/;
    find . -maxdepth 1 -name "*.txt" | egrep "(_align.txt|_prealign.txt|_realign.txt|_monotemplate.txt|_score.txt|_rescore.txt)" | xargs -i mv {} Temp/
    find . -maxdepth 1 -name "*.txt" | egrep "(_ub_qseq.txt|_ub_custom_qseq.txt|_error_pngs.txt)" | xargs -i mv {} Temp/
    make[2]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung'
    make[1]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung'



OUTPUT ELAND ALIGNMENTS ARE HERE:

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_11-07-2009_syoung/Bustard1.4.0_11-07-2009_syoung/GERALD_11-07-2009_syoung
    
ll
    total 53G
    drwxrwx---+ 4 syoung bioinfo  40K Jul 12 10:52 .
    drwxrwx---+ 8 syoung bioinfo  24K Jul 11 21:14 ..
    -rw-rw----+ 1 syoung bioinfo  218 Jul 11 11:22 config.txt
    -rw-rw----+ 1 syoung bioinfo 5.5K Jul 11 11:22 config.xml
    -rw-rw----+ 1 syoung bioinfo  496 Jul 12 10:52 Error.htm
    -rw-rw----+ 1 syoung bioinfo    0 Jul 12 10:52 finished.txt
    -rw-rw----+ 1 syoung bioinfo  410 Jul 12 10:52 FullError.htm
    -rw-rw----+ 1 syoung bioinfo  422 Jul 12 10:52 FullPerfect.htm
    -rw-rw----+ 1 syoung bioinfo 354K Jul 12 10:52 GeraldSummary.xml
    -rw-rw----+ 1 syoung bioinfo 112K Jul 11 11:22 Makefile
    -rw-rw----+ 1 syoung bioinfo  510 Jul 12 10:52 Perfect.htm
    drwxrwx---+ 2 syoung bioinfo    6 Jul 11 11:22 Plots
    -rw-rw----+ 1 syoung bioinfo 713M Jul 12 09:26 s_1_1_calsaf.txt
    -rw-rw----+ 1 syoung bioinfo 1.5G Jul 12 08:22 s_1_1_eland_extended.txt
    -rw-rw----+ 1 syoung bioinfo 1.4G Jul 12 08:18 s_1_1_eland_multi.txt
    -rw-rw----+ 1 syoung bioinfo 1.1G Jul 12 06:43 s_1_1_eland_query.txt
    -rw-rw----+ 1 syoung bioinfo 2.2G Jul 12 09:38 s_1_1_export.txt
    -rw-rw----+ 1 syoung bioinfo 136M Jul 12 08:19 s_1_1_frag.txt
    -rw-rw----+ 1 syoung bioinfo 5.8K Jul 12 09:41 s_1_1_qcalreport.txt
    -rw-rw----+ 1 syoung bioinfo 1.9G Jul 12 06:39 s_1_1_sequence.txt
    -rw-rw----+ 1 syoung bioinfo 1.5G Jul 12 09:51 s_1_1_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 652M Jul 12 09:26 s_1_2_calsaf.txt
    -rw-rw----+ 1 syoung bioinfo 1.5G Jul 12 08:02 s_1_2_eland_extended.txt
    -rw-rw----+ 1 syoung bioinfo 1.4G Jul 12 07:58 s_1_2_eland_multi.txt
    -rw-rw----+ 1 syoung bioinfo 1.1G Jul 12 06:44 s_1_2_eland_query.txt
    -rw-rw----+ 1 syoung bioinfo 2.1G Jul 12 09:37 s_1_2_export.txt
    -rw-rw----+ 1 syoung bioinfo 120M Jul 12 07:59 s_1_2_frag.txt
    -rw-rw----+ 1 syoung bioinfo 5.8K Jul 12 09:40 s_1_2_qcalreport.txt
    -rw-rw----+ 1 syoung bioinfo 1.9G Jul 12 06:44 s_1_2_sequence.txt
    -rw-rw----+ 1 syoung bioinfo 1.2G Jul 12 09:47 s_1_2_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 1.9G Jul 12 09:31 s_1_anomaly.txt
    -rw-rw----+ 1 syoung bioinfo    0 Jul 12 09:51 s_1_finished.txt
    -rw-rw----+ 1 syoung bioinfo  747 Jul 11 21:18 s_1_genomesize.xml
    -rw-rw----+ 1 syoung bioinfo 7.7K Jul 12 09:26 s_1_pair.xml
    -rw-rw----+ 1 syoung bioinfo 2.3G Jul 12 09:26 s_1_reanomraw.txt
    -rw-rw----+ 1 syoung bioinfo   29 Jul 12 09:50 s_1_score_files.txt
    -rw-rw----+ 1 syoung bioinfo 754M Jul 12 10:23 s_2_1_calsaf.txt
    -rw-rw----+ 1 syoung bioinfo 1.6G Jul 12 09:17 s_2_1_eland_extended.txt
    -rw-rw----+ 1 syoung bioinfo 1.5G Jul 12 09:12 s_2_1_eland_multi.txt
    -rw-rw----+ 1 syoung bioinfo 1.1G Jul 12 06:44 s_2_1_eland_query.txt
    -rw-rw----+ 1 syoung bioinfo 2.3G Jul 12 10:35 s_2_1_export.txt
    -rw-rw----+ 1 syoung bioinfo 143M Jul 12 09:13 s_2_1_frag.txt
    -rw-rw----+ 1 syoung bioinfo 5.8K Jul 12 10:38 s_2_1_qcalreport.txt
    -rw-rw----+ 1 syoung bioinfo 2.0G Jul 12 06:45 s_2_1_sequence.txt
    -rw-rw----+ 1 syoung bioinfo 1.7G Jul 12 10:49 s_2_1_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 677M Jul 12 10:23 s_2_2_calsaf.txt
    -rw-rw----+ 1 syoung bioinfo 1.5G Jul 12 09:08 s_2_2_eland_extended.txt
    -rw-rw----+ 1 syoung bioinfo 1.4G Jul 12 09:04 s_2_2_eland_multi.txt
    -rw-rw----+ 1 syoung bioinfo 1.1G Jul 12 06:45 s_2_2_eland_query.txt
    -rw-rw----+ 1 syoung bioinfo 2.2G Jul 12 10:38 s_2_2_export.txt
    -rw-rw----+ 1 syoung bioinfo 117M Jul 12 09:05 s_2_2_frag.txt
    -rw-rw----+ 1 syoung bioinfo 5.8K Jul 12 10:41 s_2_2_qcalreport.txt
    -rw-rw----+ 1 syoung bioinfo 2.0G Jul 12 06:45 s_2_2_sequence.txt
    -rw-rw----+ 1 syoung bioinfo 1.2G Jul 12 10:49 s_2_2_sorted.txt
    -rw-rw----+ 1 syoung bioinfo 2.0G Jul 12 10:27 s_2_anomaly.txt
    -rw-rw----+ 1 syoung bioinfo    0 Jul 12 10:52 s_2_finished.txt
    -rw-rw----+ 1 syoung bioinfo  747 Jul 11 21:24 s_2_genomesize.xml
    -rw-rw----+ 1 syoung bioinfo 7.7K Jul 12 10:23 s_2_pair.xml
    -rw-rw----+ 1 syoung bioinfo 2.3G Jul 12 10:23 s_2_reanomraw.txt
    -rw-rw----+ 1 syoung bioinfo   29 Jul 12 10:51 s_2_score_files.txt
    -rw-rw----+ 1 syoung bioinfo 1.7G Jul 12 06:46 s_5_1_sequence.txt
    -rw-rw----+ 1 syoung bioinfo 1.7G Jul 12 06:51 s_5_2_sequence.txt
    -rw-rw----+ 1 syoung bioinfo    0 Jul 12 06:51 s_5_finished.txt
    -rw-rw----+ 1 syoung bioinfo  94K Jul 12 10:52 Summary.htm
    -rw-rw----+ 1 syoung bioinfo 615K Jul 12 10:52 Summary.xml
    -rw-r-----+ 1 syoung bioinfo  19K Jul 12 10:52 Summary.xsl
    drwxrwx---+ 2 syoung bioinfo  40K Jul 12 10:52 Temp
    -rw-rw----+ 1 syoung bioinfo 2.7K Jul 11 21:14 tiles.txt
    [syoung@kronos GERALD_11-07-2009_syoung]$ 








NB: PREVIOUS STEPS FOR COPYING OVER FILES/DIRS FROM ARCHIVE RUN FOLDER TO NEW RUN FOLDER:

##1. CREATE NEW RUN DIR

mkdir /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan


## LINK Images DIR

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
ln -s /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images Images


## CREATE geraldfile.txt IN BASE DIR

cd /p/NGS/syoung/base/pipeline/run15/1.4.0
emacs geraldfile.txt
125:ANALYSIS        eland_pair
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


## COPY PairedEndInfo.xml

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/PairedEndInfo.xml ./

###em PairedEndInfo
###    <?xml version="1.0"?>
###    <FirstRead Length="54" />


##  COPY <RUNDIR>.params

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.params ./



## CREATE Data DIR AND COPY .params

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
mkdir Data
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/.params Data


## COPY Config DIR

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Config ./


## COPY Calibration_* DIR

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Calibration_* ./


## COPY .xml AND .txt FILES

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/*.xml ./
cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/*.txt ./













</entry>



<entry [Fri Jul 10 01:11:06 EDT 2009] RERUN WITH control-lane=5 AND s_5 IN TILES>




cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data

/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0-test/geraldfile.txt --tiles=s_1_0001,s_5 --control-lane=5 --make /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

    Successfully created /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung/Makefile
    Copying config file /tmp/tmp-GERALD-1008-6969.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung/config.xml
    Dumping config parameters into /tmp/tmp-GERALD-1008-6969.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung/config.xml
    GERALD.pl     outdir: /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung
    GERALD.pl     tmpName: /tmp/tmp-GERALD-1008-6969.txt
    GERALD.pl     BEFORE if (-e /tmp/tmp-GERALD-1008-6969.txt)
    Copying config file /tmp/tmp-GERALD-1008-6969.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung/config.txt
    2 [/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung]
    [/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung]
    [/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung]
    Running 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung/Makefile
    make: Nothing to be done for `self_test'.
    Run 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/GERALD_09-07-2009_syoung/Makefile completed with no problems
    Task complete, exiting
    Removing temporary file /tmp/tmp-GERALD-1008-6969.txt


cd C1-108_Firecrest1.4.0_09-07-2009_syoung.2

make

    
    Offsets updated
    set -o pipefail;  cat tiles.txt | sed 's/ /\n/g' | grep s_1 | perl -lane '{ printf ("Temp/L001/${F[0]}_01_qcm.xml\n");}' | /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/parse_cluster_stats.py - > Sizes/s_1_sizes.txt.tmp && mv Sizes/s_1_sizes.txt.tmp Sizes/s_1_sizes.txt
    set -o pipefail;  cat tiles.txt | sed 's/ /\n/g' | grep s_5 | perl -lane '{ printf ("Temp/L005/${F[0]}_01_qcm.xml\n");}' | /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/parse_cluster_stats.py - > Sizes/s_5_sizes.txt.tmp && mv Sizes/s_5_sizes.txt.tmp Sizes/s_5_sizes.txt
    cat Sizes/s_1_sizes.txt Sizes/s_5_sizes.txt > Sizes/sizes.txt.tmp && mv Sizes/sizes.txt.tmp Sizes/sizes.txt
    /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_cluster_size.py Sizes/s_1_sizes.txt > Sizes/s_1_sizes.xml.tmp && mv Sizes/s_1_sizes.xml.tmp Sizes/s_1_sizes.xml
    /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_cluster_size.py Sizes/s_5_sizes.txt > Sizes/s_5_sizes.xml.tmp && mv Sizes/s_5_sizes.xml.tmp Sizes/s_5_sizes.xml
    /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_cluster_size.py Sizes/sizes.txt > Sizes/sizes.xml.tmp && mv Sizes/sizes.xml.tmp Sizes/sizes.xml
    Image analysis has completed successfully.

cd Bustard*

make

    Common::getBustardRunInfo($xml_file_path, $bustard_dir, $rel_xpath_str, $force_array_keys_ref, $key_attr_ref)
    Common::getBustardRunInfo     cfg_hash_ref: HASH(0x94a0cf0)
    Common::getBustardRunInfo     layer names:
            Run
            Bustard1.4.0_09-07-2009_syoung
            RunParameters
            Reads
    Common::getBustardRunInfo     layer name: Run
    Common::getBustardRunInfo     layer name: Bustard1.4.0_09-07-2009_syoung
    Common::getBustardRunInfo     layer name: RunParameters
    Common::getBustardRunInfo     layer name: Reads
    Common::getBustardRunInfo     Returning curr_hash_ref: HASH(0x94a12c0)
    touch finished.txt && \
            echo "Base-calling has completed successfully." && \
            echo
    Base-calling has completed successfully.



THAT DID THE TRICK!! BASE CALLS COMPLETED SUCCESSFULLY.

THEN DID make IN GERALD FOLDER:

make

    echo "s_1_0001 s_5_0001 s_5_0002 s_5_0003 s_5_0004 s_5_0005 s_5_0006 s_5_0007 s_5_0008 s_5_0009 s_5_0010 s_5_0011 s_5_0012 s_5_0013 s_5_0014 s_5_0015 s_5_0016 s_5_0017 s_5_0018 s_5_0019 s_5_0020 s_5_0021 s_5_0022 s_5_0023 s_5_0024 s_5_0025 s_5_0026 s_5_0027 s_5_0028 s_5_0029 s_5_0030 s_5_0031 s_5_0032 s_5_0033 s_5_0034 s_5_0035 s_5_0036 s_5_0037 s_5_0038 s_5_0039 s_5_0040 s_5_0041 s_5_0042 s_5_0043 s_5_0044 s_5_0045 s_5_0046 s_5_0047 s_5_0048 s_5_0049 s_5_0050 s_5_0051 s_5_0052 s_5_0053 s_5_0054 s_5_0055 s_5_0056 s_5_0057 s_5_0058 s_5_0059 s_5_0060 s_5_0061 s_5_0062 s_5_0063 s_5_0064 s_5_0065 s_5_0066 s_5_0067 s_5_0068 s_5_0069 s_5_0070 s_5_0071 s_5_0072 s_5_0073 s_5_0074 s_5_0075 s_5_0076 s_5_0077 s_5_0078 s_5_0079 s_5_0080 s_5_0081 s_5_0082 s_5_0083 s_5_0084 s_5_0085 s_5_0086 s_5_0087 s_5_0088 s_5_0089 s_5_0090 s_5_0091 s_5_0092 s_5_0093 s_5_0094 s_5_0095 s_5_0096 s_5_0097 s_5_0098 s_5_0099 s_5_0100" > tiles.txt/home
    
    /syoung/base/apps/GAPipeline-1.4.0/bin/maskQseq.pl --use_bases YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy  --orig_read_lengths 54:54  /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/s_1_1_0001_qseq.txt /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_09-07-2009_syoung.2/Bustard1.4.0_09-07-2009_syoung/s_1_2_0001_qseq.txt --output s_1_1_0001_ub_qseq.txt --output s_1_2_0001_ub_qseq.txt
    
    
    /home/syoung/base/apps/GAPipeline-1.4.0/bin/buildSeq.pl --fasta \
            tiles.txt s_1 1 _ub_qseq.txt \
            > s_1_1_eland_query.txt.tmp && mv s_1_1_eland_query.txt.tmp s_1_1_eland_query.txt
    
    /home/syoung/base/apps/GAPipeline-1.4.0/bin/eland_32 \
            s_1_1_eland_query.txt \
            /p/NGS/syoung/base/pipeline/human-genome s_1_1_eland_multi.txt.tmp --multi=  \
            && mv s_1_1_eland_multi.txt.tmp s_1_1_eland_multi.txt 







</entry>



<entry [Thu Jul  9 22:37:29 EDT 2009] NGS DISC USAGE ON /mihg>



~ 20T USED FOR NGS

688M    2sort
2.0T    core
0       dsmerror.log
108M    genolist
1.2T    lab
7.2T    NGS
46M     platefiles
14T     solexa
4.0K    studies
28K     test-genolist
970G    vendor

OUT OF 42T (98% USAGE):


[syoung@kronos ~]$ df -a
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/VolGroup00-LogVol00
                      269G   79G  177G  31% /
proc                     0     0     0   -  /proc
sysfs                    0     0     0   -  /sys
devpts                   0     0     0   -  /dev/pts
/dev/sda1              99M   28M   67M  29% /boot
tmpfs                 5.9G     0  5.9G   0% /dev/shm
none                     0     0     0   -  /proc/sys/fs/binfmt_misc
sunrpc                   0     0     0   -  /var/lib/nfs/rpc_pipefs
dionysius:/dio_zpool/mgg
                      8.0T  8.0T   22G 100% /mgg
nfsd                     0     0     0   -  /proc/fs/nfsd
/dev/homelv            17T   11T  6.1T  64% /home
studies.ccs.miami.edu:/store/mihg
                       10T  8.0T  2.1T  80% /mihg
idata.ccs.miami.edu:/store/Data01
                       43T   42T  1.3T  98% /p
bacchus:/bac_zpool/mihg
                       13T  7.1T  6.0T  55% /p2
dionysius:/dio_zpool/mihg
                      8.1T  8.0T   22G 100% /p1


</entry>



<entry [Wed Jul  8 14:13:26 EDT 2009] MESSAGE FROM LUKAS SMINK RE CONTROL-LANE>




    -----Original Message-----
    From: Lukas Smink [mailto:techsupport@illumina.com] 
    Sent: Thursday, July 09, 2009 5:13 AM
    To: Young, Stuart; tecport@illumina.com
    Subject: RE: SFC#00082745 - phasing.xml ERROR WITH GA Pipeline v1.4.0
    
    HI Sean,
    
    your commandline is:
    
     /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1     .4.0-test/geraldfile.txt --tiles=s_1_0001 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.4.0-test/09052     8_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    
    can you change that to:
    
     /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1     .4.0-test/geraldfile.txt --tiles=s_1_0001,s_5 --control-lane=5 --make /p/NGS/syoung/base/pipeline/run15/1.4.0-test/09052     8_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    
    If you use a control lane you do need to specify it. There wasn't an '=' after control-lane either
    
    Please don't hesitate to contact me through techsupport@illumina.com should you have any further questions.
    
    Best regards,
    
    Luc
    
    Dr Ir Luc J Smink
    Bioinformatics Support Scientist
    Scientific and Technical Support
    Illumina Cambridge Ltd,
    Chesterford Research Park
    Little Chesterford,
    Essex, CB10 1XL
    Email: TechSupport@illumina.com
    Web: www.illumina.com
    
    
    
    
    -----<Email Received>-----
    From: SYoung@med.miami.edu
    Sent: 2009-07-09 06:34:02
    To: techsupport@illumina.com
    CC: 
    Subject: RE: SFC#00082745 -  phasing.xml ERROR WITH GA Pipeline v1.4.0
    
    Hi Lukas,
    
    Here's a download of the actual contents of my new run folder:
    
    http://www.megaupload.com/?d=2NKJCKR6
    
    (It's a free site but hopefully should be quick.
    Cheers,
    
    Stuart.
    
    
    
    
    -----Original Message-----
    From: Young, Stuart
    Sent: Wednesday, July 08, 2009 1:10 PM
    To: 'Lukas Smink'
    Subject: RE: SFC#00082745 - phasing.xml ERROR WITH GA Pipeline v1.4.0
    
    Hi Lukas,
    
    Thanks for your message. I've attached the STDOUT and STDERR (merged into a single file: make.outerr) to this email and here's a list of the files and directories in the original run folder:
    
    ll /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    
    total 315M
    drwxrwxr-x  10 mihg mihg   32 Jun  8 10:40 .
    drwxr-xr-x+  5 root root    5 Jun 16 17:21 ..
    -rwxrw-r--+  1 mihg mihg  134 May 28 13:54
    -rwxrw-r--+ 090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.params
    drwxrwxr-x   2 mihg mihg  772 Jun  8 10:41 AnalysisLogs
    -rwxrw-r--+  1 mihg mihg  24K Jun  4 08:24 AnalysisPerfReport.xml
    drwxrwxr-x   2 mihg mihg   24 Jun  8 10:41 Calibration_09-06-01_15-27-51
    -rwxrw-r--+  1 mihg mihg  12K Jun  4 08:28 CommandIndex.bin
    drwxrwxr-x   3 mihg mihg   29 Jun  8 10:41 Config
    drwxrwxr-x   4 mihg mihg    5 Jun  8 10:41 Data
    -rwxrw-r--+  1 mihg mihg 899K Jun  4 09:11 Events.log
    -rwxrw-r--+  1 mihg mihg 1.4K May  8 10:51 GalaxyRunConfig.xml
    -rwxrw-r--+  1 mihg mihg   10 Jun  4 09:11 GA_Netcopy_Complete.txt
    drwxrwxr-x  10 mihg mihg   10 May 28 15:35 Images
    drwxrwxr-x   2 mihg mihg    5 Jun  8 13:59 IPAR_Config
    -rwxrw-r--+  1 mihg mihg 1.3M Jun  4 11:00 IPAR_Events.log
    -rwxrw-r--+  1 mihg mihg   10 Jun  4 11:00 IPAR_Netcopy_Complete.txt
    -rwxrw-r--+  1 mihg mihg   29 Jun  1 15:19 IPAR_PermissionTest.txt
    -rwxrw-r--+  1 mihg mihg 2.4M Jun  4 11:00 IPAR_Robocopy.log
    -rwxrw-r--+  1 mihg mihg   48 Jun  1 15:28 PairedEndInfo.xml
    -rwxrw-r--+  1 mihg mihg   29 May 28 13:54 PermissionTest.txt
    drwxrwxr-x   5 mihg mihg   11 Jun 11 03:21 ReadPrep1
    drwxrwxr-x   5 mihg mihg   11 Jun 11 03:23 ReadPrep2
    -rwxrw-r--+  1 mihg mihg  37K May 28 13:09
    -rwxrw-r--+ Recipe_GA2-PEM_2x54Cycle_v5.xml
    -rwxrw-r--+  1 mihg mihg  15M Jun  4 09:11 Robocopy.log
    -rwxrw-r--+  1 mihg mihg  175 Jun  1 15:19 RobocopyRunFolder.bat
    -rwxrw-r--+  1 mihg mihg    0 Jun  4 08:28 Run.completed
    -rwxrw-r--+  1 mihg mihg  57M May 29 16:59 RunLog_09-05-28_15-01-53.xml
    -rwxrw-r--+  1 mihg mihg  60M May 30 19:26 RunLog_09-05-29_17-01-14.xml
    -rwxrw-r--+  1 mihg mihg  32M Jun  1 15:02 RunLog_09-05-30_19-28-17.xml
    -rwxrw-r--+  1 mihg mihg  58M Jun  2 17:00 RunLog_09-06-01_15-33-49.xml
    -rwxrw-r--+  1 mihg mihg  60M Jun  3 19:35 RunLog_09-06-02_17-02-31.xml
    -rwxrw-r--+  1 mihg mihg  30M Jun  4 08:28 RunLog_09-06-03_19-37-56.xml
    
    
    And here are the files and folders in the new run folder:
    
    ll /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    total 295M
    drwxrwx---+ 5 syoung bioinfo 4.0K Jul  8 03:35 .
    drwxrwx---+ 4 syoung bioinfo 4.0K Jul  8 03:24 ..
    -rwxrw----+ 1 syoung bioinfo  134 Jul  7 23:53
    -rwxrw----+ 090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.params
    -rwxrw----+ 1 syoung bioinfo  24K Jul  8 02:24 AnalysisPerfReport.xml
    drwxrwx---+ 2 syoung bioinfo 4.0K Jul  8 02:23
    drwxrwx---+ Calibration_09-06-01_15-27-51
    drwxrwx---+ 3 syoung bioinfo 4.0K Jul  7 23:50 Config
    drwxrwx---+ 3 syoung bioinfo   94 Jul  8 04:31 Data
    -rw-rw----+ 1 syoung bioinfo  195 Jul  8 00:01 error.txt
    -rwxrw----+ 1 syoung bioinfo 1.4K Jul  8 02:24 GalaxyRunConfig.xml
    -rwxrw----+ 1 syoung bioinfo   10 Jul  8 02:25 GA_Netcopy_Complete.txt
    lrwxrwxrwx  1 syoung bioinfo   67 Jul  7 23:37 Images -> /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images
    -rwxrw----+ 1 syoung bioinfo   10 Jul  8 02:25 IPAR_Netcopy_Complete.txt
    -rwxrw----+ 1 syoung bioinfo   29 Jul  8 02:25 IPAR_PermissionTest.txt
    -rw-rw----+ 1 syoung bioinfo 135K Jul  8 03:52 make-seqpair.outerr
    -rwxrw----+ 1 syoung bioinfo   48 Jul  8 02:24 PairedEndInfo.xml
    -rwxrw----+ 1 syoung bioinfo   29 Jul  8 02:25 PermissionTest.txt
    -rwxrw----+ 1 syoung bioinfo  37K Jul  8 02:24
    -rwxrw----+ Recipe_GA2-PEM_2x54Cycle_v5.xml
    -rwxrw----+ 1 syoung bioinfo  57M Jul  8 02:24
    -rwxrw----+ RunLog_09-05-28_15-01-53.xml
    -rwxrw----+ 1 syoung bioinfo  60M Jul  8 02:24
    -rwxrw----+ RunLog_09-05-29_17-01-14.xml
    -rwxrw----+ 1 syoung bioinfo  32M Jul  8 02:24
    -rwxrw----+ RunLog_09-05-30_19-28-17.xml
    -rwxrw----+ 1 syoung bioinfo  58M Jul  8 02:24
    -rwxrw----+ RunLog_09-06-01_15-33-49.xml
    -rwxrw----+ 1 syoung bioinfo  60M Jul  8 02:24
    -rwxrw----+ RunLog_09-06-02_17-02-31.xml
    -rwxrw----+ 1 syoung bioinfo  30M Jul  8 02:24
    -rwxrw----+ RunLog_09-06-03_19-37-56.xml
    -rw-rw----+ 1 syoung bioinfo  419 Jul  8 00:02 warning.txt
    
    Cheers,
    
    Stuart.
    
    
    -----Original Message-----
    From: Lukas Smink [mailto:techsupport@illumina.com]
    Sent: Wednesday, July 08, 2009 6:00 AM
    To: Young, Stuart; TechSupport@illumina.com
    Subject: RE: SFC#00082745 - phasing.xml ERROR WITH GA Pipeline v1.4.0
    
    Dear Stuart,
    
    Thank you for contacting Illumina Technical Support.
    
    Could you send me the nohup file (standard error and standard out). It looks like some of the files that it looking for aren't there.  Also could you take out the '_' from the username? I am not sure if that will make a difference but just in case.
    
    I have seen instances before and generally this can occur when not all the required files are present. It looks like the image analysis has been finished and it falls over on the base calling. The nohup will allow me to examine this in more detail.
    
    Please don't hesitate to contact me through techsupport@illumina.com should you have any further questions.
    
    Best regards,
    
    Luc
    
    Dr Ir Luc J Smink
    Bioinformatics Support Scientist
    Scientific and Technical Support
    Illumina Cambridge Ltd,
    Chesterford Research Park
    Little Chesterford,
    Essex, CB10 1XL
    Email: TechSupport@illumina.com
    Web: www.illumina.com
    
    
    
    
    -----<Email Received>-----
    From: SYoung@med.miami.edu
    Sent: 2009-07-08 09:01:33
    To: TechSupport@illumina.com
    CC:
    Subject: phasing.xml ERROR WITH GA Pipeline v1.4.0
    
    Dear Sir/Madam,
    
    I am trying to run GA Pipeline v1.4.0 to do image processing, base calling and Eland alignment but am receiving this error:
    
    Warning: Not enough cycles for automated phasing estimate for Phasing/s_2_0099_55_cycle.txt: Need 6 cycles, have 0. Skipping...
    Phasing/s_2_0100_55_cycle.txt
    cat Phasing/s_1_55_phasing.txt Phasing/s_2_55_phasing.txt > Phasing/s_55_phasing.txt.tmp && mv Phasing/s_55_phasing.txt.tmp Phasing/s_55_phasing.txt /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_phasing.py Phasing/s_55_phasing.txt > Phasing/s_55_phasing.xml.tmp && mv Phasing/s_55_phasing.xml.tmp Phasing/s_55_phasing.xml
    make: *** No rule to make target `Phasing/s_5_01_phasing.xml', needed by `params1.xml'.  Stop.
    [syoung@c30 Bustard1.4.0_07-07-2009_syoung]$ make
    Makefile:15: Reading Makefile includes.
    Analysing lanes s_1 s_2
    Current target stack: all s_1
    
    Command line used to setup the analysis:
            /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan --tiles=s_1,s_2 --control-lane 5 --make
    OS: Linux c08 2.6.18-53.el5 #1 SMP Wed Oct 10 16:34:19 EDT 2007 x86_64
    
    
    make: *** No rule to make target `Phasing/s_5_01_phasing.xml', needed by `params1.xml'.  Stop.
    
    
    The original run folder is on a read-only drive. I am running goat_pipeline.py to create the Makefiles on a new run folder into which I have copied most of the contents of the original run folder, except for the Images directory, which I have used a symbolic link for.
    
    Is this a commonly-seen problem? If not, please let me know what additional information you need to help me with this. I have copied below some of the details of my analysis.
    
    Best regards,
    
    Stuart Young
    Research Associate
    Center for Computational Science
    Leonard M. Miller School of Medicine
    1120 NW 14th St., CRB-1188 (C-213Miami, FL 33136 Tel. + 1 (305) 243-4539
    
    
    GERALD FILE:
    
    12:ANALYSIS        eland_pair
    5:ANALYSIS         sequence_pair
    12:SEQUENCE_FORMAT --fastq
    5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
    12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome
    
    COPY OVER ADDITIONAL DIRECTORIES AND FILES BEFORE RUNNING 1.4.0
    
    
    ##1. CREATE NEW RUN DIR
    
    mkdir /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    
    
    ## LINK Images DIR
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    ln -s /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images Images
    
    
    ## CREATE geraldfile.txt IN BASE DIR
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test
    emacs geraldfile.txt
    125:ANALYSIS        eland_pair
    12:SEQUENCE_FORMAT --fastq
    5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
    12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome
    
    
    ## COPY PairedEndInfo.xml
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/PairedEndInfo.xml ./
    
    ###em PairedEndInfo
    ###    <?xml version="1.0"?>
    ###    <FirstRead Length="54" />
    
    
    ##  COPY <RUNDIR>.params
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.params ./
    
    
    
    ## CREATE Data DIR AND COPY .params
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    mkdir Data
    cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/.params Data
    
    
    ## COPY Config DIR
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    
    cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Config ./
    
    
    ## COPY Calibration_* DIR
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    
    cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Calibration_* ./
    
    
    ## COPY .xml AND .txt FILES
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    
    cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/*.xml ./ cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/*.txt ./
    
    
    
    
    ## RUN IT!!
    
    ##CREATE MAKEFILE
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data
    
    time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0-test/geraldfile.txt --tiles=s_1_0001 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    
    OK
        ...
        Run 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung/Bustard1.4.0_08-07-2009_syoung/GERALD_08-07-2009_syoung/Makefile completed with no problems
        Task complete, exiting
        Removing temporary file /tmp/tmp-GERALD-1008-23685.txt
    
    
    FILES CREATED:
    
    Data
    
        C1-108_Firecrest1.4.0_08-07-2009_syoung
    
            config.xml
            Input
            Makefile
            Makefile.images.compress
            Makefile.imaging.compress
            Makefile.imaging.config
            Makefile.imaging.rules
            Offsets
            params1.xml
            Sizes
            support.txt
            Temp
            Bustard1.4.0_08-07-2009_syoung
    
                config.xml
                Makefile
                Makefile.basecalling.compress
                Makefile.basecalling.config
                Matrix
                Phasing
                Plots
                SignalMeans
                support.txt
                Temp
                GERALD_08-07-2009_syoung
    em
                    -rw-rw----+ 1 syoung bioinfo  185 Jul  8 00:02 config.txt
                    -rw-rw----+ 1 syoung bioinfo 5.3K Jul  8 00:02 config.xml
                    -rw-rw----+ 1 syoung bioinfo 103K Jul  8 00:02 Makefile
                    drwxrwx---+ 2 syoung bioinfo    6 Jul  8 00:02 Plots
                    drwxrwx---+ 2 syoung bioinfo    6 Jul  8 00:02 Temp
    
    
    FIRECREST config.xml
    
    <?xml version="1.0"?>
    <ImageAnalysis>
      <Run Name="C1-108_Firecrest1.4.0_08-07-2009_syoung">
        <Cycles First="1" Last="108" Number="108" />
        <ImageParameters>
          <AutoOffsetFlag>1</AutoOffsetFlag>
          <AutoSizeFlag>0</AutoSizeFlag>
          <DataOffsetFile>/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/default_offsets.txt</DataOffsetFile>
          <Fwhm>2.100000</Fwhm>
          <ImageFlags>--nd 2 --minobjpix 3 --flag 3</ImageFlags>
          <InstrumentOffsetFile>/p/NGS/syoung/base/pipeline/run15/1.4.0-test/Instruments/HWI-EAS185/default_offsets.txt</InstrumentOffsetFile>
          <OffsetFile>/p/NGS/syoung/base/pipeline/run15/1.4.0-test/Instruments/HWI-EAS185/default_offsets.txt</OffsetFile>
          <Offsets X="0.000000" Y="0.000000" />
          <Offsets X="0.000000" Y="0.000000" />
          <Offsets X="0.000000" Y="0.000000" />
          <Offsets X="0.000000" Y="0.000000" />
    
    
    BUSTARD config.xml:
    
    <?xml version="1.0"?>
    <BaseCallAnalysis>
      <Run Name="Bustard1.4.0_08-07-2009_syoung">
        <BaseCallParameters>
          <ChastityThreshold>0.600000</ChastityThreshold>
          <Matrix Path="">
            <AutoFlag>1</AutoFlag>
            <AutoLane>5</AutoLane>
            <Cycle>2</Cycle>
            <CycleOffset>1</CycleOffset>
            <FirstCycle>1</FirstCycle>
            <LastCycle>54</LastCycle>
            <Read>1</Read>
          </Matrix>
    
    
    GERALD config.xml:
    
        RunParameters>
        <ChipWideRunParameters>
          <ALIGN_PARAMS></ALIGN_PARAMS>
          <ANALYSIS>none</ANALYSIS>
          <BAD_TILES></BAD_TILES>
          <BIN_DIR>/home/syoung/base/apps/GAPipeline-1.4.0/bin/../bin</BIN_DIR>
          <CHASTITY_THRESHOLD>0.6</CHASTITY_THRESHOLD>
          <CMDPREFIX></CMDPREFIX>
          <COMPRESSION>gzip</COMPRESSION>
          <COMPRESSIONSUFFIX>.gz</COMPRESSIONSUFFIX>
          <ELAND_GENOME>Need_to_specify_ELAND_genome_directory</ELAND_GENOME>
          <ELAND_MAX_MATCHES></ELAND_MAX_MATCHES>
          <ELAND_MULTIPLE_INSTANCES></ELAND_MULTIPLE_INSTANCES>
          <ELAND_REPEAT></ELAND_REPEAT>
          <ELAND_RNA_GENOME_CONTAM></ELAND_RNA_GENOME_CONTAM>
          <ELAND_RNA_GENOME_SPLICE></ELAND_RNA_GENOME_SPLICE>
          <ELAND_SEED_LENGTH></ELAND_SEED_LENGTH>
          <EMAIL_DOMAIN>domain.com</EMAIL_DOMAIN>
    
    
    ##RUN MAKE
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung
    
    make recursive -j1
    
    TERMINATED WITH bad_alloc - LIKELY NOT ENOUGH MEMORY OR PROCESSES ON KRONOS, SO RAN ON CLUSTER:
    
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test
    rm -fr run-make.sh
    emacs run-make.sh
    #!/bin/sh
    
    #PBS -l ncpus=8
    
    #PBS -j oe
    
    cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung.2
    
    make recursive -j8 &> /p/NGS/syoung/base/pipeline/run15/1.4.0-test/make.outerr
    
    exit;
    
    #### END
    
    
    chmod 755 run-make.sh
    qsub -q psmall run-make.sh
    date
    
        58899.kronos.ccs.miami.edu
        [syoung@kronos 1.4.0-test]$ date
    Wed Jul  8 02:45:23 EDT 2009
    
    
    
    
    IMAGE PROCESSING WAS FINE:
    
    
        0.00  0.00   0.00  0.00
       Updating offsets file ../default_offsets.txt
       Offsets updated
       set -o pipefail;  cat tiles.txt | sed 's/ /\n/g' | grep s_1 | perl -lane '{ printf ("Temp/L001/${F[0]}_01_qcm.xml\n");}' | /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/parse_cluster_stats.py - > Sizes/s_1_sizes.txt.tmp && mv Sizes/s_1_sizes.txt.tmp Sizes/s_1_sizes.txt
       cat Sizes/s_1_sizes.txt > Sizes/sizes.txt.tmp && mv Sizes/sizes.txt.tmp Sizes/sizes.txt
       /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_cluster_size.py Sizes/s_1_sizes.txt > Sizes/s_1_sizes.xml.tmp && mv Sizes/s_1_sizes.xml.tmp Sizes/s_1_sizes.xml
       /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_cluster_size.py Sizes/sizes.txt > Sizes/sizes.xml.tmp && mv Sizes/sizes.xml.tmp Sizes/sizes.xml
       Image analysis has completed successfully.
    
    
    BUT DID NOT CONTINUE AND RUN Bustard. SO RAN BUSTARD MANUALLY AND GOT THE phasing.xml ERROR:
    
    cd Bustard*
    
    make
    
        for f in Phasing/s_1_0001_55_cycle.txt; do \
                    echo $f && \
                     /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/phasing_summary.py $f >> Phasing/s_1_55_phasing.txt.tmp ; \
                done && \
                mv Phasing/s_1_55_phasing.txt.tmp Phasing/s_1_55_phasing.txt
        Phasing/s_1_0001_55_cycle.txt
        cat Phasing/s_1_55_phasing.txt > Phasing/s_55_phasing.txt.tmp && mv Phasing/s_55_phasing.txt.tmp Phasing/s_55_phasing.txt
        /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_phasing.py Phasing/s_55_phasing.txt > Phasing/s_55_phasing.xml.tmp && mv Phasing/s_55_phasing.xml.tmp Phasing/s_55_phasing.xml
        make: *** No rule to make target `Phasing/s_5_01_phasing.xml', needed by `params1.xml'.  Stop.
    
    Best regards,
    
    Luc
    
    Dr Ir Luc J Smink
    Bioinformatics Support Scientist
    Scientific and Technical Support
    Illumina Cambridge Ltd, Chesterford Research Park Little Chesterford, Nr Saffron Walden Essex, CB10 1XL
    E-mail: TechSupport@illumina.com
    Web: www.illumina.com
    
    Best regards, 
     
    Luc
     
    Dr Ir Luc J Smink
    Bioinformatics Support Scientist
    Scientific and Technical Support
    Illumina Cambridge Ltd, Chesterford Research Park
    Little Chesterford, Nr Saffron Walden
    Essex, CB10 1XL
    E-mail: TechSupport@illumina.com
    Web: www.illumina.com





</entry>



<entry [Wed Jul  8 14:13:26 EDT 2009] /p IS FULL - DO ANALYSIS ON /nethome>




##1. CREATE NEW RUN DIR

mkdir -p /nethome/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan


## LINK Images DIR

cd /nethome/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
ln -s /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images Images


## CREATE geraldfile.txt IN BASE DIR

cd /nethome/syoung/base/pipeline/run15/1.4.0-test
emacs geraldfile.txt
125:ANALYSIS        eland_pair
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /nethome/syoung/base/pipeline/phix/
12:ELAND_GENOME    /nethome/syoung/base/pipeline/human-genome


## COPY PairedEndInfo.xml

cd /nethome/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/PairedEndInfo.xml ./

###em PairedEndInfo
###    <?xml version="1.0"?>
###    <FirstRead Length="54" />


##  COPY <RUNDIR>.params

cd /nethome/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.params ./



## CREATE Data DIR AND COPY .params

cd /nethome/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
mkdir Data
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/.params Data


## COPY Config DIR

cd /nethome/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Config ./


## COPY Calibration_* DIR

cd /nethome/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Calibration_* ./


## COPY .xml AND .txt FILES

cd /nethome/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/*.xml ./
cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/*.txt ./






</entry>



<entry [Tue Jul  7 23:46:26 EDT 2009] COPY OVER ADDITIONAL DIRECTORIES AND FILES BEFORE RUNNING 1.4.0>




##1. CREATE NEW RUN DIR

mkdir /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan


## LINK Images DIR

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
ln -s /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images Images


## CREATE geraldfile.txt IN BASE DIR

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test
emacs geraldfile.txt
125:ANALYSIS        eland_pair
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


## COPY PairedEndInfo.xml

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/PairedEndInfo.xml ./

###em PairedEndInfo
###    <?xml version="1.0"?>
###    <FirstRead Length="54" />


##  COPY <RUNDIR>.params

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.params ./



## CREATE Data DIR AND COPY .params

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
mkdir Data
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/.params Data


## COPY Config DIR

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Config ./


## COPY Calibration_* DIR

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Calibration_* ./


## COPY .xml AND .txt FILES

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/*.xml ./
cp -r /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/*.txt ./




## RUN IT!!

##CREATE MAKEFILE

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0-test/geraldfile.txt --tiles=s_1_0001 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

OK
    ...
    Run 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung/Bustard1.4.0_08-07-2009_syoung/GERALD_08-07-2009_syoung/Makefile completed with no problems
    Task complete, exiting
    Removing temporary file /tmp/tmp-GERALD-1008-23685.txt


FILES CREATED:

Data
    
    C1-108_Firecrest1.4.0_08-07-2009_syoung
    
        config.xml
        Input
        Makefile
        Makefile.images.compress
        Makefile.imaging.compress
        Makefile.imaging.config
        Makefile.imaging.rules
        Offsets
        params1.xml
        Sizes
        support.txt
        Temp
        Bustard1.4.0_08-07-2009_syoung

            config.xml
            Makefile
            Makefile.basecalling.compress
            Makefile.basecalling.config
            Matrix
            Phasing
            Plots
            SignalMeans
            support.txt
            Temp
            GERALD_08-07-2009_syoung
em 
                -rw-rw----+ 1 syoung bioinfo  185 Jul  8 00:02 config.txt
                -rw-rw----+ 1 syoung bioinfo 5.3K Jul  8 00:02 config.xml
                -rw-rw----+ 1 syoung bioinfo 103K Jul  8 00:02 Makefile
                drwxrwx---+ 2 syoung bioinfo    6 Jul  8 00:02 Plots
                drwxrwx---+ 2 syoung bioinfo    6 Jul  8 00:02 Temp


FIRECREST config.xml

<?xml version="1.0"?>
<ImageAnalysis>
  <Run Name="C1-108_Firecrest1.4.0_08-07-2009_syoung">
    <Cycles First="1" Last="108" Number="108" />
    <ImageParameters>
      <AutoOffsetFlag>1</AutoOffsetFlag>
      <AutoSizeFlag>0</AutoSizeFlag>
      <DataOffsetFile>/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/default_offsets.txt</DataOffsetFile>
      <Fwhm>2.100000</Fwhm>
      <ImageFlags>--nd 2 --minobjpix 3 --flag 3</ImageFlags>
      <InstrumentOffsetFile>/p/NGS/syoung/base/pipeline/run15/1.4.0-test/Instruments/HWI-EAS185/default_offsets.txt</InstrumentOffsetFile>
      <OffsetFile>/p/NGS/syoung/base/pipeline/run15/1.4.0-test/Instruments/HWI-EAS185/default_offsets.txt</OffsetFile>
      <Offsets X="0.000000" Y="0.000000" />
      <Offsets X="0.000000" Y="0.000000" />
      <Offsets X="0.000000" Y="0.000000" />
      <Offsets X="0.000000" Y="0.000000" />


BUSTARD config.xml:

<?xml version="1.0"?>
<BaseCallAnalysis>
  <Run Name="Bustard1.4.0_08-07-2009_syoung">
    <BaseCallParameters>
      <ChastityThreshold>0.600000</ChastityThreshold>
      <Matrix Path="">
        <AutoFlag>1</AutoFlag>
        <AutoLane>5</AutoLane>
        <Cycle>2</Cycle>
        <CycleOffset>1</CycleOffset>
        <FirstCycle>1</FirstCycle>
        <LastCycle>54</LastCycle>
        <Read>1</Read>
      </Matrix>


GERALD config.xml:
    
    RunParameters>
    <ChipWideRunParameters>
      <ALIGN_PARAMS></ALIGN_PARAMS>
      <ANALYSIS>none</ANALYSIS>
      <BAD_TILES></BAD_TILES>
      <BIN_DIR>/home/syoung/base/apps/GAPipeline-1.4.0/bin/../bin</BIN_DIR>
      <CHASTITY_THRESHOLD>0.6</CHASTITY_THRESHOLD>
      <CMDPREFIX></CMDPREFIX>
      <COMPRESSION>gzip</COMPRESSION>
      <COMPRESSIONSUFFIX>.gz</COMPRESSIONSUFFIX>
      <ELAND_GENOME>Need_to_specify_ELAND_genome_directory</ELAND_GENOME>
      <ELAND_MAX_MATCHES></ELAND_MAX_MATCHES>
      <ELAND_MULTIPLE_INSTANCES></ELAND_MULTIPLE_INSTANCES>
      <ELAND_REPEAT></ELAND_REPEAT>
      <ELAND_RNA_GENOME_CONTAM></ELAND_RNA_GENOME_CONTAM>
      <ELAND_RNA_GENOME_SPLICE></ELAND_RNA_GENOME_SPLICE>
      <ELAND_SEED_LENGTH></ELAND_SEED_LENGTH>
      <EMAIL_DOMAIN>domain.com</EMAIL_DOMAIN>


##RUN MAKE

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung

make recursive -j1

TERMINATED WITH bad_alloc - LIKELY NOT ENOUGH MEMORY OR PROCESSES ON KRONOS, SO RAN ON CLUSTER:


cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test
rm -fr run-make.sh
emacs run-make.sh
#!/bin/sh

#PBS -l ncpus=8

#PBS -j oe

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung.2

make recursive -j8 &> /p/NGS/syoung/base/pipeline/run15/1.4.0-test/make.outerr

exit;

#### END


chmod 755 run-make.sh
qsub -q psmall run-make.sh
date

    58899.kronos.ccs.miami.edu
    [syoung@kronos 1.4.0-test]$ date
    Wed Jul  8 02:45:23 EDT 2009




        ./
        Firecrest.log
        Error: Error: 
        .c::fopen_tiff(/p/NGS/syoung/base/pipeline/ru
        Error: /home/syoung/base/apps/GAPipeline-1.4.0/c++/imaging/tifflib.c::fopen_tiff(/p/NGS/syoung/base/pipeline/ru: No such file or directory
        Error: Error: /home/syoung/base/apps/GAPipeline-1.4.0/c++/imaging/tifflib.c::fopen_tiff(/p/NGS/syoung/base/pipeline/ru
        Error: /home/syoung/base/apps/GAPipeline-1.4.0/c++/imaging/tifflib.c::fopen_tiff(/p/NGS/syoung/base/pipeline/ru: No such file or directory
        Error: Error: /home/syoung/base/apps/GAPipeline-1.4.0/c++/imaging/tifflib.c::fopen_tiff(/p/NGS/syoung/base/pipeline/ru
        Error: /home/syoung/base/apps/GAPipeline-1.4.0/c++/imaging/tifflib.c::fopen_tiff(/p/NGS/syoung/base/pipeline/ru: No such file or directory
        Error: Error: /home/syoung/base/apps/GAPipeline-1.4.0/c++/imaging/tifflib.c::fopen_tiff(/p/NGS/syoung/base/pipeline/ru
        Error: /home/syoung/base/apps/GAPipeline-1.4.0/c++/imaging/tifflib.c::fopen_tiff(/p/NGS/syoung/base/pipeline/ru: No such file or directory
        Failed to load any first-cycle image; exiting...
        
        Error: Failed to load any first-cycle image; exiting...
        
        make[2]: *** [s_1_0001_int.txt.p.gz] Error 1
        make[2]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung.3'
        make[1]: *** [calibration.2] Error 2
        make[1]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung.3'
        make: *** [nonrecursive] Error 2



WOULD NOT RUN BY SHELL SCRIPT ON CLUSTER BUT DID RUN MANUALLY ON node29, IMAGE PROCESSING COMPLETED OKAY BUT BASE CALLING FAILED WITH SAME *phasing.xml ERROR AS BEFORE:

    Command line used to setup the analysis:
            /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0-test/geraldfile.txt --tiles=s_1_0001 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    OS: Linux kronos.ccs.miami.edu 2.6.18-53.el5 #1 SMP Wed Oct 10 16:34:19 EDT 2007 x86_64
    
    make[2]: *** No rule to make target `Phasing/s_5_01_phasing.xml', needed by `params1.xml'.  Stop.
    make[2]: *** Waiting for unfinished jobs....
    make[2]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung.2/Bustard1.4.0_08-07-2009_syoung'
    make[1]: *** [nonrecursive] Error 2
    make[1]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_08-07-2009_syoung.2/Bustard1.4.0_08-07-2009_syoung'
    make: *** [Bustard1.4.0_08-07-2009_syoung] Error 2



TRIED WITH NEW LINE IN geraldfile.txt:

12:ANALYSIS        eland_pair
5:ANALYSIS         sequence_pair
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


IMAGE PROCESSING WAS FINE:

cd /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0-test/geraldfile.txt --tiles=s_1_0001 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.4.0-test/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

    0.00  0.00   0.00  0.00
   Updating offsets file ../default_offsets.txt
   Offsets updated
   set -o pipefail;  cat tiles.txt | sed 's/ /\n/g' | grep s_1 | perl -lane '{ printf ("Temp/L001/${F[0]}_01_qcm.xml\n");}' | /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/parse_cluster_stats.py - > Sizes/s_1_sizes.txt.tmp && mv Sizes/s_1_sizes.txt.tmp Sizes/s_1_sizes.txt
   cat Sizes/s_1_sizes.txt > Sizes/sizes.txt.tmp && mv Sizes/sizes.txt.tmp Sizes/sizes.txt
   /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_cluster_size.py Sizes/s_1_sizes.txt > Sizes/s_1_sizes.xml.tmp && mv Sizes/s_1_sizes.xml.tmp Sizes/s_1_sizes.xml
   /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_cluster_size.py Sizes/sizes.txt > Sizes/sizes.xml.tmp && mv Sizes/sizes.xml.tmp Sizes/sizes.xml
   Image analysis has completed successfully.


BUT DID NOT CONTINUE AND RUN Bustard. SO RAN BUSTARD MANUALLY AND GOT THE phasing.xml ERROR:

cd Bustard*

make

    for f in Phasing/s_1_0001_55_cycle.txt; do \
                echo $f && \
                 /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/phasing_summary.py $f >> Phasing/s_1_55_phasing.txt.tmp ; \
            done && \
            mv Phasing/s_1_55_phasing.txt.tmp Phasing/s_1_55_phasing.txt
    Phasing/s_1_0001_55_cycle.txt
    cat Phasing/s_1_55_phasing.txt > Phasing/s_55_phasing.txt.tmp && mv Phasing/s_55_phasing.txt.tmp Phasing/s_55_phasing.txt
    /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/select_phasing.py Phasing/s_55_phasing.txt > Phasing/s_55_phasing.xml.tmp && mv Phasing/s_55_phasing.xml.tmp Phasing/s_55_phasing.xml
    make: *** No rule to make target `Phasing/s_5_01_phasing.xml', needed by `params1.xml'.  Stop.














</entry>



<entry [Tues Jun  30 15:22:47 EDT 2009] RUN image2eland-cluster.pl ON run15 AND run12 AFTER FIXING Common.pm IN GA Pipeline v1.4.0 AND ADDING COPY OF PairedEndInfo.xml TO NEW RUN FOLDER>




run15
-----

RUN WITH v1.3.2 

cd /p/NGS/syoung/base/pipeline/run15/1.3.2

perl /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl \
--type paired \
--rundir /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan \
--imagedir /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images \
--outputdir /p/NGS/syoung/base/pipeline/run15/1.3.2 \
--geraldfile /p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt \
--readlength 54 \
--cpus 8 \
--queue "-q psmall" \
--control 5 \
--tiles s_1,s_2
    
    qsub -q psmall /p/NGS/syoung/base/pipeline/run15/1.3.2/run-image2eland.sh
    58676.kronos.ccs.miami.edu
    
    Run time: 00:00:00
    Completed /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl
    6:03AM, 7 July 2009
    ****************************************

        WHICH RUNS image2eland.pl AS FOLLOWS:
        
        cd /p/NGS/syoung/base/pipeline/run15/1.3.2
        
        /nethome/syoung/base/bin/nextgen/image2eland.pl \
        --type paired --rundir /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI\
        -EAS185_0007_42C1TAAXX_Flemington_Duan --outputdir /p/NGS/syoung/base/pipeline/run15/1.3\
        .2/outdir --geraldfile /p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt --readleng\
        th 54 --cpus 8 --control 5 --tiles s_1,s_2




RUN WITH v1.4.0 

cd /p/NGS/syoung/base/pipeline/run15/1.4.0

perl /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl \
--type paired \
--rundir /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan \
--imagedir /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images \
--outputdir /p/NGS/syoung/base/pipeline/run15/1.4.0 \
--geraldfile /p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt \
--readlength 54 \
--cpus 8 \
--queue "-q psmall" \
--control 5 \
--tiles s_1,s_2


    qsub -q psmall /p/NGS/syoung/base/pipeline/run15/1.4.0/run-image2eland.sh
    58675.kronos.ccs.miami.edu
    
    Run time: 00:00:00
    Completed /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl
    6:02AM, 7 July 2009
    ****************************************
    
        
        WHICH RUNS image2eland.pl AS FOLLOWS:
        
        cd /p/NGS/syoung/base/pipeline/run15/1.4.0
        
        /nethome/syoung/base/bin/nextgen/image2eland.pl \
        --type paired --rundir /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI\
        -EAS185_0007_42C1TAAXX_Flemington_Duan --outputdir /p/NGS/syoung/base/pipeline/run15/1.3\
        .2/outdir --geraldfile /p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt --readleng\
        th 54 --cpus 8 --control 5 --tiles s_1,s_2


DID NOT COMPLETE - CHECK make.error FILE:


emacs /p/NGS/syoung/base/pipeline/run15/1.4.0/outdir/make.error

    Makefile:5: Reading Makefile variables.
    Makefile:85: Reading Makefile rules.
    Makefile:5: Reading Makefile variables.
    Makefile:85: Reading Makefile rules.
    Makefile:5: Reading Makefile variables.
    Makefile:85: Reading Makefile rules.
    Warning: Old offsets deviate by more than  0.30!
    Makefile:5: Reading Makefile variables.
    Makefile:85: Reading Makefile rules.
    Makefile:15: Reading Makefile includes.
    Makefile:15: Reading Makefile includes.
    make[2]: *** No rule to make target `Phasing/s_5_01_phasing.xml', needed by `params1.xml'.  Stop.
    make[2]: *** Waiting for unfinished jobs....
    make[1]: *** [nonrecursive] Error 2
    make: *** [Bustard1.4.0_07-07-2009_syoung] Error 2


tail /p/NGS/syoung/base/pipeline/run15/1.4.0/outdir/make.out

    ...
    (line ~170,000)
        Comparing to offset file default_offsets.txt
      New offsets   old offsets   difference   new scales    old scales    difference   new shears    old shears    difference
        0.00  0.00   0.00  0.00   0.00  0.00     0.00  0.00   0.00  0.00   0.00  0.00     0.00  0.00   0.00  0.00   0.00  0.00
       -2.19 -1.16  -2.19 -1.17  -0.00 -0.01    -0.26 -0.55  -0.26 -0.55   0.00 -0.00     0.00  0.00   0.00  0.00   0.00  0.00
       -0.50  0.31  -0.49  0.31   0.01  0.00     1.50  1.60   1.50  1.58  -0.00 -0.02     0.00  0.00   0.00  0.00   0.00  0.00
       -2.61 -0.66  -2.59 -0.66   0.02 -0.00     0.67  0.91   0.68  0.91   0.01  0.00     0.00  0.00   0.00  0.00   0.00  0.00
    Updating offsets file ../default_offsets.txt
    Image analysis has completed successfully.
    
    make[1]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-\
    07-2009_syoung.8'
    make --directory=Bustard1.4.0_07-07-2009_syoung recursive TARGET=
    make[1]: Entering directory `/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07\
    -07-2009_syoung.8/Bustard1.4.0_07-07-2009_syoung'
    make
    Current target stack: recursive
    make[2]: Entering directory `/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07\
    -07-2009_syoung.8/Bustard1.4.0_07-07-2009_syoung'
    Analysing lanes s_1 s_2
    Current target stack: all s_1
    
    Command line used to setup the analysis:
            /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt /p/\
    NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan --tiles=s_1,s_2 --control-lane 5 --make
    OS: Linux c09 2.6.18-53.el5 #1 SMP Wed Oct 10 16:34:19 EDT 2007 x86_64
    
    /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/estimateCrosstalk -I  -z gzip -c 2 /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42\
    C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.8/s_1_0001_int.txt > Matrix/s_1_0001_02_mat.txt.tmp && mv Matrix/s_1_0001_02_mat.txt.t\
    mp Matrix/s_1_0001_02_mat.txt
    
    Command line used to setup the analysis:
            /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt /p/\
    NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan --tiles=s_1,s_2 --control-lane 5 --make
    OS: Linux c09 2.6.18-53.el5 #1 SMP Wed Oct 10 16:34:19 EDT 2007 x86_64
    ...
    (line ~175,000)
    ...
    C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.8/s_2_0099_int.txt > Matrix/s_2_0099_56_mat.txt.tmp && mv Matrix/s_2_0099_56_mat.txt.tmp Matrix/s_2_0099_56_mat.txt
    /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/estimateCrosstalk -I  -z gzip -c 56 /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.8/s_2_0100_int.txt > Matrix/s_2_0100_56_mat.txt.tmp && mv Matrix/s_2_0100_56_mat.txt.tmp Matrix/s_2_0100_56_mat.txt
    make[2]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.8/Bustard1.4.0_07-07-2009_syoung'
    make[1]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.8/Bustard1.4.0_07-07-2009_syoung'



CONTENTS OF params1.xml FILE:


emacs /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.8/params1.xml

<ImageParameters>
  <Fwhm>2.100000</Fwhm>
  <RemappingDistance>2.200000</RemappingDistance>
</ImageParameters>



run12
-----

RUN WITH v1.3.2

mkdir -p /p/NGS/syoung/base/pipeline/run12/1.3.2
cd /p/NGS/syoung/base/pipeline/run12/1.3.2

perl /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl \
--type paired \
--rundir /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--imagedir /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Images \
--outputdir /p/NGS/syoung/base/pipeline/run12/1.3.2 \
--geraldfile /p/NGS/syoung/base/pipeline/run12/1.3.2/geraldfile.txt \
--readlength 54 \
--cpus 8 \
--queue "-q psmall" \
--control 5 \
--tiles s_1,s_2
    

qsub -q psmall /p/NGS/syoung/base/pipeline/run12/1.3.2/run-image2eland.sh
58677.kronos.ccs.miami.edu
    
    Run time: 00:00:01
    Completed /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl
    6:12AM, 7 July 2009
    ****************************************


RUN WITH v1.4.0 

mkdir -p /p/NGS/syoung/base/pipeline/run12/1.4.0
cd /p/NGS/syoung/base/pipeline/run12/1.4.0

perl /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl \
--type paired \
--rundir /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3 \
--imagedir /p1/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Images \
--outputdir /p/NGS/syoung/base/pipeline/run12/1.4.0 \
--geraldfile /p/NGS/syoung/base/pipeline/run12/1.4.0/geraldfile.txt \
--readlength 54 \
--cpus 8 \
--queue "-q psmall" \
--control 5 \
--tiles s_1,s_2

    qsub -q psmall /p/NGS/syoung/base/pipeline/run12/1.4.0/run-image2eland.sh
    58678.kronos.ccs.miami.edu
    
    Run time: 00:00:00
    Completed /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl
    6:14AM, 7 July 2009
    ****************************************




ALL JOBS ARE CURRENTLY QUEUED

    Job id                    Name             User            Time Use S Queue
    ------------------------- ---------------- --------------- -------- - -----
    58675.kronos              ...mage2eland.sh syoung                 0 Q psmall         
    58676.kronos              ...mage2eland.sh syoung                 0 Q psmall         
    58677.kronos              ...mage2eland.sh syoung                 0 Q psmall         
    58678.kronos              ...mage2eland.sh syoung                 0 Q psmall         
    [syoung@kronos 1.4.0]$ 
    
    Tue Jul  7 06:15:13 EDT 2009














</entry>



<entry [Tues Jun  30 15:22:47 EDT 2009] SECOND RUN OF CARDIAC DATA>



1. LOCATE ARCHIVED RUN 15 AND CREATE RUN ANALYSIS DIRECTORY

RUN IS HERE:

/p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

CREATE ANALYSIS DIRECTORY:

mkdir -p /p/NGS/syoung/base/pipeline/run15


2. SQUASH HUMAN CHROMOSOMES

MOVED TO EXECUTION NODE TO AVOID MEMORY LIMIT WHICH CAUSES 'Segmentation fault' ERROR ON kronos BUT STILL GOT THE ERROR WHEN SQUASHING chr1.fa WHEN RUNNING IN SUCCESSION WITH

/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/squashGenome `pwd` `ls chr*fa`

BUT IT WORKED WHEN SQUASHING WITH INDIVIDUAL COMMANDS FOR EACH chr*.fa FILE.

I.E., THIS GAVE THE ERROR:

ssh n29
screen -S squash-genomes
cd /p/NGS/syoung/base/pipeline/human-genome
/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/squashGenome `pwd` `ls chr*fa`

    User: 0s System: 0s Actual: 4e-06s Efficiency: 0%
    Full file path: chr10.fa
    Extracted file name:chr10.fa
    /p/NGS/syoung/base/pipeline/human-genome/chr10.fa.2bpb /p/NGS/syoung/base/pipeline/human-genome/chr10.fa.vld
    squash: opened file chr10.fa of size 138082239 bytes.
    ...
    Full file path: chr1.bfa
    Extracted file name:chr1.bfa
    /p/NGS/syoung/base/pipeline/human-genome/chr1.bfa.2bpb /p/NGS/syoung/base/pipeline/human-genome/chr1.bfa.vld
    squash: opened file chr1.bfa of size 123624881 bytes.
    Segmentation fault


BUT IT WORKS ON chr1.fa WHEN DONE INDIVIDUALLY:


/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/squashGenome `pwd` chr8.fa

    /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/squashGenome `pwd` chr1.fa
    User: 0s System: 0s Actual: 2e-06s Efficiency: 0%
    Full file path: chr1.fa
    Extracted file name:chr1.fa
    /p/NGS/syoung/base/pipeline/human-genome/chr1.fa.2bpb /p/NGS/syoung/base/pipeline/human-genome/chr1.fa.vld
    squash: opened file chr1.fa of size 252194720 bytes.
    finished file chr1.fa
    247249719 bases
    224999719 valid bases (91.001%)
    39 valid regions
    User: 1.16282s System: 0.426935s Actual: 17.9866s Efficiency: 8.83855%



3. CREATE GERALD CONFIG FILE

emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12345678:ANALYSIS       eland_pair
USE_BASES               nY*
1234678:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome/
5:ELAND_GENOME          /p/NGS/syoung/base/pipeline/phix/
1234678:SEQUENCE_FORMAT --fastq
12345678:READ_LENGTH             50

BUT THE ABOVE GERALD FILE COULD NOT BE READ BY GERALD.pm. SO USED THIS:


emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12345678:ANALYSIS sequence_pair
12345678:SEQUENCE_FORMAT --fastq
GENOME_DIR              /nethome/syoung/base/pipeline/solexa-reruns/genomes
5:ELAND_GENOME          /p/NGS/syoung/base/pipeline/phix/
12345678:USE_BASES nY*n

BUT STILL GET THIS ERROR:

    Found directory /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_01-07-2009_syoung.4/Bustard1.4.0_01-07-2009_syoung
    Found 1 reads.
    Read 1: length 108.
    Use of uninitialized value in numeric gt (>) at /home/syoung/base/apps/GAPipeline-1.4.0/lib/perl/Gerald/GERALD.pm line 1087.
    Removing temporary file /tmp/tmp-GERALD-1008-22595.txt
    Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/geraldfile.txt) returned error code 9
    Error: Failed to process Gerald configuration.

SO TRIED ANOTHER VERSION:

12345678:ANALYSIS        eland_pair
USE_BASES                nY*,nY*
12345678:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME          /p/NGS/syoung/base/pipeline/phix/
1234678:ELAND_GENOME          /p/NGS/syoung/base/pipeline/human-genome


BUT GOT 'TOO MANY READS SPECIFIED' ERROR:
    
    Found directory /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_01-07-2009_syoung.5/Bustard1.4.0_01-07-2009_syoung
    Found 1 reads.
    Read 1: length 108.
    Error: Too many reads specified in USE_BASES=nY*,nY*.
    Removing temporary file /tmp/tmp-GERALD-1008-28876.txt
    Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/geraldfile.txt) returned error code 9
    Error: Failed to process Gerald configuration.
    

CHECKED DOCUMENTATION ON PAIRED-END GERALD CONFIGURATION PARAMETERS (p.31 IN USER GUIDE):

Paired-End Analysis Options

The following table describes the paired-end analysis options in a GERALD
configuration file.
For more information on USE_BASES syntax, see USE_BASES Option on
page 35.

Table 11 GERALD Configuration File Paired-End Analysis Options
Parameter Definition

ANALYSIS eland_pair Use the paired-end alignment mode of ELAND to align paired
reads against a target.

USE_BASES Y*,nY*n Use all bases on the first read and ignore the first and last
base of the second read.

6:USE_BASES nY25 Ignore the first base on both the first and second read; use 25
bases each and ignore any other bases.

4:QCAL_SOURCE1 /home/illumina/
ref51_qtable.txt

Lane 4 read 1 will use the external ref51_qtable.txt qtable
4:QCAL_SOURCE2 auto7 Lane 4 read 2 will use the lane 7 read 2 qtable



AND TRIED AGAIN WITHOUT PHIX LANE IN ANALYSIS:


emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
1234678:ANALYSIS        eland_pair
USE_BASES                nY*,nY*
1234678:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME          /p/NGS/syoung/base/pipeline/phix/
1234678:ELAND_GENOME          /p/NGS/syoung/base/pipeline/human-genome

BUT STILL GOT THIS ERROR:
    
    Found 1 reads.
    Read 1: length 108.
    Error: Too many reads specified in USE_BASES=nY*,nY*.
    Removing temporary file /tmp/tmp-GERALD-1008-806.txt
    Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/geraldfile.txt) returned error code 9
    Error: Failed to process Gerald configuration.


TRY IT WITH eland_extended AND GOT 'Not enough image files found' - PROGRESS!!


emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
1234678:ANALYSIS        eland_extended
USE_BASES                nY*,nY*
1234678:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME          /p/NGS/syoung/base/pipeline/phix/
1234678:ELAND_GENOME          /p/NGS/syoung/base/pipeline/human-genome



emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
1234678:ANALYSIS        eland_pair
USE_BASES                nY*,nY*
1234678:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME          /p/NGS/syoung/base/pipeline/phix/
1234678:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py \
--GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt \
--tiles=s_1_150 --control-lane 5 --make \
/p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt --tiles=s_1_150 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images

SAME ERROR:


    Starting Genome Analyzer Pipeline (goat), Firecrest version 1.4.0
    [('--GERALD', '/p/NGS/syoung/base/pipeline/run15/geraldfile.txt'), ('--tiles', 's_1_150'), ('--control-lane', '5'), ('--make', '')] ['/p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images']
    Traceback (most recent call last):
      File "/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py", line 955, in ?
        tiledic, FileNameClass, useLastCycle = getTileDic(run_folder, run_params, imagingProtocol)
      File "/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py", line 710, in getTileDic
        if (len(reduce(lambda x, y: x+y, tiledic.values())) <= 0):
    TypeError: reduce() of empty sequence with no initial value











TRY DOING ONLY LANES 1 & 2:

emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12:ANALYSIS        eland_pair
USE_BASES                nY*,nY*
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py \
--GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt \
--tiles=s_1_150 --control-lane 5 --make \
/p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan


    [('--GERALD', '/p/NGS/syoung/base/pipeline/run15/geraldfile.txt'), ('--tiles', 's_1_150'), ('--control-lane', '5'), ('--make', '')] ['/p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan']
    Traceback (most recent call last):
      File "/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py", line 955, in ?
        tiledic, FileNameClass, useLastCycle = getTileDic(run_folder, run_params, imagingProtocol)
      File "/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py", line 710, in getTileDic
        if (len(reduce(lambda x, y: x+y, tiledic.values())) <= 0):
    TypeError: reduce() of empty sequence with no initial value



TRIED WITH s_1, I.E., NOT s_1_150 AND IT ALMOST WORKS!:

emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12:ANALYSIS        eland_pair
USE_BASES                nY*,nY*
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


 time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt --tiles=s_1 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan


0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
Analysis folder: /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung
Sequence folder: /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung/Bustard1.4.0_02-07-2009_syoung
Instrument:    HWI-EAS185
Offset file:   /p/NGS/syoung/base/pipeline/run15/Instruments/HWI-EAS185/default_offsets.txt
  Using automatic offset calibration.
  Will update offsets file /p/NGS/syoung/base/pipeline/run15/Instruments/HWI-EAS185/default_offsets.txt after run!
Matrix :       Using automatic matrix estimation  (lane 5 only).
Phasing:       Using automatic phasing estimation  (lane 5 only).
Generating journals, Makefiles and parameter files ...
/home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl /p/NGS/syoung/base/pipeline/run15/geraldfile.txt --EXPT_DIR /p/NGS/syoung/base/pipelin
e/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung/Bustard1.4.0_02-07-2009_syoung --compression gzip --FORCE
Will read config params from /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
Will read sequence files from /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung/Bustard1.4.0_02-07-2009_syoung
Output folder /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung/Bustard1.4.0_02-07-2009_syoung/GERALD_02-07-2009_syoung
Found directory /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung/Bustard1.4.0_02-07-2009_syoung
Found 1 reads.
Read 1: length 108.
Error: Too many reads specified in USE_BASES=nY*,nY*.
Removing temporary file /tmp/tmp-GERALD-1008-24459.txt
Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/geraldfile.txt) returned error code 9
Warning: Failed to write to /mihg/error.txt.
Error: Failed to process Gerald configuration.
Warning: Failed to write to /mihg/error.txt.


RETRY USING ONLY ONE USE_BASES VALUE:


emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12:ANALYSIS        eland_pair
USE_BASES          nY*
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt --tiles=s_1 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

    ...
    ard1.4.0_02-07-2009_syoung/GERALD_02-07-2009_syoung
    Found directory /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.2/Bustard1.4.0_02-07-2009_syoung
    Found 1 reads.
    Read 1: length 108.
    Use of uninitialized value in numeric gt (>) at /home/syoung/base/apps/GAPipeline-1.4.0/lib/perl/Gerald/GERALD.pm line 1087.
    Removing temporary file /tmp/tmp-GERALD-1008-25896.txt
    Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/geraldfile.txt) returned error code 9
    Warning: Failed to write to /mihg/error.txt.
    Error: Failed to process Gerald configuration.
    Warning: Failed to write to /mihg/error.txt.


SO THE 'TOO MANY READS' IN THE PREVIOUS ERROR MESSAGE MUST MEAN THAT AN ACTUAL NUMBER HAS TO BE SUPPLIED IN THE USE_BASES VALUES, I.E., nY49 INSTEAD OF nY*. TRY THAT:


emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12:ANALYSIS        eland_pair
USE_BASES          nY49,nY49
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt --tiles=s_1 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

    ...
    Found directory /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.3/Bustard1.4.0_02-07-2009_syoung
    Found 1 reads.
    Read 1: length 108.
    Error: Too many reads specified in USE_BASES=nY49,nY49.
    Removing temporary file /tmp/tmp-GERALD-1008-26424.txt
    Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/geraldfile.txt) returned error code 9
    Warning: Failed to write to /mihg/error.txt.
    Error: Failed to process Gerald configuration.
    Warning: Failed to write to /mihg/error.txt.



TRY AGAIN WITH nY25...


emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12:ANALYSIS        eland_pair
USE_BASES          nY25,nY25
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt --tiles=s_1 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

    ...
    stard1.4.0_02-07-2009_syoung
    Found 1 reads.
    Read 1: length 108.
    Error: Too many reads specified in USE_BASES=nY25,nY25.
    Removing temporary file /tmp/tmp-GERALD-1008-32665.txt
    Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/geraldfile.txt) returned error code 9
    Warning: Failed to write to /mihg/error.txt.
    Error: Failed to process Gerald configuration.
    Warning: Failed to write to /mihg/error.txt.



TRY IT WITH nY25 (INSTEAD OF nY25,nY25):

emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12:ANALYSIS        eland_pair
USE_BASES          nY25
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt --tiles=s_1 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

    ...
    Found directory /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.5/Bustard1.4.0_02-07-2009_syoung
    Found 1 reads.
    Read 1: length 108.
    Use of uninitialized value in numeric gt (>) at /home/syoung/base/apps/GAPipeline-1.4.0/lib/perl/Gerald/GERALD.pm line 1087.
    Removing temporary file /tmp/tmp-GERALD-1008-18906.txt
    Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/geraldfile.txt) returned error code 9
    Warning: Failed to write to /mihg/error.txt.
    Error: Failed to process Gerald configuration.
    Warning: Failed to write to /mihg/error.txt.







MOVED TO RUN DIRECTORY AND THEN DID 


emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12:ANALYSIS             eland_pair
USE_BASES                nY*,nY*
12:SEQUENCE_FORMAT      --fastq
5:ELAND_GENOME          /p/NGS/syoung/base/pipeline/phix/
1234678:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py \
--GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt \
--tiles=s_1_150 --control-lane 5 --make \
/p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan


    Output folder /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.7/Bustard1.4.0_02-07-2009_syoung/GERALD_02-07-2009_syoung
    Found directory /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.7/Bustard1.4.0_02-07-2009_syoung
    Found 1 reads.
    Read 1: length 108.
    Error: Too many reads specified in USE_BASES=nY*,nY*.
    Removing temporary file /tmp/tmp-GERALD-1008-19274.txt
    Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/geraldfile.txt) returned error code 9
    Error: Failed to process Gerald configuration.


AGAIN, BUT WITHOUT nY*,nY*:


emacs /p/NGS/syoung/base/pipeline/run15/geraldfile.txt
12:ANALYSIS             eland_pair
USE_BASES                nY*
12:SEQUENCE_FORMAT      --fastq
5:ELAND_GENOME          /p/NGS/syoung/base/pipeline/phix/
1234678:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


STILL GET ERROR...






SO, MOVE TO RUN DIRECTORY AND DO make WITHOUT ELAND:



REQUEST 8 CPUS TO RUN TESTS

msub -I -l nodes=1:ppn=8 -q gdebug

    qsub: waiting for job 58107.kronos.ccs.miami.edu to start

	#qsub: waiting for job 39355.kronos.ccs.miami.edu to start
	#qsub: job 39355.kronos.ccs.miami.edu ready
	


OK!!!!!
    
    ...
    0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    Analysis folder: /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9Sequence folder: /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9/Bustard1.4.0_02-07-2009_syoung
    Instrument:    HWI-EAS185
    Offset file:   /p/NGS/syoung/base/pipeline/run15/Instruments/HWI-EAS185/default_offsets.txt
      Using automatic offset calibration.
      Will update offsets file /p/NGS/syoung/base/pipeline/run15/Instruments/HWI-EAS185/default_offsets.txt after run!
    Matrix :       Using automatic matrix estimation  (lane 5 only).
    Phasing:       Using automatic phasing estimation  (lane 5 only).
    Generating journals, Makefiles and parameter files ...




NOW MOVE TO FIRECREST DIRECTORY:

/p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9


cd /p/NGS/syoung/base/pipeline/run15

emacs /p/NGS/syoung/base/pipeline/run15/make.sh
#!/bin/sh

#PBS -l ncpus=2

#PBS -j oe

HOST=`hostname`
echo \$HOST

cd /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9

make recursive -j2

    58109.kronos.ccs.miami.edu

tail make.sh.o58109

    /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/estimateCrosstalk -I  -z gzip -c 2 /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9/s_2_0099_int.txt > Matrix/s_2_0099_02_mat.txt.tmp && mv Matrix/s_2_0099_02_mat.txt.tmp Matrix/s_2_0099_02_mat.txt
    /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/estimateCrosstalk -I  -z gzip -c 2 /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9/s_2_0100_int.txt > Matrix/s_2_0100_02_mat.txt.tmp && mv Matrix/s_2_0100_02_mat.txt.tmp Matrix/s_2_0100_02_mat.txt
    make[2]: *** No rule to make target `Phasing/s_5_01_phasing.xml', needed by `params1.xml'.  Stop.
    make[2]: *** Waiting for unfinished jobs....
    make[2]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9/Bustard1.4.0_02-07-2009_syoung'
    make[1]: *** [nonrecursive] Error 2
    make[1]: Leaving directory `/p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9/Bustard1.4.0_02-07-2009_syoung'
    make: *** [Bustard1.4.0_02-07-2009_syoung] Error 2
    Completed



NEXT, MOVE TO FIRECREST DIRECTORY AND DO make AGAIN:

cd /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9

    s_2_0100   103  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00 
         all 20905  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00  0.00*0.00 
   Comparing to offset file default_offsets.txt
     New offsets   old offsets   difference   new scales    old scales    difference   new shears    old shears    difference
       0.00  0.00   0.00  0.00   0.00  0.00     0.00  0.00   0.00  0.00   0.00  0.00     0.00  0.00   0.00  0.00   0.00  0.00
      -2.19 -1.16  -2.19 -1.17  -0.00 -0.01    -0.26 -0.55  -0.26 -0.55   0.00 -0.00     0.00  0.00   0.00  0.00   0.00  0.00
      -0.50  0.31  -0.49  0.31   0.01  0.00     1.50  1.60   1.50  1.58  -0.00 -0.02     0.00  0.00   0.00  0.00   0.00  0.00
      -2.61 -0.66  -2.59 -0.66   0.02 -0.00     0.67  0.91   0.68  0.91   0.01  0.00     0.00  0.00   0.00  0.00   0.00  0.00
   Updating offsets file ../default_offsets.txt
   Image analysis has completed successfully.




NEXT, MOVE TO BUSTARD DIRECTORY AND DO make:


cd /p/NGS/syoung/base/pipeline/run15

emacs /p/NGS/syoung/base/pipeline/run15/make-bustard.sh
#!/bin/sh

#PBS -l ncpus=2

#PBS -j oe

HOST=`hostname`
echo \$HOST
    
cd /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_02-07-2009_syoung.9/Bustard1.4.0_02-07-2009_syoung

make

#### END OF FILE


chmod 777 make-bustard.sh

qsub -q psmall make-bustard.sh

    58300.kronos.ccs.miami.edu

ssh n26










USE GA Pipeline v1.3.2
----------------------

mkdir -p /p/NGS/syoung/base/pipeline/run15/1.3.2
cd /p/NGS/syoung/base/pipeline/run15/1.3.2

emacs /p/NGS/syoung/base/pipeline/run15/1.3.2/make.sh
12:ANALYSIS        eland_pair
USE_BASES          nY*
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome



cd /p/NGS/syoung/base/pipeline/run15/1.3.2

emacs /p/NGS/syoung/base/pipeline/run15/1.3.2/goat.sh
#!/bin/sh

#PBS -l ncpus=8

#PBS -j oe

HOST=`hostname`
echo $HOST

cd /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

time /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt --tiles=s_1 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

#### END 

qsub -q psmall goat.sh

58608.kronos.ccs.miami.edu

tail goat.sh.o58608

    Warning: Parameter file /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.params not found!
    
    Error: Not enough image files found.
    Starting Genome Analyzer Pipeline (goat), Firecrest version 1.3.2
    XXX 090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan ['090528', 'HWI-EAS185', '0007', '42C1TAAXX', 'Flemington', 'Duan']
    [('--GERALD', '/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt'), ('--tiles', 's_1'), ('--control-lane', '5'), ('--make', '')] ['/p/\
    NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan']


em /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/error.txt

    7       07/07/2009      01:24:31        /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py syoung  c26     Not enough image files found.
    7       07/07/2009      04:27:31        /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py syoung  kronos.ccs.miami.edu    Not enough image fi    les found.
    7       07/07/2009      04:27:45        /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py syoung  kronos.ccs.miami.edu    Not enough image fi    les found.
    7       07/07/2009      04:28:11        /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py syoung  kronos.ccs.miami.edu    Not enough image fi    les found.
    7       07/07/2009      04:29:00        /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py syoung  kronos.ccs.miami.edu    Not enough image fi    les found.
    7       07/07/2009      04:29:11        /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py syoung  kronos.ccs.miami.edu    Not enough image fi    les found.


time /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt --tiles=s_1_1_0150 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

    Starting Genome Analyzer Pipeline (goat), Firecrest version 1.3.2
    XXX 090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan ['090528', 'HWI-EAS185', '0007', '42C1TAAXX', 'Flemington', 'Duan']
    [('--GERALD', '/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt'), ('--tiles', 's_1_1_0150'), ('--control-lane', '5'), ('--make', '')] ['/p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan']
    Traceback (most recent call last):
      File "/nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py", line 951, in ?
        tiledic, FileNameClass, useLastCycle = getTileDic(run_folder, run_params, imagingProtocol)
      File "/nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py", line 710, in getTileDic
        if (len(reduce(lambda x, y: x+y, tiledic.values())) <= 0):
    TypeError: reduce() of empty sequence with no initial value



time /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt --tiles=s_1_0150 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

    Traceback (most recent call last):
      File "/nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py", line 951, in ?
        tiledic, FileNameClass, useLastCycle = getTileDic(run_folder, run_params, imagingProtocol)
      File "/nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py", line 710, in getTileDic
        if (len(reduce(lambda x, y: x+y, tiledic.values())) <= 0):
    TypeError: reduce() of empty sequence with no initial value



time /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt --tiles=s_1_150 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan



USE MY OWN VERSION OF GA PIPELINE 1.3.2 AND REMOVE READ_LENGTH AND USE_BASES FROM geraldfile.txt:

emacs cd /p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt
12:ANALYSIS        eland_pair
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome


cd /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

time /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py \
--GERALD=/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt \
--tiles=s_1_001 \
--control-lane 5 \
--make \
/p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan





SOLUTION:
---------

COPIED PairedEndInfo.xml FILE TO LOCAL COPY OF RUN DIRECTORY


cd /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/PairedEndInfo.xml ./

em PairedEndInfo.xml
<?xml version="1.0"?>
<FirstRead Length="54" />


cd /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

time /nethome/syoung/base/apps/GAPipeline-1.3.2/bin/goat_pipeline.py --GERALD=/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt --tiles=s_1_001 --control-lane 5 --make /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

    Starting Genome Analyzer Pipeline (goat), Firecrest version 1.3.2
    Found paired end config file in /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.
    First read has length 54.
    XXX 090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan ['090528', 'HWI-EAS185', '0007', '42C1TAAXX', 'Flemington', 'Duan']
    [('--GERALD', '/p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt'), ('--tiles', 's_1_001'), ('--control-lane', '5'), ('--make', '')] ['/p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemingtllon_Duan']
    ...
    Analysis folder: /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6
    Sequence folder: /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung
    Instrument:    HWI-EAS185
    Read 1:        Imaging cycles   1- 54
    Read 2:        Imaging cycles  55-108
    Offset file:   /p/NGS/syoung/base/pipeline/run15/1.3.2/Instruments/HWI-EAS185/default_offsets.txt
      Using automatic offset calibration.
      Will update offsets file /p/NGS/syoung/base/pipeline/run15/1.3.2/Instruments/HWI-EAS185/default_offsets.txt after run!
    Matrix :       Using automatic matrix estimation  (lane 5 only).
    Phasing:       Using automatic phasing estimation  (lane 5 only).
    Generating journals, Makefiles and parameter files ...
    /mihg/analysis/GAPipeline-1.3.2/bin/GERALD.pl /p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt --EXPT_DIR /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung --compression gzip --FORCE
    Will read config params from /p/NGS/syoung/base/pipeline/run15/1.3.2/geraldfile.txt
    Will read sequence files from /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung
    Output folder /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung
    Found directory /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung
    Found 2 reads.
    Read 1: length 54.
    Read 2: length 54.
    ALIGN_PARAMS                 
    ANALYSIS                     none
    BAD_TILES                    
    BIN_DIR                      /mihg/analysis/GAPipeline-1.3.2/bin/../bin
    CHASTITY_THRESHOLD           0.6
    CMDPREFIX                    
    COMPRESSION                  gzip
    COMPRESSIONSUFFIX            .gz
    ELAND_GENOME                 Need_to_specify_ELAND_genome_directory
    ELAND_MAX_MATCHES            
    ELAND_MULTIPLE_INSTANCES     
    ELAND_REPEAT                 
    ELAND_RNA_GENOME_CONTAM      
    ELAND_RNA_GENOME_SPLICE      
    ELAND_SEED_LENGTH            
    EMAIL_DOMAIN                 domain.com
    EMAIL_LIST                   syoung
    EMAIL_SERVER                 localhost:25
    EXPT_DIR                     /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung
    EXPT_DIR_ROOT                /p/NGS/syoung/base/pipeline/run15/1.3.2
    FORCE                        1
    GENOME_DIR                   /mihg/analysis/GAPipeline-1.3.2/bin/../../Genomes
    GENOME_FILE                  Need_to_specify_genome_file_name
    GROUP_LANES                  
    INDEXING_READ_POSITION       
    INDEX_BASES                  
    NUM_LEADING_DIRS_TO_STRIP    2
    ORIG_READ_LENGTHS            54:54
    OUT_DIR                      /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung
    PAIR_PARAMS                  
    POST_RUN_COMMAND             
    PRB_FILE_SUFFIX              _prb.txt
    PURE_BASES                   25
    QCAL_SOURCE                  upstream
    QCAL_SOURCE1                 
    QCAL_SOURCE2                 
    QHG_FILE_SUFFIX              _qhg.txt
    QSEQ_READS                   1 2
    QTABLE_PATH                  
    QTABLE_PATH1                 
    QTABLE_PATH2                 
    QTABLE_PATH3                 
    QTABLE_REQUIRED              0
    QTABLE_REQUIRED1             0
    QTABLE_REQUIRED2             0
    QTABLE_REQUIRED3             0
    RAMM_REPORT_TYPE             
    READ_LENGTH                  108
    READ_LENGTH1                 108
    READ_LENGTH2                 0
    SEQUENCE_FORMAT              --fastq
    SEQ_FILE_SUFFIX              _seq.txt
    SIG2_COMPRESSION             
    SIG2_COMPRESSION_SUFFIX      
    SIG_FILE_SUFFIX_DEPHASED     _sig2.txt
    SIG_FILE_SUFFIX_NOT_DEPHASED _sig.txt
    SOFTWARE_VERSION             @(#) Id: GERALD.pl,v 1.51 2008/11/13 16:06:21 mzerara Exp
    SRF_2ND_CYCLE                
    SRF_ARCHIVE_REQUIRED         
    SRF_CHASTITY                 0.6
    SRF_FILE_SUFFIX              _traces.srf
    SRF_PROCESSED                -P
    SRF_QCAL                     
    SRF_RAW                      
    TILE_READ1_REGEX             s_[1-8]_1_[0-9][0-9][0-9][0-9]
    TILE_REGEX                   s_[1-8]_[0-9][0-9][0-9][0-9]
    TILE_ROOT                    s
    TIME_STAMP                   Tue Jul  7 01:20:08 2009
    TOOLS_DIR                    /mihg/analysis/GAPipeline-1.3.2/bin
    USE_BASES                    YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
    WEB_DIR_ROOT                 http://host.domain.com/yourshare/
    1:ANALYSIS                   eland_pair
    1:ELAND_GENOME               /p/NGS/syoung/base/pipeline/human-genome
    1:QTABLE_REQUIRED            0
    1:READ_LENGTH1               54
    1:READ_LENGTH2               54
    1:SEQUENCE_FORMAT            --fastq
    1:SRF_2ND_CYCLE              -2 55
    1:SRF_ARCHIVE_REQUIRED       
    1:SRF_QCAL                   
    1:USE_BASES                  YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy
    2:ANALYSIS                   eland_pair
    2:ELAND_GENOME               /p/NGS/syoung/base/pipeline/human-genome
    2:QTABLE_REQUIRED            0
    2:READ_LENGTH1               54
    2:READ_LENGTH2               54
    2:SEQUENCE_FORMAT            --fastq
    2:SRF_2ND_CYCLE              -2 55
    2:SRF_ARCHIVE_REQUIRED       
    2:SRF_QCAL                   
    2:USE_BASES                  YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy
    3:ANALYSIS                   none
    3:QTABLE_REQUIRED            0
    3:SRF_2ND_CYCLE              
    3:SRF_ARCHIVE_REQUIRED       
    3:SRF_QCAL                   
    3:USE_BASES                  
    4:ANALYSIS                   none
    4:QTABLE_REQUIRED            0
    4:SRF_2ND_CYCLE              
    4:SRF_ARCHIVE_REQUIRED       
    4:SRF_QCAL                   
    4:USE_BASES                  
    5:ANALYSIS                   none
    5:ELAND_GENOME               /p/NGS/syoung/base/pipeline/phix/
    5:QTABLE_REQUIRED            0
    5:SRF_2ND_CYCLE              
    5:SRF_ARCHIVE_REQUIRED       
    5:SRF_QCAL                   
    5:USE_BASES                  
    6:ANALYSIS                   none
    6:QTABLE_REQUIRED            0
    6:SRF_2ND_CYCLE              
    6:SRF_ARCHIVE_REQUIRED       
    6:SRF_QCAL                   
    6:USE_BASES                  
    7:ANALYSIS                   none
    7:QTABLE_REQUIRED            0
    7:SRF_2ND_CYCLE              
    7:SRF_ARCHIVE_REQUIRED       
    7:SRF_QCAL                   
    7:USE_BASES                  
    8:ANALYSIS                   none
    8:QTABLE_REQUIRED            0
    8:SRF_2ND_CYCLE              
    8:SRF_ARCHIVE_REQUIRED       
    8:SRF_QCAL                   
    8:USE_BASES                  
    Created directory /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung
    Created directory/p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/Plots
    Created directory/p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/Temp
    want to make /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile
    Setting macro PAIR to 1
    Changing value of macro PAIR from 1 to 2
    Changing value of macro PAIR from 2 to 1
    Changing value of macro PAIR from 1 to 2
    Changing value of macro PAIR from 2 to 3
    Changing value of macro PAIR from 3 to 2
    Changing value of macro PAIR from 2 to 1
    Changing value of macro PAIR from 1 to 2
    Changing value of macro PAIR from 2 to 1
    Changing value of macro PAIR from 1 to 2
    Changing value of macro PAIR from 2 to 3
    Changing value of macro PAIR from 3 to 2
    Changing value of macro PAIR from 2 to 1
    Changing value of macro PAIR from 1 to 1
    Changing value of macro PAIR from 1 to 1
    Changing value of macro PAIR from 1 to 1
    Changing value of macro PAIR from 1 to 1
    Changing value of macro PAIR from 1 to 1
    Successfully created /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile
    Copying config file /tmp/tmp-GERALD-1008-32036.txt to /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.xml
    Dumping config parameters into /tmp/tmp-GERALD-1008-32036.txt to /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.xml
    Copying config file /tmp/tmp-GERALD-1008-32036.txt to /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.txt
    2 [/p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung]
    [/p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung]
    [/p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung]
    Running 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile
    make: Nothing to be done for `self_test'.
    Run 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile completed with no problems
    Task complete, exiting
    Removing temporary file /tmp/tmp-GERALD-1008-32036.txt
    
    real    0m32.523s
    user    0m28.830s
    sys     0m0.199s


NOTE THAT THE config.xml FILE CONTAINS BIN_DIR AND OTHER PRESETS:

emacs /p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustard1.3.2_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.xml


<RunParameters>
<ChipWideRunParameters>
  <ALIGN_PARAMS></ALIGN_PARAMS>
  <ANALYSIS>none</ANALYSIS>
  <BAD_TILES></BAD_TILES>
  <BIN_DIR>/mihg/analysis/GAPipeline-1.3.2/bin/../bin</BIN_DIR>
  <CHASTITY_THRESHOLD>0.6</CHASTITY_THRESHOLD>
  <CMDPREFIX></CMDPREFIX>
  <COMPRESSION>gzip</COMPRESSION>
  <COMPRESSIONSUFFIX>.gz</COMPRESSIONSUFFIX>
  <ELAND_GENOME>Need_to_specify_ELAND_genome_directory</ELAND_GENOME>
  <ELAND_MAX_MATCHES></ELAND_MAX_MATCHES>
  <ELAND_MULTIPLE_INSTANCES></ELAND_MULTIPLE_INSTANCES>
  <ELAND_REPEAT></ELAND_REPEAT>
  <ELAND_RNA_GENOME_CONTAM></ELAND_RNA_GENOME_CONTAM>
  <ELAND_RNA_GENOME_SPLICE></ELAND_RNA_GENOME_SPLICE>
  <ELAND_SEED_LENGTH></ELAND_SEED_LENGTH>
  <EMAIL_DOMAIN>domain.com</EMAIL_DOMAIN>
  <EMAIL_LIST>syoung</EMAIL_LIST>
  <EMAIL_SERVER>localhost:25</EMAIL_SERVER>
  <EXPT_DIR>/p/NGS/syoung/base/pipeline/run15/1.3.2/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.3.2_07-07-2009_syoung.6/Bustar\
d1.3.2_07-07-2009_syoung</EXPT_DIR>
  <EXPT_DIR_ROOT>/p/NGS/syoung/base/pipeline/run15/1.3.2</EXPT_DIR_ROOT>
  <FORCE>1</FORCE>
  <GENOME_DIR>/mihg/analysis/GAPipeline-1.3.2/bin/../../Genomes</GENOME_DIR>
  <GENOME_FILE>Need_to_specify_genome_file_name</GENOME_FILE>
  <GROUP_LANES></GROUP_LANES>
  <INDEXING_READ_POSITION></INDEXING_READ_POSITION>
  <INDEX_BASES></INDEX_BASES>




TRY WITH VERSION 1.4.0 OF GA PIPELINE: (SHORT geraldfile.txt, COPY OF PairedEndInfo.xml, NO .params FILE):

mkdir -p /p/NGS/syoung/base/pipeline/run15/1.4.0
emacs cd /p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt
12:ANALYSIS        eland_pair
12:SEQUENCE_FORMAT --fastq
5:ELAND_GENOME     /p/NGS/syoung/base/pipeline/phix/
12:ELAND_GENOME    /p/NGS/syoung/base/pipeline/human-genome

mkdir -p /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/PairedEndInfo.xml ./
mkdir Data
ln -s /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images Images
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/PairedEndInfo.xml ./

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py \
--GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt \
--tiles=s_1_001 \
--control-lane 5 \
--make \
/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan


    File "/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py", line 955, in ?
      tiledic, FileNameClass, useLastCycle = getTileDic(run_folder, run_params, imagingProtocol)
    File "/nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py", line 710, in getTileDic
      if (len(reduce(lambda x, y: x+y, tiledic.values())) <= 0):
  TypeError: reduce() of empty sequence with no initial value



TRY WITH .params FILE:

cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.params ./

BUT THIS TIME 1.4.0 FAILED TO PARSE THE GERALD CONFIG FILE:

    Use of uninitialized value in concatenation (.) or string at /home/syoung/base/apps/GAPipeline-1.4.0/lib/perl/Gerald/GERALD.pm line 1088.
    Removing temporary file /tmp/tmp-GERALD-1008-13790.txt
    Error: /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl (/p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt) returned error code 9
    Error: Failed to process Gerald configuration.



DID A diff OF THE GERALD.pm FILES OF VERSIONS 1.4.0 AND 1.3.2

diff /home/syoung/base/apps/GAPipeline-1.4.0/lib/perl/Gerald/GERALD.pm /home/syoung/base/apps/GAPipeline-1.3.2/lib/perl/Gerald/GERALD.pm


    133c133
    < sub createGeraldDirectories($;$);
    ---
    > sub createGeraldDirectories($);
    155,156c155,156
    <       '@(#) $Id: GERALD.pm,v 1.26 2009/03/12 18:06:06 rshaw Exp $';
    <     my $cvs_version = '$Revision: 1.26 $';
    ---
    >       '@(#) $Id: GERALD.pm,v 1.21.2.1 2008/12/15 09:48:31 craczy Exp $';
    >     my $cvs_version = '$Revision: 1.21.2.1 $';
    303c303,305
    < 		    " monotemplate  will be discontinued.\n");
    ---
    > 		    " monotemplate  will be discontinued.\n" .
    > 		    " sequence      will be replaced by the qseq.txt files in Bustard.\n".
    > 		    " sequence_pair will be replaced by the qseq.txt files in Bustard.\n"); 
    356,357c358
    <     my $maxNumStages = 2; # hard-coded for now
    <     createGeraldDirectories( $outdir, $maxNumStages );
    ---
    >     createGeraldDirectories( $outdir );
    598c599
    < =item createGeraldDirectories($outdir, $maxNumStages)
    ---
    > =item createGeraldDirectories($outdir)
    601c602
    < Plots, Temp and Temp/Stage1 ... Temp/Stage<maxNumStages-1>;
    ---
    > Plots, Temp;
    613c614
    < sub createGeraldDirectories($;$) {
    ---
    > sub createGeraldDirectories($) {
    615,616c616,617
    <       unless ( @_ == 2 );
    <     my ($outdir, $maxNumStages) = @_;
    ---
    >       unless ( @_ == 1 );
    >     my ($outdir) = @_;
    623,639c624,629
    < 	my $plotsDir = join('/', $outdir, 'Plots');
    <         mkdir $plotsDir
    <           or die "Failed to create directory " . $plotsDir . ": $!";
    <         print STDERR "Created directory" . $plotsDir . "\n";
    < 
    < 	my $tempDir = join('/', $outdir, 'Temp');
    <         mkdir $tempDir
    <           or die "Failed to create directory " . $tempDir . ": $!";
    <         print STDERR "Created directory" . $tempDir . "\n";
    < 
    < 	# Final stage output is written to the GERALD dir.
    < 	for (my $stageNum = 1; $stageNum < $maxNumStages; ++$stageNum) {
    < 	    my $stageDir = join('/', $tempDir, "Stage${stageNum}");
    < 	    mkdir $stageDir
    < 		or die "Failed to create directory " . $stageDir . ": $!";
    < 	    print STDERR "Created directory" . $stageDir . "\n";
    < 	}
    ---
    >         mkdir $outdir . "/Plots"
    >           or die "Failed to create directory " . $outdir . "/Plots" . ": $!";
    >         print STDERR "Created directory" . $outdir . "/Plots" . "\n";
    >         mkdir $outdir . "/Temp"
    >           or die "Failed to create directory " . $outdir . "/Temp" . ": $!";
    >         print STDERR "Created directory" . $outdir . "/Temp" . "\n";
    1033a1024,1031
    > 
    >     print "GERALD::expandUseBAses(useBases, length, maxLength)\n";
    >     print "useBases: $useBases\n";
    >     print "length: $length\n";
    >     print "maxLength: $maxLength\n";
    > 
    > 
    > 
    1087,1093d1084
    < 
    <     print "length: $length\n";
    <     print "numY: $numY\n";
    <     print "numYast: $numYast\n";
    < 	
    < 
    < 
    1521,1522c1512
    <     return ( ($analysis eq 'expression')
    < 	     || ($analysis eq 'eland') );
    ---
    >     return ( $analysis eq 'expression' );
    1531c1521,1524
    <     return ($analysis eq 'monotemplate');
    ---
    >     return ( ($analysis eq 'monotemplate' )
    > 	     || ($analysis eq 'eland' )
    > 	     || ($analysis eq 'sequence' )
    > 	     || ($analysis eq 'sequence_pair' ));
    2174,2197c2167,2168
    < Revision 1.26  2009/03/12 18:06:06  rshaw
    < Jira Key: DAP-355
    < 
    < Removed sequence[_pair] from is_deprecated_analysis and from warning message
    < about deprecated modes.
    < 
    < Also moved eland from is_deprecated_analysis to is_obsolete_analysis,
    < since it has gone.
    < 
    < Revision 1.25  2009/02/23 17:25:36  rshaw
    < Jira Key: DAP-320
    < 
    < Removed merge debris.
    < 
    < Revision 1.24  2009/02/17 13:49:33  rshaw
    < Jira Key: DAP-320
    < 
    < Merge of DAP-320 : cvs update -j DAP00320_branch_start
    < 			      -j DAP00320_merge_src_090217 Pipeline
    < 
    < Revision 1.22.4.1  2009/01/29 11:51:54  rshaw
    < Jira Key: DAP-320
    < 
    < Added creation of Temp/Stage1.
    ---
    > Revision 1.21.2.1  2008/12/15 09:48:31  craczy
    > moved the tag for Version1_3_0_rc6 from the MAIN to the Version1_3_0_branch
    2309a2281
    > 


THEN FOUND THAT Gerald/Common.pm IS LOOKING FOR THE config.xml FILE AND WILL EXIT IF NOT FOUND.

THE config.xml FILE IS INSIDE THE IPAR FOLDER:

head /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3/config.xml

    <?xml version="1.0"?>
    <ImageAnalysis>
      <Run Name="IPAR_1.3">
        <Software Name="IPAR" Version="2.3.306.0" />
        <Cycles First="1" Last="108" Number="108" />
        <RunParameters>
          <ImagingReads Index="1">
            <FirstCycle>1</FirstCycle>
            <LastCycle>54</LastCycle>
            <RunFolder>090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan</RunFolder>
    ...



FOUND THIS OUT BY RUNNING GERALD.pl ON ITS OWN:

/home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl --EXPT_DIR /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan /p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt

    Will read config params from /p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt
    Will read sequence files from /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    Output folder /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/GERALD_07-07-2009_syoung
    ++++ configureQualityFilters(paramsRef)
    getting firecrestdir...
    Getting paramsfile...
    exptDirKey: EXPT_DIR
    $paramsRef->{EXPT_DIR}: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    Common::getConfigurationFilePath(dir)
    Common::getConfigurationFilePath     dir: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
    Common::getConfigurationFilePath     configuration_file: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/config.xml
    ERROR: Couldn't find the configuration file for /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan at /home/syoung/base/apps/GAPipeline-1.4.0/lib/perl/Gerald/GERALD.pm line 428


SO COPIED OVER config.xml FILE TO NEW RUN DIRECTORY AND RETRIED RUNNING GERALD.pl:


cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
cp /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3/config.xml ./


DIDN'T WORK BECAUSE THE FOLLOWING FILE SYSTEM IS REQUIRED INSIDE THE config.xml FILE BY lib/perl/Common::getBustardRunInfo(...):

Run
    090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
        RunParameters
            Reads

I.E.:

emacs /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/config.xml


'IPAR_1.3' => {
    'RunParameters' => {
        'Reads' => {
            '1' => {
                     'FirstCycle' => '1',
                     'LastCycle' => '54',
                     'RunFolder' => '090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan'
                   },
            '2' => {
                     'FirstCycle' => '55',
                     'LastCycle' => '108',
                     'RunFolder' => '090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan'
                   }



SO CHANGED THE NAME OF THE RUN DIRECTORY TO IPAR_1.3 TO SEE IF THAT WOULD WORK:

AND ADDED THIS TO GERALD.pm, line 250:


	print "GERALD::configureGerald     outdir: $outdir\n";
	if ( $outdir eq 'EXPT_DIR' )
	{
		$outdir = $params_ref->{'EXPT_DIR'};
	}


WHICH ALLOWED GERALD.pl TO RUN:

mkdir -p /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3

/home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl --EXPT_DIR /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3 /p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt

    ...
    GERALD.pl     outdir: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3
    GERALD.pl     tmpName: /tmp/tmp-GERALD-1008-11993.txt
    GERALD.pl     BEFORE if (-e /tmp/tmp-GERALD-1008-11993.txt)
    Copying config file /tmp/tmp-GERALD-1008-11993.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3/config.txt
    2 [/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3]
    [EXPT_DIR]
    [/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3]
    Running 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3 /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3/Makefile
    make: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3/Makefile: No such file or directory
    make: *** No rule to make target `/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3/Makefile'.  Stop.
    Error: Problem running 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/IPAR_1.3/Makefile



SO RETRIED WITH IPAR_1.3 DIRECTORY AND EDITED Common.pm:


cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py \
--GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt \
--tiles=s_1_001 \
--control-lane 5 \
--make \
/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan

OK!!!

ABBREVIATED OUTPUT:

    ...
    Successfully created /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile
    Copying config file /tmp/tmp-GERALD-1008-14710.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.xml
    Dumping config parameters into /tmp/tmp-GERALD-1008-14710.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.xml
    GERALD.pl     outdir: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung
    GERALD.pl     tmpName: /tmp/tmp-GERALD-1008-14710.txt
    GERALD.pl     BEFORE if (-e /tmp/tmp-GERALD-1008-14710.txt)
    Copying config file /tmp/tmp-GERALD-1008-14710.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.txt
    2 [/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung]
    [/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung]
    [/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung]
    Running 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile
    make: Nothing to be done for `self_test'.
    Run 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile completed with no problems
    Task complete, exiting
    Removing temporary file /tmp/tmp-GERALD-1008-14710.txt
    
    real    0m32.965s
    user    0m29.606s
    sys     0m0.204s


FULL OUTPUT:

    
    Starting Genome Analyzer Pipeline (goat), Firecrest version 1.4.0
    Found paired end config file in /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan.
    First read has length 54.
    [('--GERALD', '/p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt'), ('--tiles', 's_1_001'), ('--control-lane', '5'), ('--make', '')] ['/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan']
    Tile      images  C01 C02 C03 C04 C05 C06 C07 C08 C09 C10 C11 C12 C13 C14 C15 C16 C17 C18 C19 C20 C21 C22 C23 C24 C25 C26 C27 C28 C29 C30 C31 C32 C33 C34 C35 C36 C37 C38 C39 C40 C41 C42 C43 C44 C45 C46 C47 C48 C49 C50 C51 C52 C53 C54 C55 C56 C57 C58 C59 C60 C61 C62 C63 C64 C65 C66 C67 C68 C69 C70 C71 C72 C73 C74 C75 C76 C77 C78 C79 C80 C81 C82 C83 C84 C85 C86 C87 C88 C89 C90 C91 C92 C93 C94 C95 C96 C97 C98 C99 C100 C101 C102 C103 C104 C105 C106 C107 C108
    s_1_0010  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    s_1_0011  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    s_1_0012  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    s_1_0013  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    s_1_0014  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    s_1_0015  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    s_1_0016  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    s_1_0017  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    s_1_0018  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    s_1_0019  432     4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0 4-0
    Analysis folder: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6
    Sequence folder: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung
    Instrument:    HWI-EAS185
    Read 1:        Imaging cycles   1- 54
    Read 2:        Imaging cycles  55-108
    Offset file:   /p/NGS/syoung/base/pipeline/run15/1.4.0/Instruments/HWI-EAS185/default_offsets.txt
      Using automatic offset calibration.
      Will update offsets file /p/NGS/syoung/base/pipeline/run15/1.4.0/Instruments/HWI-EAS185/default_offsets.txt after run!
    Matrix :       Using automatic matrix estimation  (lane 5 only).
    Phasing:       Using automatic phasing estimation  (lane 5 only).
    Generating journals, Makefiles and parameter files ...
    /home/syoung/base/apps/GAPipeline-1.4.0/bin/GERALD.pl /p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt --EXPT_DIR /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung --compression gzip --FORCE
    Will read config params from /p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt
    GERALD.pl     params: 
    $VAR1 = {
              'SRF_FILE_SUFFIX' => '_traces.srf',
              'SEQ_FILE_SUFFIX' => '_seq.txt',
              'SIG_FILE_SUFFIX_DEPHASED' => '_sig2.txt',
              'EMAIL_SERVER' => 'localhost:25',
              'TILE_READ1_REGEX' => 's_[1-8]_1_[0-9][0-9][0-9][0-9]',
              'RAMM_REPORT_TYPE' => '',
              'CMDPREFIX' => '',
              'ELAND_MULTIPLE_INSTANCES' => '',
              'EMAIL_DOMAIN' => 'domain.com',
              'ELAND_MAX_MATCHES' => '',
              'ELAND_RNA_GENOME_CONTAM' => '',
              'SEQUENCE_FORMAT' => '--fastq',
              'SRF_RAW' => '',
              'SRF_PROCESSED' => '-P',
              'TILE_ROOT' => 's',
              'GENOME_FILE' => 'Need_to_specify_genome_file_name',
              'BAD_TILES' => '',
              'GROUP_LANES' => '',
              'FORCE' => 1,
              'NUM_LEADING_DIRS_TO_STRIP' => '2',
              'TIME_STAMP' => 'Tue Jul  7 05:25:04 2009',
              'SIG2_COMPRESSION' => '',
              'PRB_FILE_SUFFIX' => '_prb.txt',
              'OUT_DIR' => 'EXPT_DIR',
              'EXPT_DIR' => '/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung',
              'INDEX_BASES' => '',
              'PAIR_PARAMS' => '',
              'SIG2_COMPRESSION_SUFFIX' => '',
              'QCAL_SOURCE1' => '',
              'POST_RUN_COMMAND' => '',
              'CHASTITY_THRESHOLD' => '0.6',
              'READ_LENGTH1' => 'nOtDeFiNeD',
              'QHG_FILE_SUFFIX' => '_qhg.txt',
              'SOFTWARE_VERSION' => '@(#) Id: GERALD.pl,v 1.51 2008/11/13 16:06:21 mzerara Exp',
              'TILE_REGEX' => 's_[1-8]_[0-9][0-9][0-9][0-9]',
              'SRF_QCAL' => '',
              'ELAND_GENOME' => 'Need_to_specify_ELAND_genome_directory',
              'QCAL_SOURCE2' => '',
              'USE_BASES' => 'all',
              'BIN_DIR' => '/home/syoung/base/apps/GAPipeline-1.4.0/bin/../bin',
              'ANALYSIS' => 'none',
              'EXPT_DIR_ROOT' => '/mnt/lustre',
              'SRF_ARCHIVE_REQUIRED' => '',
              'READ_LENGTH' => 'nOtDeFiNeD',
              'SIG_FILE_SUFFIX_NOT_DEPHASED' => '_sig.txt',
              'QCAL_SOURCE' => 'upstream',
              'EMAIL_LIST' => 'syoung',
              'ALIGN_PARAMS' => '',
              'GENOME_DIR' => '/home/syoung/base/apps/GAPipeline-1.4.0/bin/../../Genomes',
              'INDEXING_READ_POSITION' => '',
              'SRF_CHASTITY' => '0.6',
              'ELAND_REPEAT' => '',
              'ELAND_SEED_LENGTH' => '',
              'SRF_2ND_CYCLE' => '',
              'READ_LENGTH2' => 'nOtDeFiNeD',
              'ELAND_RNA_GENOME_SPLICE' => '',
              'WEB_DIR_ROOT' => 'http://host.domain.com/yourshare/',
              'PURE_BASES' => '25',
              'TOOLS_DIR' => '/home/syoung/base/apps/GAPipeline-1.4.0/bin'
            };
    
    GERALD::configureGerald(...)
    Will read sequence files from /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung
    Output folder /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung
    ++++ configureQualityFilters(paramsRef)
    getting firecrestdir...
    Getting paramsfile...
    exptDirKey: EXPT_DIR
    $paramsRef->{EXPT_DIR}: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung
    Common::getConfigurationFilePath(dir)
    Common::getConfigurationFilePath     dir: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung
    Common::getConfigurationFilePath     configuration_file: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/config.xml
    Common::getBustardRunInfo($xml_file_path, $bustard_dir, $rel_xpath_str, $force_array_keys_ref, $key_attr_ref)
    Common::getBustardRunInfo     cfg_hash_ref: HASH(0xab53910)Common::getBustardRunInfo     layer names:
    Run
    Bustard1.4.0_07-07-2009_syoung
    BaseCallParameters
    Common::getBustardRunInfo     layer name: Run
    Common::getBustardRunInfo     layer name: Bustard1.4.0_07-07-2009_syoung
    Common::getBustardRunInfo     layer name: BaseCallParameters
    Common::getBustardRunInfo     Returning curr_hash_ref: HASH(0xab53940)
    GERALD::configureGerald     outdir: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung
    Found directory /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung
    Common::getConfigurationFilePath(dir)
    Common::getConfigurationFilePath     dir: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung
    Common::getConfigurationFilePath     configuration_file: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/config.xml
    Common::getReadLengths(xml_file_path, bustard_dir, read_lengths_ref)
    Common::getReadLengths     xml_file_path: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/config.xml
    Common::getReadLengths     bustard_dir: Bustard1.4.0_07-07-2009_syoung
    Common::getReadLengths     read_lengths_ref: ARRAY(0xa56dcc0)
    Doing $curr_hash_ref = getBustardRunInfo(/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/config.xml, Bustard1.4.0_07-07-2009_syoung,..)
    Common::getBustardRunInfo($xml_file_path, $bustard_dir, $rel_xpath_str, $force_array_keys_ref, $key_attr_ref)
    Common::getBustardRunInfo     cfg_hash_ref: HASH(0xab7cd40)Common::getBustardRunInfo     layer names:
    Run
    Bustard1.4.0_07-07-2009_syoung
    RunParameters
    Reads
    Common::getBustardRunInfo     layer name: Run
    Common::getBustardRunInfo     layer name: Bustard1.4.0_07-07-2009_syoung
    Common::getBustardRunInfo     layer name: RunParameters
    Common::getBustardRunInfo     layer name: Reads
    Common::getBustardRunInfo     Returning curr_hash_ref: HASH(0xab393a0)
    GERALD::getReadLengths2     Found 2 reads.
    GERALD::getReadLengths2     Found 2 reads.
    GERALD::getReadLengths2     Read 1: length 54.
    GERALD::getReadLengths2     Read 2: length 54.
    GERALD::expandFullUseBases(...)
    @_: 
    $VAR1 = [
              54,
              54
            ];
    $VAR2 = 'eland_pair';
    $VAR3 = 'all';
    $VAR4 = 'nOtDeFiNeD';
    $VAR5 = 'nOtDeFiNeD';
    $VAR6 = 'nOtDeFiNeD';
    
    
    GERALD::expandFullUseBases(...)
    @_: 
    $VAR1 = [
              54,
              54
            ];
    $VAR2 = 'eland_pair';
    $VAR3 = 'all';
    $VAR4 = 'nOtDeFiNeD';
    $VAR5 = 'nOtDeFiNeD';
    $VAR6 = 'nOtDeFiNeD';
    
    
    GERALD::expandFullUseBases(...)
    @_: 
    $VAR1 = [
              54,
              54
            ];
    $VAR2 = 'none';
    $VAR3 = 'all';
    $VAR4 = 'nOtDeFiNeD';
    $VAR5 = 'nOtDeFiNeD';
    $VAR6 = 'nOtDeFiNeD';
    
    
    ALIGN_PARAMS                 
    ANALYSIS                     none
    BAD_TILES                    
    BIN_DIR                      /home/syoung/base/apps/GAPipeline-1.4.0/bin/../bin
    CHASTITY_THRESHOLD           0.6
    CMDPREFIX                    
    COMPRESSION                  gzip
    COMPRESSIONSUFFIX            .gz
    ELAND_GENOME                 Need_to_specify_ELAND_genome_directory
    ELAND_MAX_MATCHES            
    ELAND_MULTIPLE_INSTANCES     
    ELAND_REPEAT                 
    ELAND_RNA_GENOME_CONTAM      
    ELAND_RNA_GENOME_SPLICE      
    ELAND_SEED_LENGTH            
    EMAIL_DOMAIN                 domain.com
    EMAIL_LIST                   syoung
    EMAIL_SERVER                 localhost:25
    EXPT_DIR                     /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung
    EXPT_DIR_ROOT                /p/NGS/syoung/base/pipeline/run15/1.4.0
    FORCE                        1
    GENOME_DIR                   /home/syoung/base/apps/GAPipeline-1.4.0/bin/../../Genomes
    GENOME_FILE                  Need_to_specify_genome_file_name
    GROUP_LANES                  
    INDEXING_READ_POSITION       
    INDEX_BASES                  
    NUM_LEADING_DIRS_TO_STRIP    2
    ORIG_READ_LENGTHS            54:54
    OUT_DIR                      /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung
    PAIR_PARAMS                  
    POST_RUN_COMMAND             
    PRB_FILE_SUFFIX              _prb.txt
    PURE_BASES                   25
    QCAL_SOURCE                  upstream
    QCAL_SOURCE1                 
    QCAL_SOURCE2                 
    QHG_FILE_SUFFIX              _qhg.txt
    QSEQ_READS                   1 2
    QTABLE_PATH                  
    QTABLE_PATH1                 
    QTABLE_PATH2                 
    QTABLE_PATH3                 
    QTABLE_REQUIRED              0
    QTABLE_REQUIRED1             0
    QTABLE_REQUIRED2             0
    QTABLE_REQUIRED3             0
    RAMM_REPORT_TYPE             
    READ_LENGTH                  108
    READ_LENGTH1                 108
    READ_LENGTH2                 0
    SEQUENCE_FORMAT              --fastq
    SEQ_FILE_SUFFIX              _seq.txt
    SIG2_COMPRESSION             
    SIG2_COMPRESSION_SUFFIX      
    SIG_FILE_SUFFIX_DEPHASED     _sig2.txt
    SIG_FILE_SUFFIX_NOT_DEPHASED _sig.txt
    SOFTWARE_VERSION             @(#) Id: GERALD.pl,v 1.51 2008/11/13 16:06:21 mzerara Exp
    SRF_2ND_CYCLE                
    SRF_ARCHIVE_REQUIRED         
    SRF_CHASTITY                 0.6
    SRF_FILE_SUFFIX              _traces.srf
    SRF_PROCESSED                -P
    SRF_QCAL                     
    SRF_RAW                      
    TILE_READ1_REGEX             s_[1-8]_1_[0-9][0-9][0-9][0-9]
    TILE_REGEX                   s_[1-8]_[0-9][0-9][0-9][0-9]
    TILE_ROOT                    s
    TIME_STAMP                   Tue Jul  7 05:25:04 2009
    TOOLS_DIR                    /home/syoung/base/apps/GAPipeline-1.4.0/bin
    USE_BASES                    YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
    WEB_DIR_ROOT                 http://host.domain.com/yourshare/
    1:ANALYSIS                   eland_pair
    1:ELAND_GENOME               /p/NGS/syoung/base/pipeline/human-genome
    1:QTABLE_REQUIRED            0
    1:READ_LENGTH1               54
    1:READ_LENGTH2               54
    1:SEQUENCE_FORMAT            --fastq
    1:SRF_2ND_CYCLE              -2 55
    1:SRF_ARCHIVE_REQUIRED       
    1:SRF_QCAL                   
    1:USE_BASES                  YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy
    2:ANALYSIS                   eland_pair
    2:ELAND_GENOME               /p/NGS/syoung/base/pipeline/human-genome
    2:QTABLE_REQUIRED            0
    2:READ_LENGTH1               54
    2:READ_LENGTH2               54
    2:SEQUENCE_FORMAT            --fastq
    2:SRF_2ND_CYCLE              -2 55
    2:SRF_ARCHIVE_REQUIRED       
    2:SRF_QCAL                   
    2:USE_BASES                  YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy
    3:ANALYSIS                   none
    3:QTABLE_REQUIRED            0
    3:SRF_2ND_CYCLE              
    3:SRF_ARCHIVE_REQUIRED       
    3:SRF_QCAL                   
    3:USE_BASES                  
    4:ANALYSIS                   none
    4:QTABLE_REQUIRED            0
    4:SRF_2ND_CYCLE              
    4:SRF_ARCHIVE_REQUIRED       
    4:SRF_QCAL                   
    4:USE_BASES                  
    5:ANALYSIS                   none
    5:ELAND_GENOME               /p/NGS/syoung/base/pipeline/phix/
    5:QTABLE_REQUIRED            0
    5:SRF_2ND_CYCLE              
    5:SRF_ARCHIVE_REQUIRED       
    5:SRF_QCAL                   
    5:USE_BASES                  
    6:ANALYSIS                   none
    6:QTABLE_REQUIRED            0
    6:SRF_2ND_CYCLE              
    6:SRF_ARCHIVE_REQUIRED       
    6:SRF_QCAL                   
    6:USE_BASES                  
    7:ANALYSIS                   none
    7:QTABLE_REQUIRED            0
    7:SRF_2ND_CYCLE              
    7:SRF_ARCHIVE_REQUIRED       
    7:SRF_QCAL                   
    7:USE_BASES                  
    8:ANALYSIS                   none
    8:QTABLE_REQUIRED            0
    8:SRF_2ND_CYCLE              
    8:SRF_ARCHIVE_REQUIRED       
    8:SRF_QCAL                   
    8:USE_BASES                  
    Created directory /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung
    Created directory/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/Plots
    Created directory/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/Temp
    want to make /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile
    Setting macro UNCAL to 
    Setting macro PAIR to 1
    Changing value of macro PAIR from 1 to 2
    Changing value of macro PAIR from 2 to 1
    Changing value of macro PAIR from 1 to 2
    Changing value of macro PAIR from 2 to 3
    Changing value of macro PAIR from 3 to 2
    Changing value of macro UNCAL from  to 
    Changing value of macro PAIR from 2 to 1
    Changing value of macro PAIR from 1 to 2
    Changing value of macro PAIR from 2 to 1
    Changing value of macro PAIR from 1 to 2
    Changing value of macro PAIR from 2 to 3
    Changing value of macro PAIR from 3 to 2
    Changing value of macro PAIR from 2 to 1
    Changing value of macro PAIR from 1 to 1
    Changing value of macro PAIR from 1 to 1
    Changing value of macro PAIR from 1 to 1
    Changing value of macro PAIR from 1 to 1
    Changing value of macro PAIR from 1 to 1
    Successfully created /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile
    Copying config file /tmp/tmp-GERALD-1008-14710.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.xml
    Dumping config parameters into /tmp/tmp-GERALD-1008-14710.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.xml
    GERALD.pl     outdir: /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung
    GERALD.pl     tmpName: /tmp/tmp-GERALD-1008-14710.txt
    GERALD.pl     BEFORE if (-e /tmp/tmp-GERALD-1008-14710.txt)
    Copying config file /tmp/tmp-GERALD-1008-14710.txt to /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/config.txt
    2 [/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung]
    [/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung]
    [/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung]
    Running 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile
    make: Nothing to be done for `self_test'.
    Run 'make self_test' on /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Data/C1-108_Firecrest1.4.0_07-07-2009_syoung.6/Bustard1.4.0_07-07-2009_syoung/GERALD_07-07-2009_syoung/Makefile completed with no problems
    Task complete, exiting
    Removing temporary file /tmp/tmp-GERALD-1008-14710.txt
    
    real    0m32.965s
    user    0m29.606s
    sys     0m0.204s




RERAN WITHOUT IPAR_1.3 FOLDER TO SEE IF IT WOULD WORK:


cd /p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan
mv Data/IPAR_1.3/ Data/IPAR_1.3-moved

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py \
--GERALD=/p/NGS/syoung/base/pipeline/run15/1.4.0/geraldfile.txt \
--tiles=s_1_001 \
--control-lane 5 \
--make \
/p/NGS/syoung/base/pipeline/run15/1.4.0/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan


IT WORKED ALRIGHT BUT THIS MAY BE DUE TO THE PRESENCE OF FILES CREATED IN THE FIRST SUCCESSFUL RUN USING v1.4.0


SO NOW, RUN WITH image2eland-cluster.pl!!





CASAVA USER GUIDE P.63

Configuring a Paired-Read Analysis
The alignments of the two reads that provide input to the pairing process
may be varied by setting ELAND_SEED_LENGTH and
ELAND_MAX_MATCHES. Both parameters may be set lane-by-lane, but the
same values will apply to each of the two reads in a lane.
The paired-read analysis may be configured by passing options to
pickBestPair. This is done by setting a parameter PAIR_PARAMS in the
GERALD configuration file. For additional information, see GERALD
Configuration File on page 39.
PAIR_PARAMS can be specified lane-by-lane. All of the options must be
specified on a single line and space-separated, as in the following example:
8:PAIR_PARAMS --circular --min-percent-unique-pairs=30
The following table describes the parameters for ANALYSIS eland_pair.



ANALYSIS eland_pair
http://bisr.osumc.edu/docs/Pipeline%20usage.html


Read pairs
The pipeline can handle reads generated from paired end runs. As part of the analysis, it will:

Remap all clusters across both runs to the first cycle of the first read.
Reset the matrix and matrix calculation after the end of the first read.
Generate sequence strings whose combined length is equal to the sum of the lengths of each individual read.
There is a GERALD mode called "eland_pair" which will allow Eland to align paired reads.

The simplest way to use read-pair data assumes that you have a single run-folder containing the images for both reads, with a continuously incremented cycle count. From Galaxy version 1.0 anmd pipeline version 0.3 on, the pipeline will automatically know where the second read starts. For older versions of the instrument and analysis software, the pipeline option "--new-read-cycle" can be used to identify the start of the second read.

An alternative way assumes that both reads of a pair are stored in two separate run folders. Then you simply specify both folders as arguments to "goat_pipeline.py". This will generate output only in the first run-folder - the second folder is not touched.

For paired reads it may also be useful to know that you can specify multiple "--GERALD" options to goat_pipeline.py simultaneously to have more than one alignment performed with different config files.


PIPELINE USAGE (eland_pair)
http://bioit.dbi.udel.edu/manuals/GAPipeline/Pipeline_usage

Read pairs

The pipeline can handle reads generated from paired end runs. As part of the analysis, it will:

Remap all clusters across both runs to the first cycle of the first read.
Reset the matrix and matrix calculation after the end of the first read.
Generate sequence strings whose combined length is equal to the sum of the lengths of each individual read.
There is a GERALD mode called "eland_pair" which will allow Eland to align paired reads.

The simplest way to use read-pair data assumes that you have a single run-folder containing the images for both reads, with a continuously incremented cycle count. From Galaxy version 1.0 anmd pipeline version 0.3 on, the pipeline will automatically know where the second read starts. For older versions of the instrument and analysis software, the pipeline option "--new-read-cycle" can be used to identify the start of the second read.

An alternative way assumes that both reads of a pair are stored in two separate run folders. Then you simply specify both folders as arguments to "goat_pipeline.py". This will generate output only in the first run-folder - the second folder is not touched.

For paired reads it may also be useful to know that you can specify multiple "--GERALD" options to goat_pipeline.py simultaneously to have more than one alignment performed with different config files.





















CASAVA GUIDE p.11 GERALD CONFIGURATION:

Table 7 GERALD Configuration File Paired-End Analysis Options
Parameter Definition

ANALYSIS eland_pair Use the paired-end alignment mode of ELAND to align paired
reads against a target.
USE_BASES Y*,nY*n Use all bases on the first read and ignore the first and last
base of the second read.
6:USE_BASES nY25 Ignore the first base on both the first and second read; use 25
bases each and ignore any other bases.



CHANGES FROM PIPELINE V1.0 TO V1.3


.params info moved to config.xml file in IPAR sub-folder






4. RUN cluster-image2eland.pl 



cd /p/NGS/syoung/base/pipeline/run15

perl /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl \
--type paired \
--rundir /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan \
--imagedir /p1/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan/Images \
--outputdir /p/NGS/syoung/base/pipeline/run15 \
--geraldfile /p/NGS/syoung/base/pipeline/run15/geraldfile.txt \
--readlength 50 \
--cpus 8 \
--queue "-q psmall" \
--control 5
    
    qsub -q psmall /p/NGS/syoung/base/pipeline/run15/run-image2eland.sh
    57331.kronos.ccs.miami.edu
    
    Run time: 00:00:00
    Completed /nethome/syoung/base/bin/nextgen/image2eland-cluster.pl
    8:15PM, 30 June 2009
    ****************************************




CONTENTS OF *sh FILE:

cd /nethome/syoung/base/bin/nextgen

/nethome/syoung/base/bin/nextgen/image2eland.pl --type paired --rundir /p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan --outputdir /p/NGS/syoung/base/pipeline/run15/outdir --geraldfile /p/NGS/syoung/base/pipeline/run15/geraldfile.txt --readlength 50 --cpus 8 --control 5 --tiles s_1,s_2,s_3,s_4,s_5,s_6,s_7,s_8

WHICH RUNS THE FOLLOWING COMMAND:

time /nethome/syoung/base/apps/GAPipeline-1.4.0/bin/goat_pipeline.py \
--GERALD=/p/NGS/syoung/base/pipeline/run15/geraldfile.txt \
/p/NGS/syoung/base/pipeline/run15/090528_HWI-EAS185_0007_42C1TAAXX_Flemington_Duan \
--tiles=s_1_150 --control-lane 5 --make



TROUBLESHOOTING

PROBLEM:

Error: Not enough image files found.

DIAGNOSIS:

READ_LENGTH not specified in GERALD config file

SOLUTION:

ADD THE FOLLOWING LINE TO GERALD config file

READ_LENGTH     50



</entry>



<entry [Mon Jun  1 23:14:47 EDT 2009] RERUN WITH SKIP OF FIRST STEP (CONVERSION FROM SOLEXA TO SANGER FASTQ)>



MAQ MANUAL 
http://maq.sourceforge.net/maq-manpage.shtml

MAQ INTRO
http://maq.sourceforge.net/maq-man.shtml

FASTQ FORMAT
http://maq.sourceforge.net/fastq.shtml







#!/bin/sh                                                                                                                                                   
/nethome/syoung/base/bin/nextgen/run-maq.pl --outputdir /p/NGS/syoung/base/pipeline/run12/lane1 --inputfile /p/NGS/syoung/base/pipeline/run12/lane1/s_1_1_sequence.fastq,/p/NGS/syoung/base/pipeline/run12/lane1/s_1_2_sequence.fastq --referencefile /p/NGS/syoung/base/pipeline/run12/lane1/CCDS_nucleotide.20080430.fa

    45644.kronos.ccs.miami.edu
    [syoung@kronos lane1]$ date
    Wed Jun  3 00:18:10 EDT 2009

    FINISHED OK

cd /p/NGS/syoung/base/pipeline/run12/lane1
ll
    total 3.4G
    drwxrwx---+ 14 syoung bioinfo 4.0K Jun  3 03:56 .
    drwxrwx---+ 11 syoung bioinfo 4.0K Jun  3 03:25 ..
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 03:55 1
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 04:24 10
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 04:27 11
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 03:58 2
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 04:01 3
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 04:04 4
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 04:07 5
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 04:11 6
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 04:14 7
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 04:17 8
    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 04:21 9
    -rw-rw----+  1 syoung bioinfo  17M Jun  3 03:54 CCDS_nucleotide.20080430.bfa
    -rw-rw----+  1 syoung bioinfo  33M Jun  3 02:58 CCDS_nucleotide.20080430.fa
    drwxrwx---+  2 syoung bioinfo    6 Jun  3 03:56 lane2
    -rw-rw----+  1 syoung bioinfo  58M Jun  3 04:33 maq-runlog.txt
    -rw-rw----+  1 syoung bioinfo 299M Jun  3 04:32 out.map
    -rw-r-----+  1 syoung bioinfo 1.4G Jun  3 02:44 s_1_1_sequence.fastq
    -rw-r-----+  1 syoung bioinfo 1.7G Jun  3 02:47 s_1_2_sequence.fastq
    -rw-rw----+  1 syoung bioinfo 1.7K Jun  3 03:48 splitfiles


#7.  CONSENSUS SEQUENCE WITH assemble

cd /p/NGS/syoung/base/pipeline/run12/lane1
time /nethome/syoung/base/apps/maq/maq assemble out.cns CCDS_nucleotide.20080430.bfa out.map

LANE 1
ll out.cns
    -rw-rw----+ 1 syoung bioinfo 42M Jun  3 14:04 out.cns

LANE 2
ll out.cns
    -rw-rw----+ 1 syoung bioinfo 57M Jun  3 14:15 out.cns


#8.  GET READ ALIGNMENT STATISTICS WITH mapcheck OPTION

cd /p/NGS/syoung/base/pipeline/run12/lane1
time /nethome/syoung/base/apps/maq/maq mapcheck CCDS_nucleotide.20080430.bfa out.map > mapcheck.txt


    LANE 1 mapcheck.txt
    
    Number of reference sequences: 20091
    Length of reference sequences exlcuding gaps: 32940942
    Length of gaps in the reference sequences: 0
    Length of non-gap regions covered by reads: 17110313
    Length of 24bp unique regions of the reference: 12517917
    Reference nucleotide composition: A: 25.95%, C: 25.81%, G: 26.34%, T: 21.90%
    Reads nucleotide composition:     A: 24.97%, C: 26.95%, G: 28.74%, T: 19.33%
    Average depth across all non-gap regions: 8.656
    Average depth across 24bp unique regions: 8.553


cd /p/NGS/syoung/base/pipeline/run12/lane2
time /nethome/syoung/base/apps/maq/maq mapcheck CCDS_nucleotide.20080430.bfa out.map > mapcheck.txt

    LANE 2 mapcheck.txt

    Number of reference sequences: 20091
    Length of reference sequences exlcuding gaps: 32940942
    Length of gaps in the reference sequences: 0
    Length of non-gap regions covered by reads: 18151616
    Length of 24bp unique regions of the reference: 13233431
    Reference nucleotide composition: A: 25.95%, C: 25.81%, G: 26.34%, T: 21.90%
    Reads nucleotide composition:     A: 25.15%, C: 26.78%, G: 28.52%, T: 19.56%
    Average depth across all non-gap regions: 10.180
    Average depth across 24bp unique regions: 9.745


# NUMBER OF SEQUENCES

LANE 1: 10835249 SEQUENCES

    lines s_1_*sequence.fastq
    s_1_1_sequence.fastq: 43340996
    perl -e 'print 43340996/4, "\n"'
    s_1_2_sequence.fastq: 43340996
    [syoung@kronos lane1]$ perl -e 'print 43340996/4, "\n"'
    10835249

LANE 2: 12206342

    lines s_2_*sequence.fastq
    s_2_1_sequence.fastq: 48825368
    perl -e 'print 48825368/4, "\n"'
    s_2_2_sequence.fastq: 48825368
    [syoung@kronos lane2]$ perl -e 'print 48825368/4, "\n"'
    12206342




# INDELS
---------

##1. Assemble with 'map' to create 'align.map' binary file
#push @$commands, "time $maq map -1 25 align.map $referencebinary $inputbinaries";
##2. rmdup       remove pairs with identical outer coordinates (PE)
#push @$commands, "time $maq rmdup out.rmdup out.map";
##3. indelpe     indel calling (PAIRED READS ONLY)
#push @$commands, "time $maq indelpe $referencebinary out.rmdup > out.indelpe";
##4. indelsoa    state-of-art homozygous indel detection
#push @$commands, "time $maq indelsoa $referencebinary align.map > out.indelsoa";
##5. filter indels
#push @$commands, "awk '\$5+\$6-\$4 >= 3 \&\& \$4 <= 1' out.indelsoa > out.indelsoa.filter";
##6. maq.pl SNPfilter    filter SNP predictions
#push @$commands, "time $maqbin/maq.pl SNPfilter -d 1 -s out.indelsoa -F out.indelpe cns.snp &> out.SNPfilter";
##7. maq.pl indelpe filter SNP predictions
push @$commands, "time $maqbin/maq.pl indelpe out.indelpe > out.indelpefilter";

LANE 1
------
(ON NODE 30, BIGMEM)


##2. rmdup       remove pairs with identical outer coordinates (PE)
##cd /p/NGS/syoung/base/pipeline/run12/lane1
##time /nethome/syoung/base/apps/maq/maq  rmdup out.rmdup out.map
OK

##3. indelpe     indel calling (PAIRED READS ONLY)
cd /p/NGS/syoung/base/pipeline/run12/lane1
time /nethome/syoung/base/apps/maq/maq indelpe CCDS_nucleotide.20080430.bfa out.rmdup > out.indelpe

    real    0m20.305s
    user    0m19.031s
    sys     0m0.489s
        
ll out.indelpe
head out.indelpe
CCDS3.1|Hs36.3|chr1     1269    -    14 -1:C    1       0 TTCCTGTGGTGCCGGGTCCTGAGCACTGCGGG      CCCCAGCGAAGCCCTCCAGCCCTTGGTCTACC        13      @48,34,34,27,21,19,16,16,13,13,12,3,2,      @2,3,16,10,16,18,34,21,24,37,38,34,35,  @0,0,0,0,0,0,0,0,0,1,1,0,0,
CCDS3.1|Hs36.3|chr1     1789    -    26 -5:GAGCA        1 0     GCCGCCGCCAGAGGGTTTCCTTCGGCGTCTCT        GAGCAGCAGGCAGTGGAAGCCTGGGAGAAGCT        25      @48,47,42,41,29,29,29,23,23,21,21,17,17,16,15,15,15,11,11,10,8,5,5,3,1,     @2,3,8,9,8,8,21,14,14,29,29,20,20,34,22,22,22,39,39,40,29,32,32,47,36,  @0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,


##4. indelsoa    state-of-art homozygous indel detection

### NB: USES out.map PRODUCED BY 
cd /p/NGS/syoung/base/pipeline/run12/lane1
time /nethome/syoung/base/apps/maq/maq indelsoa CCDS_nucleotide.20080430.bfa out.map > out.indelsoa

    real    0m17.881s
    user    0m17.547s
    sys     0m0.298s

ll out.indelsoa
head out.indelsoa 

    CCDS3.1|Hs36.3|chr1     109     -1   3 1        1       -1
    CCDS3.1|Hs36.3|chr1     162     -1   2 1        1       0
    CCDS5.1|Hs36.3|chr1     32      -5   2 1        1       0
    CCDS6.1|Hs36.3|chr1     22      -1   2 1        1       0
    CCDS11.1|Hs36.3|chr1    72      -1   0 1        1       2
    CCDS12.1|Hs36.3|chr1    33      -5   4 1        1       -2

##5. filter indels
time awk '$5+$6-$4 >= 3 && $4 <= 1' out.indelsoa > out.indelsoa.filter
head *filter

    CCDS25.1|Hs36.3|chr1    6       5    0 1        2       3
    CCDS33.1|Hs36.3|chr1    601     -1   1 4        4       7
    CCDS34.1|Hs36.3|chr1    7       -1   0 2        2       4
    CCDS129.1|Hs36.3|chr1   403     -1   1 2        2       3



##6. SNPfilter    filter SNP predictions
cd /p/NGS/syoung/base/pipeline/run12/lane1
time /nethome/syoung/base/apps/maq/maq.pl SNPfilter -d 1 -s out.indelsoa -F out.indelpe cns.snp &> out.SNPfilter

    real    0m1.937s
    user    0m0.995s
    sys     0m0.026s

ll *SNPfilter
head *SNPfilter

    CCDS2.2|Hs36.3|chr1     1713    C    A 30       1       1.00    58      30      N  28   N
    CCDS3.1|Hs36.3|chr1     23      A    R 78       4       1.00    63      38      A  0    G
    CCDS3.1|Hs36.3|chr1     108     A    M 24       4       1.00    63      36      A  100  C
    CCDS3.1|Hs36.3|chr1     213     C    Y 27       17      1.00    63      44      C  255  T
    CCDS3.1|Hs36.3|chr1     241     C    S 30       20      1.00    63      62      C  255  G
    CCDS3.1|Hs36.3|chr1     281     T    W 69       10      1.00    63      54      T  176  A
    CCDS3.1|Hs36.3|chr1     812     C    Y 2        11      1.00    63      60      T  255  C




LANE 2
------
(ON NODE 30, BIGMEM)


##2. rmdup       remove pairs with identical outer coordinates (PE)
cd /p/NGS/syoung/base/pipeline/run12/lane2
time /nethome/syoung/base/apps/maq/maq  rmdup out.rmdup out.map
    OK

##3. indelpe     indel calling (PAIRED READS ONLY)
cd /p/NGS/syoung/base/pipeline/run12/lane2
time /nethome/syoung/base/apps/maq/maq indelpe CCDS_nucleotide.20080430.bfa out.rmdup > out.indelpe
ll out.indelpe
head out.indelpe
    OK

##4. indelsoa    state-of-art homozygous indel detection
### NB: USES out.map PRODUCED BY match
cd /p/NGS/syoung/base/pipeline/run12/lane2
time /nethome/syoung/base/apps/maq/maq indelsoa CCDS_nucleotide.20080430.bfa out.map > out.indelsoa
ll out.indelsoa
head out.indelsoa 
    OK
    
##5. filter indels
cd /p/NGS/syoung/base/pipeline/run12/lane2
time awk '$5+$6-$4 >= 3 && $4 <= 1' out.indelsoa > out.indelsoa.filter
head *filter

##6. SNPfilter    filter SNP predictions
cd /p/NGS/syoung/base/pipeline/run12/lane2
time /nethome/syoung/base/apps/maq/maq.pl SNPfilter -d 1 -s out.indelsoa -F out.indelpe cns.snp &> out.SNPfilter
ll *SNPfilter
head *SNPfilter

##7. maq.pl indelpe filter INDELS
## Correct the number of reads mapped without indels for homopolymer tracts. This command modify the 4th, 10th and the last three columns of in.indelpe and output the result in out.indelpe.
cd /p/NGS/syoung/base/pipeline/run12/lane2
time /nethome/syoung/base/apps/maq/maq.pl indelpe out.indelpe > out.indelpe.filter
ll out.indelpe.filter
head out.indelpe.filter

##### HOMOZYGOTE/HETEROZYGOTE SPLIT DOESN'T WORK:
##### After the correction, the following awk command gives putative homozygous indels:
###
###awk '($3=="*"||$3=="+") && $6+$7>=3 && ($6+$7)/$4>=0.75' out.indelsoa.filter > out.indelsoa.filter.homo
###
##### and the following gives heterozygotes:
###
###awk '($3=="*"||$3=="+") && $6+$7>=3 && ($6+$7)/$4<0.75' out.indelsoa.filter > out.indelsoa.filter.hetero
###Please note that this indelpe command just implements several heuristic rules. It does not correct for impure homopolymer runs or di-nucleotide/triplet repeats. Consequently, the two awk commands only give approximate hom/het indels.



COLLECT COUNTS:

cd /p/NGS/syoung/base/pipeline/run12/lane1
lines out.indel*
lines out.SNPfilter 
lines cns.snp

cd /p/NGS/syoung/base/pipeline/run12/lane2
lines out.indel*
lines out.SNPfilter 
lines cns.snp

LANE 1
out.indelpe: 6714
out.indelpe.filter: 6714
out.indelsoa: 20005
out.indelsoa.filter: 739
out.SNPfilter: 35139
cns.snp: 112607

LANE 2
out.indelpe: 8031
out.indelpe.filter: 8031
out.indelsoa: 19964
out.indelsoa.filter: 785
out.SNPfilter: 12050
cns.snp: 67701






SNPS
----


LANE 1
------


cd /p/NGS/syoung/base/pipeline/run12/lane1/1

# GENERATE CONSENSUS
#time /nethome/syoung/base/apps/maq/maq assemble consensus.cns /p/NGS/syoung/base/pipeline/run12/lane2/CCDS_nucleotide.20080430.bfa out.map 2> assemble.log


    -rw-rw----+ 1 syoung bioinfo 43865584 Jun  3 17:21 consensus.cns

# GET SNPs 
time /nethome/syoung/base/apps/maq/maq cns2fq consensus.cns > cns.fq

    real    0m9.726s
    user    0m8.707s
    sys     0m0.395s

    -rw-rw----+ 1 syoung bioinfo 43865584 Jun  3 17:21 consensus.cns


time /nethome/syoung/base/apps/maq/maq cns2snp consensus.cns > cns.snp

    real    0m7.754s
    user    0m7.648s
    sys     0m0.046s
    
    -rw-rw----+ 1 syoung bioinfo 6202927 Jun  3 18:17 cns.snp
    [syoung@c30 lane1]$ lines cns.snp
    cns.snp: 112607

    [syoung@c30 lane1]$ head cns.snp 
    CCDS2.2|Hs36.3|chr1     1713    C    A 30       1       1.00    58      30      N  28   N
    CCDS3.1|Hs36.3|chr1     16      A    M 27       3       1.00    63      0       C  49   A
    CCDS3.1|Hs36.3|chr1     23      A    R 78       4       1.00    63      38      A  0    G
    CCDS3.1|Hs36.3|chr1     52      G    R 18       6       1.00    63      44      G  172  A
    CCDS3.1|Hs36.3|chr1     78      C    Y 23       4       1.00    63      14      C  101  T
    CCDS3.1|Hs36.3|chr1     79      G    R 15       4       1.00    63      22      G  98   A
    CCDS3.1|Hs36.3|chr1     108     A    M 24       4       1.00    63      36      A  100  C
    CCDS3.1|Hs36.3|chr1     213     C    Y 27       17      1.00    63      44      C  255  T
    CCDS3.1|Hs36.3|chr1     241     C    S 30       20      1.00    63      62      C  255  G
    CCDS3.1|Hs36.3|chr1     281     T    W 69       10      1.00    63      54      T  176  A


time awk '$ 5+$6-$4 >= 3 && $4 <= 1' out.indelsoa > out.indelsoa.filter




LANE 2
------
DO MANUALLY BECAUSE OF ERRORS (NON-HIGH MEM NODE DOESN'T HAVE ENOUGH MEMORY)

MERGE out.map FILES INTO SINGLE out.map (TURNS OUT IT WORKED THE FIRST TIME - THE ERROR MESSAGE WAS WHEN CREATING consensus.cns BELOW)

 time /nethome/syoung/base/apps/maq/maq mapmerge /p/NGS/syoung/base/pipeline/run12/lane2/out.map /p/NGS/syoung/base/pipeline/run12/lane2/1/out.map /p/NGS/syoung/base/pipeline/run12/lane2/2/out.map /p/NGS/syoung/base/pipeline/run12/lane2/3/out.map /p/NGS/syoung/base/pipeline/run12/lane2/4/out.map /p/NGS/syoung/base/pipeline/run12/lane2/5/out.map /p/NGS/syoung/base/pipeline/run12/lane2/6/out.map /p/NGS/syoung/base/pipeline/run12/lane2/7/out.map /p/NGS/syoung/base/pipeline/run12/lane2/8/out.map /p/NGS/syoung/base/pipeline/run12/lane2/9/out.map /p/NGS/syoung/base/pipeline/run12/lane2/10/out.map /p/NGS/syoung/base/pipeline/run12/lane2/11/out.map /p/NGS/syoung/base/pipeline/run12/lane2/12/out.map /p/NGS/syoung/base/pipeline/run12/lane2/13/out.map

    real    2m32.780s
    user    2m30.557s
    sys     0m1.676s


CHECK MAP STATS
    
    OK - DON'T HAVE TO REDO
#time /nethome/syoung/base/apps/maq/maq mapcheck /p/NGS/syoung/base/pipeline/run12/lane2/CCDS_nucleotide.20080430.fa out.map > mapcheck.txt


# GENERATE CONSENSUS
time /nethome/syoung/base/apps/maq/maq assemble consensus.cns /p/NGS/syoung/base/pipeline/run12/lane2/CCDS_nucleotide.20080430.bfa out.map 2> assemble.log

    real    1m38.891s
    user    1m37.374s
    sys     0m1.272s

    -rw-rw----+ 1 syoung bioinfo 1286189 Jun  3 18:09 assemble.log

# GET SNPs 
time /nethome/syoung/base/apps/maq/maq cns2fq consensus.cns > cns.fq
    
    real    0m10.377s
    user    0m9.299s
    sys     0m0.444s
    
    -rw-rw----+ 1 syoung bioinfo 67540371 Jun  3 18:10 cns.fq

time /nethome/syoung/base/apps/maq/maq cns2snp consensus.cns > cns.snp

    real    0m12.403s
    user    0m9.108s
    sys     0m0.122s
    
    -rw-rw----+ 1 syoung bioinfo 3632036 Jun  3 18:11 ../lane2/cns.snp

    [syoung@c30 lane2]$ head *snp
    CCDS2.2|Hs36.3|chr1     1736    C    A 10       1       1.00    63      0       N  20   N
    CCDS2.2|Hs36.3|chr1     1910    A    G 4        1       1.00    34      0       N  26   N
    CCDS2.2|Hs36.3|chr1     1913    C    G 4        1       1.00    34      4       N  26   N
    CCDS2.2|Hs36.3|chr1     1917    G    T 4        1       1.00    34      4       N  26   N
    CCDS2.2|Hs36.3|chr1     1918    T    G 4        1       1.00    34      4       N  26   N
    CCDS2.2|Hs36.3|chr1     1920    C    G 4        1       1.00    34      4       N  26   N
    CCDS3.1|Hs36.3|chr1     898     A    G 45       6       1.00    63      32      N  74   N
    CCDS3.1|Hs36.3|chr1     918     A    G 54       9       1.00    63      48      N  160  N
    CCDS3.1|Hs36.3|chr1     1182    T    C 132      35      1.00    63      62      N  226  N
    CCDS3.1|Hs36.3|chr1     1843    C    Y 91       16      1.00    63      36      C  23   T


    [syoung@c30 lane1]$ lines ../lane2/cns.snp
    ../lane2/cns.snp: 67701



FIND INDELS USING **MERGED** out.map (REQUIRES MERGED cns.snp):
--------------------------------------------------------------

*** NB: THIS DOES NOT WORK BECAUSE OF MEMORY USAGE EVEN ON A HIGH MEM NODE


TURNS OUT
align.map (PRODUCED BY map)
SHOULD BE THE SAME AS
out.map (PRODUCED BY match)

TRY MERGING align.map 



######## SKIP THIS
######1. align.map Assemble with 'map' to create 'align.map' binary file
####cd /p/NGS/syoung/base/pipeline/run12/lane1/1
####time /nethome/syoung/base/apps/maq/maq  map -1 25 align.map ../CCDS_nucleotide.20080430.bfa s_1_1_sequence.1.bfq s_1_2_sequence.1.bfq
####
####    OK
####    
####    ...
####    [align_candidate] CCDS44030.1|Hs36.3|chrY: (0, 0, 0) out of 0
####    [maq_indel_pe] CPU time: 4.680 sec
####    [match_data2mapping] 802760 out of 2000000 raw reads are mapped with 476790 in pairs.
####    -- (total, isPE, mapped, paired) = (2000000, 1, 802760, 476790)
####    
####    real    2m46.734s
####    user    2m41.823s
####    sys     0m4.416s
####
####
####    ll
####    total 401M
####    drwxrwx---+  2 syoung bioinfo 4.0K Jun  3 15:56 .
####    drwxrwx---+ 14 syoung bioinfo 4.0K Jun  3 14:14 ..
####    -rw-rw----+  1 syoung bioinfo  29M Jun  3 16:09 align.map
####    -rw-rw----+  1 syoung bioinfo  538 Jun  3 02:59 mapcheck.txt
####    -rw-rw----+  1 syoung bioinfo  30M Jun  3 03:57 out.map
####    -rw-rw----+  1 syoung bioinfo  25M Jun  3 03:54 s_1_1_sequence.1.bfq
####    -rw-rw----+  1 syoung bioinfo 128M Jun  3 03:46 s_1_1_sequence.1.fastq
####    -rw-rw----+  1 syoung bioinfo  38M Jun  3 03:55 s_1_2_sequence.1.bfq
####    -rw-rw----+  1 syoung bioinfo 153M Jun  3 03:47 s_1_2_sequence.1.fastq
####

##2. rmdup       remove pairs with identical outer coordinates (PE)
cd /p/NGS/syoung/base/pipeline/run12/lane1
time /nethome/syoung/base/apps/maq/maq  rmdup out.rmdup out.map

    -rw-rw----+  1 syoung bioinfo 261M Jun  3 16:35 out.rmdup

##3. indelpe     indel calling (PAIRED READS ONLY)
cd /p/NGS/syoung/base/pipeline/run12/lane1
time /nethome/syoung/base/apps/maq/maq indelpe ../CCDS_nucleotide.20080430.bfa out.rmdup > out.indelpe

    ERROR!!!!

    Segmentation fault
    
    real    0m0.026s
    user    0m0.019s
    sys     0m0.002s


##4. indelsoa    state-of-art homozygous indel detection

### NB: USES out.map PRODUCED BY 
cd /p/NGS/syoung/base/pipeline/run12/lane1
time /nethome/syoung/base/apps/maq/maq indelsoa ../CCDS_nucleotide.20080430.bfa out.map > out.indelsoa

    ERROR!!!

    maq: indel_soa.cc:162: int ma_indelsoa(int, char**): Assertion `fp_bfa' failed.
    Aborted
    
    real    0m0.035s
    user    0m0.004s
    sys     0m0.004s


##5. filter indels
cd /p/NGS/syoung/base/pipeline/run12/lane1
time awk '$5+$6-$4 >= 3 && $4 <= 1' out.indelsoa > out.indelsoa.filter
head *filter


##6. SNPfilter    filter SNP predictions
cd /p/NGS/syoung/base/pipeline/run12/lane1
time /nethome/syoung/base/apps/maq/maq.pl SNPfilter -d 1 -s out.indelsoa -F out.indelpe cns.snp &> out.SNPfilter
ll *SNPfilter
head *SNPfilter


http://maq.sourceforge.net/maq-man.shtml

mapmerge: Merge Read Alignments

As described above, match usually takes 2 million reads as input. What about large scale resequencing where 100 million reads will be generated? The preferred way is to divide reads into 50 batches with each batch containing about 2 million reads. After the alignment of 50 batches, we can merge the results with the mapmerge command. This command merge several alignments together and output one alignment in the same format as the input. For example:

maq mapmerge out.map in1.map in2.map in3.map
where out.map is the output.
In theory, mapmerge can merge unlimited number of alignments. However, as mapmerge will be reading all the inputs at the same time, it may hit the OS limit of the maximum number of opening files. At present, this has to be manually solved by endusers.


LANE 1
------


# 1. CONVERT REFERENCE FILE INTO BINARY FILE

time /nethome/syoung/base/apps/maq/maq fasta2bfa CCDS_nucleotide.20080430.fa CCDS_nucleotide.20080430.bfa

    -- 20091 sequences have been converted.
    
    real    0m1.794s
    user    0m1.261s
    sys     0m0.156s



# 2. TRIM SECOND READ FROM 50 BP TO 37 BP (THE LENGTH OF THE FIRST READ)

cd /p/NGS/syoung/base/pipeline/run12/lane1
/nethome/syoung/base/bin/nextgen/trimfastq.pl --inputfile s_1_2_sequence.txt --length 37 --outputfile s_1_2_sequence-37.txt

cd /p/NGS/syoung/base/pipeline/run12/lane2
/nethome/syoung/base/bin/nextgen/trimfastq.pl --inputfile s_2_2_sequence.txt --length 37 --outputfile s_2_2_sequence-37.txt
    
    Run time: 00:02:02
    Completed /nethome/syoung/base/bin/nextgen/trimfastq.pl
    5:00PM, 2 June 2009
    ****************************************


# 2. CONVERT FASTQ FILE TO BFQ FILE FORMAT

lines s_1_1_sequence.fastq
    43340996

perl -e 'print 43340996/4, "\n"'
    10835249

#3. SPLIT INTO SMALLER FILES

cd /p/NGS/syoung/base/pipeline/run12/lane1
time split -l 10100000 s_1_1_sequence.fastq

mv xaa splits/s_1_1_sequence.A.fastq
mv xab splits/s_1_1_sequence.B.fastq
mv xac splits/s_1_1_sequence.C.fastq
mv xad splits/s_1_1_sequence.D.fastq
mv xae splits/s_1_1_sequence.E.fastq

time split -l 10100000 s_1_2_sequence.fastq

mv xaa splits/s_1_2_sequence.A.fastq
mv xab splits/s_1_2_sequence.B.fastq
mv xac splits/s_1_2_sequence.C.fastq
mv xad splits/s_1_2_sequence.D.fastq
mv xae splits/s_1_2_sequence.E.fastq

time split -l 10100000 s_1_2_sequence-37.fastq

mv xaa splits/s_1_2_sequence-37.A.fastq
mv xab splits/s_1_2_sequence-37.B.fastq
mv xac splits/s_1_2_sequence-37.C.fastq
mv xad splits/s_1_2_sequence-37.D.fastq
mv xae splits/s_1_2_sequence-37.E.fastq

#4. CONVERT FASTQ FILE TO BFQ FILE FORMAT

time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_1_sequence.A.fastq s_1_1_sequence.A.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_1_sequence.B.fastq s_1_1_sequence.B.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_1_sequence.C.fastq s_1_1_sequence.C.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_1_sequence.D.fastq s_1_1_sequence.D.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_1_sequence.E.fastq s_1_1_sequence.E.bfq

time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence.A.fastq s_1_2_sequence.A.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence.B.fastq s_1_2_sequence.B.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence.C.fastq s_1_2_sequence.C.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence.D.fastq s_1_2_sequence.D.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence.E.fastq s_1_2_sequence.E.bfq

time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence-37.A.fastq s_1_2_sequence-37.A.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence-37.B.fastq s_1_2_sequence-37.B.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence-37.C.fastq s_1_2_sequence-37.C.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence-37.D.fastq s_1_2_sequence-37.D.bfq
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_2_sequence-37.E.fastq s_1_2_sequence-37.E.bfq



#5.  DO MAPPING

cd /p/NGS/syoung/base/pipeline/run12/lane1/splits

# MAP 37 BP AGAINST 50 BP
time /nethome/syoung/base/apps/maq/maq match out.A.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.A.bfq s_1_2_sequence.A.bfq
time /nethome/syoung/base/apps/maq/maq match out.B.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.B.bfq s_1_2_sequence.B.bfq
time /nethome/syoung/base/apps/maq/maq match out.C.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.C.bfq s_1_2_sequence.C.bfq
time /nethome/syoung/base/apps/maq/maq match out.D.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.D.bfq s_1_2_sequence.D.bfq
time /nethome/syoung/base/apps/maq/maq match out.E.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.E.bfq s_1_2_sequence.E.bfq

# MAP 37 BP AGAINST 37 BP
time /nethome/syoung/base/apps/maq/maq match out-37.A.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.A.bfq s_1_2_sequence-37.A.bfq
time /nethome/syoung/base/apps/maq/maq match out-37.B.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.B.bfq s_1_2_sequence-37.B.bfq
time /nethome/syoung/base/apps/maq/maq match out-37.C.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.C.bfq s_1_2_sequence-37.C.bfq
time /nethome/syoung/base/apps/maq/maq match out-37.D.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.D.bfq s_1_2_sequence-37.D.bfq
time /nethome/syoung/base/apps/maq/maq match out-37.E.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.E.bfq s_1_2_sequence-37.E.bfq



    #6.  MERGE THE .map FILES INTO ONE MAP FILE:
    
    cd /p/NGS/syoung/base/pipeline/run12/lane1/splits
    
    time /nethome/syoung/base/apps/maq/maq map  out.map out.A.map out.B.map out.C.map out.D.map out.E.map 

time /nethome/syoung/base/apps/maq/maq mapmerge out-37.map out-37.A.map out-37.B.map out-37.C.map out-37.D.map out-37.E.map 



#7.  GET SNPS WITH assemble OPTION

time /nethome/syoung/base/apps/maq/maq assemble out-37.cns CCDS_nucleotide.20080430.bfa out-37.map

time /nethome/syoung/base/apps/maq/maq assemble out.cns CCDS_nucleotide.20080430.bfa out.map


#8.  GET READ ALIGNMENT STATISTICS WITH mapcheck OPTION

time /nethome/syoung/base/apps/maq/maq mapcheck CCDS_nucleotide.20080430.bfa out-37.map > mapcheck-37.txt

time /nethome/syoung/base/apps/maq/maq mapcheck CCDS_nucleotide.20080430.bfa out.map > mapcheck.txt




RAN STEPS #3 - #8 AS cardiac.run12.lane1.sh

    45577.kronos.ccs.miami.edu
    Tue Jun  2 20:03:52 EDT 2009

 
RUN LANE 2 SPLITS:
------------------

cd /p/NGS/syoung/base/pipeline/run12/lane2
mkdir splits

emacs run12-lane2-maq.sh

#!/bin/sh

#PBS -j oe
#PBS -m bea
#PBS -M syoung@med.miami.edu

cd /p/NGS/syoung/base/pipeline/run12/lane2
time split -l 10100000 s_2_2_sequence-37.fastq

mv xaa splits/s_2_2_sequence-37.A.fastq
mv xab splits/s_2_2_sequence-37.B.fastq
mv xac splits/s_2_2_sequence-37.C.fastq
mv xad splits/s_2_2_sequence-37.D.fastq
mv xae splits/s_2_2_sequence-37.E.fastq




cd /p/NGS/syoung/base/pipeline/run12/lane2/splits
    
time /nethome/syoung/base/apps/maq/maq match out.map CCDS_nucleotide.20080430.bfa s_2_1_sequence.A.bfq s_2_2_sequence-37.A.bfq
time /nethome/syoung/base/apps/maq/maq match out.map CCDS_nucleotide.20080430.bfa s_2_1_sequence.B.bfq s_2_2_sequence-37.B.bfq
time /nethome/syoung/base/apps/maq/maq match out.map CCDS_nucleotide.20080430.bfa s_2_1_sequence.C.bfq s_2_2_sequence-37.C.bfq
time /nethome/syoung/base/apps/maq/maq match out.map CCDS_nucleotide.20080430.bfa s_2_1_sequence.D.bfq s_2_2_sequence-37.D.bfq
time /nethome/syoung/base/apps/maq/maq match out.map CCDS_nucleotide.20080430.bfa s_2_1_sequence.E.bfq s_2_2_sequence-37.E.bfq


qsub -q psmall run12-lane2-maq.sh

    45436.kronos.ccs.miami.edu



# 5. Statistics from the alignment
time /nethome/syoung/base/apps/maq/maq mapcheck CCDS_nucleotide.20080430.bfa out.map > mapcheck.txt





WHAT DIDN'T WORK:
------------------


#### SKIP THIS AND SIMPLY COPY .txt FILE TO .fastq (SOLEXA SWITCHED BACK TO SANGER-FORMAT FASTQ IN GA PIPELINE VERSION 1.3.2)
#### 1. CONVERT SOLEXA QUALITY VALUES TO SANGER FASTQ QUALITY VALUES
#### /nethome/syoung/base/apps/maq/maq sol2sanger s_1_1_sequence-short.txt s_1_1_sequence-short.fastq

mv s_1_1_sequence.txt s_1_1_sequence.fastq
mv s_1_2_sequence.txt s_1_2_sequence.fastq
 

####THIS DOESN'T WORK:
####
####cd /p/NGS/syoung/base/pipeline/run12/lane1
####emacs runMaqLane1.sh
####
#####!/bin/sh
####
####/nethome/syoung/base/bin/nextgen/run-maq.pl \
####--outputdir /p/NGS/syoung/base/pipeline/run12/lane1 \
####--inputfile s_1_1_sequence.txt,s_1_2_sequence.txt \
####--referencefile CCDS_nucleotide.20080430.fa \
####&> /p/NGS/syoung/base/pipeline/run12/lane1/maq-runlog.txt
####
####
####qsub -q psmall runMaqLane1.sh 
####
####    42294.kronos.ccs.miami.edu
####
####BUT DIDN'T WORK...
####


# 4.  Align the reads to the reference

####ON kronos GET SEGMENTATION FAULT:
####
####cd /p/NGS/syoung/base/pipeline/run12/lane1
####time /nethome/syoung/base/apps/maq/maq match out.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.bfq s_1_2_sequence-37.bfq
####
####
####RUN ON CLUSTER - ALSO GET SEGMENTATION FAULT:
####
####cd /p/NGS/syoung/base/pipeline/run12/lane1
####emacs run12-lane1-maq.sh
####
#####!/bin/sh
####
#####PBS -j oe
#####PBS -m bea
#####PBS -M syoung@med.miami.edu
####
####cd /p/NGS/syoung/base/pipeline/run12/lane1
####time /nethome/syoung/base/apps/maq/maq match out.map CCDS_nucleotide.20080430.bfa s_1_1_sequence.bfq s_1_2_sequence-37.bfq
####
####
####qsub -q psmall run12-lane1-maq.sh
####
####    45440.kronos.ccs.miami.edu

    






LANE 2
------


#### SKIP THIS AND SIMPLY COPY .txt FILE TO .fastq (SOLEXA SWITCHED BACK TO SANGER-FORMAT FASTQ IN GA PIPELINE VERSION 1.3.2)
#### 1. CONVERT SOLEXA QUALITY VALUES TO SANGER FASTQ QUALITY VALUES
#### /nethome/syoung/base/apps/maq/maq sol2sanger s_1_1_sequence-short.txt s_1_1_sequence-short.fastq

mv s_1_1_sequence.txt s_1_1_sequence.fastq
mv s_1_2_sequence.txt s_1_2_sequence.fastq


# 2. TRIM SECOND READ FROM 50 BP TO 37 BP (THE LENGTH OF THE FIRST READ)

cd /p/NGS/syoung/base/pipeline/run12/lane2
/nethome/syoung/base/bin/nextgen/trimfastq.pl --inputfile s_2_2_sequence.fastq --length 37 --outputfile s_2_2_sequence-37.fastq
    
    #Run time: 00:02:02
    #Completed /nethome/syoung/base/bin/nextgen/trimfastq.pl
    #5:00PM, 2 June 2009
    #****************************************



cd /p/NGS/syoung/base/pipeline/run12/lane2
emacs runMaqLane2.sh

#!/bin/sh

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12/lane2 \
--inputfile s_1_1_sequence.txt,s_1_2_sequence.txt \
--referencefile CCDS_nucleotide.20080430.fa \
&> /p/NGS/syoung/base/pipeline/run12/lane2/maq-runlog.txt


qsub -q psmall runMaqLane2.sh 







TESTS

cd /p/NGS/syoung/base/pipeline/run12/test

# 1. CONVERT SOLEXA QUALITY VALUES TO SANGER FASTQ QUALITY VALUES
#####/nethome/syoung/base/apps/maq/maq sol2sanger s_1_1_sequence-short.txt s_1_1_sequence-short.fastq
#### SKIP THIS AND SIMPLY COPY .txt FILE TO .fastq (SOLEXA SWITCHED BACK TO SANGER-FORMAT FASTQ IN GA PIPELINE VERSION 1.3.2)

cp s_1_1_sequence-short.txt s_1_1_sequence-short.fastq
 

# 2. CONVERT FASTQ FILE TO BFQ FILE FORMAT
time /nethome/syoung/base/apps/maq/maq fastq2bfq s_1_1_sequence-short.fastq s_1_1_sequence-short.bfq

    -- finish writing file 's_1_1_sequence-short.bfq'
    -- 2500 sequences were loaded.

# 3. CONVERT REFERENCE FILE INTO BINARY FILE

time /nethome/syoung/base/apps/maq/maq fasta2bfa CCDS_nucleotide.20080430.fa CCDS_nucleotide.20080430.bfa

    -- 20091 sequences have been converted.
    
    real    0m1.794s
    user    0m1.261s
    sys     0m0.156s


# 4.  Align the reads to the reference
time /nethome/syoung/base/apps/maq/maq match out.map CCDS_nucleotide.20080430.bfa s_1_1_sequence-short.bfq

    ...
    [match_core] processing sequence CCDS44030.1|Hs36.3|chrY (321 bp)...
    [match_core] sorting the hits and dumping the results...
    [ma_load_reads] loading reads...
    [ma_load_reads] 2500*2 reads loaded.
    [mapping_count_single] 6, 14, 17, 28
    [maq_indel_pe] the indel detector only works with short-insert mate-pair reads.
    [match_data2mapping] 796 out of 5000 raw reads are mapped with 0 in pairs.
    -- (total, isPE, mapped, paired) = (2500, 0, 796, 0)
    
    real    1m51.749s
    user    1m1.596s
    sys     0m0.572s


# 5. Statistics from the alignment
time /nethome/syoung/base/apps/maq/maq mapcheck CCDS_nucleotide.20080430.bfa out.map > mapcheck.txt

    ...
    [ma_mapcheck] processing CCDS44029.1|Hs36.3|chrY...
    [ma_mapcheck] processing CCDS44030.1|Hs36.3|chrY...
    
    real    0m28.099s
    user    0m1.678s
    sys     0m0.034s



FASTQ Format Specification

http://maq.sourceforge.net/fastq.shtml

Introduction

FASTQ format stores sequences and Phred qualities in a single file. It is concise and compact. FASTQ is first widely used in the Sanger Institute and therefore we usually take the Sanger specification and the standard FASTQ format, or simply FASTQ format. Although Solexa/Illumina read file looks pretty much like FASTQ, they are different in that the qualities are scaled differently. In the quality string, if you can see a character with its ASCII code higher than 90, probably your file is in the Solexa/Illumina format.

Example

@EAS54_6_R1_2_1_413_324
CCCTTCTTGTCTTCAGCGTTTCTCC
+
;;3;;;;;;;;;;;;7;;;;;;;88
@EAS54_6_R1_2_1_540_792
TTGGCAGGCCAAGGCCGATGGATCA
+
;;;;;;;;;;;7;;;;;-;;;3;83
@EAS54_6_R1_2_1_443_348
GTTGCTTCTGGCGTGGGTGGGGGGG
+EAS54_6_R1_2_1_443_348
;;;;;;;;;;;9;7;;.7;393333
  
FASTQ Format Specification

Notations

<fastq>, <blocks> and so on represents non-terminal symbols.
Characters in red are regex-like operators.
'\n' stands for the Return key.
Syntax

<fastq>	:=	<block>+
<block>	:=	@<seqname>\n<seq>\n+[<seqname>]\n<qual>\n
<seqname>	:=	[A-Za-z0-9_.:-]+
<seq>	:=	[A-Za-z\n\.~]+
<qual>	:=	[!-~\n]+
Requirements

The <seqname> following '+' is optional, but if it appears right after '+', it should be identical to the <seqname> following '@'.
The length of <seq> is identical the length of <qual>. Each character in <qual> represents the phred quality of the corresponding nucleotide in <seq>.
If the Phred quality is $Q, which is a non-negative integer, the corresponding quality character can be calculated with the following Perl code:
$q = chr(($Q<=93? $Q : 93) + 33);
where chr() is the Perl function to convert an integer to a character based on the ASCII table.
Conversely, given a character $q, the corresponding Phred quality can be calculated with:
$Q = ord($q) - 33;
where ord() gives the ASCII code of a character.
Solexa/Illumina Read Format

The syntax of Solexa/Illumina read format is almost identical to the FASTQ format, but the qualities are scaled differently. Given a character $sq, the following Perl code gives the Phred quality $Q:

$Q = 10 * log(1 + 10 ** (ord($sq) - 64) / 10.0)) / log(10);




 



</entry>



<entry [Tue May 26 14:29:58 EDT 2009] RUN MAQ ON LANES 1 AND 2>




1. PUT DATA IN FOLDERS

LANE 1
------

/p/NGS/syoung/base/pipeline/run12/090518
s_1_1_sequence.txt,s_1_2_sequence.txt
10,835,249 reads

mkdir -p /p/NGS/syoung/base/pipeline/run12/lane1
cp /p/NGS/syoung/base/pipeline/run12/090518/s_1_*_sequence.txt /p/NGS/syoung/base/pipeline/run12/lane1 


LANE 2
------

/p/NGS/syoung/base/pipeline/run12/090518
s_2_1_sequence.txt, s_2_2_sequence.txt
12,206,342 reads

mkdir -p /p/NGS/syoung/base/pipeline/run12/lane2
cp /p/NGS/syoung/base/pipeline/run12/090518/s_2_*_sequence.txt /p/NGS/syoung/base/pipeline/run12/lane2 



2. GET REFERENCE SEQUENCE

DOWNLOAD TO LANE 1

cd /p/NGS/syoung/base/pipeline/run12/lane1
wget ftp://ftp.ncbi.nlm.nih.gov/pub/CCDS/current_human/CCDS_nucleotide.20080430.fna.gz
gunzip *gz
records --inputfile CCDS_nucleotide.20080430.fna 
    20091
cd /p/NGS/syoung/base/pipeline/run12/lane1
mv CCDS_nucleotide.20080430.fna CCDS_nucleotide.20080430.fa

COPY TO LANE 2

cp /p/NGS/syoung/base/pipeline/run12/lane1/CCDS_nucleotide.20080430.fa /p/NGS/syoung/base/pipeline/run12/lane2




3. RUN MAQ


LANE 1
------

emacs runMaqLane1.sh

#!/bin/sh

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12/lane1 \
--inputfile s_1_1_sequence.txt,s_1_2_sequence.txt \
--referencefile CCDS_nucleotide.20080430.fa \
&> /p/NGS/syoung/base/pipeline/run12/lane1/maq-runlog.txt


qsub -q psmall runMaqLane1.sh 
38062.kronos.ccs.miami.edu


LANE 2
------

RUNNING ON KRONOS

emacs runMaqlane2.sh

#!/bin/sh

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /p/NGS/syoung/base/pipeline/run12/lane2 \
--inputfile s_2_1_sequence.txt,s_2_2_sequence.txt \
--referencefile CCDS_nucleotide.20080430.fa \
&> /p/NGS/syoung/base/pipeline/run12/lane2/maq-runlog.txt \
&



RUN ON MENDEL 2

/nethome/syoung/base/bin/nextgen/run-maq.pl \
--outputdir /data/NGS/syoung/base/pipeline/run12/lane2 \
--inputfile s_2_1_sequence.txt,s_2_2_sequence.txt \
--referencefile CCDS_nucleotide.20080430.fa \
&> /data/NGS/syoung/base/pipeline/run12/lane2/maq-runlog.txt \
&

    [3] 19814




</entry>



<entry [Tue May 26 14:29:58 EDT 2009] Duanxiang's DATA IS HERE ON KRONOS: /p/NGS/syoung/base/pipeline/run12/090518>




PIPELINE (& ELAND) COMMAND:

/usr/local/src/GAPipeline-1.3.2/bin/goat_pipeline.py --GERALD=/store/home/jhoffman/myGenomes/humanGenome/config.txt /store/data/pipeline_in/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/IPAR_1.3/ --control-lane=5


emacs /store/home/jhoffman/myGenomes/humanGenome/config.txt

125:ANALYSIS eland_pair

34678:ANALYSIS sequence_pair
USE_BASES nY37,nY*n
125:GENOME_DIR /store/home/jhoffman/myGenomes
12:ELAND_GENOME /store/home/jhoffman/myGenomes/humanGenome/
5:ELAND_GENOME /store/home/jhoffman/myGenomes/phiXgenome/
1234678:SEQUENCE_FORMAT --fastq


DATA ON SOLEXA IN TWO PLACES:

095019
TINY AMOUNT

/store/data/pipeline_in/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/IPAR_1.3/Bustard1.3.2_19-05-2009_jhoffman/GERALD_19-05-2009_jhoffman

090518
MAIN DATA

/store/data/pipeline_in/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/IPAR_1.3/Bustard1.3.2_18-05-2009_jhoffman/GERALD_18-05-2009_jhoffman


COPIED TO HERE ON KRONOS (VIA PLUTO):

screen -S copy-run12-eland
cd /store/data/pipeline_in/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/IPAR_1.3/Bustard1.3.2_19-05-2009_jhoffman/GERALD_19-05-2009_jhoffman
scp * syoung@pluto.ccs.miami.edu:/store/Data01/NGS/syoung/base/pipeline/run12/090519


cd /store/data/pipeline_in/090508_HWI-EAS185_0004_3031UAAXX_Duan4_Jia3/Data/IPAR_1.3/Bustard1.3.2_18-05-2009_jhoffman/GERALD_18-05-2009_jhoffman
scp * syoung@pluto.ccs.miami.edu:/store/Data01/NGS/syoung/base/pipeline/run12/090518




Flemington data:

cd /store/data/pipeline_in/090515_HWI-EAS185_0005_4299MAAXX_EFlemington_1-4/Data/IPAR_1.3/Bustard1.3.2_19-05-2009_jhoffman
make -j8 recursive
