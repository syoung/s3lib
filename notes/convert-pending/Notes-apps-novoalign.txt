Notes-apps-novoalign.txt





</entry>



<entry [Wed Jun  9 13:27:50 EDT 2010] RUN NOVOALIGN>




RUN COMMAND

/nethome/syoung/base/apps/novoalign/2.05.33/novoalign \
-d /nethome/bioinfo/apps/agua/0.5/bin/apps/t/Cluster/reference/mouse/mm9/novoalign/chrY.idx \
-F ILMFQ \
-o SAM \
-f /nethome/bioinfo/apps/agua/0.5/bin/apps/t/Cluster/novoalign/1/test-novoalign_1.1.txt

    OK! 

    # novoalign (2.05.33) - short read aligner with qualities.
    # (C) 2008 NovoCraft
    # Licensed for evaluation, educational, and not-for-profit use only.
    #  novoalign -d /nethome/bioinfo/apps/agua/0.5/bin/apps/t/Cluster/reference/mouse/mm9/novoalign/chrY.idx -F ILMFQ -o SAM -i 200 30 -f /nethome/bioinfo/apps/agua/0.5/bin/apps/t/Cluster/novoalign/1/test-novoalign_1.1.txt 
    # Interpreting input files as Illumina FASTQ, Cassava Pipeline 1.3.
    @SQ     SN:chrY AS:chrY.idx     LN:15902555
    # Index Build Version: 2.5
    # Hash length: 14
    # Step size: 2
    HWI-EAS185:1:1:24:584#0/1       4       *       0       0       *       *       0       0       AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA       =9999=?==3////.9=9:./=9A=?+:9>8===<9+8<78=9>########       PG:Z:novoalign  ZS:Z:QC
    HWI-EAS185:1:1:24:1197#0/1      4       *       0       0       *       *       0       0       AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA       ><@9=99?9==9=;@9A==99A9=.=9999====@999@9=9=997<9;?9B       PG:Z:novoalign  ZS:Z:QC
    HWI-EAS185:1:1:27:1922#0/1      4       *       0       0       *       *       0       0       GAGGAGGAGGAGGAAGAGAGGGAGGAGGGGGAGGAGAAGAGGGGGAGGAGGG       =>@69=?:=245=4=#####################################       PG:Z:novoalign  ZS:Z:NM
    HWI-EAS185:1:1:28:1855#0/1      4       *       0       0       *       *       0       0       GGGGAGACTTGTCCCCCCTTTTCCCCCCCCCCCTCTCCCTCCGTGGTTTTAC       AA==AA?==A##########################################       PG:Z:novoalign  ZS:Z:QC
    ...


PARAMETERS

    -f read1 read2     Filenames for the read sequences for Side 1 & 2.
                       If only one file is specified then single end reads are processed.
                       If two files are specified then the program will operate in paired end mode.

    -F format      Specifies a read file format. For Fastq '_sequence.txt' files from Illumina
                       Pipeline 1.3 please specify -F ILMFQ.

    -i 99 99       Sets approximate fragment length and standard deviation. Default [250, 30]

    -o SAM          Specifies the report format. Native, Pairwise, SAM. Default is Native.
                    Optionally followed by SAM @RG record.
                    Refer to manual for details and more options.
                    This may increase memory utilisation.


INPUTS


    NOVOALIGN
    /nethome/syoung/base/apps/novoalign/2.05.33/novoalign
    
    INPUTFILE
    /nethome/bioinfo/apps/agua/0.5/bin/apps/t/Cluster/novoalign/1/test-novoalign_1.1.txt
    
    REFERENCE
    /nethome/bioinfo/apps/agua/0.5/bin/apps/t/Cluster/reference/mouse/mm9/novoalign/chrY.fa \\
    
    OUTPUTDIR
    /nethome/bioinfo/apps/agua/0.5/bin/apps/t/Cluster/novoalign
    
    OUTPUTFILE
    /nethome/bioinfo/apps/agua/0.5/bin/apps/t/Cluster/novoalign/1/out.sam
    



NOVO2MAQ
--------

/nethome/syoung/base/apps/novoalign/2.05.33/novo2maq/novo2maq




NOVOINDEX
---------

/nethome/syoung/base/apps/novoalign/2.05.33/novoindex -k 14 -s 2 \
$referencebinary \
$referencefile

./novoindex
    
    # novoindex (2.5) - Universal k-mer index constructor.
    # (C) 2008 NovoCraft
    # novoindex 
    # Creating 5 indexing threads.
    Error: Please supply an index filename and at least one sequence file.
    
    
    Usage:
        novoindex  -k 99 -s 9 -m indexfile sequencefiles....
    Where:
        -k   99        is the k-mer length to be used for the index. Typically 14.
        -s   9         is the step size for the index. Typical values are from 1 to 3.
        -m             sets lower case masking on. Lower case sequence will not be indexed.
        -b             sets bisulphite indexing and alignment mode for methylation experiments.
        -n   name      sets the an internal name for the reference sequence index. This is
                       used in report headers and as the AS: field in SAM SQ record.
                       Defaults to the indexfile name.
        indexfile      is the filename for the indexed reference sequence generated by novoindex.
        sequencefiles  a list of sequence files in fasta format to be included in the index.
    
    Example:
                  novoindex -k 14 -s 1 celegans.ndx elegans.dna.fa
    
     If k or s are not specified a suitable value will be chosen by novoindex.
    
     (c) 2008 NovoCraft



NOVOALIGN
---------

./novoalign 


    Novoalign V2.05.33
    
    Usage:
        novoalign options
    
    Options:
        -d dbname      Full pathname of indexed reference sequence from novoindex
    
    Options for Read processing:
        -f read1 read2     Filenames for the read sequences for Side 1 & 2.
                       If only one file is specified then single end reads are processed.
                       If two files are specified then the program will operate in paired end mode.
        -F format      Specifies a read file format. For Fastq '_sequence.txt' files from Illumina
                       Pipeline 1.3 please specify -F ILMFQ.
        -l 99          Sets the minimum number of good quality bases for a read. Alignment will not
                         be attempted for reads with less bases.  Default log4(Ng) + 5
                       where Ng is the length of the reference genome. Measure uses base qualities
                       to determine information content of the read in bits an ddivides by 2 to get
                         effective length in bases.
        -n 99          Truncate reads to the specified length before alignment. Default is 150.
        -a [read1 adapter] [read2 adapter]
                       Enables adapter stripping from 3' end of reads before aligning. The second
                       adapter is used for the second read in paired end mode.
                       Default adapter sequence for single end is TCGTATGCCGTCTTCTGCTTG.
                       Default adapter sequences for paired end reads are:
                               Read1: AGATCGGAAGAGCGGTTCAGCAGGAATGCCGAG
                               Read2: AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGTA
        -h 99 [99]     Sets homopolymer and optional dinucleotide filter score. Any read that
                       matches a homopolymer or dinuc with score less than or equal to this
                       threshold will skipped (reported as QC).
                       Default 20 for homopolymer and 20 for dinucleotides.
    
    Options for alignment scoring:
        -t 99          Sets the maximum alignment score acceptable for the best alignment. Default Automatic.
                       In automatic mode the threshold is set based on read length, genome size and other
                       factors (see manual).
                       For pairs the threshold applies to the fragment and includes both ends and the length penalty.
        -g 99          Sets the gap opening penalty. Default 40
        -x 99          Sets the gap extend penalty. Default 15
        -u 99          Penalty for unconverted CHG or CHH cytosine in bisulfite alignment mode. Default 0
                       For plants 6 may be a good value.
        -b mode        Sets Bisulphite alignment mode. Values for mode are:
                            4 - Aligns in 4 possible combinations of direction and index. (Default)
                            2 - Aligns reads in forward direction using CT index and in reverse complement using the GA index.
        -N 999         Sets the number of bp of source DNA that are not represented in the reference sequences (index). This
                       value is used in calculation of prior probability that the read originated in sequence that we cannot 
                       align to because it is not in the reference sequence set. By default we use the number of bases coded 
                       as N's in the reference genome. Set to zero to disable inclusion of this in quality calculations.
    
    Options for reporting:
        -o format [readgroup]
                       Specifies the report format. Native, Pairwise, SAM. Default is Native. Optionally followed by SAM @RG record.
                       Refer to manual for details and more options.
                       This may increase memory utilisation.
        -R 99          Sets score difference between best and second best alignment for calling a repeat. Default 5.
        -r strategy [limit]
                       Sets strategy for reporting repeats. 'None', 'Random', 'All', 'Exhaustive',
                       or a posterior probability limit. Default None.
                       For -rAll & -rEx you can also specify a limit on the maximum number of alignments reported per read.
        -Q 99          Sets lower limit on alignment quality for reporting. Default 0.
        -e 999         Sets a limit on number of alignments for a single read.
                       This limit applies to the number of alignments with score equal to that of the best
                       alignment. Alignment process will stop when the limit is reached.
                       Default 1000 in default report mode, off for other modes.
        -q 9           Sets number of decimal places for quality score. Default zero.
        -K [file]      Collects mismatch statistics for quality calibration by position in the read 
                       and called base quality. Mismatch counts are written to the named file after 
                       all reads are processed. When used with -k option the mismatch counts include 
                       any read from the input quality calibration file.
    
    Paired End Options:
        -i 99 99       Sets approximate fragment length and standard deviation. Default [250, 30]
        -v 99          Sets the structural variation penalty for chimeric fragments. Default 70
        -v 99 99       Sets the structural variation penalty for chimeric fragments.
                        1) Penalty for SVs within one sequence
                        2) Penalty for SVs across different sequences.
        -v 99 99 99 regex
                       Sets the structural variation penalty for chimeric fragments. The three values are for:
                        1) Penalty for SVs within a group of sequences as defined by the regular expression.
                        2) Penalty for SVs within a single sequence
                        3) Penalty for SVs different sequence and group.
                       regex defines a regular expression applied to headers of indexed sequences. The regular
                       expression should define one field that is used to define sequence groups.
    
    Single End Options:
        -m [99]        Sets miRNA mode. In this mode each alignment to a read is given an additional
                       score based on nearby alignment to the opposite strand of the read. Optional
                       parameter sets maximum distance in bp between alignment and it's reverse complement, Default 100bp.
                       Setting miRNA mode changes the default report mode to 'All'.
        -s 9           Turns on read trimming and sets trimming step size. Default step size is 2bp.
                       Unaligned reads are trimmed until they align or fail the QC tests.
 



NOVO2MAQ
--------


Usage: novo2maq [-s off] [-r] <out.map> <in.list> <in.novo>
Options:
                -s on|off Turns on or off the Smith-Waterman check of indels. When only indels that/n                          would be part of optimum local alignment are converted as MAQ indels. Default is off /n                          which will report all indels found by Novoalign.
                -r        Produces short report on number of alignments per reference sequence.
 Where:
                out.map   is file name for the output MAQ map file.
                in.list   is a list of reference sequence headers to be selected. This file servers to specify
                          reference sequences to be selected for conversion to the MAQ map format and also allows
                          translation of the header sequence. Each line in the file has format:
                              <refheader> <tab> <replacement header>
                          Any reference sequences not listed in this file will not be converted to MAQ map file.
                          Use '-' rather than a filename to specify that all sequences are to be selected and converted.
                in.novo   is the Novoalign report file to be converted. Use '-' to specify that the report is to be read from stdin





</entry>



<entry [Wed Jun  9 13:17:50 EDT 2010] INSTALLED LATEST VERSION (novoalign v2.05.33)>




cd /nethome/bioinfo/apps/novocraft/2.05.33
tar xvfz novocraftV2.05.33.gcc.tar.gz

[syoung@u01 2.05.33]$ ll


    -rwxr-xr-x 1 syoung bioinfo 6.5M Apr 21 21:30 isnovoindex
    drwxr-xr-x 2 syoung bioinfo 2.0K Jun  9 13:22 novo2maq
    -rw-r--r-- 1 syoung bioinfo  22K Jun  9 13:16 novo2maqsrcV2.05.33.tar.gz
    -rwxr-xr-x 1 syoung bioinfo 5.0K Apr 21 21:30 novo2paf
    -rwxr-xr-x 1 syoung bioinfo 6.4K Apr 21 21:30 novo2sam.pl
    -rwxr-xr-x 1 syoung bioinfo 8.8M Apr 21 21:30 novoalign
    -rwxr-xr-x 1 syoung bioinfo 8.7M Apr 21 21:30 novobarcode
    -rw-r--r-- 1 syoung bioinfo 941K Apr 21 21:30 NovoBarCode.pdf
    -rw-r--r-- 1 syoung bioinfo  15M Jun  9 13:16 novocraftV2.05.33.gcc.tar.gz
    -rw-r--r-- 1 syoung bioinfo 8.0M Jun  9 13:21 novocraftV2.05.33.tar.gz
    -rw-r--r-- 1 syoung bioinfo 768K Apr 21 21:30 NovoCraftV2.05.pdf
    -rwxr-xr-x 1 syoung bioinfo 6.9M Apr 21 21:30 novoindex
    -rwxr-xr-x 1 syoung bioinfo 8.6K Apr 21 21:30 novope2bed.pl
    -rwxr-xr-x 1 syoung bioinfo 2.5K Apr 21 21:30 novorun.pl
    -rwxr-xr-x 1 syoung bioinfo 7.3M Apr 21 21:30 novoutil
    -rw-r--r-- 1 syoung bioinfo  27K Apr 21 21:30 readme.txt
    -rw-r--r-- 1 syoung bioinfo 336K Apr 21 21:30 ReleaseNotesV2.05.pdf

[syoung@u01 2.05.33]$ cd novo2maq; make

    OK!

[syoung@u01 2.05.33]$ ll novo2maq


    -rw-r--r-- 1 syoung bioinfo 3.9K Jan  6  2009 algo.hh
    -rw-r--r-- 1 syoung bioinfo   82 Jan  6  2009 AUTHORS
    -rw-r--r-- 1 syoung bioinfo 2.1K Jan  6  2009 const.c
    -rw-r--r-- 1 syoung bioinfo  412 Jan  6  2009 const.h
    -rw-rw-r-- 1 syoung bioinfo 4.2K Jun  9 13:22 const.o
    -rw-r--r-- 1 syoung bioinfo  18K Jan  6  2009 COPYING
    -rw-r--r-- 1 syoung bioinfo  240 Jan  6  2009 main.c
    -rw-r--r-- 1 syoung bioinfo  180 Jan  6  2009 main.h
    -rw-rw-r-- 1 syoung bioinfo 6.1K Jun  9 13:22 main.o
    -rw-r--r-- 1 syoung bioinfo  671 Apr 20  2009 Makefile
    -rw-r--r-- 1 syoung bioinfo 3.0K Jan  6  2009 maqmap.c
    -rw-r--r-- 1 syoung bioinfo 1.7K Jan  6  2009 maqmap.h
    -rw-rw-r-- 1 syoung bioinfo  17K Jun  9 13:22 maqmap.o
    -rwxrwxr-x 1 syoung bioinfo  76K Jun  9 13:22 novo2maq
    -rw-r--r-- 1 syoung bioinfo  21K Feb  9 02:49 novo2maq.cc
    -rw-rw-r-- 1 syoung bioinfo 123K Jun  9 13:22 novo2maq.o
    -rw-r--r-- 1 syoung bioinfo  919 Apr 20  2009 README
    -rw-r--r-- 1 syoung bioinfo  23K Jan  6  2009 stdhash.hh


</entry>



<entry [Wed Apr  7 16:48:23 EDT 2010] NOVOALIGN CONVERSION TO MAQ>





6.3 Setting up a run
To execute the SNP finder pipeline in BioScope™software, create a SNP_Finder.ini file, and add it to the an
exsisting plan file. Then execute BioScopeTM software with the plan file as input. Below is an example of
SNP_Finder.ini file.

6.3.1 Example SNP_Finder.ini file

The lines in the .ini file below are color coded as follows:
Red – Must change for every run.
Blue – Please verify to make sure it is appropriate for the run.
Gray – You can probably leave this alone.
Please see Table 6 in Appendix B of SOLiD™ BioScope™ Software 1.0 User Guide for more explanation
of each variable in the .ini file below.
### *********************************
### This is an example .ini File for diBayes.
### *********************************
## See the What is BioScope™ software section for details on global.ini file
## This .ini file inherits paths for base.dir, reference.dir, output.dir,
## tmp.dir, intermediate.dir, log.dir, and scratch.dir from global.ini file.
import /data/globals/global.ini
# run pipeline: 1 to run, 0 to not run.
run.dibayesinput=1
dibayes.run=1




novo2maq issue


http://www.novocraft.com/wiki/tiki-view_forum_thread.php?comments_parentId=68&topics_offset=3&topics_sort_mode=lastPost_desc&forumId=1



on Mon 12 of Jan., 2009 19:34 MYT,	 by vplagnol
Dear MAQ/novoalign users,

This may be more a MAQ issue than a novo2maq issue I am not sure, and a similar message has been posted to the MAQ help mailing list. Nevertheless, some novoalign users might have dealt with this issue already.

I seem to have problem using the novo2maq routine and I may have identified a bug and would like to get some feedback.
To summarize:
1- I use the paired end mapping software from novoalign.
2- I transform the resulting file in MAQ 0.71 map format.
3- I then generate a pileup and get absolutely no reads at all (or very very few of them, not consistent with what I see in the novoalign output).

Looking at the result of "maq mapstat" on the resulting map file I think the problem comes from this:

-- Flag statistics:

-- FG 0 1744
-- FG 32 3545745
-- FG 64 588439
-- FG 130 9230

Looking at the MAQ reference manual I read:

The fifth column, paired flag, is a bitwise flag. Its lower 4 bits give the orientation: 1 stands for FF, 2 for FR, 4 for RF, and 8 for RR, where FR means that the read with smaller coordinate is on the forward strand, and its mate is on the reverse strand. Only FR is allowed for a correct pair. The higher bits of this flag give further information. If the pair meets the paired end requirement, 16 will be set. If the two reads are mapped to different chromosomes, 32 will be set.

So I suspect that the novo2maq routine has a bug in the computation of the flag score? Could it explain why I get so few reads? The novoalign output clearly shows that most paired reads map to the same sequence so the original aligned data looks fine.

Any idea re. a quick fix?

Thank you in advance for your help,

Vincent


In testing with Vincent we found another problem when using novo2maq and pileup.

In novo2maq conversion one of the files specifies a list of headers from the reference sequences. This list of headers must be in the same order as headers in the bfa file produced by maq fasta2bfa. The bfa file is used by maq pileup.

If fasta filenames are specified in the same order on the novoindex and the maq fasta2bfa then the sequences will be in the same order.

You can then use

novoutil headers index.novo

to list all the headers in the order they appear in novoindex and use this to construct the header list for novo2maq.



on Tue 10 of Feb., 2009 14:13 MYT,	 by zayed


Use novoutil to generate a file of all the headers. then try the perl script below on that output:

!/usr/bin/perl -w

Input: novoutil h output
output: in.list header file

while () {
s/>//g;
my @F=split;
printf "NaVs\n",$F2,join("_",@F2 .. $#F);

}



</entry>



<entry [Wed June 17 23:16:01 EST 2009] Conversion of Novoalign to Maq's .map format (calling SNPs and Indels)>




http://www.novocraft.com/wiki/tiki-view_forum_thread.php?topics_offset=1&forumId=1&comments_parentId=13

on Mon 11 of Aug., 2008 02:41 EDT,	 by zayed
Something we've been working on is to get our IO standardized amongst the various programs we're developing.

At present most people are used to using the maq (http://maq.sourceforge.net) tools for alignment, SNP calling, assembly, etc. We plan to develop our own flavour of these but in the meantime it's possible to get more 'good' alignments than maq using novoalign, and then presumably use the maq tools to call assemble reads/call SNPs from novo* alignments.

So here's a quick way...

1) Run novoalign/novopaired:

$ novoalign -d hg18 -f input.fastq > output.novo

2) Create a text file 'in.list' containing chr names mapped to reference sequence file names/headers e.g.

chr1 chr1
chr10 chr10
chr11 chr11
chr12 chr12

4) Use the Maq tools to convert Novo format to .map format:

$ maq novo2maq output.novo.map in.list output.novo


And there you have it, novoalign results with mapping score qualities in maq's map format. You can then use the maq tools to call SNPs, generate consensus sequences, assemble, etc from novoalign results.


The novo2maq function is currently in Heng Li's development branch of maq. The source code is also attached to replies of this message.

(edited by Colin 28th August)

</entry>



<entry [Sun Jan 04 23:16:01 EST 2009] INSTALL AND RUN NOVOALIGN 2.04.01>



1. DOWNLOAD AND UNZIP = INSTALLED

http://www.novocraft.com/downloads/downloadpage.php


2. GENERATE INDEX AND RUN ALIGNMENT WITH novoalign

mkdir /nethome/syoung/base/pipeline/comparison/novoalign
cd /nethome/syoung/base/pipeline/comparison/novoalign
/nethome/syoung/base/apps/novoalign/2.04.01/novoindex -m mtDNA.index 

/nethome/syoung/base/apps/novoalign/2.04.01/novoalign -d /home/syoung/base/pipeline/human1-novoalign/data/human-cdna-embl.index -f human1.seq -q human1.seq.qual &> novoalign.default.out


NOVORUN(1)            User Contributed Perl Documentation           NOVORUN(1)

SYNOPSIS
               A wrapper for running novoalign

       Command Line Options

                       -db Database name. can also be fasta file that will be indexed
                       -build index the database
                       -norun dont run anything, just print the commands.Useful for checking large jobs
                       -format output format. Choices are Eland (default), Novo or Blast
                       -opts String of options to supply to novoalign. run novoalign without args to see these

                       -pafeval Convert Eland-formatted output to PAF and run pafeval
                                Note that this option should only be used on simulated datasets where the read naming convention
                                contains the original sequence location

                       -del  Delete the novo output file




/home/syoung/base/apps/novoalign/novoalign -d /home/syoung/base/pipeline/human1-novoalign/data/human-cdna-embl.index -f human1.seq -q human1.seq.qual &> novoalign.default.out




</entry>



<entry [Sun Jan 04 23:16:01 EST 2009] RUN NOVOALIGN>



1. BUILD INDEX FILE FROM REFERENCE SEQUENCE WITH novoindex

mkdir -p /home/syoung/base/pipeline/human1-novoalign/data
cd /home/syoung/base/pipeline
cp human1-velvet/data/human1_sequence_in.seq*  human1-novoalign/data/
cd /home/syoung/base/pipeline/human1-novoalign/data
mv human1_sequence_in.seq human1.seq
mv human1_sequence_in.seq.qual human1.seq.qual
cp /home/syoung/base/pipeline/human-cdna-embl/Homo_sapiens.NCBI36.49.cdna.known.fas /home/syoung/base/pipeline/human1-novoalign/data
ll
    -rwxr-xr-x 1 syoung users 120M Jan  4 22:35 Homo_sapiens.NCBI36.49.cdna.known.fas
    -rw-r--r-- 1 syoung users 338M Jan  4 22:25 human1.seq
    -rw-r--r-- 1 syoung users 639M Jan  4 22:26 human1.seq.qual


~/base/apps/novoalign/novoindex -m human-cdna-embl.index Homo_sapiens.NCBI36.49.cdna.known.fas 

    # novoindex (1.5) - Universal k-mer index constructor.
    # (C) 2008 NovoCraft
    # novoindex -m human-cdna-embl Homo_sapiens.NCBI36.49.cdna.known.fas 
    # Building with 14-mer and step of 1 bp.
    # novoindex construction dT = 29,547s
    # Index memory size   1.502Gbyte.
    # Done.


CREATED 1.6 GByte INDEX FILE:

ll
    -rwxr-xr-x 1 syoung users 120M Jan  4 22:35 Homo_sapiens.NCBI36.49.cdna.known.fas
    -rw-r--r-- 1 syoung users 338M Jan  4 22:25 human1.seq
    -rw-r--r-- 1 syoung users 639M Jan  4 22:26 human1.seq.qual
    -rwxr--r-- 1 syoung users 1.6G Jan  4 22:37 human-cdna-embl.index



novoindex Usage:
----------------
    novoindex  -k 99 -s 9 -m indexfile sequencefiles....
Where:
    -k   99        is the k-mer length to be used for the index. Typically 14.
    -s   9         is the step size for the index. Typical values are from 1 to 3.
    -m             sets lower case masking on. Lower case sequence will not be indexed.
    indexfile      is the filename for the indexed reference sequence generated by novoindex.
    sequencefiles  a list of sequence files in fasta format to be included in the index.

Example:
              novoindex -k 14 -s 1 celegans elegans.dna.fa

 If k or s are not specified a suitable value will be chosen by the indexer.

 (c) 2008 NovoCraft


2. ALIGN WITH novoalign


/home/syoung/base/apps/novoalign/novoalign -d /home/syoung/base/pipeline/human1-novoalign/data/human-cdna-embl.index -f human1.seq -q human1.seq.qual &> novoalign.default.out


    STARTED ABOUT 20 mins BEFORE Sun Jan  4 23:03:12 EST 2009

/home/syoung/base/apps/novoalign/novoalign -d /home/syoung/base/pipeline/human1-novoalign/data/human-cdna-embl.index -f human1.seq -q human1.seq.qual &> novoalign.default.out


    [syoung@solexa01 data]$ ll novoalign.default.out 
    -rw-r--r-- 1 syoung users 563725168 Jan  5 23:46 novoalign.default.out
    
    [syoung@solexa01 data]$ tail novoalign.default.out 
    >HWI-EAS185_1_JIA_cDNA_JH:3:300:652:667 S       CAAGGCCTTCTAACCTTATAGGAAACTTCACATC      44444444444444444444444444444/////      R       3
    >HWI-EAS185_1_JIA_cDNA_JH:3:300:651:86  S       CTCCCACCTCAGCCTCCTAAGTAGCTGGACTACA      44444444444444444444444444444/////      U       48      3       >ENST00000378442        279     F                               6T>A 19G>A

    #     Read Sequences:  4756220
    #            Aligned:  1206166
    #   Unique Alignment:   518599
    #   Gapped Alignment:     8483
    #     Quality Filter:     5928
    # Homopolymer Filter:    53232
    #       Elapsed Time: 90273,227s
    # Done.




Usage:
    novoalign params

Options:
    -d dbname      Full pathname of indexed reference sequence from novoindex
    -f seqfile     Sequence file
    -q qualfile    Quality or Solexa prb file.
    -t 99          Sets the maximum alignment score acceptable for the best alignment. Default Automatic.
                   In automatic mode the threshold is set based on read length, genome size and other
                   factors (see the manual).
    -g 99          Sets the gap opening penalty. Default 40
    -x 99          Sets the gap extend penalty. Default 15
    -l 99          Sets the minimum number of good quality bases for a read. Default log4(Ng) + 4
    -n 99          Sets limit on usable read length. Default 80
                   This truncates reads to the specified length before alignment.
    -o format      Specifies the report format. Native or Pairwise. Default is Native.
    -R 99          Sets score difference between best and second best alignment for calling a repeat. Default 5.
    -r strategy    Sets strategy for reporting repeats. 'None', 'Random', 'All', 'Exhaustive',
                   or a posterior probability limit. Default None.
    -Q 99          Sets lower limit alignment quality for reporting a match. Default 0.
    -a[sequence]   Strips adapter sequences from reads before aligning.
                   Default is not to strip adapters. Default adapter sequence is (null).
    -m             Sets miRNA mode. In this mode each alignment to a read is given an additional
                   score based on nearby alignment to the opposite strand of the read. Setting
                   miRNA mode changes default report mode to 'All'.
    -s9            Turns on read trimming and sets trimming step size. Default step size is 2bp.
                   Unaligned reads are trimmed until they align or fail the QC tests.
    -e 999         Sets a limit on number of alignments for a single read. Default 0



</entry>



<entry [Wed Dec 10 12:27:01 EST 2008] INSTALL NOVOALIGN>



Short reads not aligned by assemblers - USE NOVOALIGN

http://seqanswers.com/forums/archive/index.php?t-256.html

08-06-2008, 09:09 AM
Reads that aren't matched by Eland are interesting because we would suppose that they're not repeats because Eland reports the matches with multiple locations. 
I would say that gaps in a read would probably be missed by Eland, so use a short read aligner that can find gaps on these reads. I've been using novoalign (www.novocraft.com) and it can find up to 7/8 gaps in a 36bp read matching to a reference sequence, and fast on large ones. I've even tested it on simulated data with mutation rates in excess of 15% and it still finds them. Use a very high threshold e.g. -t 200 to find potentially all permutations for your read.
I'd be interested to know how much more you may be able to match out of your Eland NM reads.


1. DOWNLOAD FROM

http://www.novocraft.com/downloads/downloadpage.php


2. MOVE TO ~/base/apps/novoalign AND UNZIP

[syoung@solexa01 novoalign]$ ll
total 9.4M
drwxr-xr-x  2 syoung users 4.0K Dec 10 12:25 .
drwxr-xr-x 33 syoung users 4.0K Dec 10 12:25 ..
-rw-r--r--  1 syoung users 2.8M Dec 10 12:26 downloads_Linux_V1.05_novocraftV1.05.03.gcc.tar.gz
-rwxr-xr-x  1 syoung users 5.0K Dec  7 23:59 novo2paf
-rwxr-xr-x  1 syoung users 1.6M Dec  7 23:59 novoalign
-rw-r--r--  1 syoung users 656K Dec  7 23:59 NovoCraft.pdf
-rwxr-xr-x  1 syoung users 1.4M Dec  7 23:59 novoindex
-rwxr-xr-x  1 syoung users 1.6M Dec  7 23:59 novopaired
-rwxr-xr-x  1 syoung users 2.5K Dec  7 23:59 novorun.pl
-rwxr-xr-x  1 syoung users 1.3M Dec  7 23:59 novoutil
-rw-r--r--  1 syoung users 8.6K Dec  7 23:59 readme.txt


3. GET USAGE OF NOVOALIGN



# novoalign (1.05.03) - short read aligner with qualities.
# (C) 2008 NovoCraft
# Licensed for evaluation, educational, and not-for-profit use only.
#  novoalign 
Error: Missing reference database name.

Usage:
    novoalign params
Options:
    -d dbname      Full pathname of indexed reference sequence from novoindex
    -f seqfile     Sequence file
    -q qualfile    Quality or Solexa prb file.
    -t 99          Sets the maximum alignment score acceptable for the best alignment. Default Automatic.
                   In automatic mode the threshold is set based on read length, genome size and other
                   factors (see the manual).
    -g 99          Sets the gap opening penalty. Default 40
    -x 99          Sets the gap extend penalty. Default 15
    -l 99          Sets the minimum number of good quality bases for a read. Default log4(Ng) + 4
    -n 99          Sets limit on usable read length. Default 80
                   This truncates reads to the specified length before alignment.
    -o format      Specifies the report format. Native or Pairwise. Default is Native.
    -R 99          Sets score difference between best and second best alignment for calling a repeat. Default 5.
    -r strategy    Sets strategy for reporting repeats. 'None', 'Random', 'All', 'Exhaustive',
                   or a posterior probability limit. Default None.
    -Q 99          Sets lower limit alignment quality for reporting a match. Default 0.
    -a[sequence]   Strips adapter sequences from reads before aligning.
                   Default is not to strip adapters. Default adapter sequence is (null).
    -m             Sets miRNA mode. In this mode each alignment to a read is given an additional
                   score based on nearby alignment to the opposite strand of the read. Setting
                   miRNA mode changes default report mode to 'All'.
    -s9            Turns on read trimming and sets trimming step size. Default step size is 2bp.
                   Unaligned reads are trimmed until they align or fail the QC tests.
    -e 999         Sets a limit on number of alignments for a single read. Default 0

 (c) 2008 NovoCraft



