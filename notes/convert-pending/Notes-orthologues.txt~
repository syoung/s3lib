Notes-orthologues.txt


+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Feb 11 21:12:58 EST 2008
CREATED arraytreelookup AND arraytreelookuploaddata

1. REQUIRES TARGET DATABASE treebranch TABLE

*** NOT NECESSARY AS ALREADY LOADED ONTO CLUSTER FOR arraytreealign

cd ~/FUNNYBASE/bin/utils
sudo ./clusterloadtable.pl -d unigene -t treebranch,collectioniprscan

ON gems:

sudo chmod 755 /common/pipeline/unigene/collection/clusterloadtable.sh
sudo /common/pipeline/unigene/collection/clusterloadtable.sh
sudo dsh -a "ps aux | grep mysql"

2. REQUIRES collectioniprscan TABLE ON CLUSTER

*** NOT NECESSARY AS ALREADY LOADED

cd ~/FUNNYBASE/bin/utils
sudo ./clusterloadtable.pl -d unigene -t collectioniprscan

ON gems:

sudo chmod 755 /common/pipeline/unigene/collection/clusterloadtable.sh
sudo /common/pipeline/unigene/collection/clusterloadtable.sh
sudo dsh -a "ps aux | grep mysql"


3. RUN arraytreelookup

sudo ./arraytreelookupdaemon.pl -d unigene -t unigene -g size -s 300 -n 20

    Run time: 00:05:28
    Completed ./arraytreelookupdaemon.pl
    1:33AM, 12 February 2008
    ****************************************


4. LOAD DATA WITH arraytreelookuploaddata

./arraytreelookuploaddata.pl -D -d unigene -t unigene -g size -s 300 -n 20

    Run time: 00:00:00
    Completed ./arraytreelookuploaddata.pl
    1:52AM, 12 February 2008
    ****************************************



+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Feb 11 11:03:16 EST 2008
FIXED CURTAILING OF clustalw ENTRIES IN treealign BY CHANGING TO 'LONG TEXT' FIELD

sudo ./arraytreealigndaemon.pl -d unigene -t unigene -g size -s 300 -n 20

    Run time: 01:28:54
    Completed ./arraytreealigndaemon.pl
    4:04AM, 11 February 2008
    ****************************************

./arraytreealignloaddata.pl -d unigene -t unigene 

    Run time: 00:03:50
    Completed ./arraytreealignloaddata.pl
    11:08AM, 11 February 2008
    ****************************************




+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

TRACED LARGE NUMBER OF 'No training set' CASES IN learningtrees TO POTENTIAL PROBLEM IN nfoldbayes


MANUALLY IS OKAY:

SELECT DISTINCT accession FROM nfoldbayes
        WHERE collectionid='38'
        AND type = 'training'
        AND nfold = '10'
        AND number = '1'
+-----------+
| accession |
+-----------+
| 1         |
| O01930    |
+-----------+


BUT WHEN nfoldbayes CARRIES OUT THE SAME QUERY, THE RESULT IS NOT DEFINED:

 ./learningtrees.pl -d kog1 -g iprscan
    Doing LEARNING TREES for orthologue groups (total 172)
    0
    SELECT DISTINCT accession FROM nfoldbayes
            WHERE collectionid='38'
            AND type = 'training'
            AND nfold = '10'
            AND number = '1'
    Training set not defined for collection id: 38 (nfold number: 1). Next...
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/kog1/collection/kog1.learningtrees.tsv
    
    Deleting from learningtrees for groupby = 'iprscan'...done.
    Creating table 'learningtrees'... done.
    Loading data into table 'learningtrees'... done.
    Completed ./learningtrees.pl
    Run time: 00:00:01
    7:31PM, 8 February 2008
    ****************************************

nfoldbayes FOR COLLECTION ID 38 LOOKS AS FOLLOWS:

    select * from nfoldbayes where collectionid = 38;
    +--------------+-------+--------+-----------+----------+
    | collectionid | nfold | number | accession | type     |
    +--------------+-------+--------+-----------+----------+
    |           38 |    10 |      1 | 1         | training |
    |           38 |    10 |      1 | 2         | test     |
    |           38 |    10 |      1 | O01930    | training |
    |           38 |    10 |      1 | O02151    | test     |
    |           38 |    10 |      2 | 1         | test     |
    |           38 |    10 |      2 | 2         | training |
    |           38 |    10 |      2 | O01930    | training |
    |           38 |    10 |      2 | O02151    | test     |
    |           38 |    10 |      3 | 1         | training |
    |           38 |    10 |      3 | 2         | test     |
    |           38 |    10 |      3 | O01930    | training |
    |           38 |    10 |      3 | O02151    | test     |
    |           38 |    10 |      4 | 1         | test     |
    |           38 |    10 |      4 | 2         | training |
    |           38 |    10 |      4 | O01930    | training |
    |           38 |    10 |      4 | O02151    | test     |
    |           38 |    10 |      5 | 1         | training |
    |           38 |    10 |      5 | 2         | test     |
    |           38 |    10 |      5 | O01930    | training |
    |           38 |    10 |      5 | O02151    | test     |
    |           38 |    10 |      6 | 1         | training |
    |           38 |    10 |      6 | 2         | test     |
    |           38 |    10 |      6 | O01930    | test     |
    |           38 |    10 |      6 | O02151    | training |
    |           38 |    10 |      7 | 1         | test     |
    |           38 |    10 |      7 | 2         | training |
    |           38 |    10 |      7 | O01930    | training |
    |           38 |    10 |      7 | O02151    | test     |
    |           38 |    10 |      8 | 1         | training |
    |           38 |    10 |      8 | 2         | test     |
    |           38 |    10 |      8 | O01930    | training |
    |           38 |    10 |      8 | O02151    | test     |
    |           38 |    10 |      9 | 1         | training |
    |           38 |    10 |      9 | 2         | test     |
    |           38 |    10 |      9 | O01930    | test     |
    |           38 |    10 |      9 | O02151    | training |
    |           38 |    10 |     10 | 1         | training |
    |           38 |    10 |     10 | 2         | test     |
    |           38 |    10 |     10 | O01930    | test     |
    |           38 |    10 |     10 | O02151    | training |
    +--------------+-------+--------+-----------+----------+



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Feb  7 12:53:28 EST 2008
CREATED arraytreealign

1. LOAD TARGET treebranch TABLE ONTO CLUSTER

(DO BOTH TOGETHER AS QUERY = TARGET = unigene)

cd ~/FUNNYBASE/bin/utils
sudo ./clusterloadtable.pl -d unigene -t treebranch,collectioniprscan

ON gems:

sudo chmod 755 /common/pipeline/unigene/collection/clusterloadtable.sh
sudo /common/pipeline/unigene/collection/clusterloadtable.sh
sudo dsh -a "ps aux | grep mysql"


#2. LOAD collectioniprscan TABLE ONTO CLUSTER
#
#cd ~/FUNNYBASE/bin/utils
#sudo ./clusterloadtable.pl -d unigene -t collectioniprscan
#
#ON gems:
#
#sudo chmod 755 /common/pipeline/unigene/collection/clusterloadtable.sh
#sudo /common/pipeline/unigene/collection/clusterloadtable.sh
#sudo dsh -a "ps aux | grep mysql"


3. RUN arraytreealign


sudo ./arraytreealigndaemon.pl -d unigene -t unigene -g size -s 300






++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Feb  3 20:20:52 EST 2008
REMOVED REDUNDANCY IN iprscanattribute VALUES

select collectionid, accession, source, aligned, label, number, SUBSTRING(value, 1, 50), start, stop  from iprscanattribute where collectionid = 4 and groupby = 'size' and domainsize = 300 order by collectionid, accession ;
+--------------+-----------+-----------+---------+-------+--------+----------------------------------------------------+-------+------+
| collectionid | accession | source    | aligned | label | number | SUBSTRING(value, 1, 50)                            | start | stop |
+--------------+-----------+-----------+---------+-------+--------+----------------------------------------------------+-------+------+
|            4 | 1         | unigene   |       1 |     1 |      1 | seg                                                | 32    | 331  |
|            4 | 1         | unigene   |       1 |     1 |      2 | histoneh2b                                         | 332   | 631  |
|            4 | P55294    | swissprot |       1 |     0 |      1 | dTDP_gluc_dehyt,Epimerase                          | 32    | 331  |
|            4 | P55294    | swissprot |       1 |     0 |      2 | histoneh2b                                         | 332   | 631  |
|            4 | Q43213    | swissprot |       1 |     0 |      1 | Histone-fold,H2A,Histone-fold,Histone_H2A,HISTONEH | 32    | 331  |
|            4 | Q43213    | swissprot |       1 |     0 |      2 | *                                                  | 332   | 631  |
|            4 | Q43214    | swissprot |       1 |     0 |      1 | Histone-fold,H2A,Histone-fold,Histone_H2A,HISTONEH | 32    | 331  |
|            4 | Q43214    | swissprot |       1 |     0 |      2 | *                                                  | 332   | 631  |
|            4 | Q43216    | swissprot |       1 |     1 |      1 | Histone_H2B,Histone-fold,Histone-fold,H2B,Histone, | 32    | 331  |
|            4 | Q43216    | swissprot |       1 |     1 |      2 | *                                                  | 332   | 631  |
|            4 | Q43312    | swissprot |       1 |     0 |      1 | Histone-fold,Histone-fold,H2A,Histone_H2A,HISTONEH | 32    | 331  |
|            4 | Q43312    | swissprot |       1 |     0 |      2 | *                                                  | 332   | 631  |
|            4 | Q5R893    | swissprot |       1 |     1 |      1 | Histone-fold,Histone_H2B,Histone-fold,H2B,Histone, | 32    | 331  |
|            4 | Q5R893    | swissprot |       1 |     1 |      2 | *                                                  | 332   | 631  |
|            4 | Q64525    | swissprot |       1 |     1 |      1 | Histone-fold,Histone_H2B,Histone-fold,H2B,Histone, | 32    | 331  |
|            4 | Q64525    | swissprot |       1 |     1 |      2 | *                                                  | 332   | 631  |
+--------------+-----------+-----------+---------+-------+--------+----------------------------------------------------+-------+------+



RERAN arrayiprscanattributedaemon FOR unigene -g size -s 300.

sudo ./arrayiprscanattributedaemon.pl -d unigene -g size -s 300 -t 20

    Run time: 00:40:11
    Completed ./arrayiprscanattributedaemon.pl
    8:39PM, 3 February 2008
    ****************************************

LOADED iprscanattributes:

./loadiprscaniprscanattribute.pl -d unigene -g size -s 300 -t 20
    
    Run time: 00:01:50
    Completed ./loadiprscanattribute.pl
    2:30AM, 4 February 2008
    ****************************************

REDID learningtrees FOR unigene -g size -s 300.

./learningtrees.pl -d unigene -g size -s 300
    
    Completed ./learningtrees.pl
    Run time: 00:11:51
    3:00PM, 4 February 2008
    ****************************************

    REDUCED EFFICACY - MAYBE NEED TO SPREAD THE DOMAIN NAIMES OUT TO COVER SUBROUPS WITHIN EACH SUPERDOMAIN...    

    select avg(correct) from learningtrees where groupby = 'size' and domainsize = 300;
    +--------------+
    | avg(correct) |
    +--------------+
    |       0.7666 |
    +--------------+


REDID treelibrary:

./treelibrary.pl -d unigene -g size -s 300
    
    Completed ./treelibrary.pl
    Run time: 00:00:04
    6:19PM, 4 February 2008
    ****************************************

./treebranch.pl -d unigene -g size -s 300

    Completed ./treebranch.pl
    Run time: 00:05:42
    1:00PM, 7 February 2008
    ****************************************

4. POPULATE treelookup

    USE INTERPRO MOTIFS OF QUERY SEQUENCE, SEGREGATED BY DOMAINS IN treedomain, TO LOOKUP
    
    MOTIF PAIRS IN treebranch TABLE. ORDER BY NUMBER OF CORRECT CONSECUTIVE PAIRS.

./treelookup.pl -d unigene -t unigene -g size -s 300



5. GET MULTIPLE ALIGNMENTS OF TARGETS AND ADD QUERY SEQUENCE

sudo ./arraytreealigndaemon.pl -d unigene -t unigene -g size -s 300 -n 20

    ~ 15 MINS

./arraytreealignloaddata.pl -d unigene -t unigene

    2 MINS

6. POPULATE treepredict

    
./treepredict.pl -d unigene -t unigene -g size -s 300










++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Feb  2 20:20:52 EST 2008
FIXED iprscansuperdomains - BUG IN Signature::Domain::Iprscan

WITH STOP POINT OF FIRST OF TWO DOMAINS FROM SPLIT DOMAIN

select name, querystart, querystop from iprscansuperdomain where collectionid = 4 order by querystart;
+------------------+------------+-----------+
| name             | querystart | querystop |
+------------------+------------+-----------+
| seg              |         32 |        56 |
| g3dsa:1.10.20.10 |         60 |       111 |
| histoneh2b       |        112 |       173 |
| histoneh2b       |        174 |       225 |
| histoneh2b       |        226 |       255 |
| histoneh2b       |        256 |       290 |
| histoneh2b       |        291 |       435 |
| histoneh2b       |        345 |       446 |
| histone h2b      |        384 |       446 |
+------------------+------------+-----------+
9 rows in set (0.00 sec)


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Jan 28 17:09:07 EST 2008
LEARNING TREES - LOOKUP TABLE WORKFLOW


1. POPULATE treelibrary TABLE

    CREATE TABLE IF NOT EXISTS treelibrary (
        collectionid    INT(6),
    
    
        groupby         VARCHAR(30),    -- iprscan | size | both
        domainsize      INT(6),         
        type            VARCHAR(30),    -- attribute type, e.g., iprscan, AA distribution
    
        correct         INT(6),
        total           INT(6),
        probability     DECIMAL(3,2),
        tree            TEXT,
        treenumber      INT(4),
        
        PRIMARY KEY (collectionid, groupby, domainsize, type, treenumber)
    )


    GET THE TREES FROM learningtrees, IN ORDER OF THE GREATEST NUMBER OF APPEARANCES AND HIGHEST sum(correct)/count(correct) INCLUDING PROBABILITIES
            
        select sum(correct) as sum, count(correct) as count, probability, tree from learningtrees where collectionid = 4 group by tree ORDER BY SUM DESC, COUNT DESC\G
        *************************** 1. row ***************************
                sum: 54
              count: 54
        probability: 1.00
               tree: ["domain6",{"HISTONEH2A":0,"histoneh2b":1,"*":0}]
        *************************** 2. row ***************************
                sum: 8
              count: 8
        probability: 1.00
               tree: ["domain3",{"Histone_H2A,HISTONEH2A,HISTONEH2A":0,"*":0,"HISTONEH2A,HISTONEH2A":0,"Q8CGP2_MOUSE_Q8CGP2;,CAMP RESPONSE ELEMENT-BINDING":1,"HISTONEH2B,Histone_H2B,HISTONEH2B,HISTONE_H2B,HIST":1}]
         ...


2. POPULATE treedomain USING Signature::Attribute::Iprscan SUB domain_blocks OR domain_blocks_by_size:

    CREATE TABLE IF NOT EXISTS treedomain
    (
        collectionid            INT(6) NOT NULL,
    
        groupby                 VARCHAR(30),    -- iprscan | size | both
        domainsize               INT(6),         
        type                    VARCHAR(30),    -- attribute type, e.g., iprscan, AA distribution
    
        number                  INT(6),
        start                   VARCHAR(50),
        stop                    VARCHAR(50),
        
        PRIMARY KEY  (collectionid, accession, number, groupby, domainsize, type, start, stop)
    )


    STORE DOMAIN POSITIONS BY GROUPBY AND DOMAINSIZE:
      
        iprscan -   SIMPLE ORDER OF SUPERDOMAINS DICTATES ORDER OF MOTIF GROUPS 
        
        both    -   DOMAIN BLOCKS DETERMINED BY Signature::Attribute::Iprscan
        
        size    -   DOMAIN BLOCKS BASED ON FIXED WIDTH



    #OR, GET THE BLOCKS FROM iprscanattribute BLOCK BOUNDARIES:
    #
    #select min(start), max(stop), number from iprscanattribute where collectionid = 4 group by number;
    #+------------+-----------+--------+
    #| min(start) | max(stop) | number |
    #+------------+-----------+--------+
    #| 0          | 58        |      1 |
    #| 133        | 415       |      2 |
    #| 112        | 415       |      3 |
    #| 174        | 432       |      4 |
    #| 226        | 415       |      5 |
    #| 256        | 290       |      6 |
    #| 291        | 435       |      7 |
    #| 345        | 446       |      8 |
    #| 384        | 446       |      9 |
    #+------------+-----------+--------+


3. POPULATE treebranch

    NAME        treebranch
    
    PURPOSE

        CREATE A QUICK LOOKUP TABLE OF SUCCESSIVE MOTIF PAIRS IN QUERY SEQUENCES:
    
        fromvalue   :   targetnames OF ALL DISTINCT IPRSCAN MOTIFS IN THE SEQUENCE
                        WHICH FALL WITHIN THE **CURRENT** treedomain, ADJUSTED BY POSITION
                        IN THE iprscansetalignment
    
        tovalue     :   targetnames OF ALL DISTINCT IPRSCAN MOTIFS IN THE SEQUENCE
                        WHICH FALL WITHIN THE **NEXT** treedomain, ADJUSTED BY POSITION
                        IN THE iprscansetalignment
         
    NOTES
  
        USE DOMAIN BOUNDARIES IN treedomain AND IPRSCANS OF FROM collectioniprscan,
        
        ADJUSTING FOR POSITION USING ALIGNMENT POSITIONS IN iprscansetalignment, TO CREATE
        
        LOOKUP TABLE OF 'TO-FROM' PAIRS OF INTERPRO MOTIFS OF ORIGINAL ORTHOLOGUES
        
        
        NB: LATER USE ALL label '1' INSTANCES IN iprscanset
            (** -- DO LATER -- treebranchextended.pl ***)
    
    
        CREATE TABLE IF NOT EXISTS treebranch
        (
            collectionid            INT(6) NOT NULL,
            annotation              TEXT,       
        
            groupby                 VARCHAR(30),    -- iprscan | size | both
            domainsize              INT(6),         
            type                    VARCHAR(30),    -- attribute type, e.g., iprscan, AA distribution
        
            fromnumber              INT(6),
            fromstart               VARCHAR(50),
            fromstop                VARCHAR(50),
            fromid                  VARCHAR(50),
        
            tonumber                INT(6),
            tostart                 VARCHAR(50),
            tostop                  VARCHAR(50),
            toid                    VARCHAR(50),
            
            PRIMARY KEY  (collectionid, groupby, domainsize, type, fromnumber, tonumber, fromid, toid)
        )
    

    INPUT
    
		1. treedomain TABLE 

        2. collection TABLE
        
    OUTPUT
    
        1. treebranch TABLE

    USAGE
    
    ./treebranch.pl <-d database> <-g group_by> <-s domain_size> [-h]
    
    -d database           :   name of database
	-g group_by           :   how to group domains (iprscan | size | both)
	-s domain_size        :   size of domain (AA residues) if group_by is 'size' or 'both'
    -h help               :   print help info

    EXAMPLES
    
./treebranch.pl -d unigene -g iprscan


    Completed ./treebranch.pl
    Run time: 00:05:22
    0:53AM, 2 February 2008
    ****************************************


4. POPULATE treelookup

    USE INTERPRO MOTIFS OF QUERY SEQUENCE, SEGREGATED BY DOMAINS IN treedomain, TO LOOKUP
    
    MOTIF PAIRS IN treebranch TABLE. ORDER BY NUMBER OF CORRECT CONSECUTIVE PAIRS.

./treelookup.pl -d unigene -t unigene -g size -s 300



5. GET MULTIPLE ALIGNMENTS OF TARGETS AND ADD QUERY SEQUENCE

sudo ./arraytreealigndaemon.pl -d unigene -t unigene -g size -s 300 -n 20

    ~ 15 MINS

./arraytreealignloaddata.pl -d unigene -t unigene

    Run time: 00:02:03
    Completed ./arraytreealignloaddata.pl
    4:27PM, 3 February 2008
    ****************************************

    select count(distinct collectionid) from treealign;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          930 |
    +------------------------------+
    1 row in set (0.01 sec)
    
    select count(distinct collectionid, targetid) from treealign;
    +----------------------------------------+
    | count(distinct collectionid, targetid) |
    +----------------------------------------+
    |                                   3933 |
    +----------------------------------------+
    1 row in set (0.01 sec)
    
    select count(distinct targetid) from treealign;
    +--------------------------+
    | count(distinct targetid) |
    +--------------------------+
    |                      863 |
    +--------------------------+


6. POPULATE treepredict

    GENERATE iprscanattributes FOR QUERY SEQUENCES AND APPLY TREE RULES TO PREDICT
    
    THE LIKELIHOOD THAT THE QUERY BELONGS TO EACH GROUP.

    GET TREE RULES.
    
./treepredict.pl -d unigene -t unigene -g size -s 300



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Jan 28 17:19:29 EST 2008
THE SAME MOTIFS CAN BE FOUND IN FUNCTIONALLY DISTINCT PROTEINS

EXAMPLE - NOT ALL PROTEINS WITH THE GENE3D TARGETID g3dsa:1.10.20.10 ARE HISTONES:


    select distinct number,value from iprscanattribute where collectionid = 4 and label = 1 group by number, value;
      +-------+------+--------+----------------------------------------------------+
      | start | stop | number | value                                              |
      +-------+------+--------+----------------------------------------------------+
      | 32    | 58   |      1 | *                                                  |
      | 33    | 182  |      1 | Histone-fold,Histone_H2B,Histone-fold              |
      | 33    | 332  |      1 | Histone-fold,Histone_H2B,Histone-fold,H2B,Histone, |
      | 33    | 182  |      1 | Histone_H2B,Histone-fold,Histone-fold              |
      | 33    | 332  |      1 | Histone_H2B,Histone-fold,Histone-fold,H2B,Histone, |
      | 33    | 132  |      1 | no description,HISTONE H2B,seg,seg,seg             |
      | 33    | 182  |      1 | no description,HISTONE H2B,seg,seg,seg,no descript |
      | 32    | 58   |      1 | seg                                                |
      | 59    | 111  |      2 | *                                                  |
      | 59    | 111  |      2 | gene3d:g3dsa:1.10.20.10                            |
      | 183   | 332  |      2 | H2B,Histone,HISTONEH2B,HISTONEH2B,Histone_H2B,HIST |
      | 133   | 232  |      2 | Histone-fold,Histone_H2B,Histone-fold,H2B,Histone, |
      | 133   | 232  |      2 | Histone_H2B,Histone-fold,Histone-fold,H2B,Histone, |
      | 333   | 415  |      2 | HISTONE_H2B,HISTONEH2B,seg,HISTONEH2B              |
      | 133   | 232  |      2 | no description,Histone,CAMP RESPONSE ELEMENT-BINDI |
      | 183   | 332  |      2 | seg,HISTONEH2B,Q8CGP2_MOUSE_Q8CGP2;,CAMP RESPONSE  |
      | 333   | 415  |      3 | *                                                  |
      | 112   | 173  |      3 | histoneh2b                                         |
      | 233   | 332  |      3 | HISTONEH2B,Histone_H2B,HISTONEH2B,HISTONE_H2B,HIST |
      | 112   | 173  |      3 | Histone_H2B,Histone-fold                           |
      | 333   | 415  |      3 | HISTONE_H2B,HISTONEH2B,seg,HISTONEH2B              |
      | 233   | 332  |      3 | Q8CGP2_MOUSE_Q8CGP2;,CAMP RESPONSE ELEMENT-BINDING |
      | 333   | 432  |      4 | *                                                  |
      | 174   | 225  |      4 | histoneh2b                                         |
      | 333   | 432  |      4 | HISTONE_H2B,HISTONEH2B,seg,HISTONEH2B              |
      | 433   | 415  |      5 | *                                                  |
      | 226   | 255  |      5 | histoneh2b                                         |
      | 256   | 290  |      6 | histoneh2b                                         |
      | 291   | 435  |      7 | histoneh2b                                         |
      | 345   | 446  |      8 | *                                                  |
      | 345   | 446  |      8 | histoneh2b                                         |
      | 384   | 446  |      9 | *                                                  |
      | 384   | 446  |      9 | histone h2b                                        |
      +-------+------+--------+----------------------------------------------------+
      33 rows in set (0.01 sec)


      select distinct swissprotgene3d.accession, SUBSTRING(swissprot.name, 1, 50) from swissprotgene3d, swissprot where targetid ='g3dsa:1.10.20.10' and swissprotgene3d.accession = swissprot.accession;
  
      +-----------+----------------------------------------------------+
      | accession | SUBSTRING(swissprot.name, 1, 50)                   |
      +-----------+----------------------------------------------------+
      | Q8N961    | Ankyrin repeat and BTB/POZ domain-containing prote |
      | Q7TQI7    | Ankyrin repeat and BTB/POZ domain-containing prote |
      | O08764    | Ankyrin repeat and BTB/POZ domain-containing prote |
      | Q75DE4    | Histone H3-like centromeric protein CSE4           |
      | P49449    | Histone H3-like centromeric protein A              |
      | Q59LN9    | Histone H3-like centromeric protein CSE4           |
      | Q874J6    | Histone H3-like centromeric protein CSE4           |
      | Q6XXM1    | Histone H3-like centromeric protein A              |
      | Q8R565    | Histone H3-like centromeric protein A              |
      | Q803H4    | Histone H3-like centromeric protein A              |
      | P49450    | Histone H3-like centromeric protein A              |
      ...
      | Q9Y6J9    | TAF6-like RNA polymerase II p300/CBP-associated fa |
      | Q8R2K4    | TAF6-like RNA polymerase II p300/CBP-associated fa |
      | P49847    | Transcription initiation factor TFIID subunit 6    |
      | P49848    | Transcription initiation factor TFIID subunit 6    |
      | Q62311    | Transcription initiation factor TFIID subunit 6    |
      | Q63801    | Transcription initiation factor TFIID subunit 6    |
      | Q91857    | Transcription initiation factor TFIID subunit 6    |
      | P53040    | Transcription initiation factor TFIID subunit 6    |
      | Q9HBM6    | Transcription initiation factor TFIID subunit 9B   |
      | Q6NZA9    | Transcription initiation factor TFIID subunit 9B   |
      | Q5R7P7    | Transcription initiation factor TFIID subunit 9B   |
      | Q62880    | Transcription initiation factor TFIID subunit 9B   |
      | Q17QQ4    | Transcription initiation factor TFIID subunit 9    |
      | Q27272    | Transcription initiation factor TFIID subunit 9    |
      | Q16594    | Transcription initiation factor TFIID subunit 9    |
      | Q8VI33    | Transcription initiation factor TFIID subunit 9    |
      | Q5BKE0    | Transcription initiation factor TFIID subunit 9    |
      | Q09869    | Transcription initiation factor TFIID subunit 9    |
      | Q05027    | Transcription initiation factor TFIID subunit 9    |
      | Q5ZMV3    | TATA-binding protein-associated phosphoprotein     |
      | Q01658    | TATA-binding protein-associated phosphoprotein     |
      | Q91WV0    | TATA-binding protein-associated phosphoprotein     |
      | Q5XI68    | TATA-binding protein-associated phosphoprotein     |
      | Q9HGK9    | Uncharacterized protein C800.13                    |
      +-----------+----------------------------------------------------+
      850 rows in set (3.78 sec)



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

FOLLOWING ON FROM collectionorthologues.pl, DID BLAST AND IPRSCAN OF funnybase11ortho



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Nov 17 23:30:36 EST 2007
CREATED blastgraphevalueordinals.pl TO DO E-VALUE ORDINALS RATIO GRAPH FOR unigene2 

    NAME     blastgraphevalueordinals
    
    PURPOSE
    
        CREATE THE HTML GRAPH OF THE FOLLOWING:
        
            1) Y-AXIS: NUMBER OF SEQUENCES
            
            2) X-AXIS:
            
                1. TOP HIT E-VALUE / 2ND HIT E-VALUE
                
                2. TOP HIT E-VALUE / 3RD HIT E-VALUE

                3. TOP HIT E-VALUE / 4TH HIT E-VALUE
            
        BASED ON THE HITS IN THE collectionblast TABLE
     
        (NB: ONLY REFSEQ HITS, SWISSPROT HITS ARE EXCLUDED)

    INPUT
    
        1. collectionblast TABLE
    
     OUTPUT
     
        1. blastgraphevalueordinals TABLE
    
    USAGE
    
        ./blastgraphevalueordinals.pl <-d database> <-b number_bins> [-h]
    
        -d database        :    NAME OF THE DATABASE
        -b number_bins     :    NUMBER OF BINS TO SORT THE DATA IN
        -h help            :    PRINT THIS MESSAGE
        
    EXAMPLES
    
./blastgraphevalueordinals.pl -d unigene2 -b 20  > unigene2.graph.evalueordinals.html


SAVED IMAGE FILE:

~/FUNNYBASE/thesis/final/chap1/images/unigene2.graph.evalueordinals.png


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Nov 17 19:34:43 EST 2007
BLAST COUNTS WITH EVALUE CUTOFF AT 1e-100

DID COUNTS AND GRAPH FOR unigene2:

./blastcountsevaluecutoff.pl -d unigene2 -t swissprot,refseq-mouse,refseq-dog,refseq-rat -e 100 

./blastcountsgraphevaluecutoff.pl -d unigene2 -b 30 -t swissprot -e -100  > unigene2.blastcountsgraphevaluecutoff.e-100.swissprot.html
./blastcountsgraphevaluecutoff.pl -d unigene3 -b 30 -t swissprot -e -100  > unigene3.blastcountsgraphevaluecutoff.e-100.swissprot.html
./blastcountsgraphevaluecutoff.pl -d unigene4 -b 30 -t swissprot -e -100  > unigene4.blastcountsgraphevaluecutoff.e-100.swissprot.html
./blastcountsgraphevaluecutoff.pl -d unigene5 -b 15 -t swissprot -e -100  > unigene5.blastcountsgraphevaluecutoff.e-100.swissprot.html
./blastcountsgraphevaluecutoff.pl -d unigene6 -b 15 -t swissprot -e -100  > unigene6.blastcountsgraphevaluecutoff.e-100.swissprot.html


DID NOT REDO COUNTS FOR unigene BECAUSE CURRENT collection TABLE CONTAINS MULTIPLE ORTHOLOGUES:

select * from blastcountsevaluecutoff;
+--------------+---------------------+--------------+-------+--------------+
| collectionid | collectionaccession | targetsource | count | evaluecutoff |
+--------------+---------------------+--------------+-------+--------------+
|            1 |                   1 | swissprot    |     1 |         -100 |
|            1 |                   2 | swissprot    |     1 |         -100 |
|            1 |                   3 | swissprot    |     3 |         -100 |
|            1 |                   4 | swissprot    |     1 |         -100 |
|            2 |                   1 | swissprot    |     3 |         -100 |
|            2 |                   2 | swissprot    |     4 |         -100 |


use unigene;
select count(*) from collectionblast;
+----------+
| count(*) |
+----------+
|  2145343 |
+----------+
select targetsource, count(*) from collectionblast group by targetsource ;
+--------------+----------+
| targetsource | count(*) |
+--------------+----------+
| refseq-dog   |   392310 |
| refseq-mouse |   504528 |
| refseq-rat   |   266808 |
| swissprot    |   981697 |
+--------------+----------+






++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Nov 17 19:02:29 EST 2007
RERAN arrayselfblastcountsdaemon.pl AND THEN selfblastcountsgraph.pl

sudo ./arrayselfblastcountsdaemon.pl -d indexer -s swissprotselfblast 

    Run time: 00:05:15
    Completed ./arrayselfblastcountsdaemon.pl
    6:56PM, 17 November 2007
    ****************************************

    select count(*) from swissprotselfblastcounts;
    +----------+
    | count(*) |
    +----------+
    |   137162 |
    +----------+


./selfblastcountsgraph.pl -d indexer -s swissprotselfblast -b 26 > swissprotselfblast.blastcountsgraph.html


PRINTED FILE:



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Fri Nov 16 15:00:15 EST 2007
GRAPH OF TOTAL HITS VERSUS NUMBER/PERCENT MISMATCHES

( NB: CORRECTED blaststats

 ./blaststats.pl -d unigene2 -b 32

    Run time: 00:12:39
    Completed ./blaststats.pl
    10:29PM, 16 November 2007
    ****************************************
)

    NAME     blastgraph.totalhits-matches
    
    PURPOSE
    
        CREATE THE HTML GRAPH OF THE BLAST HIT E-VALUE DISTRIBUTION FOR
        
        EACH COLLECTION SEQUENCE BASED ON THE CUSTOM BINNED DATA IN THE
        
        blaststats TABLE 
     
     INPUT
    
        1. blaststats TABLE
    
     OUTPUT
     
        1. blastgraph.totalhits-matches TABLE
    
    USAGE
    
        ./blastgraph.totalhits-matches.pl <-d database> <-b number_bins> [-h]
    
        -d database        :    NAME OF THE DATABASE
        -b number_bins     :    NUMBER OF BINS TO SORT THE DATA IN
        -h help            :    PRINT THIS MESSAGE
        
    EXAMPLES
    
./blastgraph.totalhits-matches.pl -d unigene2 -b 32


PRINTED FILES:

orthologues/test1.html
orthologues/test2.html

SAVED AS png FILES:

/Users/young/FUNNYBASE/thesis/final/chap1/images/unigene2.graph.numberhits_vs_countmismatches.png
/Users/young/FUNNYBASE/thesis/final/chap1/images/unigene2.graph.numberhits_vs_percentmismatches.png


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Fri Nov 16 09:58:16 EST 2007
TRIED TO USE PRECOMPUTED IPRSCANS FROM *.IPC FILES TO POPULATE collectioniprscan TABLE FOR CluSTr COLLECTION BUT NONE FOUND IN interprohuman AND interpromouse TABLES!!

./clustriprscan.pl -d humanmouse
    
    RUN TIME: 00:01:06
    Completed ./clustriprscan.pl
    8:45PM, 16 November 2007
    ****************************************

NO IPRSCANS RETRIEVED!!
    

select count(distinct accession) from interpromouse;
+---------------------------+
| count(distinct accession) |
+---------------------------+
|                     31618 |
+---------------------------+
1 row in set (1.76 sec)

mysql> select count(distinct accession) from interprohuman;
+---------------------------+
| count(distinct accession) |
+---------------------------+
|                     38489 |
+---------------------------+



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Nov 15 17:38:16 EST 2007
USE interpro2symbols.pl TO CREATE MAPPING TABLE BETWEEN interproids AND GENE symbols

1. DOWNLOAD FROM INTERPRO FTP:

wget ftp://ftp.ebi.ac.uk/pub/databases/interpro/short_names.dat

SAVE AS:

/Users/young/FUNNYBASE/pipeline/indexer/data/interpro.short_names.dat

IPR000001       Kringle
IPR000002       Fizzy
IPR000003       RtnoidX_rcpt
IPR000005       HTHAraC
IPR000006       Metallothionein_vert
IPR000007       Tubby_C
IPR000008       C2_Ca-dep
IPR000009       PP2A_PR55
IPR000010       Prot_inh_cystat
IPR000011       UBQ-activ_enz_E1
IPR000012       RetroV_VpR/X


( NB: ALSO TOOK DOWN THE LONGER NAMES FILE:
wget ftp://ftp.ebi.ac.uk/pub/databases/interpro/names.dat

/Users/young/FUNNYBASE/pipeline/indexer/data/interpro.names.dat

IPR000001	Kringle
IPR000002	Cdc20/Fizzy
IPR000003	Retinoid X receptor
IPR000005	Helix-turn-helix, AraC type
IPR000006	Metallothionein, vertebrate
)

2. RUN interpro2symbol.pl

bin
cd mappings
./interpro2symbol.pl -f /Users/young/FUNNYBASE/pipeline/indexer/data/interpro.short_names.dat

    RUN TIME: 00:00:04
    Completed ./interpro2symbol.pl
    6:11PM, 15 November 2007
    ****************************************
    
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Nov 15 17:19:24 EST 2007
EXTRACT PRECOMPUTED IPRSCANS FROM *.IPC FILES WITH interpro.pl AND clustrinterpro.pl

1. LOAD INTERPRO MAPPINGS
=========================

USE interpro2database.pl TO LOAD THE interproid TO interproname, targetaccession MAPPINGS

DOWNLOAD FROM INTERPRO FTP:
ftp://ftp.ebi.ac.uk/pub/databases/interpro/ParentChildTreeFile.txt

SAVE AS:

/Users/young/FUNNYBASE/pipeline/indexer/data/interpro.ParentChildTreeFile.txt

CONTENTS:

IPR000010::Proteinase inhibitor I25, cystatin::PF00031::PS00287::SM00043
--IPR001363::Proteinase inhibitor I25C, fetuin::PS01254::PS01255
--IPR003243::Proteinase inhibitor I25A and I25B, type 2 and phytocystatins::PD001231


(NB: /Users/young/FUNNYBASE/pipeline/indexer/data/interpro.entry.list IS REDUNDANT W.R.T. interpro.ParentChildTreeFile.txt::

IPR000138 Hydroxymethylglutaryl-CoA lyase, active site
IPR000169 Peptidase, cysteine peptidase active site
IPR000180 Peptidase M19, renal dipeptidase, active site
IPR000189 Prokaryotic transglycosylase, active site

)

RUN interpro2database.pl

./interpro2database.pl -f /Users/young/FUNNYBASE/pipeline/indexer/data/interpro.ParentChildTreeFile.txt

    RUN TIME: 00:00:01
    Completed ./interpro2database.pl
    11:31PM, 15 November 2007
    ****************************************


2. GET IPRSCANS FROM FILE
=========================

FILES:
/Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/25.H_sapiens.IPC
/Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/59.M_musculus.IPC
/Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/122.R_norvegicus.IPC

CONTENTS (E.G.):

Q5SWW8  PD000395        IPR000001       36      118
A6PVI2  PD000395        IPR000001       123     166
Q13208  PF00051 IPR000001       166     243
Q01974  PR00018 IPR000001       358     378
Q5VTT3  PS00021 IPR000001       224     237
Q5STQ1  PR00545 IPR000003       482     501


	NAME		clustrinterpro
	
	PURPOSE

		LOAD THE PRECOMPUTED CLUSTR INTERPROSCAN HITS INTO THE CORRESPONDING
        
        <SPECIES>interpro TABLE
		 
	INPUT

		1. INTERPRO *.IPC FILE
			
	OUTPUT

		1. <SPECIES>interpro TABLE
	
	USAGE
	
		./clustrinterpro.pl <-t target_species> <-i inputfile> [-h]
		
		-t target_species   :   name of target species (e.g., 'human')
		-i inputfile        :   /full/path/to/inputfile
		-h                  :   print this 'help' message

	EXAMPLES:

./clustrinterpro.pl -t interprohuman -i /Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/25.H_sapiens.IPC

./clustrinterpro.pl -t interpromouse -i /Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/59.M_musculus.IPC

./clustrinterpro.pl -t interprorat -i /Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/122.R_norvegicus.IPC


RUN clustriprscans.pl TO EXTRACT IPRSCANS FROM *.IPC FILES

./clustrinterpro.pl -t interprohuman -i /Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/25.H_sapiens.IPC
    
    RUN TIME: 00:08:46
    Completed ./clustrinterpro.pl
    10:03AM, 16 November 2007
    ****************************************

./clustrinterpro.pl -t interpromouse -i /Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/59.M_musculus.IPC
    
    RUN TIME: 00:05:57
    Completed ./clustrinterpro.pl
    3:07PM, 16 November 2007
    ****************************************
    
./clustrinterpro.pl -t interprorat -i /Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/122.R_norvegicus.IPC
    
    RUN TIME: 00:02:29
    Completed ./clustrinterpro.pl
    8:15PM, 16 November 2007
    ****************************************
    
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Nov 14 22:29:40 EST 2007
CREATED collectionorthologues.pl TO EXTRACT ORTHOLOGUE PAIRS FROM THE correctannotation TABLE ENTRIES

CHOSE MOST CONSERVATIVE CUTOFFS (217 SEQUENCES) IN TABLE RANGE:

mismatch cutoff = 0.05
coverage cutoff = 0.90

    use funnybase11;
    
    select mismatchcutoff, coveragecutoff, count(distinct collectionid)  from correctannotation group by mismatchcutoff, coveragecutoff;
    +----------------+----------------+------------------------------+
    | mismatchcutoff | coveragecutoff | count(distinct collectionid) |
    +----------------+----------------+------------------------------+
    |           0.05 |           0.60 |                          299 |
    |           0.05 |           0.70 |                          280 |
    |           0.05 |           0.80 |                          247 |
    |           0.05 |           0.90 |                          217 |  ******
    |           0.10 |           0.60 |                          569 |
    |           0.10 |           0.70 |                          526 |
    |           0.10 |           0.80 |                          463 |
    |           0.10 |           0.90 |                          382 |
    |           0.15 |           0.60 |                          823 |
    |           0.15 |           0.70 |                          758 |
    |           0.15 |           0.80 |                          666 |
    |           0.15 |           0.90 |                          519 |
    |           0.20 |           0.60 |                         1002 |
    |           0.20 |           0.70 |                          914 |
    |           0.20 |           0.80 |                          801 |
    |           0.20 |           0.90 |                          597 |
    |           0.25 |           0.60 |                         1161 |
    |           0.25 |           0.70 |                         1046 |
    |           0.25 |           0.80 |                          876 |
    |           0.25 |           0.90 |                          655 |
    |           0.30 |           0.60 |                         1297 |
    |           0.30 |           0.70 |                         1149 |
    |           0.30 |           0.80 |                          932 |
    |           0.30 |           0.90 |                          700 |
    +----------------+----------------+------------------------------+


	NAME     collectionorthologues.pl
	
	PURPOSE
	
		TAKE THE ENTRIES IN THE correctannotation AND EXTRACT THE COLLECTION
        
        SEQUENCE - BLAST BEST HIT PAIRS AND PLACE IN THE collection TABLE
        
        OF A NEW ORTHOLOGUE DATABASE        
		 	
	INPUT
	
        1. MISMATCH CUTOFF AND COVERAGE CUTOFF
		 
		2. evalueannotation TABLE
		
		3. blastcoverage TABLE
	
	OUTPUT
		
        1. <target_database>.collection.tsv FILE

        2. LOAD INTO collection TABLE IN TARGET DATABASE

		
	USAGE
	
		./collectionorthologues.pl <-d database> <-c coverage_cutoff> <-m mismatch_cutoff> <-t target_database> [-h]

	-d database         :	name of the sequence database
    -c coverage_cutoff  :   target coverage cutoff value (0-1)
    -m mismatch_cutoff  :   target mismatch cutoff value (0-1)
    -t target_database  :   name of target orthologue database
	-h help             :	print this help message

	EXAMPLES

./collectionorthologues.pl -d funnybase11  -t funnybase11ortho -c 0.90 -m 0.05 


AND RAN IT (THURS 15 Nov):

./collectionorthologues.pl -d funnybase11 -m 0.05 -c 0.90 -t funnybase11ortho





++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Nov 14 22:20:00 EST 2007
RAN blastcoverage ON pfalagam IN PREPARATION FOR correctannotation

./blastcoverage.pl -d pfalagam
    
    Doing annotations for collection sequences (total 3496)

    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.blastcoverage.tsv
    
    Run time: 01:30:07 (ish)
    Completed ./blastcoverage.pl
    9:19PM, 15 November 2007
    ****************************************


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Nov 14 22:05:38 EST 2007
RERAN iprscanattribute.pl ON pfalagam

    ./iprscanattribute.pl -d pfalagam -g iprscan
    Completed ./iprscanattribute.pl
    Run time: 01:26:34
    1:54PM, 13 November 2007
    ****************************************

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Nov 14 21:15:54 EST 2007
RAN learning AND learningbayes WORKFLOW ON kog1

    select count(distinct collectionid) from collection;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          172 |
    +------------------------------+

GET IPRSCANS

sudo ./arrayiprscandaemon.pl -d humanmouse -n 10


cat /Users/young/FUNNYBASE/pipeline/humanmouse/iprscan/*lock



ESTIMATED COMPLETION 28 hours FROM Wed Nov 14 22:05:38 EST 2007
I.E. LATE THURSDAY NIGHT



     /Users/young/FUNNYBASE/pipeline/kog1/iprscan/arrayiprscandaemon.log


     Run time: 07:31:55
     Completed ./arrayiprscandaemon.pl
     7:22AM, 7 November 2007
     ****************************************




ALTERNATELY, EXTRACT IPRSCANS FROM *IPC FILES (SEE ABOVE):



./ipciprscans.pl -d humanmouse -p human,mouse -f /Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/25.H_sapiens.IPC,/Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/59.M_musculus.IPC

Q5SWW8  PD000395        IPR000001       36      118
A6PVI2  PD000395        IPR000001       123     166
Q13208  PF00051 IPR000001       166     243
Q01974  PR00018 IPR000001       358     378
Q5VTT3  PS00021 IPR000001       224     237
Q5STQ1  PR00545 IPR000003       482     501

FOR WHICH, REQUIRE THE interproid TO interproname, targetaccession MAPPINGS, FROM INTERPRO FTP:

/Users/young/FUNNYBASE/pipeline/indexer/data/interpro.ParentChildTreeFile.txt

IPR000010::Proteinase inhibitor I25, cystatin::PF00031::PS00287::SM00043
--IPR001363::Proteinase inhibitor I25C, fetuin::PS01254::PS01255
--IPR003243::Proteinase inhibitor I25A and I25B, type 2 and phytocystatins::PD001231

(NB: /Users/young/FUNNYBASE/pipeline/indexer/data/interpro.entry.list IS REDUNDANT W.R.T. interpro.ParentChildTreeFile.txt::

IPR000138 Hydroxymethylglutaryl-CoA lyase, active site
IPR000169 Peptidase, cysteine peptidase active site
IPR000180 Peptidase M19, renal dipeptidase, active site
IPR000189 Prokaryotic transglycosylase, active site


WHEREAS THIS FILE CONTAINS A MAPPING BETWEEN interproids AND GENE symbols:

interpro.short_names.dat

IPR000001       Kringle
IPR000002       Fizzy
IPR000003       RtnoidX_rcpt
IPR000005       HTHAraC
IPR000006       Metallothionein_vert
IPR000007       Tubby_C
IPR000008       C2_Ca-dep
IPR000009       PP2A_PR55
IPR000010       Prot_inh_cystat
IPR000011       UBQ-activ_enz_E1
IPR000012       RetroV_VpR/X






LOAD IPRSCANS

./collectioniprscan.pl -d humanmouse -s protein

    select count(distinct collectionid) from collectioniprscan;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          169 |
    +------------------------------+


GET IPRSCAN SET 

(NB: ADDED LIMIT ON collection ACCESSIONS BECAUSE TOO MANY, WHICH MEANT THERE
WERE NO NEGATIVE AND POSITIVE EXAMPLES COMING FROM THE EXTERNAL, Swissprot
SEQUENCES)




sudo ./arrayiprscansetdaemon.pl -d humanmouse -t 24 

    select count(distinct collectionid) from iprscanset;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          158 |
    +------------------------------+


GET IPRSCAN SET SEQUENCES

./iprscansetsequence.pl -d humanmouse    

    select count(distinct collectionid) from iprscansetsequence;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          158 |
    +------------------------------+


GET IPRSCAN SET MULTIPLE ALIGNMENT

sudo ./arrayiprscansetalignmentdaemon.pl -d humanmouse -n 24
            
    Run time: 00:03:43
    Completed ./arrayiprscansetalignmentdaemon.pl
    5:10PM, 8 November 2007
    ****************************************


LOAD MULTIPLE ALIGNMENTS

./arrayiprscansetalignmentloaddata.pl -d humanmouse -t 24
    
    Run time: 00:00:04
    Completed ./arrayiprscansetalignmentloaddata.pl
    5:13PM, 8 November 2007
    ****************************************


DO SUPERDOMAINS

./iprscansuperdomain.pl -d humanmouse
    

GET ATTRIBUTES FOR EACH IPRSCAN SET MEMBER IN MULTIPLE ALIGNMENT (I.E., IN IPRSCAN SET SEQUENCES)

./iprscanattribute.pl -d humanmouse -g iprscan

(NB: members FOR COLLECTION ID 92 TOO MANY - OVERFLOWS MAX STRING LENGTH IN JSON)

    select count(distinct collectionid) from iprscanattribute;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          157 |
    +------------------------------+


./iprscanattributebayes.pl -d humanmouse

    Dropping 'iprscanattributebayes' if exists... done.
    Creating table 'iprscanattributebayes'... done.
    Loading data into table 'iprscanattributebayes'... done.
    Completed ./iprscanattributebayes.pl
    Run time: 00:00:26
    9:57AM, 8 November 2007
    ****************************************
    

GET N-FOLD TRAINING AND TEST SETS (DTREE AND NBAYES)

./nfold.pl -d humanmouse
    
    Completed ./nfold.pl
    Run time: 00:00:06
    9:52AM, 8 November 2007
    ****************************************    


./nfoldbayes.pl -d humanmouse

/Users/young/FUNNYBASE/pipeline/humanmouse/collection/humanmouse.nfoldbayes.tsv
    
    Dropping 'nfoldbayes' if exists... done.
    Creating table 'nfoldbayes'... done.
    Loading data into table 'nfoldbayes'... done.
    Completed ./nfoldbayes.pl
    Run time: 00:00:06
    9:57AM, 8 November 2007
    ****************************************
    
DO DECISION TREES

./learningtrees.pl -d humanmouse





++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Nov 14 20:37:11 EST 2007
CREATED clustrorthologues.pl TO LOAD CluSTr ORTHOLOGUE PAIRS TO collection TABLE


    APPLICATION     clustrorthologues
    
    PURPOSE
    
        Load data for two species from a CluSTr (clustering based on
        
        pairwise comparisons between protein sequences) PORC (Possible
        
        Orthologue Clusters) *.orthologues file.
        
        One the species is the species by which the file is named, the other
        
        species is given by its Integr8_ProteomeID number. (The list of numbers
        
        is in the gas.txt file.)
        
    INPUT
    
        1. integr8 PORC FILE DERIVED FROM CluSTr
        
        2. swissprot TABLE CONTAINING SEQUENCES
        
    OUTPUT

        1.  <database>.collection.tsv FILE IN collection DIRECTORY

        2. LOAD INTO collection TABLE
    
    NOTES
    
        *.orthologues FILE FORMAT:

        #Putative orthologues for M.musculus
        #NCBI_TaxID=10090
        #Integr8_ProteomeID=59
        #Column definition (one row per protein per species containing orthologues):
        #Integr8_GeneID Gene_name       Protein_ID      Protein_name    Integr8_ProteomeID      Proteome_name   Species_name    Orthologous_gene_IDs  Orthologoues_protein_IDs        Significance
        #Protein IDs are either UniProtKB ACs or IPI identifiers
        #See http://www.ebi.ac.uk/integr8/ for more information
        IGI00001030     BC030183        P17257  UPF0484 protein C1orf90 homolog 25      H.sapiens       IGI00004839;    Q9BTA0; 76.2    Eukaryota; Metazoa; Chordata; Craniata; Vertebrata; Euteleostomi; Mammalia; Eutheria; Euarchontoglires
        IGI00001030     BC030183        P17257  UPF0484 protein C1orf90 homolog 21457   G.gallus        IGI02658224;    IPI00579107;    42.1 Eukaryota; Metazoa; Chordata; Craniata; Vertebrata; Euteleostomi
        IGI00001030     BC030183        P17257  UPF0484 protein C1orf90 homolog 22974   B.taurus        IGI02670314;    IPI00686851;    81   Eukaryota; Metazoa; Chordata; Craniata; Vertebrata; Euteleostomi; Mammalia; Eutheria

   USAGE

       ./clustrorthologues.pl <-d database> <-f filepath> <-n number> <-p species_pair> [-h]
    
    -d database          :    name of the collection database
    -f filepath          :    /full/path/to/orthologues_file for first species
    -n number            :    integr8 proteome ID number for second species
    -p species_pair      :    comma-separated species pair (e.g., human,mouse)
    -h help              :    print this message

    EXAMPLES
    
./clustrorthologues.pl -d humanmouse -f /Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/25.H_sapiens.orthologues -n 59


AND RAN IT:


./clustrorthologues.pl -d humanmouse -f /Users/young/FUNNYBASE/dev/annotation/Clustr/integr8/25.H_sapiens.orthologues -n 59 -p mouse,human

    11620
    11630
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/humanmouse/collection/humanmouse.collection.tsv
    
    Dropping 'collection' if exists... done.
    Creating table 'collection'... done.
    Loading data into table 'collection'... done.
    Completed ./clustrorthologues.pl
    Run time: 00:00:22
    9:03PM, 14 November 2007
    ****************************************




++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Nov 14 18:59:19 EST 2007
DOWNLOADED CluSTr (PORC) DATA FROM integr8

integr8 DOWNLOAD SITE

ftp://ftp.ebi.ac.uk/pub/databases/integr8/


PORC (Potential Orthologue Clusters) DOWNLOAD SITE:

ftp://ftp.ebi.ac.uk/pub/databases/integr8/porc/


DOWNLOADED TO:

/Users/young/FUNNYBASE/dev/annotation/Clustr/integr8



wget ftp://ftp.ebi.ac.uk/pub/databases/integr8/orthologues/59.M_musculus.orthologues.gz
wget ftp://ftp.ebi.ac.uk/pub/databases/integr8/orthologues/25.H_sapiens.orthologues.gz
wget ftp://ftp.ebi.ac.uk/pub/databases/integr8/orthologues/122.R_norvegicus.orthologues.gz



FILE FORMAT
===========

==> 59.M_musculus.orthologues <==
#Putative orthologues for M.musculus
#NCBI_TaxID=10090
#Integr8_ProteomeID=59
#Column definition (one row per protein per species containing orthologues):
#Integr8_GeneID Gene_name       Protein_ID      Protein_name    Integr8_ProteomeID      Proteome_name   Species_name    Orthologous_gene_IDs  Orthologoues_protein_IDs        Significance
#Protein IDs are either UniProtKB ACs or IPI identifiers
#See http://www.ebi.ac.uk/integr8/ for more information
IGI00001030     BC030183        P17257  UPF0484 protein C1orf90 homolog 25      H.sapiens       IGI00004839;    Q9BTA0; 76.2    Eukaryota; Metazoa; Chordata; Craniata; Vertebrata; Euteleostomi; Mammalia; Eutheria; Euarchontoglires
IGI00001030     BC030183        P17257  UPF0484 protein C1orf90 homolog 21457   G.gallus        IGI02658224;    IPI00579107;    42.1 Eukaryota; Metazoa; Chordata; Craniata; Vertebrata; Euteleostomi
IGI00001030     BC030183        P17257  UPF0484 protein C1orf90 homolog 22974   B.taurus        IGI02670314;    IPI00686851;    81   Eukaryota; Metazoa; Chordata; Craniata; Vertebrata; Euteleostomi; Mammalia; Eutheria


SPECIES-SPECIES ORTHOLOGUE COUNTS
=================================

P falciparum ORTHOLOGUE COUNTERPART SPECIES
lines 493.P_falciparum.orthologues             
68636

HUMAN 
cut -f 5 493.P_falciparum.orthologues | grep -c 25
13859

MOUSE
cut -f 5 493.P_falciparum.orthologues | grep -c 59
3347

RAT
cut -f 5 493.P_falciparum.orthologues | grep -c 122
1082


HUMAN ORTHOLOGUE COUNTERPART SPECIES  **** <- CHOOSE THIS DATABASE AS FIRST SOURCE, WITH MOUSE AND RAT
lines 25.H_sapiens.orthologues             
227608

MOUSE
cut -f 5 25.H_sapiens.orthologues | grep -c 59
21843

RAT
cut -f 5 25.H_sapiens.orthologues | grep -c 122
16055


MOUSE ORTHOLOGUE COUNTERPART SPECIES
lines 59.M_musculus.orthologues             
206673

HUMAN
cut -f 5 59.M_musculus.orthologues | grep -c 25
47715

RAT
cut -f 5 59.M_musculus.orthologues | grep -c 122
18336



RAT ORTHOLOGUE COUNTERPART SPECIES
lines 122.R_norvegicus.orthologues             
200033

HUMAN
cut -f 5 122.R_norvegicus.orthologues | grep -c 25
46361

MOUSE
cut -f 5 122.R_norvegicus.orthologues | grep -c 59
23613

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Nov  8 16:51:55 EST 2007
REDID kog1 AFTER ADJUSTMENTS IN iprscansetsequence TO LIMIT NUMBER OF ORTHOLOGUE SEED SEQUENCES

GET IPRSCAN SET
    
sudo ./arrayiprscansetdaemon.pl -d kog1 -t 26


    Run time: 00:03:53
    Completed ./arrayiprscansetdaemon.pl
    4:40PM, 8 November 2007
    ****************************************

GET IPRSCAN SET SEQUENCES

./iprscansetsequence.pl -d kog1
    
    /Users/young/FUNNYBASE/pipeline/kog1/collection/kog1.iprscansetsequence.tsv
    Dropping table 'iprscansetsequence... done.
    Creating table 'iprscansetsequence'... done.
    Loading data into table 'iprscansetsequence'...done.
    
    Run time: 00:00:05
    Completed ./iprscansetsequence.pl
    4:50PM, 8 November 2007
    ****************************************


GET IPRSCAN SET MULTIPLE ALIGNMENTS

sudo ./arrayiprscansetalignmentdaemon.pl -d kog1 -n 24
    

LOAD MULTIPLE ALIGNMENTS

./arrayiprscansetalignmentloaddata.pl -d kog1 -t 24
    

DO SUPERDOMAINS

./iprscansuperdomain.pl -d kog1


GET ATTRIBUTES FOR EACH IPRSCAN SET MEMBER IN MULTIPLE ALIGNMENT (I.E., IN IPRSCAN SET SEQUENCES)

./iprscanattribute.pl -d kog1  -g iprscan

    Completed ./iprscanattribute.pl
    Run time: 00:25:43
    9:42PM, 8 November 2007
    ****************************************

    (NB: USE OF seed_limit FIXED OVERFLOWS MAX STRING LENGTH IN JSON members FOR COLLECTION ID 92)

    select count(distinct collectionid) from iprscanattribute;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          157 |
    +------------------------------+

./iprscanattributebayes.pl -d kog1
    
    Doing attributes for orthologue groups (total 172)
    0
    No ipscanset entries for collection ID: 8. Skipping...
    No ipscanset entries for collection ID: 22. Skipping...
    No ipscanset entries for collection ID: 37. Skipping...
    No ipscanset entries for collection ID: 81. Skipping...
    No ipscanset entries for collection ID: 98. Skipping...
    100
    No ipscanset entries for collection ID: 113. Skipping...
    No ipscanset entries for collection ID: 123. Skipping...
    No ipscanset entries for collection ID: 148. Skipping...
    No ipscanset entries for collection ID: 150. Skipping...
    No ipscanset entries for collection ID: 158. Skipping...
    No ipscanset entries for collection ID: 159. Skipping...
    No ipscanset entries for collection ID: 161. Skipping...
    No ipscanset entries for collection ID: 163. Skipping...
    No ipscanset entries for collection ID: 166. Skipping...
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/kog1/collection/kog1.iprscanattributebayes.tsv
    
    Dropping 'iprscanattributebayes' if exists... done.
    Creating table 'iprscanattributebayes'... done.
    Loading data into table 'iprscanattributebayes'... done.
    Completed ./iprscanattributebayes.pl
    Run time: 00:00:18
    10:47AM, 9 November 2007
    ****************************************

    select count(distinct collectionid)  from iprscanattributebayes;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          158 |
    +------------------------------+


    GET THE COLLECTION IDS IN iprscanattributebayes BUT NOT IN iprscanattribute:
     
   
SELECT DISTINCT iprscanattributebayes.collectionid
FROM iprscanattributebayes
LEFT JOIN iprscanattribute
ON iprscanattributebayes.collectionid = iprscanattribute.collectionid
WHERE iprscanattribute.collectionid IS NULL;

SELECT COUNT(collectionsequences.collectionid)
FROM collectionsequences
LEFT JOIN collectionsequencesannotation
ON collectionsequences.collectionid=collectionsequencesannotation.collectionid
WHERE collectionsequencesannotation.collectionid IS NULL},


GET N-FOLD TRAINING AND TEST SETS (DTREE AND NBAYES)

./nfold.pl -d kog1
        
    Completed ./nfold.pl
    Run time: 00:00:07
    0:36AM, 9 November 2007
    ****************************************

./nfoldbayes.pl -d kog1
        
    Completed ./nfoldbayes.pl
    Run time: 00:00:03
    10:48AM, 9 November 2007
    ****************************************
    
    select count(distinct collectionid) from nfoldbayes;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          129 |
    +------------------------------+
    
DO BAYES

./learningbayes.pl -d kog1
    
    Completed ./learningbayes.pl
    Run time: 00:00:38
    0:50AM, 9 November 2007
    ****************************************

    select avg(correct) from learningbayes;
    +--------------+
    | avg(correct) |
    +--------------+
    |       0.7388 |
    +--------------+


./learningtrees.pl -d kog1


select avg(correct) from learningtrees;




++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Nov  6 23:43:10 EST 2007
RAN learning AND learningbayes WORKFLOW ON kog1

    select count(distinct collectionid) from collection;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          172 |
    +------------------------------+

GET IPRSCANS

sudo ./arrayiprscandaemon.pl -d kog1 -n 10

     /Users/young/FUNNYBASE/pipeline/kog1/iprscan/arrayiprscandaemon.log


     Run time: 07:31:55
     Completed ./arrayiprscandaemon.pl
     7:22AM, 7 November 2007
     ****************************************

LOAD IPRSCANS

./collectioniprscan.pl -d kog1 -s protein

    select count(distinct collectionid) from collectioniprscan;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          169 |
    +------------------------------+


GET IPRSCAN SET 

(NB: ADDED LIMIT ON collection ACCESSIONS BECAUSE TOO MANY, WHICH MEANT THERE
WERE NO NEGATIVE AND POSITIVE EXAMPLES COMING FROM THE EXTERNAL, Swissprot
SEQUENCES)

sudo ./arrayiprscansetdaemon.pl -d kog1 -t 26 

    select count(distinct collectionid) from iprscanset;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          158 |
    +------------------------------+


GET IPRSCAN SET SEQUENCES

./iprscansetsequence.pl -d kog1    

    select count(distinct collectionid) from iprscansetsequence;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          158 |
    +------------------------------+


GET IPRSCAN SET MULTIPLE ALIGNMENT

sudo ./arrayiprscansetalignmentdaemon.pl -d kog1 -n 24
            
    Run time: 00:03:43
    Completed ./arrayiprscansetalignmentdaemon.pl
    5:10PM, 8 November 2007
    ****************************************


LOAD MULTIPLE ALIGNMENTS

./arrayiprscansetalignmentloaddata.pl -d kog1 -t 24
    
    Run time: 00:00:04
    Completed ./arrayiprscansetalignmentloaddata.pl
    5:13PM, 8 November 2007
    ****************************************


DO SUPERDOMAINS

./iprscansuperdomain.pl -d kog1
    

GET ATTRIBUTES FOR EACH IPRSCAN SET MEMBER IN MULTIPLE ALIGNMENT (I.E., IN IPRSCAN SET SEQUENCES)

./iprscanattribute.pl -d kog1 -g iprscan

(NB: members FOR COLLECTION ID 92 TOO MANY - OVERFLOWS MAX STRING LENGTH IN JSON)

    select count(distinct collectionid) from iprscanattribute;
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                          157 |
    +------------------------------+


./iprscanattributebayes.pl -d kog1

    Dropping 'iprscanattributebayes' if exists... done.
    Creating table 'iprscanattributebayes'... done.
    Loading data into table 'iprscanattributebayes'... done.
    Completed ./iprscanattributebayes.pl
    Run time: 00:00:26
    9:57AM, 8 November 2007
    ****************************************
    

GET N-FOLD TRAINING AND TEST SETS (DTREE AND NBAYES)

./nfold.pl -d kog1
    
    Completed ./nfold.pl
    Run time: 00:00:06
    9:52AM, 8 November 2007
    ****************************************    


./nfoldbayes.pl -d kog1

/Users/young/FUNNYBASE/pipeline/kog1/collection/kog1.nfoldbayes.tsv
    
    Dropping 'nfoldbayes' if exists... done.
    Creating table 'nfoldbayes'... done.
    Loading data into table 'nfoldbayes'... done.
    Completed ./nfoldbayes.pl
    Run time: 00:00:06
    9:57AM, 8 November 2007
    ****************************************
    
DO DECISION TREES

./learningtrees.pl -d kog1




SELECT DISTINCT iprscanset.accession  
FROM iprscanset
LEFT JOIN iprscansetsequence
ON iprscansetsequence.accession=iprscanset.accession
WHERE iprscanset.collectionid = 2
AND iprscansetsequence.collectionid = 2
AND  iprscansetsequence.accession IS NULL;







SELECT DISTINCT iprscansetsequence.collectionid, iprscansetsequence.accession  
FROM iprscansetsequence
LEFT JOIN iprscanattribute
ON iprscanattribute.accession=iprscansetsequence.accession
WHERE iprscanattribute.accession IS NULL
AND iprscanattribute.collectionid = iprscansetsequence.collectionid;





#WHERE iprscansetsequence.collectionid = 2
#AND iprscanattribute.collectionid = 2
#AND  iprscanattribute.accession IS NULL;


select distinct accession from iprscanattribute where collectionid = 2;


SELECT COUNT(collectionsequences.collectionid)
						FROM collectionsequences
						LEFT JOIN collectionsequencesannotation
						ON collectionsequences.collectionid=collectionsequencesannotation.collectionid
						WHERE collectionsequencesannotation.collectionid IS NULL},


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Nov  3 20:23:32 EDT 2007
RERAN WHOLE learningbayes WORKFLOW ON kog1

sudo ./arrayiprscansetdaemon.pl -d kog1 -t 26

    Job 1310698.8 exited with exit code 0.
    Job 1310698.26 exited with exit code 0.
    Job 1310698.5 exited with exit code 0.
    Job 1310698.3 exited with exit code 0.
    Job 1310698.21 exited with exit code 0.
    Job 1310698.1 exited with exit code 0.
    Job 1310698.24 exited with exit code 0.
    
    Job exit codes: 0 = Success, 99 = Requeue, Rest = Success: exit code in accounting file
    
    Dropping table 'iprscanset... done.
    Creating table 'iprscanset' if not exists... done.
    Loading data into table 'iprscanset'... done.
    
    Run time: 00:19:59
    Completed ./arrayiprscansetdaemon.pl
    1:02AM, 3 November 2007
    ****************************************
    
    
./iprscanattributebayes.pl -d kog1

    Doing attributes for orthologue groups (total 1375)
    0
    100
    200
    300
    400
    500
    600
    700
    800
    900
    1000
    No iprscans for collection id: 1090
    1100
    No iprscans for collection id: 1160
    1200
    1300
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/kog1/collection/kog1.iprscanattributebayes.tsv
    
    Dropping 'iprscanattributebayes' if exists... done.
    Creating table 'iprscanattributebayes'... done.
    Loading data into table 'iprscanattributebayes'... done.
    Completed ./iprscanattributebayes.pl
    Run time: 00:03:45
    12:46AM, 3 November 2007
    ****************************************


./nfoldbayes.pl -d kog1


    Doing attributes for orthologue groups (total 1375)
    0
    100
    200
    300
    400
    500
    600
    700
    800
    900
    1000
    No instances in 'iprscanattributebayes' for collection id: 1090
    1100
    No instances in 'iprscanattributebayes' for collection id: 1160
    1200
    1300
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/kog1/collection/kog1.nfoldbayes.tsv
    
    Dropping 'nfoldbayes' if exists... done.
    Creating table 'nfoldbayes'... done.
    Loading data into table 'nfoldbayes'... done.
    Completed ./nfoldbayes.pl
    Run time: 00:00:46
    8:25PM, 3 November 2007
    ****************************************


    
./learningbayes.pl -d kog1


desc learningbayes;
+--------------+-------------+------+-----+---------+-------+
| Field        | Type        | Null | Key | Default | Extra |
+--------------+-------------+------+-----+---------+-------+
| collectionid | int(6)      |      | PRI | 0       |       |
| nfold        | int(4)      |      | PRI | 0       |       |
| number       | int(6)      |      | PRI | 0       |       |
| accession    | varchar(20) |      | PRI |         |       |
| label        | int(1)      | YES  |     | NULL    |       |
| correct      | int(1)      | YES  |     | NULL    |       |
+--------------+-------------+------+-----+---------+-------+

select avg(correct) from learningbayes;
+--------------+
| avg(correct) |
+--------------+
|       0.7801 |
+--------------+

select count(*) from learningbayes;
+----------+
| count(*) |
+----------+
|    42870 |
+----------+






++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Nov  6 23:34:48 EST 2007
CREATED kogsequence.pl AND kogorthologues.pl TO LOAD KOGs INTO collection TABLE OF kog1 DATABASE


./kogsequence.pl -d kog1

    ...
    112900
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/kog1/collection/kog1.kogsequence.tsv
    
    Dropping 'kogsequence' if exists... done.
    Creating table 'kogsequence'... done.
    Loading data into table 'kogsequence'... done.
    Completed ./kogsequence.pl
    Run time: 00:00:06
    11:42PM, 6 November 2007
    ****************************************
    

./kogorthologues.pl -d kog1

    ...
    170
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/kog1/collection/kog1.collection.tsv
    
    Dropping 'collection' if exists... done.
    Creating table 'collection'... done.
    Loading data into table 'collection'... done.
    Completed ./kogorthologues.pl
    Run time: 00:00:01
    11:41PM, 6 November 2007
    ****************************************


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Nov  5 12:54:10 EST 2007
GET COLLECTION IDS OF SEQUENCES THAT DO NOT HAVE iprscanset ENTRIES

SELECT DISTINCT collection.collectionid
FROM collection
LEFT JOIN iprscanset
ON collection.collectionid=iprscanset.collectionid
WHERE iprscanset.collectionid IS NULL;

+--------------+
| collectionid |
+--------------+
|           93 |
|          155 |
|          339 |
|          347 |
|          359 |
|          401 |
...
|         1309 |
|         1321 |
|         1324 |
|         1329 |
|         1334 |
|         1335 |
|         1339 |
|         1340 |
|         1341 |
|         1346 |
|         1350 |
|         1352 |
|         1363 |
|         1367 |
|         1370 |
|         1374 |
|         1375 |
+--------------+
211 rows in set (0.11 sec)


SELECT DISTINCT collection.collectionid
FROM collection
LEFT JOIN iprscanattribute
ON collection.collectionid=iprscanattribute.collectionid
WHERE iprscanattribute.collectionid IS NULL;

+--------------+
| collectionid |
+--------------+
|           47 |
|           48 |
|           49 |
|           50 |
|           51 |
|           52 |
|           53 |
|           54 |
|           55 |
|           56 |
...
|         1355 |
|         1356 |
|         1357 |
|         1358 |
|         1359 |
|         1360 |
|         1361 |
|         1362 |
|         1363 |
|         1364 |
|         1365 |
|         1366 |
|         1367 |
|         1368 |
|         1369 |
|         1370 |
|         1371 |
|         1372 |
|         1373 |
|         1374 |
|         1375 |
+--------------+
1313 rows in set (0.19 sec)



SELECT DISTINCT collection.collectionid
FROM collection
LEFT JOIN iprscansetalignment
ON collection.collectionid=iprscansetalignment.collectionid
WHERE iprscansetalignment.collectionid IS NULL;

+--------------+
| collectionid |
+--------------+
|           47 |
|           48 |
|           49 |
|           50 |
|           51 |
|           52 |
|           53 |
|           54 |
|           55 |
|           56 |
|           57 |
|           58 |
|           59 |
|           60 |
|           61 |
|           62 |
...
|         1335 |
|         1336 |
|         1339 |
|         1340 |
|         1341 |
|         1346 |
|         1350 |
|         1352 |
|         1363 |
|         1366 |
|         1367 |
|         1370 |
|         1374 |
|         1375 |
+--------------+
797 rows in set (0.02 sec)


THE MISSING COLLECTION IDS IN iprscansetalignment ARE DUE TO MISSING ENTRIES IN
iprscansetsequence THAT CAUSE THESE COLLECTION IDS TO BE SKIPPED IN arrayiprscansetalignment:


    Collection id: 47
    SELECT collectionid, collectionaccession, sequence
        FROM collection
        WHERE collectionid='47'
        ORDER BY collectionaccession
    No output file found. Doing output file: /common/pipeline/pfalagam/clustalw/pfalagam.iprscansetalignment.47.in.aln
    No accessions defined for collection id: 47
    ++++ Cluster::Worker::Termite::nextjob(self)
    Lockfile: /common/pipeline/pfalagam/collection/iprscansetalignment.lock
    Setting up lock...
    Number in file: 48
    Incremented number to: 49
    Collection id: 48
    SELECT collectionid, collectionaccession, sequence
        FROM collection
        WHERE collectionid='48'
        ORDER BY collectionaccession
    No output file found. Doing output file: /common/pipeline/pfalagam/clustalw/pfalagam.iprscansetalignment.48.in.aln
    No accessions defined for collection id: 48
    ++++ Cluster::Worker::Termite::nextjob(self)
    Lockfile: /common/pipeline/pfalagam/collection/iprscansetalignment.lock
    Setting up lock...
    Number in file: 49


SELECT DISTINCT accession, sequence FROM iprscansetsequence WHERE collectionid = '48';
Empty set (0.00 sec)

mysql> SELECT DISTINCT accession, sequence FROM iprscansetsequence WHERE collectionid = '49';
Empty set (0.00 sec)

mysql> SELECT DISTINCT accession, sequence FROM iprscansetsequence WHERE collectionid = '50';
Empty set (0.00 sec)

etc...


SOLUTION: RERAN iprscansetsequence WITH ALL COLLECTION IDS.



SELECT DISTINCT collection.collectionid
FROM collection
LEFT JOIN iprscansetsequence
ON collection.collectionid=iprscansetsequence.collectionid
WHERE iprscansetsequence.collectionid IS NULL;


THEN RERAN arrayiprscansetalignment:


STDOUT file defined. Redirecting STDOUT to: /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.arrayiprscansetalignment.stdout23
done.

Run time: 00:27:13
Completed ./arrayiprscansetalignmentdaemon.pl
3:21PM, 5 November 2007
****************************************




++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

RERAN learning WORKFLOW FROM iprscanattributes, THIS TIME WITH COLLECTION IDS 1-100

./iprscanattribute.pl -d pfalagam -g iprscan

    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.iprscanattribute.tsv
    
    Dropping 'iprscanattribute' if exists... done.
    Creating table 'iprscanattribute'... done.
    Loading data into table 'iprscanattribute'... done.
    Completed ./iprscanattribute.pl
    Run time: 00:13:56
    10:53AM, 5 November 2007
    ****************************************


./nfold.pl -d pfalagam

    Doing attributes for orthologue groups (total 1375)
    0
    No instances in 'iprscanattribute' for collection id: 47
    No instances in 'iprscanattribute' for collection id: 48
    No instances in 'iprscanattribute' for collection id: 49
    No instances in 'iprscanattribute' for collection id: 50
    No instances in 'iprscanattribute' for collection id: 51
    No instances in 'iprscanattribute' for collection id: 52
    No instances in 'iprscanattribute' for collection id: 53
    No instances in 'iprscanattribute' for collection id: 54
    No instances in 'iprscanattribute' for collection id: 55
    No instances in 'iprscanattribute' for collection id: 56
    No instances in 'iprscanattribute' for collection id: 57
    No instances in 'iprscanattribute' for collection id: 58
    No instances in 'iprscanattribute' for collection id: 59
    No instances in 'iprscanattribute' for collection id: 60
    No instances in 'iprscanattribute' for collection id: 61
    No instances in 'iprscanattribute' for collection id: 62
    No instances in 'iprscanattribute' for collection id: 63
    No instances in 'iprscanattribute' for collection id: 64
    No instances in 'iprscanattribute' for collection id: 65
    No instances in 'iprscanattribute' for collection id: 66
    No instances in 'iprscanattribute' for collection id: 67
    No instances in 'iprscanattribute' for collection id: 68
    No instances in 'iprscanattribute' for collection id: 69
    No instances in 'iprscanattribute' for collection id: 70
    No instances in 'iprscanattribute' for collection id: 71
    No instances in 'iprscanattribute' for collection id: 72
    No instances in 'iprscanattribute' for collection id: 73
    No instances in 'iprscanattribute' for collection id: 74
    No instances in 'iprscanattribute' for collection id: 75
    No instances in 'iprscanattribute' for collection id: 76
    No instances in 'iprscanattribute' for collection id: 93
    No instances in 'iprscanattribute' for collection id: 94
    No instances in 'iprscanattribute' for collection id: 95
    No instances in 'iprscanattribute' for collection id: 96
    No instances in 'iprscanattribute' for collection id: 97
    No instances in 'iprscanattribute' for collection id: 98
    No instances in 'iprscanattribute' for collection id: 99
    No instances in 'iprscanattribute' for collection id: 100
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.nfold.tsv
    
    Dropping 'nfold' if exists... done.
    Creating table 'nfold'... done.
    Loading data into table 'nfold'... done.
    Completed ./nfold.pl
    Run time: 00:00:03
    10:57AM, 5 November 2007
    ****************************************


./learningtrees.pl -d pfalagam

    ...
    Training accessions not defined for collection id: 100
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.learningtrees.tsv
    
    Dropping 'learningtrees' if exists... done.
    Creating table 'learningtrees'... done.
    Loading data into table 'learningtrees'... done.
    Completed ./learningtrees.pl
    Run time: 00:00:45
    11:00AM, 5 November 2007
    ****************************************


 select avg(correct) from learningtrees;
+--------------+
| avg(correct) |
+--------------+
|       0.8686 |
+--------------+


SOLUTION: FINE TUNING WITH DOMAIN SIZE TO GET GREATER RESOLUTION.


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Nov  4 18:26:06 EST 2007
NB: gene3d


230854:      <match id="G3DSA:1.10.268.10" name="Topo_IIA_A_a" dbname="GENE3D">
357044:      <match id="G3DSA:1.10.268.10" name="Topo_IIA_A_a" dbname="GENE3D">
367625:      <match id="G3DSA:1.10.268.10" name="Topo_IIA_A_a" dbname="GENE3D">
433858:      <match id="G3DSA:1.10.268.10" name="Topo_IIA_A_a" dbname="GENE3D">


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Nov  4 01:21:52 EST 2007
RERAN WHOLE learningbayes WORKFLOW ON pfalagam

GET IPRSCAN SET 
sudo ./arrayiprscansetdaemon.pl -d pfalagam -t 26 


GET IPRSCAN SET SEQUENCES
./iprscansetsequence.pl -d pfalagam    

OK


GET IPRSCAN SET MULTIPLE ALIGNMENT
sudo ./arrayiprscansetalignmentdaemon.pl -d pfalagam -n 24
        
    Executing instance 23...++++ App::execute(self)
    Setting parent process id: 19738
    STDOUT file defined. Redirecting STDOUT to: /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.arrayiprscansetalignment.stdout23
    done.
    
    Run time: 00:14:04
    Completed ./arrayiprscansetalignmentdaemon.pl
    6:44PM, 4 November 2007
    ****************************************

./arrayiprscansetalignmentloaddata.pl -d pfalagam -t 26

OK

GET ATTRIBUTES FOR EACH IPRSCAN SET MEMBER IN MULTIPLE ALIGNMENT (I.E., IN IPRSCAN SET SEQUENCES)
./iprscanattributes.pl -d pfalagam

OK

GET N-FOLD TRAINING AND TEST SETS
./nfold.pl -d pfalagam

    Doing attributes for orthologue groups (total 1375)
    0
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.nfold.tsv
    
    Dropping 'nfold' if exists... done.
    Creating table 'nfold'... done.
    Loading data into table 'nfold'... done.
    Completed ./nfold.pl
    Run time: 00:00:00
    0:12AM, 5 November 2007
    ****************************************
    
    
DO DECISION TREES
./learningtrees.pl -d pfalagam

OK 

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Nov  3 20:23:32 EDT 2007
RERAN WHOLE learningbayes WORKFLOW ON pfalagam

sudo ./arrayiprscansetdaemon.pl -d pfalagam -t 26

    Job 1310698.8 exited with exit code 0.
    Job 1310698.26 exited with exit code 0.
    Job 1310698.5 exited with exit code 0.
    Job 1310698.3 exited with exit code 0.
    Job 1310698.21 exited with exit code 0.
    Job 1310698.1 exited with exit code 0.
    Job 1310698.24 exited with exit code 0.
    
    Job exit codes: 0 = Success, 99 = Requeue, Rest = Success: exit code in accounting file
    
    Dropping table 'iprscanset... done.
    Creating table 'iprscanset' if not exists... done.
    Loading data into table 'iprscanset'... done.
    
    Run time: 00:19:59
    Completed ./arrayiprscansetdaemon.pl
    1:02AM, 3 November 2007
    ****************************************
    
    
./iprscanattributebayes.pl -d pfalagam

    Doing attributes for orthologue groups (total 1375)
    0
    100
    200
    300
    400
    500
    600
    700
    800
    900
    1000
    No iprscans for collection id: 1090
    1100
    No iprscans for collection id: 1160
    1200
    1300
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.iprscanattributebayes.tsv
    
    Dropping 'iprscanattributebayes' if exists... done.
    Creating table 'iprscanattributebayes'... done.
    Loading data into table 'iprscanattributebayes'... done.
    Completed ./iprscanattributebayes.pl
    Run time: 00:03:45
    12:46AM, 3 November 2007
    ****************************************


./nfoldbayes.pl -d pfalagam


    Doing attributes for orthologue groups (total 1375)
    0
    100
    200
    300
    400
    500
    600
    700
    800
    900
    1000
    No instances in 'iprscanattributebayes' for collection id: 1090
    1100
    No instances in 'iprscanattributebayes' for collection id: 1160
    1200
    1300
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.nfoldbayes.tsv
    
    Dropping 'nfoldbayes' if exists... done.
    Creating table 'nfoldbayes'... done.
    Loading data into table 'nfoldbayes'... done.
    Completed ./nfoldbayes.pl
    Run time: 00:00:46
    8:25PM, 3 November 2007
    ****************************************


    
./learningbayes.pl -d pfalagam


desc learningbayes;
+--------------+-------------+------+-----+---------+-------+
| Field        | Type        | Null | Key | Default | Extra |
+--------------+-------------+------+-----+---------+-------+
| collectionid | int(6)      |      | PRI | 0       |       |
| nfold        | int(4)      |      | PRI | 0       |       |
| number       | int(6)      |      | PRI | 0       |       |
| accession    | varchar(20) |      | PRI |         |       |
| label        | int(1)      | YES  |     | NULL    |       |
| correct      | int(1)      | YES  |     | NULL    |       |
+--------------+-------------+------+-----+---------+-------+

select avg(correct) from learningbayes;
+--------------+
| avg(correct) |
+--------------+
|       0.7801 |
+--------------+

select count(*) from learningbayes;
+----------+
| count(*) |
+----------+
|    42870 |
+----------+

NOTE: THERE STILL REMAIN SOME COLLECTION SEQUENCES THAT HAD NO ROWS IN iprscanset.
THIS WAS BECAUSE THEY HAD POOR SOURCE ANNOTATION WHICH DID NOT PASS THE FILTER IN
iprscanset:

 SELECT DISTINCT sourceannotation FROM collection WHERE collectionid='1375';
+-------------------------------+
| sourceannotation              |
+-------------------------------+
| hypothetical protein          |
| Novel gene ENSANGG00000021718 |
+-------------------------------+
2 rows in set (0.00 sec)

SELECT DISTINCT sourceannotation FROM collection WHERE collectionid='1374';
+-------------------------------+
| sourceannotation              |
+-------------------------------+
| hypothetical protein          |
| Novel gene ENSANGG00000002372 |
+-------------------------------+

 SELECT DISTINCT sourceannotation FROM collection WHERE collectionid='1367';
+----------------------------------+
| sourceannotation                 |
+----------------------------------+
| hypothetical protein, conserved  |
| Novel gene ENSANGG00000014963    |
+----------------------------------+

SELECT DISTINCT sourceannotation FROM collection WHERE collectionid='1363';
+-------------------------------+
| sourceannotation              |
+-------------------------------+
| hypothetical protein          |
| Novel gene ENSANGG00000010785 |
+-------------------------------+

SELECT DISTINCT sourceannotation FROM collection WHERE collectionid='1352';
+-------------------------------+
| sourceannotation              |
+-------------------------------+
| hypothetical protein          |
| Novel gene ENSANGG00000009422 |
+-------------------------------+

SELECT DISTINCT sourceannotation FROM collection WHERE collectionid='1350';
+-------------------------------+
| sourceannotation              |
+-------------------------------+
| hypothetical protein          |
| Novel gene ENSANGG00000009255 |
+-------------------------------+

SELECT DISTINCT sourceannotation FROM collection WHERE collectionid='1341';
+-------------------------------+
| sourceannotation              |
+-------------------------------+
| hypothetical protein          |
| Novel gene ENSANGG00000017446 |
+-------------------------------+


I.E., THE SEQUENCES NOT IN THIS LIST:


select distinct collectionid from nfoldbayes where type != 'test';

|         1337 |
|         1338 |
|         1342 |
|         1343 |
|         1344 |
|         1345 |
|         1346 |
|         1347 |
|         1348 |
|         1349 |
|         1351 |
|         1353 |
|         1354 |
|         1355 |
|         1356 |
|         1357 |
|         1358 |
|         1359 |
|         1360 |
|         1361 |
|         1362 |
|         1364 |
|         1365 |
|         1366 |
|         1368 |
|         1369 |
|         1370 |
|         1371 |
|         1372 |
|         1373 |
+--------------+
1183 rows in set (0.54 sec)


WHERE THE DIFFERENCE BETWEEN THESE NUMBERS:


select count(distinct collectionid) from nfoldbayes where type != 'training';
+------------------------------+
| count(distinct collectionid) |
+------------------------------+
|                         1373 |
+------------------------------+
1 row in set (0.36 sec)

AND THIS IS THE NUMBER OF SEQUENCES WITH 

mysql> select count(distinct collectionid) from nfoldbayes where type != 'test'; 
+------------------------------+
| count(distinct collectionid) |
+------------------------------+
|                         1183 |
+------------------------------+


IS THE NUMBER OF SEQUENCES WITH NO ENTRIES IN iprscanset AND HENCE WITH COLLECTION 
SEQUENCE-ONLY ENTRIES IN iprscanattributebayes:

select * from iprscanattributebayes where collectionid = 1341;
+--------------+-----------+--------+-------+-------+
| collectionid | accession | name   | value | label |
+--------------+-----------+--------+-------+-------+
|         1341 | 1         | DUF410 | 2     |     1 |
|         1341 | 2         | DUF410 | 2     |     1 |
+--------------+-----------+--------+-------+-------+

AND HENCE test-ONLY ENTRIES IN nfoldbayes:

select * from nfoldbayes where collectionid = 1341;
+--------------+-------+--------+-----------+------+
| collectionid | nfold | number | accession | type |
+--------------+-------+--------+-----------+------+
|         1341 |    10 |      1 | 1         | test |
|         1341 |    10 |      1 | 2         | test |
|         1341 |    10 |      2 | 1         | test |
|         1341 |    10 |      2 | 2         | test |
|         1341 |    10 |      3 | 1         | test |
|         1341 |    10 |      3 | 2         | test |
|         1341 |    10 |      4 | 1         | test |
|         1341 |    10 |      4 | 2         | test |
|         1341 |    10 |      5 | 1         | test |
|         1341 |    10 |      5 | 2         | test |
|         1341 |    10 |      6 | 1         | test |
|         1341 |    10 |      6 | 2         | test |
|         1341 |    10 |      7 | 1         | test |
|         1341 |    10 |      7 | 2         | test |
|         1341 |    10 |      8 | 1         | test |
|         1341 |    10 |      8 | 2         | test |
|         1341 |    10 |      9 | 1         | test |
|         1341 |    10 |      9 | 2         | test |
|         1341 |    10 |     10 | 1         | test |
|         1341 |    10 |     10 | 2         | test |
+--------------+-------+--------+-----------+------+


SOLUTION:

FILTER COLLECTION SEQUENCES AT iprscanattributebayes STAGE TO SKIP ANY ORTHOLOGUES THAT
DON'T CONTAIN ANY USEFUL SOURCE ANNOTATION.

(DID SO)

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Fri Nov  2 22:20:11 EDT 2007
RERAN arrayiprscansetdaemon AND REST OF learning WORKFLOW AFTER CORRECTING ERROR IN Synonyms::swissprot_synonyms (REMOVE SPECIES NAMES)

    Job 1310696.4 exited with exit code 0.
    Job 1310696.3 exited with exit code 0.
    Job 1310696.1 exited with exit code 0.
    
    Job exit codes: 0 = Success, 99 = Requeue, Rest = Success: exit code in accounting file
    
    Dropping table 'iprscanset... done.
    Creating table 'iprscanset' if not exists... done.
    Loading data into table 'iprscanset'... done.
    
    Run time: 00:13:38
    Completed ./arrayiprscansetdaemon.pl
    10:16PM, 2 November 2007
    ****************************************

./iprscanattributebayes.pl -d pfalagam
        
    Doing attributes for orthologue groups (total 1375)
    0
    100
    200
    300
    400
    500
    600
    700
    800
    900
    1000
    No iprscans for collection id: 1090
    1100
    No iprscans for collection id: 1160
    1200
    1300
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.iprscanattributebayes.tsv
    
    Dropping 'iprscanattributebayes' if exists... done.
    Creating table 'iprscanattributebayes'... done.
    Loading data into table 'iprscanattributebayes'... done.
    Completed ./iprscanattributebayes.pl
    Run time: 00:03:29
    10:25PM, 2 November 2007
    ****************************************


./nfoldbayes.pl -d pfalagam
    
    Doing attributes for orthologue groups (total 1375)
    0
    100
    200
    300
    400
    500
    600
    700
    800
    900
    1000
    No instances in 'iprscanattributebayes' for collection id: 1090
    1100
    No instances in 'iprscanattributebayes' for collection id: 1160
    1200
    1300
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.nfoldbayes.tsv
    
    Dropping 'nfoldbayes' if exists... done.
    Creating table 'nfoldbayes'... done.
    Loading data into table 'nfoldbayes'... done.
    Completed ./nfoldbayes.pl
    Run time: 00:00:45
    10:40PM, 2 November 2007
    ****************************************

BUT WHEN RAN learningbayes, STILL CAME UP WITH AROUND 200 collectionids WITH NO TRAINING SET.
I.E., ABOUT 200 SEQUENCES DO NOT HAVE training SET INSTANCES IN nfoldbayes

    select count(distinct collectionid) from nfoldbayes where type != 'test';
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                         1173 |
    +------------------------------+
    1 row in set (0.43 sec)
    
    mysql> select count(distinct collectionid) from nfoldbayes where type != 'training';
    +------------------------------+
    | count(distinct collectionid) |
    +------------------------------+
    |                         1373 |
    +------------------------------+


    select distinct collectionid from nfoldbayes where type != 'test';


SO CORRECTED arrayiprscanset TO DO A WHOLE iprscanset LOOP FOR EACH
collectionid.collectionaccession (ABOVE)


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Nov  1 18:10:08 EDT 2007
RAN learningbayes ON pfalagam

./learningbayes.pl -d pfalagam 
    
    Output file printed:    
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.learningbayes.tsv
    
    Dropping 'learningbayes' if exists... done.
    Creating table 'learningbayes'... done.
    Loading data into table 'learningbayes'... done.
    Completed ./learningbayes.pl
    Run time: 00:03:42
    6:03PM, 1 November 2007
    ****************************************


 select sum(correct) / count(correct) from learningbayes;
+-------------------------------+
| sum(correct) / count(correct) |
+-------------------------------+
|                          0.90 |
+-------------------------------+


select collectionid, (sum(correct) / count(correct) ) as correct from learningbayes group by collectionid;


|         1356 |    0.73 |
|         1357 |    0.82 |
|         1358 |    0.50 |
|         1360 |    1.00 |
|         1362 |    0.75 |
|         1365 |    1.00 |
|         1369 |    0.45 |
|         1371 |    0.60 |
|         1372 |    1.00 |
+--------------+---------+
495 rows in set (0.03 sec)

NOTE: ONLY 495 COLLECTION IDS HAD SUFFICIENT TRAINING SET EXAMPLES...co


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Oct 29 03:04:30 EDT 2007
GET MIN, MAX, AVG AND STDDEV OF HIT COUNTS FOR swissprotselfblast AND refseqhumanselfblast

use indexer;
select min(count) from swissprotselfblastcounts;
select max(count) from swissprotselfblastcounts;
select avg(count) from swissprotselfblastcounts;
select stddev(count) from swissprotselfblastcounts;


select min(count) from swissprotselfblastcounts;
+------------+
| min(count) |
+------------+
|          1 |
+------------+

select max(count) from swissprotselfblastcounts;
+------------+
| max(count) |
+------------+
|        250 |
+------------+

select avg(count) from swissprotselfblastcounts;
+------------+
| avg(count) |
+------------+
|    90.6688 |
+------------+

select stddev(count) from swissprotselfblastcounts;
+---------------+
| stddev(count) |
+---------------+
|       87.5594 |
+---------------+

select count(*) from swissprotselfblastcounts where count= 0;
+----------+
| count(*) |
+----------+
|        1 |
+----------+




use indexer;
select min(count) from refseqhumanselfblastcounts;
select max(count) from refseqhumanselfblastcounts;
select avg(count) from refseqhumanselfblastcounts;
select stddev(count) from refseqhumanselfblastcounts;

select min(count) from refseqhumanselfblastcounts;
+------------+
| min(count) |
+------------+
|          0 |
+------------+
1 row in set (0.01 sec)

mysql> select max(count) from refseqhumanselfblastcounts;
+------------+
| max(count) |
+------------+
|        250 |
+------------+
1 row in set (0.01 sec)

mysql> select avg(count) from refseqhumanselfblastcounts;
+------------+
| avg(count) |
+------------+
|    41.1864 |
+------------+
1 row in set (0.01 sec)

mysql> select stddev(count) from refseqhumanselfblastcounts;
+---------------+
| stddev(count) |
+---------------+
|       70.4430 |
+---------------+

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Oct 29 01:44:22 EDT 2007
GET MIN, MAX, AVG AND STDDEV OF HIT COUNTS FOR unigene2

use unigene2
select min(count) from blastcounts;
select max(count) from blastcounts;
select avg(count) from blastcounts;
select stddev(count) from blastcounts;


mysql> select min(count) from blastcounts;
+------------+
| min(count) |
+------------+
|          4 |
+------------+
1 row in set (0.00 sec)

mysql> select max(count) from blastcounts;
+------------+
| max(count) |
+------------+
|       2197 |
+------------+
1 row in set (0.00 sec)

mysql> select avg(count) from blastcounts;
+------------+
| avg(count) |
+------------+
|   369.1216 |
+------------+
1 row in set (0.00 sec)

mysql> select stddev(count) from blastcounts;
+---------------+
| stddev(count) |
+---------------+
|      371.3679 |
+---------------+


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Oct 28 01:44:22 EDT 2007
DO REFSEQ

refseq1
========

# 2. CHOOSE SEEDS

./unigeneseed.pl -d refseq1 -m 100 -i /common/data/refseq-human

# 3. LOAD INTO DATABASE:

cp /Users/young/FUNNYBASE/pipeline/refseq1/data/refseq1.seed /Users/young/FUNNYBASE/pipeline/refseq1/data/refseq-human-100

./fasta2collection.pl -d refseq1 -f /Users/young/FUNNYBASE/pipeline/refseq1/data/refseq-human-100

# 4. GENERATE FASTA FILE
./collectionfasta.pl -d refseq1 -p T

# 5. BLAST
sudo ./arrayblast.pl -d refseq1 -q refseq1 -t swissprot,refseq-rat,refseq-mouse,refseq-dog -j 26

./arrayblastloaddata.pl -d refseq1 -t swissprot,refseq-rat,refseq-mouse,refseq-dog 


# 6. GET BLAST ANNOTATION

./blastbestevalue.pl -d refseq1 -t refseq-dog,refseq-mouse,refseq-rat
./blastevalueannotation.pl -d refseq1


# 7. CREATE BLAST STATS
./blasthitstats.pl -d refseq1  -t swissprot,refseq-mouse,refseq-dog,refseq-rat



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

E-VALUE DISTRIBUTIONS USING arrayblastevaluedistributiondata.pl

select distinct collectionid, collectionaccession, count(targetaccession) as count , min(hitevalueexp), min(hitevaluedec)  from collectionblast group by collectionid, collectionaccession order by count, collectionid, collectionaccession , hitevalueexp , hitevaluedec;

+--------------+---------------------+-------+-------------------+-------------------+
| collectionid | collectionaccession | count | min(hitevalueexp) | min(hitevaluedec) |
+--------------+---------------------+-------+-------------------+-------------------+
|           68 |                   1 |     4 |                 1 |              0.05 |
|           14 |                   1 |     8 |               -19 |              0.00 |
|           18 |                   1 |    13 |               -81 |              0.02 |
|           44 |                   1 |    19 |               -89 |              0.07 |
|           55 |                   1 |    23 |              -248 |              0.00 |
|           75 |                   1 |    24 |               -15 |              0.00 |
|           97 |                   1 |    24 |              -233 |              0.00 |
|           63 |                   1 |    33 |               -77 |              0.00 |
|           93 |                   1 |    34 |              -199 |              0.00 |
|          100 |                   1 |    40 |              -184 |              0.00 |
|           24 |                   1 |    43 |              -170 |              0.00 |
|           62 |                   1 |    45 |                -7 |              0.00 |
|            7 |                   1 |    48 |              -129 |              0.00 |
|           76 |                   1 |    48 |              -165 |              0.00 |
|           26 |                   1 |    53 |              -155 |              0.00 |
|           51 |                   1 |    57 |              -257 |              0.00 |
|            2 |                   1 |    69 |              -291 |              0.00 |
|            6 |                   1 |    70 |              -216 |              0.00 |
|           42 |                   1 |    71 |              -310 |              0.00 |
|           40 |                   1 |    85 |                -8 |              0.00 |
|           59 |                   1 |    91 |              -269 |              0.00 |
|           22 |                   1 |    92 |              -299 |              0.00 |
|           38 |                   1 |   103 |              -319 |              0.00 |
|           16 |                   1 |   104 |              -260 |              0.00 |
|           47 |                   1 |   140 |                -9 |              0.00 |
|            3 |                   1 |   141 |              -212 |              0.00 |
|           88 |                   1 |   165 |              -125 |              0.00 |
|           43 |                   1 |   167 |              -313 |              0.00 |
|           83 |                   1 |   167 |              -297 |              0.00 |
|            8 |                   1 |   180 |               -62 |              0.00 |
|           30 |                   1 |   197 |               -23 |              0.00 |
|           54 |                   1 |   201 |              -155 |              0.00 |
|            4 |                   1 |   228 |              -162 |              0.00 |
|           23 |                   1 |   233 |              -218 |              0.00 |
|           50 |                   1 |   246 |              -237 |              0.00 |
|           80 |                   1 |   282 |              -164 |              0.00 |
|           28 |                   1 |   302 |               -34 |              0.00 |
|           79 |                   1 |   303 |              -300 |              0.00 |
|           34 |                   1 |   309 |              -129 |              0.00 |
|           60 |                   1 |   324 |              -312 |              0.00 |
|           74 |                   1 |   334 |              -278 |              0.00 |
|           15 |                   1 |   344 |              -293 |              0.00 |
|           52 |                   1 |   345 |              -293 |              0.00 |
|           84 |                   1 |   350 |              -271 |              0.00 |
|           12 |                   1 |   362 |              -238 |              0.00 |
|           71 |                   1 |   363 |              -211 |              0.00 |
|           39 |                   1 |   374 |              -319 |              0.00 |
|           99 |                   1 |   377 |              -277 |              0.00 |
|           32 |                   1 |   383 |              -276 |              0.00 |
|           35 |                   1 |   439 |              -286 |              0.00 |
|           10 |                   1 |   455 |               -83 |              0.00 |
|           78 |                   1 |   463 |              -148 |              0.00 |
|           64 |                   1 |   472 |              -148 |              0.00 |
|           19 |                   1 |   497 |               -90 |              0.00 |
|           96 |                   1 |   519 |              -315 |              0.00 |
|           27 |                   1 |   558 |              -172 |              0.00 |
|           11 |                   1 |   603 |              -216 |              0.00 |
|           72 |                   1 |   626 |               -39 |              0.00 |
|           91 |                   1 |   627 |              -185 |              0.00 |
|           56 |                   1 |   631 |               -36 |              0.00 |
|           46 |                   1 |   644 |              -159 |              0.00 |
|           70 |                   1 |   648 |               -81 |              0.00 |
|           90 |                   1 |   651 |              -310 |              0.00 |
|           20 |                   1 |   690 |              -261 |              0.00 |
|           48 |                   1 |   745 |               -48 |              0.00 |
|           87 |                   1 |   749 |              -122 |              0.00 |
|           31 |                   1 |   791 |              -133 |              0.00 |
|           58 |                   1 |   868 |               -62 |              0.00 |
|           82 |                   1 |   942 |              -286 |              0.00 |
|           66 |                   1 |  1091 |              -122 |              0.00 |
|           94 |                   1 |  1110 |              -234 |              0.00 |
|           36 |                   1 |  1113 |               -77 |              0.00 |
|           86 |                   1 |  1168 |              -155 |              0.00 |
|           67 |                   1 |  2197 |              -267 |              0.00 |
+--------------+---------------------+-------+-------------------+-------------------+


select distinct collectionid, collectionaccession, targetaccession, hitevalueexp, hitevaluedec  from collectionblast where hitevalueexp < -99 order by collectionid, collectionaccession , hitevalueexp , hitevaluedec;
725 rows in set (0.06 sec)


mysql> select distinct collectionid, collectionaccession, count(targetaccession), min(hitevalueexp), min(hitevaluedec)  from collectionblast where hitevalueexp < -99 group by collectionid, collectionaccession order by collectionid, collectionaccession , hitevalueexp , hitevaluedec;
+--------------+---------------------+------------------------+-------------------+-------------------+
| collectionid | collectionaccession | count(targetaccession) | min(hitevalueexp) | min(hitevaluedec) |
+--------------+---------------------+------------------------+-------------------+-------------------+
|            2 |                   1 |                      9 |              -291 |              3.22 |
|            3 |                   1 |                     11 |              -212 |              1.11 |
|            4 |                   1 |                     37 |              -162 |              1.01 |
|            6 |                   1 |                      5 |              -216 |              1.31 |
|            7 |                   1 |                      5 |              -129 |              4.45 |
|           11 |                   1 |                     13 |              -216 |              2.31 |
|           12 |                   1 |                     39 |              -238 |              1.00 |
|           15 |                   1 |                     31 |              -293 |              1.03 |
|           16 |                   1 |                     35 |              -260 |              1.01 |
|           20 |                   1 |                      7 |              -261 |              1.39 |
|           22 |                   1 |                     15 |              -299 |              1.67 |
|           23 |                   1 |                      2 |              -218 |              4.30 |
|           24 |                   1 |                      4 |              -170 |              1.52 |
|           26 |                   1 |                     12 |              -155 |              1.03 |
|           27 |                   1 |                      6 |              -172 |              1.11 |
|           31 |                   1 |                      1 |              -133 |              1.96 |
|           32 |                   1 |                      7 |              -276 |              1.46 |
|           34 |                   1 |                      3 |              -129 |              1.93 |
|           35 |                   1 |                     11 |              -286 |              1.29 |
|           38 |                   1 |                      9 |              -319 |              1.17 |
|           39 |                   1 |                     53 |              -319 |              1.03 |
|           42 |                   1 |                      6 |              -310 |              1.32 |
|           43 |                   1 |                     24 |              -313 |              1.00 |
|           46 |                   1 |                      5 |              -159 |              1.10 |
|           50 |                   1 |                      8 |              -237 |              1.17 |
|           51 |                   1 |                      4 |              -257 |              1.77 |
|           52 |                   1 |                      4 |              -293 |              1.46 |
|           54 |                   1 |                      6 |              -155 |              1.30 |
|           55 |                   1 |                      6 |              -248 |              1.59 |
|           59 |                   1 |                     11 |              -269 |              1.06 |
|           60 |                   1 |                      9 |              -312 |              1.45 |
|           64 |                   1 |                      4 |              -148 |              1.44 |
|           66 |                   1 |                     25 |              -122 |              1.00 |
|           67 |                   1 |                     10 |              -267 |              1.43 |
|           71 |                   1 |                     22 |              -211 |              1.19 |
|           74 |                   1 |                      4 |              -278 |              1.93 |
|           76 |                   1 |                      7 |              -165 |              1.23 |
|           78 |                   1 |                      2 |              -148 |              1.15 |
|           79 |                   1 |                      4 |              -300 |              1.77 |
|           80 |                   1 |                      2 |              -164 |              2.38 |
|           82 |                   1 |                      3 |              -286 |              2.51 |
|           83 |                   1 |                     48 |              -297 |              1.08 |
|           84 |                   1 |                     88 |              -271 |              1.01 |
|           86 |                   1 |                     13 |              -155 |              1.00 |
|           87 |                   1 |                      2 |              -122 |              5.71 |
|           88 |                   1 |                      4 |              -125 |              1.79 |
|           90 |                   1 |                    172 |              -310 |              1.00 |
|           91 |                   1 |                     10 |              -185 |              1.33 |
|           93 |                   1 |                      4 |              -199 |              1.06 |
|           94 |                   1 |                     11 |              -234 |              1.32 |
|           96 |                   1 |                      6 |              -315 |              1.25 |
|           97 |                   1 |                      4 |              -233 |              2.39 |
|           99 |                   1 |                     63 |              -277 |              1.15 |
|          100 |                   1 |                      1 |              -184 |              1.33 |
+--------------+---------------------+------------------------+-------------------+-------------------+
54 rows in set (0.05 sec)






++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Oct 27 02:24:34 EDT 2007
DO unigene4, unigene5 AND unigene6

unigene4
========

1. HASH THE FASTA FILE AND PARSE THROUGH DATA FILE TAKING ONE UNIGENE ACCESSION
PER GROUP AND PRINTING TO FILE .preseed

cd orthologues
./unigenepreseed.pl -d unigene4 -i /Users/young/FUNNYBASE/databases/unigene/Hs.seq.uniq

2. CHOOSE SEEDS

./unigeneseed.pl -d unigene4 -m 100 -i /Users/young/FUNNYBASE/pipeline/unigene4/data/unigene4.preseed

3. LOAD INTO DATABASE:

cp /Users/young/FUNNYBASE/pipeline/unigene4/data/unigene4.seed /Users/young/FUNNYBASE/pipeline/unigene4/data/unigene-human-100

./fasta2collection.pl -d unigene4 -f /Users/young/FUNNYBASE/pipeline/unigene4/data/unigene-human-100

3. GENERATE FASTA FILE
./collectionfasta.pl -d unigene4


4. BLAST
sudo ./arrayblast.pl -d unigene4 -q unigene4 -t swissprot,unigene-rat,unigene-mouse,unigene-dog -j 26

./arrayblastloaddata.pl -d unigene4 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 


5. GET BLAST ANNOTATION

./blastbestevalue.pl -d unigene4 -t unigene-dog,unigene-mouse,unigene-rat
./blastevalueannotation.pl -d unigene4


6. CREATE BLAST STATS

./blasthitstats.pl -d unigene4  -t swissprot,unigene-mouse,unigene-dog,unigene-rat


unigene5
========

# 1. HASH THE FASTA FILE AND PARSE THROUGH DATA FILE TAKING ONE UNIGENE ACCESSION
# PER GROUP AND PRINTING TO FILE .preseed

cd orthologues
./unigenepreseed.pl -d unigene5 -i /Users/young/FUNNYBASE/databases/unigene/Hs.seq.uniq

# 2. CHOOSE SEEDS

./unigeneseed.pl -d unigene5 -m 100 -i /Users/young/FUNNYBASE/pipeline/unigene5/data/unigene5.preseed

# 3. LOAD INTO DATABASE:

cp /Users/young/FUNNYBASE/pipeline/unigene5/data/unigene5.seed /Users/young/FUNNYBASE/pipeline/unigene5/data/unigene-human-100

./fasta2collection.pl -d unigene5 -f /Users/young/FUNNYBASE/pipeline/unigene5/data/unigene-human-100

# 4. GENERATE FASTA FILE
./collectionfasta.pl -d unigene5

# 5. BLAST
sudo ./arrayblast.pl -d unigene5 -q unigene5 -t swissprot,unigene-rat,unigene-mouse,unigene-dog -j 26

./arrayblastloaddata.pl -d unigene5 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 


# 6. GET BLAST ANNOTATION

./blastbestevalue.pl -d unigene5 -t unigene-dog,unigene-mouse,unigene-rat
./blastevalueannotation.pl -d unigene5


# 7. CREATE BLAST STATS
./blasthitstats.pl -d unigene5  -t swissprot,unigene-mouse,unigene-dog,unigene-rat


unigene6
========

1. HASH THE FASTA FILE AND PARSE THROUGH DATA FILE TAKING ONE UNIGENE ACCESSION
PER GROUP AND PRINTING TO FILE .preseed

cd orthologues
./unigenepreseed.pl -d unigene6 -i /Users/young/FUNNYBASE/databases/unigene/Hs.seq.uniq

2. CHOOSE SEEDS

./unigeneseed.pl -d unigene6 -m 100 -i /Users/young/FUNNYBASE/pipeline/unigene6/data/unigene6.preseed

3. LOAD INTO DATABASE:

cp /Users/young/FUNNYBASE/pipeline/unigene6/data/unigene6.seed /Users/young/FUNNYBASE/pipeline/unigene6/data/unigene-human-100

./fasta2collection.pl -d unigene6 -f /Users/young/FUNNYBASE/pipeline/unigene6/data/unigene-human-100

3. GENERATE FASTA FILE
./collectionfasta.pl -d unigene6

4. BLAST
sudo ./arrayblast.pl -d unigene6 -q unigene6 -t swissprot,unigene-rat,unigene-mouse,unigene-dog -j 26 -e 1

./arrayblastloaddata.pl -d unigene6 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 


5. GET BLAST ANNOTATION

./blastbestevalue.pl -d unigene6 -t unigene-dog,unigene-mouse,unigene-rat

./blastevalueannotation.pl -d unigene6


6. CREATE BLAST STATS

./blasthitstats.pl -d unigene6  -t swissprot,unigene-mouse,unigene-dog,unigene-rat



REPEATED LAST STEP AFTER BLAST WITH E-VALUE CUTOFF SET TO 1.0:

./arrayblastloaddata.pl -X -d unigene6 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 
./blastbestevalue.pl -d unigene6 -t unigene-dog,unigene-mouse,unigene-rat
./blastevalueannotation.pl -d unigene6
./blasthitstats.pl -d unigene6  -t swissprot,unigene-mouse,unigene-dog,unigene-rat

./arrayblastloaddata.pl -X -d unigene5 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 
./blastbestevalue.pl -d unigene5 -t unigene-dog,unigene-mouse,unigene-rat
./blastevalueannotation.pl -d unigene5
./blasthitstats.pl -d unigene5  -t swissprot,unigene-mouse,unigene-dog,unigene-rat

./arrayblastloaddata.pl -X -d unigene4 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 
./blastbestevalue.pl -d unigene4 -t unigene-dog,unigene-mouse,unigene-rat
./blastevalueannotation.pl -d unigene4
./blasthitstats.pl -d unigene4  -t swissprot,unigene-mouse,unigene-dog,unigene-rat

./arrayblastloaddata.pl -X -d unigene3 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 
./blastbestevalue.pl -d unigene3 -t unigene-dog,unigene-mouse,unigene-rat
./blastevalueannotation.pl -d unigene3
./blasthitstats.pl -d unigene3  -t swissprot,unigene-mouse,unigene-dog,unigene-rat

./arrayblastloaddata.pl -X -d unigene2 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 
./blastbestevalue.pl -d unigene2 -t unigene-dog,unigene-mouse,unigene-rat
./blastevalueannotation.pl -d unigene2
./blasthitstats.pl -d unigene2  -t swissprot,unigene-mouse,unigene-dog,unigene-rat





++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct 24 02:35:08 EDT 2007
COMPLETED SWISSPROT SELF BLAST DISTRIBUTION DATA PROCESSING - DREW GRAPHS

SELECT COUNT(count) FROM swissprotblastindexdata
WHERE binstop = '-59'
AND matchboolean = 1

+--------------+
| COUNT(count) |
+--------------+
|       130720 |
+--------------+
1 row in set (5 min 25.54 sec)





++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct 24 00:03:18 EDT 2007
RESOLVED UNIGENE PROBLEM - ANNOTATION IN FASTA FILE LOUSY - AND REPEATED FOR unigene3

1. HASH THE FASTA FILE AND PARSE THROUGH DATA FILE TAKING ONE UNIGENE ACCESSION
PER GROUP AND PRINTING TO FILE .preseed

cd orthologues
./unigenepreseed.pl -d unigene3 -i /Users/young/FUNNYBASE/databases/unigene/Hs.seq.uniq

2. CHOOSE SEEDS TO CREATE FILE /Users/young/FUNNYBASE/pipeline/unigene2/data/unigene2.seed:

./unigeneseed.pl -d unigene3 -m 100 -i /Users/young/FUNNYBASE/pipeline/unigene2/data/unigene3.preseed

3. LOAD INTO DATABASE:

cp /Users/young/FUNNYBASE/pipeline/unigene3/data/unigene3.seed /Users/young/FUNNYBASE/pipeline/unigene3/data/unigene-human-100

pipeline4/fasta2collection.pl -d unigene3 -f /Users/young/FUNNYBASE/pipeline/unigene3/data/unigene-human-100

3. GENERATE FASTA FILE
orthologues/collectionfasta.pl -d unigene3

4. BLAST
sudo ./arrayblast.pl -d unigene3 -q unigene3 -t swissprot,unigene-rat,unigene-mouse,unigene-dog -j 26

./arrayblastloaddata.pl -d unigene3 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 

5. GET BEST BLAST HITS


6. CREATE BLAST STATS

./blasthitstats.pl -d unigene3  -t swissprot,unigene-mouse,unigene-dog,unigene-rat



Swissprot has the most sequences so it's not suprising it has more hits in total:

unigene3
Target database       Sequences       Target hits     Query hits
swissprot       188477  5574    64
unigene-mouse   64632   1359    66
unigene-dog     23611   481     63
unigene-rat     52183   619     69

unigene2
--Target database       Sequences       Target hits     Query hits
swissprot       188477  7603    73
unigene-mouse   64632   4798    71
unigene-dog     23611   537     74
unigene-rat     52183   2091    73




(FIXED Blast.pm PARSING OF EMPTY QUERY sourceaccession,sourceid, ETC.)

5. GET BEST EVALUES FOR ALL DATABASES

./blastbestevalue.pl -d unigene3






++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Oct 23 20:23:25 EDT 2007
unigene2 - RERUN OF unigene 

1. CONVERT PREVIOUS top100 FILE INTO UNITARY PARSER FASTA FORMAT:

FROM:
>BM914668 (S4269055) Nucleolar protein 7, 27kDa

TO:
>BM914668 S4269055|unigene-human-100|Nucleolar protein 7, 27kDa
>S4269055 BM914668|unigene-human-100|Nucleolar protein 7, 27kDa

./formatfasta.pl 

cp /Users/young/FUNNYBASE/databases/unigene/Hs.top100.fasta /Users/young/FUNNYBASE/pipeline/unigene2/data/unigene-human-100.old

./formatfasta.pl -i /Users/young/FUNNYBASE/pipeline/unigene2/data/unigene-human-100.old -o /Users/young/FUNNYBASE/pipeline/unigene2/data/unigene-human-100 -r "^\\S+\\s+\((\\S+)\)" -n "^(\\S+)" -a "^\\S+\\s+\\S+\\s+(.+)$" -s unigene-human-100


2. LOAD INTO DATABASE:

./fasta2collection.pl -d unigene2 -f /Users/young/FUNNYBASE/databases/unigene/unigene-human-100


3. GENERATE FASTA FILE
orthologues/collectionfasta.pl -d unigene2


4. BLAST
sudo ./arrayblast.pl -d unigene2 -q unigene2 -t swissprot,unigene-rat,unigene-mouse,unigene-dog -j 26

./arrayblastloaddata.pl -d unigene2 -t swissprot,unigene-rat,unigene-mouse,unigene-dog 

select count(*) , targetsource from orthologuesblast group by targetsource ;
+----------+---------------+
| count(*) | targetsource  |
+----------+---------------+
|    11918 | swissprot     |
|      445 | unigene-dog   |
|     1408 | unigene-mouse |
|      725 | unigene-rat   |
+----------+---------------+

(FIXED Blast.pm PARSING OF EMPTY QUERY sourceaccession,sourceid, ETC.)

5. GET BLAST HIT STATS

./blasthitstats.pl -d unigene3  -t swissprot,unigene-mouse,unigene-dog,unigene-rat


5. GET BEST EVALUES FOR ALL DATABASES

./blastbestevalue.pl -d unigene2


6. GET ANNOTATION OF BEST EVALUE OF blastbestevalue

./blastevalueannotation.pl -d unigene2

select count(*) from blastevalueannotation;
+----------+
| count(*) |
+----------+
|       74 |
+----------+
1 row in set (0.00 sec)

mysql> select count(*) from blastbestevalue;
+----------+
| count(*) |
+----------+
|      218 |
+----------+

select count(*),targetsource from blastevalueannotation group by targetsource;
+----------+---------------+
| count(*) | targetsource  |
+----------+---------------+
|       36 | unigene-dog   |
|       19 | unigene-mouse |
|       19 | unigene-rat   |
+----------+---------------+

GET UNANNOTATED:

SELECT COUNT(collection.collectionid)
FROM collection
LEFT JOIN blastevalueannotation
ON collection.collectionid=blastevalueannotation.collectionid
WHERE blastevalueannotation.collectionid IS NULL

26



SELECT (collection.collectionid)
FROM collection
LEFT JOIN blastevalueannotation
ON collection.collectionid=blastevalueannotation.collectionid
WHERE blastevalueannotation.collectionid IS NULL


+--------------+
| collectionid |
+--------------+
|            1 |
|            5 |
|            9 |
|           13 |
|           17 |
|           21 |
|           25 |
|           29 |
|           33 |
|           37 |
|           41 |
|           45 |
|           49 |
|           53 |
|           57 |
|           61 |
|           65 |
|           69 |
|           73 |
|           77 |
|           81 |
|           85 |
|           89 |
|           92 |
|           95 |
|           98 |
+--------------+
26 rows in set (0.31 sec)


7. DO IPRSCAN







++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Oct 22 21:31:21 EDT 2007
EXAMPLE OF iprscanattributebayes INSTANCES FOR collectionid = 1 (pfalagam)

(OUTPUT TO chap3/images AS TSV)

GET EXAMPLE OF IPRSCAN ATTRIBUTE BAYES:

select distinct iprscanattributebayes.*, iprscanset.annotation from iprscanattributebayes, iprscanset where iprscanattributebayes.accession=iprscanset.accession AND iprscanset.collectionid = 1 AND iprscanattributebayes.collectionid = 1 AND iprscanset.label= 1;
+--------------+-----------+------------------+-------+-------+------------------------------------------------------+
| collectionid | accession | name             | value | label | annotation                                           |
+--------------+-----------+------------------+-------+-------+------------------------------------------------------+
|            1 | O00303    | JAB_MPN          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 5 |
|            1 | O00303    | MOV34            | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 5 |
|            1 | O00303    | MOV34-1          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 5 |
|            1 | O04202    | JAB_MPN          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 5 |
|            1 | O04202    | MOV34            | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 5 |
|            1 | O04202    | MOV34-1          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 5 |
|            1 | O14187    | JAB_MPN          | 1     |     1 | Pre-mRNA-splicing factor spp42                       |
|            1 | O14187    | MOV34            | 1     |     1 | Pre-mRNA-splicing factor spp42                       |
|            1 | O14187    | PRO8NT           | 1     |     1 | Pre-mRNA-splicing factor spp42                       |
|            1 | O14187    | PROCN            | 1     |     1 | Pre-mRNA-splicing factor spp42                       |
|            1 | O14187    | PROCT            | 1     |     1 | Pre-mRNA-splicing factor spp42                       |
|            1 | O15372    | JAB_MPN          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | O15372    | MOV34            | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | O15372    | MOV34-1          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | P33334    | JAB_MPN          | 1     |     1 | Pre-mRNA-splicing factor 8                           |
|            1 | P33334    | MOV34            | 1     |     1 | Pre-mRNA-splicing factor 8                           |
|            1 | P33334    | PRO8NT           | 1     |     1 | Pre-mRNA-splicing factor 8                           |
|            1 | P33334    | PROCN            | 1     |     1 | Pre-mRNA-splicing factor 8                           |
|            1 | P33334    | PROCT            | 1     |     1 | Pre-mRNA-splicing factor 8                           |
|            1 | P34369    | DNA_PHOTOLYASE_N | 1     |     1 | Pre-mRNA-splicing factor 8 homolog                   |
|            1 | P34369    | JAB_MPN          | 1     |     1 | Pre-mRNA-splicing factor 8 homolog                   |
|            1 | P34369    | MOV34            | 1     |     1 | Pre-mRNA-splicing factor 8 homolog                   |
|            1 | P34369    | PRO8NT           | 1     |     1 | Pre-mRNA-splicing factor 8 homolog                   |
|            1 | P34369    | PROCN            | 1     |     1 | Pre-mRNA-splicing factor 8 homolog                   |
|            1 | P34369    | PROCT            | 1     |     1 | Pre-mRNA-splicing factor 8 homolog                   |
|            1 | Q56JZ5    | JAB_MPN          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | Q56JZ5    | MOV34            | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | Q56JZ5    | MOV34-1          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | Q6P2Q9    | CUPREDOXIN       | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q6P2Q9    | JAB_MPN          | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q6P2Q9    | MOV34            | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q6P2Q9    | PRO8NT           | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q6P2Q9    | PROCN            | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q6P2Q9    | PROCT            | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q91WK2    | JAB_MPN          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | Q91WK2    | MOV34            | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | Q91WK2    | MOV34-1          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | Q99PV0    | JAB_MPN          | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q99PV0    | MOV34            | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q99PV0    | PRO8NT           | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q99PV0    | PROCN            | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q99PV0    | PROCT            | 1     |     1 | Pre-mRNA-processing-splicing factor 8                |
|            1 | Q9C5Z2    | JAB_MPN          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | Q9C5Z2    | MOV34            | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | Q9C5Z2    | MOV34-1          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 3 |
|            1 | Q9DCH4    | JAB_MPN          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 5 |
|            1 | Q9DCH4    | MOV34            | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 5 |
|            1 | Q9DCH4    | MOV34-1          | 1     |     1 | Eukaryotic translation initiation factor 3 subunit 5 |
+--------------+-----------+------------------+-------+-------+------------------------------------------------------+
48 rows in set (0.01 sec)

mysql> select distinct iprscanattributebayes.*, iprscanset.annotation from iprscanattributebayes, iprscanset where iprscanattributebayes.accession=iprscanset.accession AND iprscanset.collectionid = 1 AND iprscanattributebayes.collectionid = 1 AND iprscanset.label= 0;
+--------------+-----------+-----------+-------+-------+---------------------------------------------------------+
| collectionid | accession | name      | value | label | annotation                                              |
+--------------+-----------+-----------+-------+-------+---------------------------------------------------------+
|            1 | O00487    | FLIG_LIKE | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 14         |
|            1 | O00487    | JAB_MPN   | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 14         |
|            1 | O00487    | MOV34     | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 14         |
|            1 | O00487    | MOV34-1   | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 14         |
|            1 | O24412    | JAB_MPN   | 1     |     0 | Probable 26S proteasome non-ATPase regulatory subunit 7 |
|            1 | O24412    | MOV34     | 1     |     0 | Probable 26S proteasome non-ATPase regulatory subunit 7 |
|            1 | O24412    | MOV34-1   | 1     |     0 | Probable 26S proteasome non-ATPase regulatory subunit 7 |
|            1 | O35864    | JAB_MPN   | 1     |     0 | COP9 signalosome complex subunit 5                      |
|            1 | O35864    | MOV34     | 1     |     0 | COP9 signalosome complex subunit 5                      |
|            1 | O35864    | MOV34-1   | 1     |     0 | COP9 signalosome complex subunit 5                      |
|            1 | O74440    | JAB_MPN   | 1     |     0 | 26S proteasome regulatory subunit rpn8                  |
|            1 | O74440    | MOV34     | 1     |     0 | 26S proteasome regulatory subunit rpn8                  |
|            1 | O74440    | MOV34-1   | 1     |     0 | 26S proteasome regulatory subunit rpn8                  |
|            1 | O76577    | JAB_MPN   | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 14         |
|            1 | O76577    | MOV34     | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 14         |
|            1 | O76577    | MOV34-1   | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 14         |
|            1 | O88545    | JAB_MPN   | 1     |     0 | COP9 signalosome complex subunit 6                      |
|            1 | O88545    | MOV34     | 1     |     0 | COP9 signalosome complex subunit 6                      |
|            1 | O88545    | MOV34-1   | 1     |     0 | COP9 signalosome complex subunit 6                      |
|            1 | O94454    | JAB_MPN   | 1     |     0 | COP9 signalosome complex subunit 5                      |
|            1 | O94454    | MOV34     | 1     |     0 | COP9 signalosome complex subunit 5                      |
|            1 | O94454    | MOV34-1   | 1     |     0 | COP9 signalosome complex subunit 5                      |
|            1 | P26516    | JAB_MPN   | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 7          |
|            1 | P26516    | MOV34     | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 7          |
|            1 | P26516    | MOV34-1   | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 7          |
|            1 | P41878    | FLIG_LIKE | 1     |     0 | 26S proteasome regulatory subunit rpn11                 |
|            1 | P41878    | JAB_MPN   | 1     |     0 | 26S proteasome regulatory subunit rpn11                 |
|            1 | P41878    | MOV34     | 1     |     0 | 26S proteasome regulatory subunit rpn11                 |
|            1 | P41878    | MOV34-1   | 1     |     0 | 26S proteasome regulatory subunit rpn11                 |
|            1 | P46736    | JAB_MPN   | 1     |     0 | BRCA1/BRCA2-containing complex subunit 3                |
|            1 | P46736    | MOV34     | 1     |     0 | BRCA1/BRCA2-containing complex subunit 3                |
|            1 | P46737    | JAB_MPN   | 1     |     0 | BRCA1/BRCA2-containing complex subunit 3                |
|            1 | P46737    | MOV34     | 1     |     0 | BRCA1/BRCA2-containing complex subunit 3                |
|            1 | P51665    | JAB_MPN   | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 7          |
|            1 | P51665    | MOV34     | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 7          |
|            1 | P51665    | MOV34-1   | 1     |     0 | 26S proteasome non-ATPase regulatory subunit 7          |
|            1 | P64814    | JAB_MPN   | 1     |     0 | Uncharacterized Mb1369 precursor                        |
|            1 | P64814    | MOV34     | 1     |     0 | Uncharacterized Mb1369 precursor                        |
+--------------+-----------+-----------+-------+-------+---------------------------------------------------------+



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Oct 18 04:17:42 EDT 2007
CLUSTERED AND REFACTORED arrayiprscanset RAN IN UNDER 13 MINS FOR pfalagam

Job 1306446.3 exited with exit code 0.
Job 1306446.4 exited with exit code 0.
Job 1306446.1 exited with exit code 0.

Job exit codes: 0 = Success, 99 = Requeue, Rest = Success: exit code in accounting file

Dropping table 'iprscanset... done.
Creating table 'iprscanset' if not exists... done.
Loading data into table 'iprscanset'... done.

Run time: 00:12:35
Completed ./arrayiprscansetdaemon.pl
4:11AM, 18 October 2007
****************************************


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct 17 00:07:37 EDT 2007
UNIGENE ANNOTATION CHECK

REDID THE UNIGENE ANALYSIS

1. REDOWNLOADED UNIGENE
Hs.seq.uniq.gz  	54352 KB  	10/4/07  	3:00:00 PM
Cfa.seq.uniq.gz  	13987 KB  	9/13/07  	3:02:00 PM
Mm.seq.uniq.gz  	41004 KB  	9/7/07  	2:17:00 PM
Rn.seq.uniq.gz  	25708 KB  	9/25/07  	2:00:00 PM

cd ~/FUNNYBASE/pipeline/indexer/data
wget ftp://ftp.ncbi.nih.gov/repository/UniGene/Homo_sapiens/Hs.seq.uniq.gz

    01:02:50 (1.71 MB/s) - `Hs.seq.uniq.gz' saved [55656174]

wget ftp://ftp.ncbi.nih.gov/repository/UniGene/Canis_familiaris/Cfa.seq.uniq.gz

    01:03:58 (1.68 MB/s) - `Cfa.seq.uniq.gz' saved [14322683]

wget ftp://ftp.ncbi.nih.gov/repository/UniGene/Mus_musculus/Mm.seq.uniq.gz

    01:05:23 (1.63 MB/s) - `Mm.seq.uniq.gz' saved [41987131]

wget ftp://ftp.ncbi.nih.gov/repository/UniGene/Rattus_norvegicus/Rn.seq.uniq.gz

    01:06:48 (1.03 MB/s) - `Rn.seq.uniq.gz' saved [26324528]


2. UNZIPPED AND RENAMED:

unigene-hs.old
unigene-cf.old
unigene-mm.old
unigene-rn.old

3. MOVED TO /common/data AND REFORMATTED FASTA HEADERS:

./formatfasta.pl -i /common/data/unigene-hs.old -o /common/data/unigene-hs -r "\\/gb=(\\w+)" -n "\\/gi=(\\w+)" -a "^gnl\|[^\|]+\|.+?#[^\s)]+\s+([^,]+)" -s unigene-hs

./formatfasta.pl -i /common/data/unigene-mm.old -o /common/data/unigene-mm -r "\\/gb=(\\w+)" -n "\\/gi=(\\w+)" -a "^gnl\|[^\|]+\|.+?#[^\s)]+\s+([^,]+)" -s unigene-mm

./formatfasta.pl -i /common/data/unigene-rn.old -o /common/data/unigene-rn -r "\\/gb=(\\w+)" -n "\\/gi=(\\w+)" -a "^gnl\|[^\|]+\|.+?#[^\s)]+\s+([^,]+)" -s unigene-rn

./formatfasta.pl -i /common/data/unigene-cf.old -o /common/data/unigene-cf -r "\\/gb=(\\w+)" -n "\\/gi=(\\w+)" -a "^gnl\|[^\|]+\|.+?#[^\s)]+\s+([^,]+)" -s unigene-cf


4. DID BLAST OF`X unigene-hs AGAINST THE OTHER UNIGENES:

sudo ./arrayblast.pl -d unigene2 -q unigene-hs -t unigene-mm,unigene-rn,unigene-cf





1. Indexed the unigene human sequence (Hs.seq.uniq) and data (Hs.data) files
    - for quick retrieval of sequence/record by ID
    - to verify that the sequence and data records match (i.e., that the representative sequence is in fact the first read in the data record)

2. Selected 100 genes based on the following criteria:
    - No 'putative', '-like', '-homologous', etc. tentative annotations
    - Must have a gene function (e.g., 'Lactate dehydrogenase')
    - Function must not be derived from other organism homology
        (e.g., 'Cytochrome C [Saccharomyces cerevisiae]')
    - Wrote script 'unigene.top100.pl' to semi-automate selection procedure
        (see sample output below)


3. THE OUTPUT DIRECTORY IS:

    /Users/young/FUNNYBASE/database/unigene
    

4. ALSO DOWNLOADED THE TIGR Bos taurus (Cow) COLLECTION:

    ftp://occams.dfci.harvard.edu/pub/bio/tgi/data/Bos_taurus/

    AND THE TIGR PIG COLLECTION:

    ftp://occams.dfci.harvard.edu/pub/bio/tgi/data/Sus_scrofa

5. Carried out reciprocal BLAST alignments of the main four unigene mammalian species (dog, human, mouse, rat) and others:
    
        swissprot          
        tigr-cattle        
        tigr-pig           
        unigene-dog        
        unigene-human      
        unigene-mouse      
        unigene-rat        
        unigene-zebrafish  
        unigene-drosophila 
        unigene-fundulus   
        unigene-elegans 

6. Selected hits with E-values less than or equal to 1e-99
select queryid, queryname, queryannotation, targetsource, targetid, targetname, targetannotation, hitevalueexp, hitevaluedec, hspnumber, querystart, querystop, targetstart, targetstop from Hs_top100 where hspnumber=1 and hitevalueexp <= -99 and targetsource!='unigene-human' order by queryid, hitevalueexp, hitevaluedec, targetsource, targetid INTO OUTFILE '/private/tmp/Hs_top100.hits.tsv';

7. CALCULATED MEAN AND VARIANCE OF HITS BY GENE (IN Excel FILES)
hits.correct.indep.xls  Graph of distributions of hits, correct hits and independently annotated hits (i.e., not '-like', 'homologue', 'putative' annotations, which are almost always dependent on homology with an annotated protein in another database).
Hs.top100.hits.xls      Analysis of annotations from above selection of hits with E-values less than or equal to 1e-99 (76 of the 100 sequences); categorised by presence of matching annotation and independence of annotation.

8. PERL SCRIPTS:

id.annotation.pl        Indexes sequence ID against annotation and inserts into 'idannotation' table of 'indexer' database
indexer.pl              Generic indexer for sequence databases. Stores index information in mysql, allowing fast retrieval equivalent to stored index in persistent memory.
mysqlid2annotation.pl   Retrieve annotation for input sequence ID from 'idannotation' table.
mysqlid2record.pl       Retrieve sequence for input sequence ID from 'indexes' table.
orthologues.pl          Calculate orthologues from comprehensive species-species BLAST of multiple sequence databases.
orthologues2svg.pl      Print SVG graphs of orthologue collections and alignments.
top100.hit.stats.pl     Calculate the mean and variance of the BLAST comparison of the 100 randomly selected human unigene sequences (FROM Hs.seq.uniq) against the following databases: swissprot, unigene-dog, unigene-drosophila, unigene-elegans, unigene-fundulus, unigene-human, unigene-mouse, unigene-rat, unigene-zebrafish, tigr-cattle, tigr-pig
unigene.top100.fasta.pl Create fasta file for randomly selected 100 human unigene sequences. Fasta header is in swissprot format and contains more informative annotation information retrieved from Hs.data file entry for each sequence's cluster.
unigene.top100.pl       Collect fasta sequences and cluster data for randomly selected sequences, filter manually on command line based on annotation quality.





    
GEMS-G5-Genomics:~/FUNNYBASE/bin/unigene young$ ./unigene.top100.pl 

CURRENT GOOD SEQUENCES: 0
Id: BM914668
Annotation: Nucleolar protein 7, 27kDa
Title: Nucleolar protein 7, 27kDa
Okay? (Y/N):
y

CURRENT GOOD SEQUENCES: 1
Id: BX537382
Annotation: Solute carrier family 38, member 3
Title: Solute carrier family 38, member 3
Okay? (Y/N):
y

...


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Oct 16 13:04:30 EDT 2007
LOADED IPRSCANS INTO pfalagam


./orthologuesiprscan.pl -d pfalagam -s protein


    Input file found: /Users/young/FUNNYBASE/pipeline/pfalagam/iprscan/pfalagam.out.1375.1
    Input file found: /Users/young/FUNNYBASE/pipeline/pfalagam/iprscan/pfalagam.out.1375.2
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.orthologuesiprscan.tsv
    
    Dropping 'orthologuesiprscan' if exists... done.
    Creating table 'orthologuesiprscan'... done.
    Loading data into table 'orthologuesiprscan'... done.
    
    Run time: 00:01:46
    Completed ./orthologuesiprscan.pl
    1:02PM, 16 October 2007
    ****************************************    

    select count(*) from orthologuesiprscan;
    +----------+
    | count(*) |
    +----------+
    |    31959 |
    +----------+


    NB: REDID Wed Oct 17 02:25:50 EDT 2007 - MUCH FASTER TODAY!!

    Run time: 00:00:15
    Completed ./orthologuesiprscan.pl
    2:24AM, 17 October 2007
    ****************************************

    ALSO ADDED 6 MORE SEQUENCES SINCE FIXED THE PROBLEM WITH THE IPRSCAN OUTPUT FOR SEQUENCE 818.1 APPEARING IN THE OUTPUT FILE FOR SEQUENCE 817.2.
    
    
    select count(*) from orthologuesiprscan;
    +----------+
    | count(*) |
    +----------+
    |    31965 |
    +----------+


    
    
    COMPARED TO inparanoid_sanpf_ensag
    
    select count(*) from orthologuesiprscan;      
    +----------+
    | count(*) |
    +----------+
    |    27677 |
    +----------+
    
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

COPIED TABLES FROM inparanoid_sanpf_ensag TO pfalagam

inparanoid_sanpf_ensag TABLES:

show tables;                            * = copied, x = not copied
+----------------------------------+
| Tables_in_inparanoid_sanpf_ensag |
+----------------------------------+
| indices_ensAG_fasta              |
| indices_sanPF_fasta              |
| iprscanattribute                 |
| iprscancompleteset               |    *
| iprscancompletesetalignment      |    
| iprscancompletesetsequence       |    *
| iprscantrainingset               |    * OLD (but faster?), NEW is iprscancompleteset
| orthologues                      |
| orthologuesannotation            |    *
| orthologuesbesthit               |    *
| orthologuesblast                 |    x only 5511 entries
| orthologuesblastcoverage         |    x only 154 entries
| orthologuesclustalw              |    x OLD, NEW is orthologuesmultiplealignment
| orthologuesiprscan               |    x 27677 entries but loaded fresh iprscan into pfalagam Oct 15 21:09 
| orthologuesiprscandomain         |    x empty
| orthologuesiprscansuperdomain    |    
| orthologuesmultiplealignment     |    *
| stage                            |
+----------------------------------+

select count(*) from orthologuesblast;
+----------+
| count(*) |
+----------+
|     5511 |
+----------+


pfalagam TABLES:

show tables;
+------------------------------+
| Tables_in_pfalagam           |
+------------------------------+
| blastbestevalue              |
| blastevalueannotation        |
| blastevaluedistribution      |
| indices_agam                 |
| indices_pfal                 |
| orthologues                  |
| orthologuesblast             |
| orthologuesiprscan           |
| orthologuesmultiplealignment |
+------------------------------+

select count(*) from orthologuesblast;
+----------+
| count(*) |
+----------+
|   975124 |
+----------+


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Oct 14 21:19:37 EDT 2007
CREATED pfalagam WITH ORTHOLOGUES WORKFLOW

Workflow 1: Get Iprscan motifs

1. RUN IPRSCAN

sudo ./arrayiprscandaemon.pl -d pfalagam


2. LOAD DATA

./arrayiprscanloaddata.pl -d pfalagam





++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Oct 14 21:19:37 EDT 2007
CREATED pfalagam WITH ORTHOLOGUES WORKFLOW

Workflow 0: Create orthologues

1. CREATE orthologues TABLE

./inparanoidorthologues.pl -d pfalagam


Workflow 1: Annotation Verification

1. Create orthologues BLAST query file

./orthologuesarrayblastquery.pl -d pfalagam

2. BLAST orthologues

sudo ./arrayblast.pl -q pfalagam -d pfalagam -t swissprot


    Merging output files... ++++ Alignment::Blast::merge_files(self, files, outputfile)
    done.
    Output file printed:
    
    /common/pipeline/pfalagam/blast/pfalagam-swissprot.blast.tsv
    
    Run time: 00:10:47
    Completed ./arrayblast.pl
    8:02PM, 14 October 2007
    ****************************************

sudo ./arrayblast.pl -q pfalagam -d pfalagam -t refseq-human,refseq-mouse,refseq-rat,refseq-dog

    
    Run time: 00:11:06
    Completed ./arrayblast.pl
    1:38AM, 15 October 2007
    ****************************************



3. Load BLAST results into orthologuesblast table

./arrayblastloaddata.pl -d pfalagam -t swissprot,refseq-human,refseq-mouse,refseq-rat,refseq-dog
    
    Run time: 00:01:04
    Completed ./arrayblastloaddata.pl
    4:40AM, 15 October 2007
    ****************************************
    
     select count(*), targetsource from orthologuesblast group by targetsource ;
    +----------+--------------+
    | count(*) | targetsource |
    +----------+--------------+
    |   214968 | refseq-dog   |
    |   145800 | refseq-human |
    |   128570 | refseq-mouse |
    |   124915 | refseq-rat   |
    |   360871 | swissprot    |
    +----------+--------------+

4. DO BEST EVALUE HITS
    
./blastbestevalue.pl -d pfalagam

    3400
    Output .TSV file printed:
    
    /Users/young/FUNNYBASE/pipeline/pfalagam/collection/pfalagam.blastbestevalue.tsv
    
    Loading data into table 'blastbestevalue'... done.
    
    Run time: 00:01:15
    Completed ./blastbestevalue.pl
    4:44AM, 15 October 2007
    ****************************************

5. DO BLAST EVALUE ANNOTATION

./blastevalueannotation.pl -d pfalagam

    (...1 hour? Machine froze...)
    
    select count(*) from blastevalueannotation;
    +----------+
    | count(*) |
    +----------+
    |     3301 |
    +----------+


6. BLAST EVALUE DISTRIBUTION

./blastevaluedistribution.pl -d pfalagam




7. VERIFY EVALUE ANNOTATION




8. DO BLAST COVERAGE CALCULATIONS 


9. DO COVERAGE ANNOTATION


10. VERIFY EVALUE ANNOTATION








++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Oct 14 04:55:47 EDT 2007
DOING orthologuestree.pl

NEED ANNOTATION TO DETERMINE HOW TO CLASSIFY THE trainingset EXAMPLES ( 0 OR 1)
CAN USE HIGHEST E-VALUE AND COVERAGE - SO NEED TO DO COVERAGE CALCULATIONS FOR
orthologuesblast.pl HITS:

orthologuescoverage.pl




dlc-genomics:~/FUNNYBASE/bin/orthologues young$ ./orthologuesdtree.pl -d inparanoid_sanPF_ensAG
SELECT COUNT(sequencenumber) AS count, orthologuenumber FROM orthologues GROUP BY orthologuenumber HAVING count >= 10 ORDER BY orthologuenumber
Orthologues:
$VAR1 = [
          '51',
          '411',
          '544',
          '738',
          '787',
          '895',
          '918',
          '1026',
          '1034',
          '1062',
          '1073',
          '1084',
          '1094',
          '1121',
          '1188',
          '1229',
          '1230',
          '1264',
          '1345'
        ];

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Oct 14 03:47:32 EDT 2007
RERAN orthologuesiprscansuperdomain.pl ON inparanoid_sanPF_ensAG

    ...
    1350
    1360
    1370
    TSV file printed:
    
    /Users/young/FUNNYBASE/pipeline/inparanoid_sanPF_ensAG/collection/inparanoid_sanPF_ensAG.orthologuesiprscansuperdomain.tsv
    Dropping table 'orthologuesiprscansuperdomain... done.
    Creating table 'orthologuesiprscansuperdomain' if not exists... done.
    Loading data into table 'orthologuesiprscansuperdomain'...done.
    
    RUN TIME: 00:05:23
    Completed ./orthologuesiprscansuperdomain.pl
    3:36AM, 14 October 2007
    ****************************************



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Oct 13 16:06:23 EDT 2007
FIXED ERROR IN orthologuesiprscan.pl: FILE NUMBER WAS ONE LESS THAN SEQUENCENUMBER (SHOULD BE THE SAME)

./orthologuesiprscansuperdomain.pl -d inparanoid_sanpf_ensag
Doing IPRSCAN DOMAINS for orthologues (total 1375)
0
Orthologue: 1
Sequences: 2

THIS WAS CAUSING AN ERROR IN: 

	./orthologuesiprscansuperdomain.pl -d inparanoid_sanpf_ensag
	Doing IPRSCAN DOMAINS for orthologues (total 1375)
	0
	Orthologue: 1
	Sequence: 2
	
BECAUSE THE MOTIF MATCH START POSITION OVERRAN THE LENGTH OF THE ALIGNMENT HASH, I.E., IT RUNS OFF THE END OF THE SEQUENCE.

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Oct 13 12:06:23 EDT 2007
RAN iprscantrainingset.pl ON inparanoid_sanPF_ensAG WITH NO PROBLEMS

Orthologue number: 1374
Orthologue number: 1375
TSV file printed:

/Users/young/FUNNYBASE/pipeline/inparanoid_sanPF_ensAG/collection/inparanoid_sanPF_ensAG.iprscantrainingset.tsv
Dropping table 'iprscantrainingset... done.
Creating table 'iprscantrainingset' if not exists... done.
Loading data into table 'iprscantrainingset'... done.
Completed ./iprscantrainingset.pl


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Oct 13 03:11:41 EDT 2007
RUN ARRAY BLAST 4 WAYS TO GET ALL COMBINATIONS


sudo ./arrayblast.pl -d unigene -q unigene-rat -t unigene-dog
	
	
	Run time: 00:11:39
	Completed ./arrayblast.pl
	11:33PM, 12 October 2007
	****************************************
		
	98M Oct 12 23:35 /common/pipeline/unigene/blast/unigene-unigene-dog.blast.tsv
	128629 lines

sudo mv /common/pipeline/unigene/blast/unigene-unigene-dog.blast.tsv /common/pipeline/unigene/blast/unigene-rat-unigene-dog.blast.tsv


sudo ./arrayblast.pl -d unigene -q unigene-rat -t unigene-human 

	Run time: 00:24:32
	Completed ./arrayblast.pl
	0:10AM, 13 October 2007
	****************************************
	
	146M Oct 13 00:11 /common/pipeline/unigene/blast/unigene-unigene-human.blast.tsv
	228147 lines

sudo mv /common/pipeline/unigene/blast/unigene-unigene-human.blast.tsv /common/pipeline/unigene/blast/unigene-rat-unigene-human.blast.tsv


sudo ./arrayblast.pl -d unigene -q unigene-rat -t unigene-mouse

	Run time: 00:23:39
	Completed ./arrayblast.pl
	1:04AM, 13 October 2007
	****************************************

	611M Oct 13 01:05 /common/pipeline/unigene/blast/unigene-rat-unigene-mouse.blast.tsv
	TOO MANY LINES TO COUNT WITH lines
	


sudo ./arrayblast.pl -d unigene -q unigene-human -t unigene-mouse,unigene-rat,unigene-dog

	++++ Alignment::Blast::merge_files(self, files, outputfile)
	Cleaning up... done.
	
	Run time: 01:24:10
	Completed ./arrayblast.pl
	3:53AM, 13 October 2007
	****************************************

sudo ./arrayblast.pl -d unigene -q unigene-mouse -t unigene-human,unigene-rat,unigene-dog

sudo ./arrayblast.pl -d unigene -q unigene-dog -t unigene-human,unigene-rat,unigene-mouse
	
	
	
	

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct 10 23:00:51 EDT 2007
NEW UNIGENE ORTHOLOGUES WORKFLOW

-1. USE formatfasta.pl TO FORMAT UNIGENE FASTA FILES TO CONFORM TO STANDARD FASTA 
	
	HEADER FORMAT USED BY THE blastparser.pl UNITARY BLAST PARSER (USES Blast::blast2tsv)


	APPLICATION 		formatfasta
	
	PURPOSE
	
		FORMAT FASTA FILES TO A STANDARDISED HEADER FORMAT COMPATIBLE WITH
		
		A UNITARY PARSER FOR BLAST OUTPUT FILES:

					SPACE HERE	BAR HERE  BAR HERE
						|			|      |
						V			V      V
			>PRIMARY_ID SECONDARY_ID|SOURCE|ANNOTATION
			
			E.G.,
			
			>BC067218 45501306|Homo sapiens N-acetyltransferase 2 (arylamine N-acetyltransferase)

		
		WU-BLAST WILL OUTPUT THESE FIELDS IN ITS XML OUTPUT AS FOLLOWS:
				
		<BlastOutput_query-ID>NM_001817</BlastOutput_query-ID>
		
		<BlastOutput_query-def>71143131|Homo sapiens carcinoembryonic antigen-related cell adhesion molecule 4 (CEACAM4)</BlastOutput_query-def>

		... WHICH WILL BE PARSED BY THE UNITARY PARSER INTO THE queryid, queryname AND queryannotation FIELDS OF THE OUTPUT
		
		
	INPUT
	
		1. INPUT FASTA FILE
		
		2. REGEXES FOR ID (REQUIRED), NAME (OPTIONAL) AND ANNOTATION (OPTIONAL)
		
	OUTPUT
	
		1. <INPUTFILE>.reformat FILE
		
	USAGE
	
	./formatfasta.pl <-f inputfile> <-i id_regex> [-n name_regex] [-a annotation_regex] [-h]
	
	-f inputfile         :    /full/path/to/inputfile
	-i id_regex          :    regular expression to parse primary id from fasta header 
	-n name_regex        :    regular expression to parse secondary id from fasta header 
	-a annotation_regex  :    regular expression to parse annotation from fasta header 
	-h help              :    print help message
	
	EXAMPLE:

./reformat.fasta.pl -t 	yeast -f /common/data/yeast.fasta -o /common/data/yeast

./formatfasta.pl -f /common/data/unigene-hum -i "\\/gb=(\\w+)" -n "\\/gi=(\\w+)" -a "^gnl\|[^\|]+\|.+?#[^\s)]+\s+([^,]+)"

./formatfasta.pl -f /common/data/unigene-human -i "\\/gb=(\\w+)" -n "\\/gi=(\\w+)" -a "^gnl\|[^\|]+\|.+?#[^\s)]+\s+([^,]+)"

./formatfasta.pl -f /common/data/unigene-mouse -i "\\/gb=(\\w+)" -n "\\/gi=(\\w+)" -a "^gnl\|[^\|]+\|.+?#[^\s)]+\s+([^,]+)"

./formatfasta.pl -f /common/data/unigene-rat -i "\\/gb=(\\w+)" -n "\\/gi=(\\w+)" -a "^gnl\|[^\|]+\|.+?#[^\s)]+\s+([^,]+)"

./formatfasta.pl -f /common/data/unigene-dog -i "\\/gb=(\\w+)" -n "\\/gi=(\\w+)" -a "^gnl\|[^\|]+\|.+?#[^\s)]+\s+([^,]+)"



0. INDEX UNIGENE IDS VERSUS ACCESSIONS

	NAME: unigeneindexer.pl
	
	PURPOSE:    INDEX UNIGENE IDS VERSUS ACCESSIONS (CLUSTER IDS) 
	
	INPUT:  1. UNIGENE .data FILE (E.G., Hs.data) (SEE AT BOTTOM FOR FORMAT OF .data FILE)
		   
	OUTPUT:
			1. PRINT TO .TSV FILE
			2. LOAD .TSV FILE INTO unigeneindexes TABLE
	
	DATE: Sat 28th Oct, 2006
	
	USAGE:
	
		unigeneindexer.pl <-i input_file> <-d database_name> [-v version] [-s record_separator] [-h] 
	
			-i input_file         : input_file containing records separated by 'record_separator' (below)
			-d database_name      : name of sequence database (e.g., "human-unigene")
			-v version            : database version (e.g., "Build #169 Homo sapiens")
			-h help               : print this help message
	
		< option > denotes REQUIRED argument
		[ option ] denotes OPTIONAL argument
		
	EXAMPLES:
./unigeneindexer.pl -i /Users/young/FUNNYBASE/databases/unigene/Hs.data -d unigene-human.data 
./unigeneindexer.pl -i /Users/young/FUNNYBASE/databases/unigene/Mm.data -d unigene-mouse.data 
./unigeneindexer.pl -i /Users/young/FUNNYBASE/databases/unigene/Rn.data -d unigene-rat.data 
./unigeneindexer.pl -i /Users/young/FUNNYBASE/databases/unigene/Cf.data -d unigene-dog.data 
	
	
NOTE: USAGE IS THE SAME AS indexer.pl:

LOCAL:

./indexer.pl -i $rootdir/databases/unigene/Hs.seq.uniq -d unigene-human 
./indexer.pl -i $rootdir/databases/unigene/Cfa.seq.uniq -d unigene-dog 
./indexer.pl -i $rootdir/databases/unigene/Mm.seq.uniq -d unigene-mouse 
./indexer.pl -i $rootdir/databases/unigene/Rn.seq.uniq -d unigene-rat

ON gems:
sudo ./indexer.pl -i /common/data/unigene-human -d unigene-human -v "Build #196 Homo sapiens"
sudo ./indexer.pl -i /common/data/unigene-dog -d unigene-dog 
sudo ./indexer.pl -i /common/data/unigene-mouse -d unigene-mouse 
	

1. PICK SEED SEQUENCES

unigeneseed.pl -d unigene2

(WAS unigene.top100.pl)
    
    INPUT
    
    /Users/young/FUNNYBASE/databases/unigene/Hs.data.annotation
    
    OUTPUT
    
    /Users/young/FUNNYBASE/databases/unigene/Hs.top100.seq
    /Users/young/FUNNYBASE/databases/unigene/Hs.top100.data
    /Users/young/FUNNYBASE/databases/unigene/Hs.top100.seqdata


2. CREATE FASTA FILE WITH ANNOTATION

unigeneseedfasta.pl -d unigene2

(WAS unigene.top100.fasta.pl)

    INPUTFILE
    
    /Users/young/FUNNYBASE/databases/unigene/Hs.top100.seq
    /Users/young/FUNNYBASE/databases/unigene/Hs.seq.uniq
    
    USES
    
    unigene/mysqlid2record.pl -i $id -f $seqfile -d unigene-human
    
    OUTPUTFILE
    
    /Users/young/FUNNYBASE/databases/unigene/Hs.top100.fasta

	****
	
		1. CHANGED INPUT FILE TO
		
			$rootdir/pipeline/$database/data/$database.seed.seq
	
		2. CHANGED OUTPUT FILE TO
	
			1. SEED FILE:
		
			<ROOTDIR>/pipeline/<DATABASE>/data/<DATABASE>.seed.fasta

		3. CHANGED OUTPUT FASTA FORMAT FROM:
		
		>CR749296 (S21592489) Chymotrypsin C (caldecrin)

			TO:
			
		>CR749296 S21592489|Chymotrypsin C (caldecrin)


	****


	TEMPORARILY:
	
	cp /Users/young/FUNNYBASE/databases/unigene/Hs.top100.fasta /Users/young/FUNNYBASE/pipeline/unigene/data/unigene.seed.fasta



3. DO EXTERNAL BLAST AGAINST OTHER UNIGENES

	( DEFAULT DATABASES: unigene-dog,unigene-human,unigene-mouse,unigene-rat)

arrayblast.pl

	
	NAME		arrayblast.pl

	PURPOSE
	
		1. BLAST THE SEED DATABASE AGAINST USER-DEFINED OR DEFAULT
		
			TARGET DATABASES USING sge ARRAY JOBS 
	
		2. MERGE THE ARRAY JOB OUTPUTS INTO ONE .TSV FILE
		
	USAGE
	
		./arrayblast.pl <-d database> <-t targets> [-e evalue_cutoff] [-h]
		
	INPUT

		1. SEED FILE:
		
			<ROOTDIR>/pipeline/<DATABASE>/data/<DATABASE>.seed.fasta
	
			E.G.,
			
			/Users/young/FUNNYBASE/pipeline/unigene/data/unigene.seed.fasta

	OUTPUT
	
		1. REMOTE SEED FILE:
		
			<REMOTE_ROOTDIR>/pipeline/<DATABASE>/data/<DATABASE>.seed.fasta
	
			E.G.,
			
			/common/pipeline/unigene/data/unigene.seed.fasta

		2. BLAST OUTPUT TSV FILEs (ONE PER TARGET DATABASE):
		
			<REMOTE_ROOTDIR>/pipeline/<DATABASE>/blast/<DATABASE>.<TARGET>.blast.tsv
	

   EXAMPLE
   
sudo ./arrayblast.pl -d unigene -q unigene-human -t unigene-mouse,unigene-rat,unigene-dog




*** SEE FILE:

external/Hs_top100.hits.tsv


4.	LOAD THE .TSV BLAST OUTPUT INTO MYSQL TABLE (BASED ON externalblast, NAMED AFTER EACH TARGET)


	NAME		arrayblastloaddata.pl
	
	PURPOSE LOAD THE .TSV BLAST OUTPUT INTO THE MYSQL TABLE BASED externalblast
				BUT NAMED AFTER THE query_database
	
	USAGE
	
		This programme loads a .TSV file of BLAST hit information into a mysql table with the same
		name as the query sequence database.
		
		USAGE
	
		$0 <-d database_name> <-t target_databases> [-h] 
	
		 -d database_name      database of input sequence
		 -t target_databases   (comma-separated) list of species to compare
		 -h help               print this help message
	
	EXAMPLE
	
./arrayblastloaddata.pl -d unigene -t unigene-dog,unigene-mouse,unigene-rat

./arrayblastloaddata.pl -d unigene-human -t unigene-mouse



5. DETERMINE HOMOLOGY RANKING OF HITS FOR EACH SEED SEQUENCE BASED ON THE 'RECIPROCAL BEST HITS' METHOD 

	NAME: seedblastranking.pl
	
	PURPOSE:
	
		DETERMINE ORTHOLOGUES BY THE 'RECIPROCAL BEST HITS' METHOD 
	
	INPUT:
		1. FOR EACH SPECIES-SPECIES ORTHOLOGUE SEARCH, REQUIRE BOTH
			COMPLETE SPECIES-VS-SPECIES BLAST RESULTS (FOR COMPLETENESS,
			I.E., IN CASE OF DIRECTIONAL BIAS IN BLAST SEARCH)

		2. BLAST RESULTS IN externalblast TABLE (SEE BOTTOM OF SCRIPT)
		
	OUTPUT:
		1. COMPARISON RESULTS STORED IN orthologues TABLE
		2. LIST OF ORTHOLOGUE PAIRS - RECIPROCAL 1st HITS
		3. LIST OF PARALOGUE PAIRS - NON-RECIPROCAL 1st HITS
		4. LIST OF HOMOLOGUE PAIRS - RECIPROCAL 2nd, 3rd, ... 5th HITS
	
	USAGE:
	
	
	EXAMPLE:
	
	./orthologues.pl -i Hs_top100.hits.ids.tsv -d unigene-human -t unigene-rat
	
	CREATE .TSV FILE FOR INPUT INTO orthologues2fasta:

	select distinct querysource, queryid, queryname, queryannotation, targetsource, targetid, targetname, targetannotation, hitranking, hitevalueexp, hitevaluedec from orthologues order by queryid, targetsource, hitranking,targetid into outfile '/private/tmp/orthologues.tsv';


6. PRINT SGE ARRAY JOB FASTA SEQUENCE INPUT FILES FOR ALL OF THE GENES IN THE orthologues.tsv FILE

unigene/orthologues2fasta.pl

	NAME: orthologues2fasta.pl
	
	PURPOSE:
	
		GET THE FASTA SEQUENCES FOR ALL OF THE GENES IN THE orthologues.tsv FILE
	
	INPUT:

		1. orthologues.tsv CREATED BY orthologues.pl		

		2. INDEX OF RESEQ ACCESSED BY
		
			./mysqlid2record.pl  -i $id -f $$sequencefiles{$db} -d $db";
					
	USAGE:
	
./orthologues2fasta.pl


7. RUN InterProScan ON ORTHOLOGUES IN .fastafile

unigene/orthologuesiprscan.pl


    NAME: orthologuesiprscan.pl
    
    PURPOSE:
    
        RUN interproscan ON ALL ORTHOLOGUES IN EACH MULIT-FASTA FILE
    
    INPUT:
        1. MULTI-FASTA FILE CONTAINING ORTHOLOGUES (E.G., DETERMINED BY RECIPROCAL BEST HITS METHOD)
        
    OUTPUT:
        1. IPRSCAN RESULTS IN XML FORMAT
        2. LOAD RESULTS INTO TABLE orthologuesiprscan
    
    USAGE:
    
    EXAMPLE:
    
    sudo ./orthologuesiprscan.pl -t 20 -p hmmpfam -i orthologues.fasta -o orthologues.out
    
    sudo ./orthologuesiprscan.pl -t 20 -p hmmpanther -i orthologues.fasta -o orthologues.out

    REPORT:
        
    /Users/young/FUNNYBASE/apps/iprscan/tmp/20060721/iprscan-20060721-15282589/iprscan-20060721-15282589.report


8. **** CORRECT THIS STEP *** - REMOVE orthologues/orthologues.pl

COLLECT ONLY THOSE ORTHOLOGUES THAT HAVE IPRSCAN HITS AND PUT IN orthologues table

orthologues/orthologues.pl

	APPLICATION orthologues
	
	PURPOSE
	
		1. COLLECT ONLY THOSE ORTHOLOGUES THAT HAVE IPRSCAN HITS
		
		2. PARSE THE RAW ORTHOLOGUES DATA FILES INTO A FASTA INPUT FILE FOR
		
		THE GENERIC 'orthologues' APPLICATION, WHICH LOADS THE DATA INTO
		
		THE 'orthologues' MYSQL TABLE
	
	INPUT
	
		1. ORTHOLOGUE DATABASE NAME

		2. RAW DATA FILES IN <base_directory>/data DIRECTORY

	OUTPUT

		1. FASTA FILE IN <base_directory>/collection DIRECTORY
		
	USAGE
	
		./orthologues.pl <-d database_name> [-c config_file] [-h]

		-d database_name     : name of database (OVERRIDES database name in config_file)
		-c config_file       : /full/path/to/configuration_file (see example below)
		-h                   : print this help message

	
	EXAMPLES
	
./orthologues.pl -d inparanoid_sanPF_ensAG


9. LOAD IPRSCAN HITS INTO orthologuesiprscan TABLE

orthologues/orthologuesiprscan.pl

	APPLICATION		orthologuesiprscan
	
	PURPOSE
	
		1. GET THE ABSOLUTE POSITIONS ON THE ORIGINAL FASTA SEQUENCE OF THE
		
		IPRSCAN HITS (AGAINST THE ORFS OF THE ORIGINAL SEQUENCE)
		
		2. PRINT TO .TSV FILE

		3. LOAD INTO orthologuesiprscan TABLE
		
	INPUT
	
		1. iprscan OUTPUT FILES IN <database>/iprscan DIRECTORY
		
		2. orthologuesorf TABLE WITH ORF frame, number, start/stop AND length

	OUTPUT
	
		1. <database>.orthologuesiprscan.tsv FILE
		
		2. LOAD .TSV FILE INTO orthologuesiprscan TABLE

	USAGE
	
./orthologuesiprscan.pl -d unigene


10. 



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct 10 14:46:31 EDT 2007
RERAN swissprotiprscan WITH CORRECT id AND accession FIELDS

(ALSO ADJUSTED FIELDS IN swissprotiprscandatabase.pl ACCORDINGLY)

 ./swissprotiprscan.pl -t swissprotiprscan -f /Users/young/FUNNYBASE/pipeline/indexer/data/match.xml

    ...
    Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotiprscan.282.tsv ... done.
    Finished loading data into table
    Updating fulltext... done.
    
    Run time: 02:40:23
    Completed ./swissprotiprscan.pl
    11:58PM, 9 October 2007
    ****************************************
        
desc swissprotiprscan;
+--------------+--------------+------+-----+---------+-------+
| Field        | Type         | Null | Key | Default | Extra |
+--------------+--------------+------+-----+---------+-------+
| accession    | varchar(20)  |      | PRI |         |       |
| id           | varchar(20)  |      | PRI |         |       |
| targetsource | varchar(20)  |      | PRI |         |       |
| targetid     | varchar(20)  |      | PRI |         |       |
| targetname   | varchar(200) |      | PRI |         |       |
| interproid   | varchar(10)  |      | PRI |         |       |
| interproname | varchar(200) |      |     |         |       |
| interprotype | varchar(20)  |      |     |         |       |
| hitscoredec  | decimal(4,2) |      | PRI | 0.00    |       |
| hitscoreexp  | smallint(4)  |      | PRI | 0       |       |
| hitstatus    | char(1)      |      |     |         |       |
| querystart   | int(8)       |      | PRI | 0       |       |
| querystop    | int(8)       |      | PRI | 0       |       |
| childlist    | varchar(255) |      |     |         |       |
| foundinlist  | varchar(255) |      |     |         |       |
| golist       | text         | YES  |     | NULL    |       |
+--------------+--------------+------+-----+---------+-------+
16 rows in set (0.00 sec)



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Oct  9 15:37:00 EDT 2007
CREATED iprscantrainingset.pl IN orthologues

	APPLICATION		iprscantrainingset
	
	PURPOSE
  
		GET OTHER SEQUENCES THAT SHARE THE SAME IPRSCAN HITS.
		
		FOR EVERY OTHOLOGUE SEQUENCE:
		
		1. GET ALL IPRSCAN HITS FOR THE SEQUENCE
		
		2. FOR ALL IPRSCAN HITS:
		
			2.1 GET THE SWISSPROT ACCESSIONS OF SEQUENCES IN swissprot<iprscan>
			
			DATABASE THAT HAVE THE SAME IPRSCAN HIT
			
			2.2. GET ALL OF THE IPRSCAN HITS FOR THESE NEW SEQUENCES FROM
			
			THE swissprotiprscan TABLE (CONTAINS ALL RECORDS IN match.xml)
		
		4. LOAD INTO iprscantrainingset
		
	INPUT
	
		1. orthologuesiprscan TABLE

		2. swissprotiprscan	TABLE
		
	NOTES
	
		THE match.xml FILE DOES NOT CONTAIN 'SEG' HITS
		
	OUTPUT

		1. iprscantrainingset TABLE

	USAGE
	
	./iprscantrainingset.pl <-d database>;
	
	-d database           :  name of database
	-h help               : print help info

	EXAMPLES:
	
		TEST EXAMPLE

./iprscantrainingset.pl -d unigene 

./iprscantrainingset.pl -d inparanoid_sanPF_ensAG


IMPLEMENTATION DETAILS:




trainingset.pl ACCESSES THE SWISSPROT MOTIF DATABASE TABLES, SUCH AS swissprotgene3d:


	Orthologue number: 1374
	Orthologue number: 1375
	TSV file printed:
	
	/Users/young/FUNNYBASE/pipeline/inparanoid_sanPF_ensAG/collection/inparanoid_sanPF_ensAG.iprscantrainingset.tsv
	Dropping table 'iprscantrainingset... done.
	Creating table 'iprscantrainingset' if not exists... done.
	Loading data into table 'iprscantrainingset'... done.
	Completed ./iprscantrainingset.pl




CREATE TABLE `swissprotgene3d` (
    `accession` varchar(20) NOT NULL default '',
    `id` varchar(20) NOT NULL default '',
    `targetsource` varchar(20) NOT NULL default '',
    `targetid` varchar(20) NOT NULL default '',
    `targetname` varchar(200) NOT NULL default '',
    `interproid` varchar(10) NOT NULL default '',
    `interproname` varchar(200) NOT NULL default '',
    `interprotype` varchar(20) NOT NULL default '',
    `hitscoredec` decimal(4,2) NOT NULL default '0.00',
    `hitscoreexp` smallint(4) NOT NULL default '0',
    `hitstatus` char(1) NOT NULL default '',
    `querystart` int(8) NOT NULL default '0',
    `querystop` int(8) NOT NULL default '0',
    `childlist` varchar(255) NOT NULL default '',
    `foundinlist` varchar(255) NOT NULL default '',
    `golist` text,
    `frame` int(1) NOT NULL default '0',
    `orfnumber` int(4) NOT NULL default '0',
    PRIMARY KEY  (`accession`,`id`,`targetsource`,`targetid`,`targetname`,`interproid`,`hitscoredec`,`hitscoreexp`,`querystart`,`querystop`,`frame`,`orfnumber`),

    FULLTEXT KEY `targetid` (`accession`,`targetid`)
) 


SWISSPROTGENE3D HAS 818,000 ENTRIES COMPARED TO 3,570,000 ENTRIES IN SWISSPROTPFAM:

mysql> select count(*) from swissprotgene3d;
+----------+
| count(*) |
+----------+
|   818005 |
+----------+
1 row in set (0.00 sec)

mysql> select count(*) from swissprotpfam;
+----------+
| count(*) |
+----------+
|  3567921 |
+----------+


BUT QUERY IS VERY SLOW:

SELECT accession
FROM swissprotGENE3D
WHERE MATCH(accession,id, targetid)
AGAINST('G3DSA:2.80.10.50')

| Q0R8L0    |
| Q845D7    |
| Q845D3    |
| Q0R8H7    |
+-----------+
201363 rows in set (30.75 sec)


SOLUTION CREATE A FULLTEXT KEY FOR targetid ONLY:

BEFORE:

CREATE TABLE `swissprotgene3d` (
  `accession` varchar(20) NOT NULL default '',
  `id` varchar(20) NOT NULL default '',
  `targetid` varchar(20) NOT NULL default '',
  PRIMARY KEY  (`accession`,`id`,`targetid`),
  FULLTEXT KEY `id` (`id`,`accession`,`targetid`)
)

ALTER TABLE swissprotgene3d ADD FULLTEXT targetid (targetid);
Query OK, 736885 rows affected (2 min 42.39 sec)
Records: 736885  Duplicates: 0  Warnings: 0

AFTER:

CREATE TABLE `swissprotgene3d` (
  `accession` varchar(20) NOT NULL default '',
  `id` varchar(20) NOT NULL default '',
  `targetid` varchar(20) NOT NULL default '',
  PRIMARY KEY  (`accession`,`id`,`targetid`),
  FULLTEXT KEY `id` (`id`,`accession`,`targetid`),
  FULLTEXT KEY `targetid` (`targetid`)
) 


REDUCED QUERY TIME FROM 30 SECONDS TO 19 SECONDS:

SELECT accession
FROM swissprotGENE3D
WHERE MATCH(targetid)
AGAINST('G3DSA:2.80.10.50');


| Q845D7    |
| Q845D3    |
| Q0R8H7    |
+-----------+
201363 rows in set (18.91 sec)


REFSEQ AND SWISSPROT ID/ACCESSION FIELDS ARE REVERSED

select * from refseqDatabase changed
mysql> select * from refseqhuman limit 1\G
*************************** 1. row ***************************
       id: NP_006298
accession: 5454086
     name: sushi-repeat-containing protein, X-linked
 sequence: MGSPAHRPALLLLLPPLLLLLLLRVPPSRSFPGSGDSPLEDDEVGYSHPRYKDTPWCSPIKVKYGDVYCRAPQGGYYKTALGTRCDIRCQKGYELHGSSLLICQSNKRWSDKVICKQKRCPTLAMPANGGFKCVDGAYFNSRCEYYCSPGYTLKGERTVTCMDNKAWSGRPASCVDMEPPRIKCPSVKERIAEPNKLTVRVSWETPEGRDTADGILTDVILKGLPPGSNFPEGDHKIQYTVYDRAENKGTCKFRVKVRVKRCGKLNAPENGYMKCSSDGDNYGATCEFSCIGGYELQGSPARVCQSNLAWSGTEPTCAAMNVNVGVRTAAALLDQFYEKRRLLIVSTPTARNLLYRLQLGMLQQAQCGLDLRHITVVELVGVFPTLIGRIGAKIMPPALALQLRLLLRIPLYSFSMVLVDKHGMDKERYVSLVMPVALFNLIDTFPLRKEEMVLQAEMSQTCNT
1 row in set (0.03 sec)


mysql> select * from swissprotsequence limit 1\G
*************************** 1. row ***************************
       id: 104K_THEPA
accession: P15711
     name: 104 kDa microneme/rhoptry antigen precursor - Theileria parva
 sequence: MKFLILLFNILCLFPVLAADNHGVGPQGASGVDPITFDINSNQTGPAFLTAVEMAGVKYLQVQHGSNVNIHRLVEGNVVIWENASTPLYTGAIVTNNDGPYMAYVEVLGDPNLQFFIKSGDAWVTLSEHEYLAKLQEIRQAVHIESVFSLNMAFQLENNKYEVETHAKNGANMVTFIPRNGHICKMVYHKNVRIYKATGNDTVTSVVGFFRGLRLLLINVFSIDDNGMMSNRYFQHVDDKYVPISQKNYETGIVKLKDYKHAYHPVDLDIKDIDYTMFHLADATYHEPCFKIIPNTGFCITKLFDGDQVLYESFNPLIHCINEVHIYDRNNGSIICLHLNYSPPSYKAYLVLKDTGWEATTHPLLEEKIEELQDQRACELDVNFISDKDLYVAALTNADLNYTMVTPRPHRDVIRVSDGSEVLWYYEGLDNFLVCAWIYVSDGVASLVHLRIKDRIPANNDIYVLKGDLYWTRITKIQFTQEIKRLVKKSKKKLAPITEEDSDKHDEPPEGPGASGLPPKAPGDKEGSEGHKGPSKGSDSSKEGKKPGSGKKPGPAREHKPSKIPTLSKKPSGPKDPKHPRDPKEPRKSKSPRTASPTRRPSPKLPQLSKLPKSTSPRSPPPPTRPSSPERPEGTKIIKTSKPPSPKPPFDPSFKEKFYDDYSKAASRSKETKTTVVLDESFESILKETLPETPGTPFTTPRPVPPKRPRTPESPFEPPKDPDSPSTSPSEFFTPPESKRTRFHETPADTPLPDVTAELFKEPDVTAETKSPDEAMKRPRSPSEYEDTSPGDYPSLPMKRHRLERLRLTTTEMETDPGRMAKDASGKPVKLKRSKSFDDLTTVELAPEPKASRIVVDDEGTEADDEETHPPEERQKTEVRRRRPPKKPSKSPRPSKPKKPKKPDSAYIPSILAILVVSLIVGIL>
1 row in set (0.04 sec)


BUT collectionblast RECORDS ARE IN CORRECT ORDER:

select * from collectionblast where targetsource='swissprot' limit 1\G
*************************** 1. row ***************************
       collectionid: 11972
collectionaccession: 1
  collectionversion: 0.00
       targetsource: swissprot
      targetversion: 
         targetname: RGS7_MOUSE
           targetid: O54829
   targetannotation: Regulator of G-protein signaling 7 (RGS7)
      blastdatetime: 2007-06-05 18:16:31
       evaluecutoff: 1e-05
       hitevaluedec: 5.73
       hitevalueexp: -6
          hspnumber: 1
           hspscore: 118
          hsplength: 51
         querystart: 405
          querystop: 557
         queryframe: 3
        targetstart: 320
         targetstop: 370
           identity: 41
      querysequence: KKPSREQCARWQTSLENVLDDPKGAAHFMQFLVGEYCSENYEFWKEIKQLK
     targetsequence: KEPSQQRVKRWGFGMDEALKDPVGREQFLKFLESEFSSENLRFWLAVEDLK
  alignmentsequence: K+PS+++  RW   ++  L DP G   F++FL  E+ SEN  FW  ++ LK
      queryhitstart: 0
       queryhitstop: 0
     targethitstart: 320
      targethitstop: 370
1 row in set (7.46 sec)

mysql> select * from collectionblast where targetsource='refseq-human' limit 1\G
*************************** 1. row ***************************
       collectionid: 11704
collectionaccession: 1
  collectionversion: 0.00
       targetsource: refseq-human
      targetversion: 
         targetname: 51493371
           targetid: XP_496301
   targetannotation: PREDICTED: similar to zinc finger protein 91 (HPF7, HTF10) [Homo sapiens]
      blastdatetime: 2007-06-12 23:11:43
       evaluecutoff: 1e-05
       hitevaluedec: 2.04
       hitevalueexp: -18
          hspnumber: 27
           hspscore: 182
          hsplength: 90
         querystart: 46
          querystop: 315
         queryframe: 1
        targetstart: 585
         targetstop: 674
           identity: 44
      querysequence: SYLRRHMGIHTGEKPFCCDACGRRFSWKSQLKRHMGDHMEEKPLVCDACGERFTDKSDLNTHMRIHVEEKPFGSDACGEILSRKIDLNSH
     targetsequence: SALRKHKVIHTREKLYKCEECGKAFNNSSILAKHKIIHTGKKPYKCEECGKAFRQSSHLTRHKAIHTGEKPYKCEECGKAFSHFSALRRH
  alignmentsequence: S LR+H  IHT EK + C+ CG+ F+  S L +H   H  +KP  C+ CG+ F   S L  H  IH  EKP+  + CG+  S    L  H
      queryhitstart: 0
       queryhitstop: 0
     targethitstart: 0
      targethitstop: 0
1 row in set (3 min 2.64 sec)


ALTHOUGH REFSEQ genbank ids ARE UNIQUE:


select count(id) as count, accession from refseqdog group by accession having count > 1; 
Empty set (1.98 sec)

mysql> select count(accession) as count, id from refseqhuman group by id having count > 1; 
Empty set (0.80 sec)


SOLUTION:

REDO refseq.pl SO THAT accession IS REFSET ID AND id IS GENBANK ID:





++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Oct  9 13:21:33 EDT 2007
IMPROVE SPEED OF swissprotpfam LOOKUP BY FULLTEXT INDEX ON TARGET ID ONLY


RETRIEVE IPRSCANS FOR SWISSPROT SEQUENCE FROM swissprotiprscan USING SWISSPROT ACCESSION
========================================================================================

CREATE TABLE `swissprotiprscan` (
  `id` varchar(20) NOT NULL default '',
  `name` varchar(20) NOT NULL default '',
  `targetsource` varchar(20) NOT NULL default '',
  `targetid` varchar(10) NOT NULL default '',
  `targetname` varchar(200) NOT NULL default '',
  `interproid` varchar(10) NOT NULL default '',
  `interproname` varchar(200) NOT NULL default '',
  `interprotype` varchar(20) NOT NULL default '',
  `hitscoredec` decimal(4,2) NOT NULL default '0.00',
  `hitscoreexp` smallint(4) NOT NULL default '0',
  `hitstatus` char(1) NOT NULL default '',
  `querystart` int(8) NOT NULL default '0',
  `querystop` int(8) NOT NULL default '0',
  `childlist` varchar(255) NOT NULL default '',
  `foundinlist` varchar(255) NOT NULL default '',
  `golist` text,
  `frame` int(1) NOT NULL default '0',
  `number` int(4) NOT NULL default '0',
  PRIMARY KEY  (`id`,`name`,`targetsource`,`targetid`,`targetname`,`interproid`,`hitscoredec`,`hitscoreexp`,`querystart`,`querystop`,`frame`,`number`),
  FULLTEXT KEY `targetid` (`targetid`)
) 


SELECT *
FROM swissprotiprscan
WHERE MATCH(targetid)
AGAINST('PF05517')\G

...
*************************** 52. row ***************************
          id: Q2VPM9
        name: Q2VPM9_XENLA
targetsource: PFAM
    targetid: PF05517
  targetname: p25-alpha
  interproid: IPR008907
interproname: P25-alpha
interprotype: Family
 hitscoredec: 1.19
 hitscoreexp: -101
   hitstatus: T
  querystart: 9
   querystop: 173
   childlist: 
 foundinlist: 
      golist: 
       frame: 0
      number: 0
*************************** 53. row ***************************
          id: O94811
        name: P25A_HUMAN
targetsource: PFAM
    targetid: PF05517
  targetname: p25-alpha
  interproid: IPR008907
interproname: P25-alpha
interprotype: Family
 hitscoredec: 4.30
 hitscoreexp: -121
   hitstatus: T
  querystart: 50
   querystop: 214
   childlist: 
 foundinlist: 
      golist: 
       frame: 0
      number: 0
53 rows in set (0.39 sec)




RETRIEVE SWISSPROT SEQUENCE, ETC. OR NAME FROM swissprotsequences USING SWISSPROT ACCESSION
===========================================================================================


CREATE TABLE `swissprotsequence` (
	`id` varchar(20) NOT NULL default '',
	`accession` varchar(20) NOT NULL default '',
	`name` varchar(255) default NULL,
	`sequence` text,
	PRIMARY KEY  (`id`,`accession`),
	FULLTEXT KEY `id` (`id`,`accession`)
);


SELECT *
FROM swissprotsequence
WHERE MATCH(id, accession)
AGAINST('Q9VV43')\G


*************************** 1. row ***************************
       id: Y4893_DROME
accession: Q9VV43
     name: TPPP family protein CG4893 - Drosophila melanogaster (Fruit fly)
 sequence: MSEVAAANGSPSPAPTPEVPATELAQLALEDEPKVSFSDQFKAFSKFGDSKSDGKLITLSQSDKWMKQAKVIDKKITTTDTGIHFKKFKAMKISLSDYNKFLDDLAKTKKVELSEIKQKLASCGAPGVVSVSAGKAAAAVDRLTDTSKYTGSHKERFDASGKGKGIAGRRNVVDGSGYVSGYQHKDTYDNAH>
1 row in set (0.00 sec)

select * from swissprotsequence where accession  = 'Q9VV43'\G
1 row in set (3.21 sec) 	-	1st try
1 row in set (0.49 sec)		-	2nd try


SELECT name
FROM swissprotsequence
WHERE MATCH(id, accession)
AGAINST('Q9VV43')\G

*************************** 1. row ***************************
name: TPPP family protein CG4893 - Drosophila melanogaster (Fruit fly)
1 row in set (0.00 sec)


RETRIEVE SWISSPROT IDS OF SEQUENCES CONTAINING A PARTICULAR PFAM ID
===================================================================


CREATE TABLE `swissprotpfam` (
  `accession` varchar(20) NOT NULL default '',
  `id` varchar(20) NOT NULL default '',
  `targetid` varchar(20) NOT NULL default '',
  PRIMARY KEY  (`accession`,`id`,`targetid`),
  FULLTEXT KEY `id` (`id`,`accession`,`targetid`)
)

ZERO SECONDS RETRIEVING ONLY ACCESSION:

	SELECT accession
	FROM swissprotpfam
	WHERE MATCH(id, accession, targetid)
	AGAINST('PF05517');
	
COMPARED TO:


SELECT *
FROM swissprotpfam
WHERE MATCH(id, accession, targetid)
AGAINST('PF05517');

+-----------+--------------+----------+
| accession | id           | targetid |
+-----------+--------------+----------+
| Q9VV43    | Y4893_DROME  | PF05517  |
| Q5PPN5    | Q5PPN5_RAT   | PF05517  |
| Q5DEP2    | Q5DEP2_SCHJA | PF05517  |
| Q5CHX6    | Q5CHX6_CRYHO | PF05517  |
| Q5BZ16    | Q5BZ16_SCHJA | PF05517  |
| Q5BTA2    | Q5BTA2_SCHJA | PF05517  |
| Q583A1    | Q583A1_9TRYP | PF05517  |
| Q4Z299    | Q4Z299_PLABE | PF05517  |
| Q4Y3R4    | Q4Y3R4_PLACH | PF05517  |
| Q4UIC0    | Q4UIC0_THEAN | PF05517  |
| Q4UA39    | Q4UA39_THEAN | PF05517  |
| Q4SVU9    | Q4SVU9_TETNG | PF05517  |
| Q5TR29    | Q5TR29_ANOGA | PF05517  |
| Q61EN3    | Q61EN3_CAEBR | PF05517  |
| Q9CRB6    | CG38_MOUSE   | PF05517  |
| Q9BW30    | CG38_HUMAN   | PF05517  |
| Q8T935    | Q8T935_TETTH | PF05517  |
| Q8T931    | Q8T931_TETTH | PF05517  |
| Q8I557    | Q8I557_PLAF7 | PF05517  |
| Q86E15    | Q86E15_SCHJA | PF05517  |
| Q7TQD2    | P25A_MOUSE   | PF05517  |
| Q7RD81    | Q7RD81_PLAYO | PF05517  |
| Q7R2L7    | Q7R2L7_GIALA | PF05517  |
| Q7PT09    | Q7PT09_ANOGA | PF05517  |
| Q6P604    | Q6P604_BRARE | PF05517  |
| Q4RI11    | Q4RI11_TETNG | PF05517  |
| Q4R3A0    | Q4R3A0_MACFA | PF05517  |
| Q4Q350    | Q4Q350_LEIMA | PF05517  |
| Q244Y3    | Q244Y3_TETTH | PF05517  |
| Q244Y1    | Q244Y1_TETTH | PF05517  |
| Q22LY5    | Q22LY5_TETTH | PF05517  |
| Q22LY4    | Q22LY4_TETTH | PF05517  |
| Q22LY3    | Q22LY3_TETTH | PF05517  |
| Q1JPR8    | Q1JPR8_MOUSE | PF05517  |
| Q16YE8    | Q16YE8_AEDAE | PF05517  |
| Q0P5Y3    | Q0P5Y3_MOUSE | PF05517  |
| Q01BN1    | Q01BN1_OSTTA | PF05517  |
| P91127    | YBYK_CAEEL   | PF05517  |
| P59282    | P25B_HUMAN   | PF05517  |
| Q27957    | P25A_BOVIN   | PF05517  |
| Q29EJ5    | Q29EJ5_DROPS | PF05517  |
| Q4Q349    | Q4Q349_LEIMA | PF05517  |
| Q4N792    | Q4N792_THEPA | PF05517  |
| Q4N2S7    | Q4N2S7_THEPA | PF05517  |
| Q4L233    | Q4L233_HUMAN | PF05517  |
| Q4DIP8    | Q4DIP8_TRYCR | PF05517  |
| Q4CVJ1    | Q4CVJ1_TRYCR | PF05517  |
| Q3ZCC8    | Q3ZCC8_BOVIN | PF05517  |
| Q3URG1    | Q3URG1_MOUSE | PF05517  |
| Q3T077    | Q3T077_BOVIN | PF05517  |
| Q2VYF3    | Q2VYF3_HUMAN | PF05517  |
| Q2VPM9    | Q2VPM9_XENLA | PF05517  |
| O94811    | P25A_HUMAN   | PF05517  |
+-----------+--------------+----------+
53 rows in set (0.30 sec)

SHORTEN TO 0.02 SECS BY RETRIEVING ONLY ACCESSION AND ID:

SELECT accession, id
FROM swissprotpfam
WHERE MATCH(id, accession, targetid)
AGAINST('PF05517');

+-----------+--------------+
| accession | id           |
+-----------+--------------+
| Q9VV43    | Y4893_DROME  |
| Q5PPN5    | Q5PPN5_RAT   |
| Q5DEP2    | Q5DEP2_SCHJA |
| Q5CHX6    | Q5CHX6_CRYHO |
| Q5BZ16    | Q5BZ16_SCHJA |
| Q5BTA2    | Q5BTA2_SCHJA |
| Q583A1    | Q583A1_9TRYP |
| Q4Z299    | Q4Z299_PLABE |
| Q4Y3R4    | Q4Y3R4_PLACH |
| Q4UIC0    | Q4UIC0_THEAN |
| Q4UA39    | Q4UA39_THEAN |
| Q4SVU9    | Q4SVU9_TETNG |
| Q5TR29    | Q5TR29_ANOGA |
| Q61EN3    | Q61EN3_CAEBR |
| Q9CRB6    | CG38_MOUSE   |
| Q9BW30    | CG38_HUMAN   |
| Q8T935    | Q8T935_TETTH |
| Q8T931    | Q8T931_TETTH |
| Q8I557    | Q8I557_PLAF7 |
| Q86E15    | Q86E15_SCHJA |
| Q7TQD2    | P25A_MOUSE   |
| Q7RD81    | Q7RD81_PLAYO |
| Q7R2L7    | Q7R2L7_GIALA |
| Q7PT09    | Q7PT09_ANOGA |
| Q6P604    | Q6P604_BRARE |
| Q4RI11    | Q4RI11_TETNG |
| Q4R3A0    | Q4R3A0_MACFA |
| Q4Q350    | Q4Q350_LEIMA |
| Q244Y3    | Q244Y3_TETTH |
| Q244Y1    | Q244Y1_TETTH |
| Q22LY5    | Q22LY5_TETTH |
| Q22LY4    | Q22LY4_TETTH |
| Q22LY3    | Q22LY3_TETTH |
| Q1JPR8    | Q1JPR8_MOUSE |
| Q16YE8    | Q16YE8_AEDAE |
| Q0P5Y3    | Q0P5Y3_MOUSE |
| Q01BN1    | Q01BN1_OSTTA |
| P91127    | YBYK_CAEEL   |
| P59282    | P25B_HUMAN   |
| Q27957    | P25A_BOVIN   |
| Q29EJ5    | Q29EJ5_DROPS |
| Q4Q349    | Q4Q349_LEIMA |
| Q4N792    | Q4N792_THEPA |
| Q4N2S7    | Q4N2S7_THEPA |
| Q4L233    | Q4L233_HUMAN |
| Q4DIP8    | Q4DIP8_TRYCR |
| Q4CVJ1    | Q4CVJ1_TRYCR |
| Q3ZCC8    | Q3ZCC8_BOVIN |
| Q3URG1    | Q3URG1_MOUSE |
| Q3T077    | Q3T077_BOVIN |
| Q2VYF3    | Q2VYF3_HUMAN |
| Q2VPM9    | Q2VPM9_XENLA |
| O94811    | P25A_HUMAN   |
+-----------+--------------+
53 rows in set (0.02 sec)


SHORTEN TO ZERO SECONDS BY RETRIEVING ONLY ACCESSION:

SELECT accession
FROM swissprotpfam
WHERE MATCH(id, accession, targetid)
AGAINST('PF05517');


+-----------+
| accession |
+-----------+
| Q9VV43    |
| Q5PPN5    |
| Q5DEP2    |
| Q5CHX6    |
| Q5BZ16    |
| Q5BTA2    |
| Q583A1    |
| Q4Z299    |
| Q4Y3R4    |
| Q4UIC0    |
| Q4UA39    |
| Q4SVU9    |
| Q5TR29    |
| Q61EN3    |
| Q9CRB6    |
| Q9BW30    |
| Q8T935    |
| Q8T931    |
| Q8I557    |
| Q86E15    |
| Q7TQD2    |
| Q7RD81    |
| Q7R2L7    |
| Q7PT09    |
| Q6P604    |
| Q4RI11    |
| Q4R3A0    |
| Q4Q350    |
| Q244Y3    |
| Q244Y1    |
| Q22LY5    |
| Q22LY4    |
| Q22LY3    |
| Q1JPR8    |
| Q16YE8    |
| Q0P5Y3    |
| Q01BN1    |
| P91127    |
| P59282    |
| Q27957    |
| Q29EJ5    |
| Q4Q349    |
| Q4N792    |
| Q4N2S7    |
| Q4L233    |
| Q4DIP8    |
| Q4CVJ1    |
| Q3ZCC8    |
| Q3URG1    |
| Q3T077    |
| Q2VYF3    |
| Q2VPM9    |
| O94811    |
+-----------+
53 rows in set (0.00 sec)


VANILLA QUERY VERY SLOW (7 SECONDS):


select accession,id from swissprotpfam where targetid = 'PF05517' ORDER BY accession, id;
+-----------+--------------+----------+
| accession | id           | targetid |
+-----------+--------------+----------+
| O94811    | P25A_HUMAN   | PF05517  |
| P59282    | P25B_HUMAN   | PF05517  |
| P91127    | YBYK_CAEEL   | PF05517  |
| Q01BN1    | Q01BN1_OSTTA | PF05517  |
| Q0P5Y3    | Q0P5Y3_MOUSE | PF05517  |
| Q16YE8    | Q16YE8_AEDAE | PF05517  |
| Q1JPR8    | Q1JPR8_MOUSE | PF05517  |
| Q22LY3    | Q22LY3_TETTH | PF05517  |
| Q22LY4    | Q22LY4_TETTH | PF05517  |
| Q22LY5    | Q22LY5_TETTH | PF05517  |
| Q244Y1    | Q244Y1_TETTH | PF05517  |
| Q244Y3    | Q244Y3_TETTH | PF05517  |
| Q27957    | P25A_BOVIN   | PF05517  |
| Q29EJ5    | Q29EJ5_DROPS | PF05517  |
| Q2VPM9    | Q2VPM9_XENLA | PF05517  |
| Q2VYF3    | Q2VYF3_HUMAN | PF05517  |
| Q3T077    | Q3T077_BOVIN | PF05517  |
| Q3URG1    | Q3URG1_MOUSE | PF05517  |
| Q3ZCC8    | Q3ZCC8_BOVIN | PF05517  |
| Q4CVJ1    | Q4CVJ1_TRYCR | PF05517  |
| Q4DIP8    | Q4DIP8_TRYCR | PF05517  |
| Q4L233    | Q4L233_HUMAN | PF05517  |
| Q4N2S7    | Q4N2S7_THEPA | PF05517  |
| Q4N792    | Q4N792_THEPA | PF05517  |
| Q4Q349    | Q4Q349_LEIMA | PF05517  |
| Q4Q350    | Q4Q350_LEIMA | PF05517  |
| Q4R3A0    | Q4R3A0_MACFA | PF05517  |
| Q4RI11    | Q4RI11_TETNG | PF05517  |
| Q4SVU9    | Q4SVU9_TETNG | PF05517  |
| Q4UA39    | Q4UA39_THEAN | PF05517  |
| Q4UIC0    | Q4UIC0_THEAN | PF05517  |
| Q4Y3R4    | Q4Y3R4_PLACH | PF05517  |
| Q4Z299    | Q4Z299_PLABE | PF05517  |
| Q583A1    | Q583A1_9TRYP | PF05517  |
| Q5BTA2    | Q5BTA2_SCHJA | PF05517  |
| Q5BZ16    | Q5BZ16_SCHJA | PF05517  |
| Q5CHX6    | Q5CHX6_CRYHO | PF05517  |
| Q5DEP2    | Q5DEP2_SCHJA | PF05517  |
| Q5PPN5    | Q5PPN5_RAT   | PF05517  |
| Q5TR29    | Q5TR29_ANOGA | PF05517  |
| Q61EN3    | Q61EN3_CAEBR | PF05517  |
| Q6P604    | Q6P604_BRARE | PF05517  |
| Q7PT09    | Q7PT09_ANOGA | PF05517  |
| Q7R2L7    | Q7R2L7_GIALA | PF05517  |
| Q7RD81    | Q7RD81_PLAYO | PF05517  |
| Q7TQD2    | P25A_MOUSE   | PF05517  |
| Q86E15    | Q86E15_SCHJA | PF05517  |
| Q8I557    | Q8I557_PLAF7 | PF05517  |
| Q8T931    | Q8T931_TETTH | PF05517  |
| Q8T935    | Q8T935_TETTH | PF05517  |
| Q9BW30    | CG38_HUMAN   | PF05517  |
| Q9CRB6    | CG38_MOUSE   | PF05517  |
| Q9VV43    | Y4893_DROME  | PF05517  |
+-----------+--------------+----------+
53 rows in set (7.46 sec)



SELECT *
FROM swissprotpfam
WHERE MATCH(id)
AGAINST('PF05517');


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Oct  8 13:21:33 EDT 2007
UNIGENE ORTHOLOGUES WORKFLOW

0. INDEX UNIGENE IDS VERSUS ACCESSIONS

unigene/unigenesindexer.pl

	NAME: unigenesindexer.pl
	
	PURPOSE:    INDEX UNIGENE IDS VERSUS ACCESSIONS (CLUSTER IDS) 
	
	INPUT:  1. UNIGENE .data FILE (E.G., Hs.data) (SEE AT BOTTOM FOR FORMAT OF .data FILE)
		   
	OUTPUT:
			1. PRINT TO .TSV FILE
			2. LOAD .TSV FILE INTO unigeneindexes TABLE
	
	DATE: Sat 28th Oct, 2006
	
	USAGE:
	
		unigenesindexer.pl <-i input_file> <-d database_name> [-v version] [-s record_separator] [-h] 
	
			-i input_file         : input_file containing records separated by 'record_separator' (below)
			-d database_name      : name of sequence database (e.g., "human-unigene")
			-v version            : database version (e.g., "Build #169 Homo sapiens")
			-h help               : print this help message
	
		< option > denotes REQUIRED argument
		[ option ] denotes OPTIONAL argument
		
	EXAMPLES:
	
	./unigenesindexer.pl -i /Users/young/FUNNYBASE/databases/unigene/Hs.data -d unigene-human.data -v "Build #196 Homo sapiens" -s "//"
	
	
	ON gems:
	
	./unigenesindexer.pl -i /Users/young/FUNNYBASE/databases/unigene/Hs.data -d unigene-human.data -v "Build #196 Homo sapiens" 
	

1. PICK SEED SEQUENCES

unigene/unigene.top100.pl

INPUT

/Users/young/FUNNYBASE/databases/unigene/Hs.data.annotation

OUTPUT

/Users/young/FUNNYBASE/databases/unigene/Hs.top100.seq
/Users/young/FUNNYBASE/databases/unigene/Hs.top100.data
/Users/young/FUNNYBASE/databases/unigene/Hs.top100.seqdata


2. CREATE FASTA FILE WITH ANNOTATION

INPUTFILE

/Users/young/FUNNYBASE/databases/unigene/Hs.top100.seq
/Users/young/FUNNYBASE/databases/unigene/Hs.seq.uniq

USES

unigene/mysqlid2record.pl -i $id -f $seqfile -d unigene-human

OUTPUTFILE

/Users/young/FUNNYBASE/databases/unigene/Hs.top100.fasta


3. DO EXTERNAL BLAST AGAINST OTHER REFSEQS

	( DEFAULT DATABASES: unigene-dog,unigene-human,unigene-mouse,unigene-rat)

external1/externalarrayblast.pl

	
	sudo ./externalarrayblast.pl -d Hs.top100


	NAME
	
		externalarrayblast.pl
	
	PURPOSE
	
		1. BLAST AN EXTERNAL SEQUENCE DATABASE AGAINST A SERIES OF EXTERNAL SEQUENCE DATABASES
	
			USING sge ARRAY JOBS AND STORE THE RESULTS IN THE funnybaseblast TABLE
	
		2. PARSE THE BLAST OUTPUT INTO .TSV FILES
	
		3. MOVE .TSV FILES INTO STORAGE ON OTHER DISC
	
	USAGE
	
		externalarrayblast.pl <-d query_database> [-h] 
	
			-d database_name      : name of sequence database (e.g., "human-unigene")
			-h help                   : name of sequence database (e.g., "human-unigene")
		



*** SEE FILE:

external/Hs_top100.hits.tsv


4.	LOAD THE .TSV BLAST OUTPUT INTO MYSQL TABLE (BASED ON externalblast, NAMED AFTER EACH TARGET)

external1/externalblastloaddata.pl


	NAME: externalblastloaddata.pl
	
	PURPOSE: LOAD THE .TSV BLAST OUTPUT INTO THE MYSQL TABLE BASED externalblast
	
				BUT NAMED AFTER THE query_database
	
	USAGE:
	
		This programme loads a .TSV file of BLAST hit information into a mysql table with the same
		name as the query sequence database.
		
		USAGE:
	
		$0 <-d database_name> <-t target_databases> [-h] 
	
		 -d database_name     : database of input sequence
		 -t target_databases  : (comma-separated) list of species to compare
		 -h help              : print this help message
	
	EXAMPLE:
	
		./externalblastloaddata.pl -d unigene-human -t unigene-dog,unigene-mouse,unigene-rat
		./externalblastloaddata.pl -d unigene-mouse -t unigene-dog,unigene-human,unigene-rat
		./externalblastloaddata.pl -d unigene-rat -t unigene-dog,unigene-mouse,unigene-human
		./externalblastloaddata.pl -d unigene-dog -t unigene-human,unigene-mouse,unigene-rat


5. DETERMINE ORTHOLOGUES BY THE 'RECIPROCAL BEST HITS' METHOD 

unigene/orthologues.pl

	NAME: orthologues.pl
	
	PURPOSE:
	
		DETERMINE ORTHOLOGUES BY THE 'RECIPROCAL BEST HITS' METHOD 
	
	INPUT:
		1. FOR EACH SPECIES-SPECIES ORTHOLOGUE SEARCH, REQUIRE BOTH
			COMPLETE SPECIES-VS-SPECIES BLAST RESULTS (FOR COMPLETENESS,
			I.E., IN CASE OF DIRECTIONAL BIAS IN BLAST SEARCH)

		2. BLAST RESULTS IN externalblast TABLE (SEE BOTTOM OF SCRIPT)
		
	OUTPUT:
		1. COMPARISON RESULTS STORED IN orthologues TABLE
		2. LIST OF ORTHOLOGUE PAIRS - RECIPROCAL 1st HITS
		3. LIST OF PARALOGUE PAIRS - NON-RECIPROCAL 1st HITS
		4. LIST OF HOMOLOGUE PAIRS - RECIPROCAL 2nd, 3rd, ... 5th HITS
	
	USAGE:
	
	
	EXAMPLE:
	
	./orthologues.pl -i Hs_top100.hits.ids.tsv -d unigene-human -t unigene-rat
	
	CREATE .TSV FILE FOR INPUT INTO orthologues2fasta:

	select distinct querysource, queryid, queryname, queryannotation, targetsource, targetid, targetname, targetannotation, hitranking, hitevalueexp, hitevaluedec from orthologues order by queryid, targetsource, hitranking,targetid into outfile '/private/tmp/orthologues.tsv';


6. PRINT SGE ARRAY JOB FASTA SEQUENCE INPUT FILES FOR ALL OF THE GENES IN THE orthologues.tsv FILE

unigene/orthologues2fasta.pl

	NAME: orthologues2fasta.pl
	
	PURPOSE:
	
		GET THE FASTA SEQUENCES FOR ALL OF THE GENES IN THE orthologues.tsv FILE
	
	INPUT:

		1. orthologues.tsv CREATED BY orthologues.pl		

		2. INDEX OF RESEQ ACCESSED BY
		
			./mysqlid2record.pl  -i $id -f $$sequencefiles{$db} -d $db";
					
	USAGE:
	
./orthologues2fasta.pl


7. RUN InterProScan ON ORTHOLOGUES IN .fastafile

unigene/orthologuesiprscan.pl


    NAME: orthologuesiprscan.pl
    
    PURPOSE:
    
        RUN interproscan ON ALL ORTHOLOGUES IN EACH MULIT-FASTA FILE
    
    INPUT:
        1. MULTI-FASTA FILE CONTAINING ORTHOLOGUES (E.G., DETERMINED BY RECIPROCAL BEST HITS METHOD)
        
    OUTPUT:
        1. IPRSCAN RESULTS IN XML FORMAT
        2. LOAD RESULTS INTO TABLE orthologuesiprscan
    
    USAGE:
    
    EXAMPLE:
    
    sudo ./orthologuesiprscan.pl -t 20 -p hmmpfam -i orthologues.fasta -o orthologues.out
    
    sudo ./orthologuesiprscan.pl -t 20 -p hmmpanther -i orthologues.fasta -o orthologues.out

    REPORT:
        
    /Users/young/FUNNYBASE/apps/iprscan/tmp/20060721/iprscan-20060721-15282589/iprscan-20060721-15282589.report


8. **** CORRECT THIS STEP *** - REMOVE orthologues/orthologues.pl

COLLECT ONLY THOSE ORTHOLOGUES THAT HAVE IPRSCAN HITS AND PUT IN orthologues table

orthologues/orthologues.pl

	APPLICATION orthologues
	
	PURPOSE
	
		1. COLLECT ONLY THOSE ORTHOLOGUES THAT HAVE IPRSCAN HITS
		
		2. PARSE THE RAW ORTHOLOGUES DATA FILES INTO A FASTA INPUT FILE FOR
		
		THE GENERIC 'orthologues' APPLICATION, WHICH LOADS THE DATA INTO
		
		THE 'orthologues' MYSQL TABLE
	
	INPUT
	
		1. ORTHOLOGUE DATABASE NAME

		2. RAW DATA FILES IN <base_directory>/data DIRECTORY

	OUTPUT

		1. FASTA FILE IN <base_directory>/collection DIRECTORY
		
	USAGE
	
		./orthologues.pl <-d database_name> [-c config_file] [-h]

		-d database_name     : name of database (OVERRIDES database name in config_file)
		-c config_file       : /full/path/to/configuration_file (see example below)
		-h                   : print this help message

	
	EXAMPLES
	
./orthologues.pl -d inparanoid_sanPF_ensAG


9. LOAD IPRSCAN HITS INTO orthologuesiprscan TABLE

orthologues/orthologuesiprscan.pl

	APPLICATION		orthologuesiprscan
	
	PURPOSE
	
		1. GET THE ABSOLUTE POSITIONS ON THE ORIGINAL FASTA SEQUENCE OF THE
		
		IPRSCAN HITS (AGAINST THE ORFS OF THE ORIGINAL SEQUENCE)
		
		2. PRINT TO .TSV FILE

		3. LOAD INTO orthologuesiprscan TABLE
		
	INPUT
	
		1. iprscan OUTPUT FILES IN <database>/iprscan DIRECTORY
		
		2. orthologuesorf TABLE WITH ORF frame, number, start/stop AND length

	OUTPUT
	
		1. <database>.orthologuesiprscan.tsv FILE
		
		2. LOAD .TSV FILE INTO orthologuesiprscan TABLE

	USAGE
	
./orthologuesiprscan.pl -d unigene


10. 


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Oct  4 12:06:55 EDT 2007
CREATED swissprotiprscandatabase.pl TO EXTRACT PFAM, GENE3D, ETC. HITS FROM THE swissprotiprscan TABLE TO DATABASE-SPECIFIC TABLES


./swissprotiprscandatabase.pl

( REM: 14910035 ENTRIES IN swissprotiprscan )
	
	dlc-genomics:~/FUNNYBASE/bin/mappings young$ ./swissprotiprscandatabase.pl 
	Target: PFAM
	Tsvfile: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/swissprotPFAM.tsv
	Getting ids...
	Thu Oct  4 14:23:33 EDT 2007
	Finished getting ids (total 3567921)
	Thu Oct  4 14:31:18 EDT 2007
	Printing ids to TSV file...
	0
	1000
	2000
	3000
	...
	3566000
	3567000
	Output file printed:
	
	/Users/young/FUNNYBASE/pipeline/indexer/iprscan/swissprotPFAM.tsv
	
	Dropping 'swissprotpfam' if exists... done.
	Creating table 'swissprotpfam'... done.
	Loading data into table 'swissprotpfam'... done.
	Updating fulltext... done.
	
	Run time: 00:17:11
	Completed ./swissprotiprscandatabase.pl
	2:40PM, 4 October 2007
	****************************************
	
select count(*) from swissprotpfam;
+----------+
| count(*) |
+----------+
|  3567921 |
+----------+
1 row in set (0.02 sec)


( RERAN SWISSPROT PANTHER ON Wed Oct 10 22:52:05 EDT 2007:

    469000
    470000
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/indexer/iprscan/swissprotPANTHER.tsv
    
    Dropping 'swissprotpanther' if exists... done.
    Creating table 'swissprotpanther'...done.
    Loading data into table 'swissprotpanther'... done.
    Creating fulltext... done.
    Creating fulltext... done.
    
    Run time: 00:04:44
    Completed ./swissprotiprscandatabase.pl
    4:24PM, 10 October 2007
    ****************************************
)


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct  4 11:36:44 EDT 2007
CORRECT FULLTEXT QUERY FOR swissprotiprscan

SELECT collectionid, collectionaccession, targetannotation,
MATCH(targetannotation, targetsource, targetid, targetname)
AGAINST ('Troponin I, slow skeletal') AS relevance
FROM collectionsequencesannotation
WHERE  MATCH(targetannotation, targetsource, targetid, targetname)
AGAINST ('Troponin I, slow skeletal');


 select * from swissprotiprscan limit 1\G
*************************** 1. row ***************************
          id: A0A000
        name: A0A000_9ACTO
targetsource: PFAM
    targetid: PF00155
  targetname: Aminotran_1_2
  interproid: IPR004839
interproname: Aminotransferase, class I and II
interprotype: Domain
 hitscoredec: 4.39
 hitscoreexp: -64
   hitstatus: T
  querystart: 35
   querystop: 380
   childlist: 
 foundinlist: 
      golist: 
       frame: 0
      number: 0


SELECT count(*)
FROM swissprotiprscan
WHERE MATCH(targetid)
AGAINST('SEG');

+----------+
| count(*) |
+----------+
|        0 |
+----------+
1 row in set (0.00 sec)

SELECT count(*)
FROM swissprotiprscan
WHERE MATCH(targetid)
AGAINST('G3DSA:1.20');

WORKS BUT VERY SLOW!

SELECT count(*)
    -> FROM swissprotiprscan
    -> WHERE MATCH(targetid)
    -> AGAINST('G3DSA:1.20');
+----------+
| count(*) |
+----------+
|   818005 |
+----------+
1 row in set (5 min 30.41 sec)


 PTHR13738


SELECT count(*)
FROM swissprotiprscan
WHERE MATCH(targetid)
AGAINST('G3DSA:1.20')
AND targetsource='GENE3D';

+----------+
| count(*) |
+----------+
|   818005 |
+----------+
1 row in set (15.64 sec)


USING unigene DATABASE:

orthologuenumber: 20
  sequencenumber: 9
    targetsource: GENE3D
        targetid: G3DSA:2.60.120.260
      targetname: no description
      interproid: noIPR
    interproname: unintegrated
    interprotype: unintegrated
     hitscoredec: 4.80
     hitscoreexp: -75
       hitstatus: T
      querystart: 243
       querystop: 795
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
       orfnumber: 0

SELECT count(*)
FROM swissprotiprscan
WHERE MATCH(targetid)
AGAINST('G3DSA:2.60.120.260')
AND targetsource='GENE3D'
AND targetname = 'no description';


REMOVE FULLTEXT:

DROP INDEX targetid ON swissprotiprscan;


CREATE FULLTEXT FOR targetid, targetname AND targetsource:

ALTER TABLE swissprotiprscan ADD FULLTEXT targetinfo (targetid, targetname, targetsource);




select count(*) from swissprotiprscan;
+----------+
| count(*) |
+----------+
| 14910035 |
+----------+
1 row in set (0.00 sec)

CREATE TABLE `swissprotiprscan` (
  `id` varchar(20) NOT NULL default '',
  `name` varchar(20) NOT NULL default '',
  `targetsource` varchar(20) NOT NULL default '',
  `targetid` varchar(10) NOT NULL default '',
  `targetname` varchar(200) NOT NULL default '',
  `interproid` varchar(10) NOT NULL default '',
  `interproname` varchar(200) NOT NULL default '',
  `interprotype` varchar(20) NOT NULL default '',
  `hitscoredec` decimal(4,2) NOT NULL default '0.00',
  `hitscoreexp` smallint(4) NOT NULL default '0',
  `hitstatus` char(1) NOT NULL default '',
  `querystart` int(8) NOT NULL default '0',
  `querystop` int(8) NOT NULL default '0',
  `childlist` varchar(255) NOT NULL default '',
  `foundinlist` varchar(255) NOT NULL default '',
  `golist` text,
  `frame` int(1) NOT NULL default '0',
  `number` int(4) NOT NULL default '0',
  PRIMARY KEY  (`id`,`name`,`targetsource`,`targetid`,`targetname`,`interproid`,`hitscoredec`,`hitscoreexp`,`querystart`,`querystop`,`frame`,`number`),
  FULLTEXT KEY `targetid` (`targetid`)
) 

TEST MULTIPLE COLUMN SEARCH USING GROUP BY:

CREATE TABLE testfulltext ( one int(1), two varchar(2) );
INSERT INTO testfulltext (one, two) VALUES (1,2);
INSERT INTO testfulltext (one, two) VALUES (1,3);
INSERT INTO testfulltext (one, two) VALUES (1,4);


mysql> SELECT * FROM testfulltext;
+------+------+
| one  | two  |
+------+------+
|    1 | 2    |
|    1 | 3    |
|    1 | 4    |
+------+------+
3 rows in set (0.00 sec)

SELECT COUNT(*), one FROM testfulltext WHERE one='1' GROUP BY one;
+----------+------+
| COUNT(*) | one  |
+----------+------+
|        3 |    1 |
+----------+------+
1 row in set (0.01 sec)

mysql> SELECT COUNT(*), one FROM testfulltext WHERE two='2' OR two='3' GROUP BY one;
+----------+------+
| COUNT(*) | one  |
+----------+------+
|        2 |    1 |
+----------+------+
1 row in set (0.00 sec)


SELECT one FROM testfulltext WHERE two='2' AND two='3' group by one;


TRICKY, SO PUT swissprotiprscan (RENAME TO swissprotiprscan) INTO SEPARATE TABLES
BASED ON IPRSCAN DATABASE USING:

(SLOW - FROM match.xml FILE)

./swissprotiprscandatabase.byfile.pl -f /Users/young/FUNNYBASE/pipeline/indexer/data/match.xml

select count(*) from swissprotgene3d;
+----------+
| count(*) |
+----------+
|   818005 |
+----------+


(FAST - FROM swissprotiprscan TABLE - SEE NEXT ENTRY ABOVE)
./swissprotiprscandatabase.pl

    3566000
    3567000
    Output file printed:
    
    /Users/young/FUNNYBASE/pipeline/indexer/iprscan/swissprotPFAM.tsv
    
    Dropping 'swissprotiprscandatabase' if exists... done.
    Creating table 'swissprotiprscandatabase'... done.
    Loading data into table 'swissprotiprscandatabase'... done.
    Updating fulltext... done.
    
    Run time: 00:17:11
    Completed ./swissprotiprscandatabase.pl
    2:40PM, 4 October 2007
    ****************************************
    


 select count(*) from swissprotpfam;
+----------+
| count(*) |
+----------+
|  3567921 |
+----------+





++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct  3 21:57:28 EDT 2007
CREATED iprscantrainingset.pl TO GET TRAINING SET AS ALL SEQUENCES IN match.xml THAT SHARE IPRSCAN DOMAIN HITS WITH THE ORTHOLOGUES


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct  3 21:48:03 EDT 2007
FIX MISMATCH IN collectionsequencesiprscan BETWEEN ORF NUMBERS IN DATABASE AND THOSE IN IPRSCAN OUTPUT FILE

PROBLEM: 
FOR funnybase11 SEQUENCES 132.1, 4.1:

THE FRAME HAS BEEN SHIFTED AND THERE IS A SLIGHT DIFFERENCE IN THE LAST HIT.

DIAGNOSIS:

THIS MAY BE DUE TO 

	A) DIFFERENCES IN THE SEQUENCES? - UNLIKELY AS, NOTHING WAS CHANGED RECENTLY

	B) THE INTERPROSCAN ALGORITHM - MOST LIKELY AS UPDATED A FEW IPRSCAN EXECUTABLES RECENTLY.

SOLUTION:

JIGGLE THE FRAME ROUND BY ONE UNTIL THE CORRECT ORF (OF THE RIGHT LENGTH) IS FOUND



select collectionid, frame, orfnumber, orfstart, orfstop, length  from collectionsequencesorf where collectionid = 132;
+--------------+-------+-----------+----------+---------+--------+
| collectionid | frame | orfnumber | orfstart | orfstop | length |
+--------------+-------+-----------+----------+---------+--------+
| 132          |     1 |         1 |        1 |     198 |     66 |
| 132          |     1 |         2 |      202 |     360 |     53 |
| 132          |     1 |        10 |      385 |     687 |    101 |
| 132          |     1 |        11 |      691 |    1209 |    173 |
| 132          |     2 |         3 |        8 |     697 |    230 |
| 132          |     2 |         6 |      707 |     868 |     54 |
| 132          |     2 |         7 |      872 |    1102 |     77 |
| 132          |     2 |         9 |     1109 |    1255 |     49 |
| 132          |     3 |         1 |        3 |      95 |     31 |
| 132          |     3 |         6 |      111 |     269 |     53 |
| 132          |     3 |         9 |      279 |     422 |     48 |
| 132          |     3 |        11 |      429 |     938 |    170 |
| 132          |     3 |        12 |      942 |    1064 |     41 |
| 132          |     3 |        15 |     1074 |    1181 |     36 |
+--------------+-------+-----------+----------+---------+--------+
14 rows in set (0.08 sec)



select collectionid, frame, orfnumber, orfstart, orfstop, length  from collectionsequencesorf where collectionid = 4; 

+--------------+-------+-----------+----------+---------+--------+
| collectionid | frame | orfnumber | orfstart | orfstop | length |
+--------------+-------+-----------+----------+---------+--------+
| 4            |     1 |         2 |        4 |     168 |     55 |
| 4            |     1 |         5 |      178 |     354 |     59 |
| 4            |     1 |         6 |      358 |     504 |     49 |
| 4            |     1 |         7 |      508 |     621 |     38 |
| 4            |     1 |         9 |      628 |     729 |     34 |
| 4            |     1 |        12 |      739 |     915 |     59 |
| 4            |     2 |        28 |       83 |     193 |     37 |
| 4            |     3 |         5 |       15 |     143 |     43 |
| 4            |     3 |        10 |      159 |     281 |     41 |
| 4            |     3 |        12 |      288 |     413 |     42 |
| 4            |     3 |        13 |      417 |     587 |     57 |
| 4            |     3 |        16 |      597 |     704 |     36 |
+--------------+-------+-----------+----------+---------+--------+
12 rows in set (0.08 sec)


FRESH IPRSCAN OF funnybase11 SEQUENCE 4.1:

   <protein id="4.1_1_ORF1" length="55" crc64="65A1DF846D2AC66B" >
   <protein id="4.1_1_ORF2" length="59" crc64="541BE6A02D3C1208" >
   <protein id="4.1_1_ORF3" length="58" crc64="563DFDEF88A3BD28" >
		<match id="PS50855" name="COX1" dbname="PROFILE">
		  <location start="1" end="41" score="10.305" status="T" evidence="ProfileScan" />
		</match>

ORIGINAL IPRSCAN OUTPUT FOR funnybase11 SEQUENCE 4.1:

   <protein id="4_2_ORF1" length="55" crc64="65A1DF846D2AC66B" >
   <protein id="4_2_ORF2" length="59" crc64="541BE6A02D3C1208" >
   <protein id="4_2_ORF3" length="49" crc64="9F7AA1BD4EBB7ACF" >
	  <match id="PS50855" name="COX1" dbname="PROFILE">
	    <location start="1" end="49" score="10.505" status="T" evidence="ProfileScan" />
	  </match>



OUTPUT FILES ARE BELOW:


FRESH IPRSCAN OF funnybase11 SEQUENCE 4.1:

<interpro_matches>

   <protein id="4.1_1_ORF1" length="55" crc64="65A1DF846D2AC66B" >
        <interpro id="IPR000883" name="Cytochrome c oxidase, subunit I" type="Family">
          <child_list>
            <rel_ref ipr_ref="IPR004677"/>
          </child_list>
          <match id="PTHR10422" name="CYTOCHROME C OXIDASE SUBUNIT I" dbname="PANTHER">
            <location start="1" end="55" score="4.3e-31" status="T" evidence="HMMPanther" />
          </match>
          <match id="PF00115" name="COX1" dbname="PFAM">
            <location start="1" end="55" score="6.6e-19" status="T" evidence="HMMPfam" />
          </match>
          <match id="PS50855" name="COX1" dbname="PROFILE">
            <location start="1" end="55" score="11.421" status="T" evidence="ProfileScan" />
          </match>
        </interpro>
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="PTHR10422:SF2" name="CYTOCHROME C OXIDASE SUBUNIT I" dbname="PANTHER">
            <location start="1" end="55" score="4.3e-31" status="T" evidence="HMMPanther" />
          </match>
          <match id="seg" name="seg" dbname="SEG">
            <location start="38" end="54" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="4.1_1_ORF2" length="59" crc64="541BE6A02D3C1208" >
        <interpro id="IPR000883" name="Cytochrome c oxidase, subunit I" type="Family">
          <child_list>
            <rel_ref ipr_ref="IPR004677"/>
          </child_list>
          <match id="PTHR10422" name="CYTOCHROME C OXIDASE SUBUNIT I" dbname="PANTHER">
            <location start="1" end="59" score="2.8e-39" status="T" evidence="HMMPanther" />
          </match>
          <match id="PF00115" name="COX1" dbname="PFAM">
            <location start="1" end="59" score="2.1e-22" status="T" evidence="HMMPfam" />
          </match>
          <match id="PS50855" name="COX1" dbname="PROFILE">
            <location start="1" end="59" score="11.534" status="T" evidence="ProfileScan" />
          </match>
        </interpro>
   </protein>
   <protein id="4.1_1_ORF3" length="58" crc64="563DFDEF88A3BD28" >
        <interpro id="IPR000883" name="Cytochrome c oxidase, subunit I" type="Family">
          <child_list>
            <rel_ref ipr_ref="IPR004677"/>
          </child_list>
          <match id="PTHR10422" name="CYTOCHROME C OXIDASE SUBUNIT I" dbname="PANTHER">
            <location start="1" end="35" score="4.2e-17" status="T" evidence="HMMPanther" />
          </match>
          <match id="PF00115" name="COX1" dbname="PFAM">
            <location start="1" end="35" score="2.1e-15" status="T" evidence="HMMPfam" />
          </match>
          <match id="PS50855" name="COX1" dbname="PROFILE">
            <location start="1" end="41" score="10.305" status="T" evidence="ProfileScan" />
          </match>
        </interpro>
   </protein>

</interpro_matches>



ORIGINAL IPRSCAN OUTPUT FOR funnybase11 SEQUENCE 4.1:

<interpro_matches>

   <protein id="4_2_ORF1" length="55" crc64="65A1DF846D2AC66B" >
	<interpro id="IPR000883" name="Cytochrome c oxidase, subunit I" type="Family">
	  <child_list>
	    <rel_ref ipr_ref="IPR004677"/>
	  </child_list>
	  <classification id="GO:0004129" class_type="GO">
	    <category>Molecular Function</category>
	    <description>cytochrome-c oxidase activity</description>
	  </classification>
	  <classification id="GO:0006118" class_type="GO">
	    <category>Biological Process</category>
	    <description>electron transport</description>
	  </classification>
	  <classification id="GO:0016020" class_type="GO">
	    <category>Cellular Component</category>
	    <description>membrane</description>
	  </classification>
	  <match id="PTHR10422" name="CYTOCHROME C OXIDASE SUBUNIT I" dbname="PANTHER">
	    <location start="1" end="55" score="4.3e-31" status="T" evidence="HMMPanther" />
	  </match>
	  <match id="PF00115" name="COX1" dbname="PFAM">
	    <location start="1" end="55" score="6.6e-19" status="T" evidence="HMMPfam" />
	  </match>
	  <match id="PS50855" name="COX1" dbname="PROFILE">
	    <location start="1" end="55" score="11.421" status="T" evidence="ProfileScan" />
	  </match>
	  <match id="SSF81442" name="Cytochrome c oxidase subunit I-like" dbname="SUPERFAMILY">
	    <location start="1" end="55" score="2.1e-19" status="T" evidence="superfamily" />
	  </match>
	</interpro>
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="PTHR10422:SF2" name="CYTOCHROME C OXIDASE SUBUNIT I" dbname="PANTHER">
	    <location start="1" end="55" score="4.3e-31" status="T" evidence="HMMPanther" />
	  </match>
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="38" end="54" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>
   <protein id="4_2_ORF2" length="59" crc64="541BE6A02D3C1208" >
	<interpro id="IPR000883" name="Cytochrome c oxidase, subunit I" type="Family">
	  <child_list>
	    <rel_ref ipr_ref="IPR004677"/>
	  </child_list>
	  <classification id="GO:0004129" class_type="GO">
	    <category>Molecular Function</category>
	    <description>cytochrome-c oxidase activity</description>
	  </classification>
	  <classification id="GO:0006118" class_type="GO">
	    <category>Biological Process</category>
	    <description>electron transport</description>
	  </classification>
	  <classification id="GO:0016020" class_type="GO">
	    <category>Cellular Component</category>
	    <description>membrane</description>
	  </classification>
	  <match id="PTHR10422" name="CYTOCHROME C OXIDASE SUBUNIT I" dbname="PANTHER">
	    <location start="1" end="59" score="2.8e-39" status="T" evidence="HMMPanther" />
	  </match>
	  <match id="PF00115" name="COX1" dbname="PFAM">
	    <location start="1" end="59" score="2.1e-22" status="T" evidence="HMMPfam" />
	  </match>
	  <match id="PS50855" name="COX1" dbname="PROFILE">
	    <location start="1" end="59" score="11.534" status="T" evidence="ProfileScan" />
	  </match>
	  <match id="SSF81442" name="Cytochrome c oxidase subunit I-like" dbname="SUPERFAMILY">
	    <location start="1" end="59" score="1.4e-16" status="T" evidence="superfamily" />
	  </match>
	</interpro>
   </protein>
   <protein id="4_2_ORF3" length="49" crc64="9F7AA1BD4EBB7ACF" >
	<interpro id="IPR000883" name="Cytochrome c oxidase, subunit I" type="Family">
	  <child_list>
	    <rel_ref ipr_ref="IPR004677"/>
	  </child_list>
	  <classification id="GO:0004129" class_type="GO">
	    <category>Molecular Function</category>
	    <description>cytochrome-c oxidase activity</description>
	  </classification>
	  <classification id="GO:0006118" class_type="GO">
	    <category>Biological Process</category>
	    <description>electron transport</description>
	  </classification>
	  <classification id="GO:0016020" class_type="GO">
	    <category>Cellular Component</category>
	    <description>membrane</description>
	  </classification>
	  <match id="PTHR10422" name="CYTOCHROME C OXIDASE SUBUNIT I" dbname="PANTHER">
	    <location start="1" end="35" score="4.2e-17" status="T" evidence="HMMPanther" />
	  </match>
	  <match id="PF00115" name="COX1" dbname="PFAM">
	    <location start="1" end="35" score="2.1e-15" status="T" evidence="HMMPfam" />
	  </match>
	  <match id="PS50855" name="COX1" dbname="PROFILE">
	    <location start="1" end="49" score="10.505" status="T" evidence="ProfileScan" />
	  </match>
	  <match id="SSF81442" name="Cytochrome c oxidase subunit I-like" dbname="SUPERFAMILY">
	    <location start="1" end="35" score="1e-10" status="T" evidence="superfamily" />
	  </match>
	</interpro>
   </protein>

</interpro_matches>



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct  3 18:55:02 EDT 2007
FULL IPRSCAN IS MUCH BETTER THAN IPRSCAN OF UNIQUE ORFS ONLY

MANY MORE IPRSCAN HITS, ALSO RATIO OF SEG REMAINS THE SAME ~ 30% (SEE EARLIER)


mysql> select max(collectionid) from collectionsequencesuniqueorfiprscan\G
*************************** 1. row ***************************
max(collectionid): 11972
1 row in set (0.05 sec)

mysql> select min(collectionid) from collectionsequencesuniqueorfiprscan\G
*************************** 1. row ***************************
min(collectionid): 1
1 row in set (0.02 sec)

mysql> select count(collectionid) from collectionsequencesuniqueorfiprscan\G
*************************** 1. row ***************************
count(collectionid): 10412
1 row in set (0.00 sec)

mysql> select count(collectionid) from collectionsequencesiprscan\G
*************************** 1. row ***************************
count(collectionid): 36467
1 row in set (0.00 sec)

mysql> select count(distinct collectionid) from collectionsequencesiprscan\G
*************************** 1. row ***************************
count(distinct collectionid): 5984
1 row in set (1.95 sec)

mysql> select count(distinct collectionid) from collectionsequencesiprscan\G
*************************** 1. row ***************************
count(distinct collectionid): 5984
1 row in set (0.21 sec)

mysql> select count(distinct collectionid) from collectionsequencesuniqueorfiprscan\G
*************************** 1. row ***************************
count(distinct collectionid): 2277
1 row in set (0.51 sec)


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Oct  3 17:16:30 EDT 2007
CREATED feature.pl TO VIEW ANY COINCIDENCE BETWEEN uniprot_sprot.dat FT FEATURES AND IPRSCANS

TO SEE IF FEATURES CAN BE USED TO DEMARCATE DOMAINS

   NAME        featurediv.pl
    
    PURPOSE
  
        1. PRINT AN SVG DIAGRAM OF THE IPRSCAN MOTIFS ALONG EACH SEQUENCE IN THE
            ORTHOLOGUE GROUP
        
    INPUT
    
        1. collectionsequencesuniqueorf TABLE ENTRIES
                
    OUTPUT
    
        1. featurediv TABLE ENTRIES

    USAGE
    
    ./featurediv.pl <-d database> <-s sequence_type> [-h]
    
    -d database           :     name of database
    -s sequence_type      :     'nucleotide' or 'protein'
    -h help               :     print help info

    EXAMPLES
    
./featurediv.pl -d funnybase11



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tues Oct  2 23:16:30 EDT 2007
CREATED Alignment::Blast AND Cluster::ArrayJob::SGE FOR NEW orthologuesarrayblast.pl 

	NAME		orthologuesarrayblast.pl

	PURPOSE
	
		1. BLAST THE orthologues SEQUENCES AGAINST USER-DEFINED OR DEFAULT
		
			TARGET DATABASES USING sge ARRAY JOBS 
	
		2. MERGE THE ARRAY JOB OUTPUTS INTO ONE .TSV FILE
		
	USAGE
	
		./orthologuesarrayblast.pl [-b database_name] [-e evalue_cutoff] [-h]
		
   EXAMPLE
   
sudo ./orthologuesarrayblast.pl -d unigene-t swissprot




	PACKAGE		Alignment::Blast

 	PURPOSE
	
		OBJECT ORIENTED MODULE FOR PREPARING, EXECUTING AND PROCESSING
		
		A BLAST ALIGNMENT





	PACKAGE		Cluster::ArrayJob::SGE

	PURPOSE
	
		RUN AN ARRAY JOB ON A SUN GRID ENGINE CLUSTER


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Oct  1 23:36:43 EDT 2007
CREATED swissprotfeature.pl TO CAPTURE 'FT' LINE INFO IN uniprot_sprot.dat FILE


        APPLICATION             swissprotfeature

        PURPOSE

                1. GET THE SWISSPROT DOMAIN INFORMATION FROM THE uniprot_sprot.dat FILE

                2. PRINT TO .TSV FILE

                3. LOAD INTO swissprotfeature TABLE EVERY 10,000 HITS

        INPUT

                1. uniprot_sprot.dat FILE

        OUTPUT

                1. <database>.swissprotfeature.tsv FILE

                2. LOAD .TSV FILE INTO swissprotfeature TABLE

        USAGE

                ./swissprotfeature.pl <-f swissprot_datafile> [-h]

                -f swissprot_datafile      :    /full/path/to/uniprot_sprot.dat

                -h help                    :    print this message

        EXAMPLES

./swissprotfeature.pl -f /Users/young/FUNNYBASE/pipeline/indexer/data/uniprot_sprot.dat



RUN TIME (WITH FULLTEXT INDEXING):

./swissprotfeature.pl -f /Users/young/FUNNYBASE/pipeline/indexer/data/uniprot_sprot.dat
    
    Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotfeature.10.tsv ... done.
    Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotfeature.11.tsv ... done.
    Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotfeature.12.tsv ... done.
    Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotfeature.13.tsv ... done.
    Finished loading data into table
    Updating fulltext... Query failed: Key column 'targetid' doesn't exist in table (1072)
    done.
    
    Run time: 00:02:08
    Completed ./swissprotdomain.pl
    11:33PM, 1 October 2007
    ****************************************
    
    
    GEMS-G5-Genomics:~/FUNNYBASE/bin/orthologues young$ ./swissprotdomain.pl -f /Users/young/FUNNYBASE/pipeline/indexer/data/uniprot_sprot.dat
    Updating fulltext... done.
    
    Run time: 00:00:40
    Completed ./swissprotdomain.pl
    11:35PM, 1 October 2007
    ****************************************
    
    

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Oct  1 10:13:21 EDT 2007
UNIGENE ORTHOLOGUE 1 SEQUENCE 1 APPEARS CORRECT BASED ON CLUSTALW

select * from orthologuesclustalw where orthologuenumber = 1\G
*************************** 1. row ***************************
orthologuenumber: 1
        clustalw: CLUSTAL W (1.83) multiple sequence alignment


1.3             ------------------------------------------------------------
1.4             ------------------------------------------------------------
1.2             ATGTGGACTTGCCTTTTTCGGGGCTACCACTCGGCCCGTTACACTTGCCGCCTGCACGAG
1.1             ------------------------------------------------------------
                                                                            

1.3             ------------------------------------------------------------
1.4             ------------------------------------------------------------
1.2             AAGCACCTGGGCGCCTGGGTTGCGCAGGCGCTGGGGGAGACACCTGGCCGGGTCCGACGT
1.1             ------------------------------------------------------------
                                                                            

1.3             ------------------------------------------------------------
1.4             ------------------------------------------------------------
1.2             GAGCTGCAAGTCATTGGAGCTTTGAAGGAGAGCTCTCAGGGAAAGCGCGGCCCAGACCTG
1.1             ------------------------------------------------------------
                                                                            

1.3             ------------------------------------------------------------
1.4             ------------------------------------------------------------
1.2             AACCCTGGGATCCAGGTGCTGCAGTTGCAGGATGTTTTCTGGGGAGACTGGTTCTCCGCA
1.1             ------------------------------------------------------------
                                                                            

1.3             ------------------------------------------------------------
1.4             ---------------------CGGGGTCCGGGCGGACTGCTCAGGAGCTCAGCGCCCCCG
1.2             TTCGCCTGTTGTCTCCGAGGTGTGGACTTACACCGCCCTGTGGGTGGGAGCCCTGAGGGT
1.1             ------------------------------------------------------------
                                                                            

1.3             --------------CGCTGAGGCGCAGCAGTGGACGCGTTTTGGA----GCAACATGGCT
1.4             GGCTCGCGTCTAGTCGCGGAGGCGCAGCAGTGGACGCGTTTTGGA----GCAACATGGCT
1.2             CCGACCCATGTCTCCACCATCGTCCTGCTGCTGGAGCTCCGTGGACACGGCAACATGGCT
1.1             -----------------GCCTCCGCTGCAGTCGCTGCGTCTCCAA----GCAACATGGCT
                                        * ** *  *  **       *    ***********

1.3             GACAGCAAGGCCAAGCCTGCCAAAGCTGCCAACAAGACACCACCCAAGTCCCCAGGAGAC
1.4             GACAGCAAGGCCAAGCCCACCAAAGCTGCCAACAAGACACCACCCAAGTCCCCAGGAGAC
1.2             GACAGTAAGGCCAAGTCCGCCAAGGCCGCCAACAAGACGCCCCCCAAGTCCCCAGGAGAC
1.1             GACA---AGGCCAAGCCTGCCAAAGCTGCCAACAGGACGCCCCCCAAGTCCCCGGGGGAC
                ****   ******** *  **** ** ******* *** ** *********** ** ***

1.3             CC------AGCCAGGGCTGCTAAGAGGTTGTCACTGGAGTCAGAGGGTGCCAATGAGGGT
1.4             CC------AGCCAAGGCTGCTAAGAGGTTGTCGCTGGAGTCAGAGGGGGCCAATGAGGGT
1.2             CCTTCAAAGGACAGGGCAGCCAAGAGGCTGTCGCTGGAGACGGAAGGTGCCCCCGAGGGG
1.1             CCCTCGAAGGACCGGGCAGCCAAGAGGCTGTCGCTGGAATCGGAGGGTGCTGGTGAGGGG
                **       * *  *** ** ****** **** *****  * ** ** **    ***** 

1.3             GCAACTGC---AGCTCCTGAGCTCAGTGCCCTGGAGGAGGCCTTCCGGCGGTTTGCAGTA
1.4             GCAGCTGC---AGCCCCTGAGCTCAGTGCCCTGGAGGAGGCCTTCCGGCGGTTTGCAGTA
1.2             GCGGCGGCCACGGCCCCGGAGCTCAGCGCCCTGGAGGAGGCCTTCCGGCGGTTTGCTGTG
1.1             GCAGCCGC---ATCCCCTGAGCTCAGTGCCCTGGAGGAGGCCTTCCGGCGCTTTGCCGTG
                **  * **     * ** ******** *********************** ***** ** 

1.3             CATGGGGACACCAGGGCAACAGGAAAGGAGATGCATGGCAAGAACTGGTCAAAACTGTGC
1.4             CACGGGGACACCAGGGCCACAGGAAAGGAGATGCACGGCAAGAACTGGTCAAAACTGTGC
1.2             CACGGGGACACCAGGGCCACCGGGAAGGAGATGCACGGCAAGAACTGGTCGAAACTGTGT
1.1             CACGGGGACGCCAGGGCCACCGGGAGGGAGATGCACGGCAAGAACTGGTCGAAGCTGTGC
                ** ****** ******* ** ** * ********* ************** ** ***** 

1.3             AAGGACTGCCACGTGATCGATGGGAAGAATGTGACCGTCACTGACGTGGACATTGTCTTC
1.4             AAGGACTGCCACGTGATCGACGGGAAGAACGTGACCGTCACCGACGTGGACATCGTCTTC
1.2             AAGGACTGCCAGGTCATCGACGGGAAGAACGTGACTGTCACCGACGTGGACATCGTCTTC
1.1             AAGGACTGCCAGGTGATCGACGGCAGGAACGTGACCGTCACTGACGTGGACATCGTCTTC
                *********** ** ***** ** * *** ***** ***** *********** ******

1.3             AGCAAGATCAAAGGAAAGTCCTGCAGGACCATCACCTTTGAGCAGTTCCAGGAGGCACTG
1.4             AGCAAGATCAAAGGGAAGTCCTGCAGGACCATCACCTTTGAGCAGTTCCAGGAGGCACTG
1.2             AGCAAAATCAAAGGGAAGTCCTGCCGGACCATCACGTTCGAGCAGTTCAAGGAGGCGCTT
1.1             AGCAAGATCAAAGGGAAGTCTTGCCGGACCATCACCTTTGAGCAGTTCCAGGAGGCGCTG
                ***** ******** ***** *** ********** ** ********* ******* ** 

1.3             GAGGAGCTGGCCAAGAAGCGGTTCAAGGATAAGAGCAGCGAGGAGGCTGTACGTGAGGTG
1.4             GAGGAACTGGCCAAGAAGCGGTTCAAGGATAAGAGCAGCGAGGAAGCCGTGCGTGAGGTG
1.2             GAAGAGCTCTCCAAGAAGCGATTCAAAGATAAGAGCAGCGAGGAAGCCGTCCGCGAGGTG
1.1             GAGGAGCTCGCCAAGAAGCGATTCAAAGACAAGAGCAGCGAGGAGGCCGTTCGCGAGGTG
                ** ** **  ********** ***** ** ************** ** ** ** ******

1.3             CACAGGCTCATTGAGGGACGAGCACCAGTCATCTCTGGCGTCACGAAAGCTGTGTCCTCA
1.4             CACCGACTCATCGAGGGCCGAGCACCAGTCATCTCTGGCGTCACGAAAGCTGTGTCCTCA
1.2             CACAAGCTCATCGAGGGCAAGGCCCCCATCATCTCAGGGGTGACGAAAGCCATCTCGTCG
1.1             CACAGGCTCATCGAGGGCAAGGCGCCCATCATCTCAGGGGTGACGAAAGCCATCTCGTCG
                ***   ***** *****    ** **  ******* ** ** ********  * ** ** 

1.3             CCCACGGTGTCACGGCTCACAGACACAAGCAAGTTCACAGGTTCCCACAAGGAGCGTTTC
1.4             CCCACAGTGTCACGGCTCACGGATACCAGCAAGTTCACAGGCTCCCACAAAGAGCGCTTC
1.2             CCCACTGTATCTCGACTCACAGACACGACCAAGTTCACGGGCTCCCACAAGGAACGCTTC
1.1             CCCACAGTGTCGAGGCTCACGGACACCACCAAGTTCACGGGCTCCCACAAGGAGCGCTTC
                ***** ** **  * ***** ** ** * ********* ** ******** ** ** ***

1.3             GACCAATCAGGAAAGGGCAAGGGCAAAGCTGGCCGTGTGGACCTGGTGGATGAGTCAGGC
1.4             GACCAATCAGGAAAGGGCAAGGGCAAAGCTGGCCGCGTGGACCTGGTGGATGAGTCAGGC
1.2             GACCCATCGGGCAAGGGCAAGGGCAAGGCAGGCCGCGTGGACCTGGTGGATGAGTCAGGC
1.1             GACCCCTCTGGCAAGGGCAAGGGCAAGGCTGGCCGCGTGGATCTGGTGGACGAGTCAGGC
                ****  ** ** ************** ** ***** ***** ******** *********

1.3             TATGTGCCTGGTTACAAGCATGCAGGCACCTATGACCAGAAGGTGCAGGGGGGCAAGTAG
1.4             TACGTGCCTGGTTACAAGCATGCGGGCACCTATGACCAGAAGGTGCAGGGGGGCAAGTAG
1.2             TACGTGCCGGGCTACAAGCACGCAGGCACCTATGACCAGAAGGTGCAGGGGGGCAAGTAG
1.1             TATGTGTCCGGCTACAAGCACGCAGGCACCTACGACCAGAAGGTGCAAGGGGGCAAGTAG
                ** *** * ** ******** ** ******** ************** ************

1.3             CCTCATAGGCTGACGCTCTGGACACTATAGGTGGC---AGGCACAGGACTTACACCCATT
1.4             CCTTACGGGCTGGAGCTCCGGACACTACAGGTGGC---AGGCACAGGACTTACACCCATT
1.2             ------------------------------------------------------------
1.1             CCCC-CGCTCCATGCCTCGCGGCACTGCCGGTGTCCCCAGAGCAGGGACTCTGTCACCTC
                                                                            

1.3             GCACTTCATTACATTCCTATGTTTAACTGGGCAGAACTCAGAATGCACCTCCACTAGGCG
1.4             GCACTTCATTACATTCCTATGTT-AACTGGGCAGAACTCAGAATGCACCTCCACTAGGCG
1.2             ------------------------------------------------------------
1.1             GCACTTCATTACATTCCTGTACTAACTGGGGCAGAACTCAGACGGGTGCCCCAGAGGGGG
                                                                            

1.3             ATGGTGGG-GGCAATGCCCGA-------------TCCTCCTCCTGCTGGGTGCTTTGA-C
1.4             ATGGTGGG-GGCGATGCCCAG-------------GCCTCCTCCTGCTGGGTGCTTCGA-C
1.2             ------------------------------------------------------------
1.1             CTGGGGGGCGGCCAGGCCCAGGCCTCCCTCCTGCCCCTCCTCCTACCGGATGCCCCCAGC
                                                                            

1.3             ACTTCTCCCTCAGACCCCAGGTTTGGGCCGTGATTCACTGTCCTGTCCTAACATACCTGC
1.4             ACTTCTCCCTCAGACCCCAGGTTTGGGCCGTGATTCATTGTCCTGTCCTAACATACCTGC
1.2             ------------------------------------------------------------
1.1             ACTCCCCTCTCAAACC--AGGTTTGGGCCCCAGTTCGCTGACCC-TCCTAATACACCTGC
                                                                            

1.3             CCTGTCCACAGCTGGAAAGTGGACTGCTATTTCCAA-CTGTCTCCCAGGATCATACCATA
1.4             CCTGTCCACAGCTGGGAAGTGGACTGCTCTTTCCAAACTGTCTCCCAGGATCATACCACA
1.2             ------------------------------------------------------------
1.1             CTCGTCCTCAGCC---------------ATTTCCAAAGTGTCTCGC-GGATCACACCACA
                                                                            

1.3             CTGGCCACTTGATTTTCAGGTAAAAGGGGGTGGTTTGGGTA---AGGAGAAGCA-----G
1.4             CTGGCCACTCGAGCTGCACGTAAAAGGGG-TGTTCTGGGTAC-TGGCAGAAGTAAGGGTG
1.2             ------------------------------------------------------------
1.1             CTGGGCACGTGGTTTGCAGGTCAAAGGGGCGTTTTAAAGCAGCTGGCTGTCATGGCAACA
                                                                            

1.3             AGCAGATGCCAGAACTCAC------GCTGACCTTATCTAGGCACTTCTAGGTCAGCAGGA
1.4             AGCAGATGTGAGAACTCAC------GCTGGCTTTATCTAGGCACTTGTAGGGCGGCAGGA
1.2             ------------------------------------------------------------
1.1             GGAGGCTGTGCTGACCTCCTGAGCGGCAGACACCTTCCAGGAGCCCTGAGGGTGGCAGGA
                                                                            

1.3             GCTAAGA--AACTAACCAACTGCATAGAGTAATCCTAAACAGGCCCTTTCATCTTTCTTG
1.4             GCTAAGG--AACTAACCAACCGGATAGAGTAATCCTAAACAGGCCGCTTCATCCTTTATG
1.2             ------------------------------------------------------------
1.1             GCTAACCCCAACCAGCAGGCAACTAACACGGAATTGGCCCCACACCGGACGTGGGAGGTG
                                                                            

1.3             ACCACAGCACATGGCTGAGGCTACTTGGTGGGTTAGCACACATGTGTGTGAATACACATA
1.4             ACCACAGCACACAACTG-------------------------------------------
1.2             ------------------------------------------------------------
1.1             TCTGTGGGGCCCGAGGCCTGTCCTGTGTGCAGCGGACACCACGGGGCCTTCCTGCTTTCC
                                                                            

1.3             TGCACACATG-CATATTAACCAACCGAGTCTGTGCTGTGAGAGGCCAAGAGAAAATGGAA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TGGGCAGAGGGCAGAGTGAGGCCACCTGGCGGGGGTGCTGGGCGCCTGGCACATGTGTGG
                                                                            

1.3             GTTCCCCAGCGACCAGGAGA-----GTGACTTGGAGTATGAAGCTGGAAGTTTCTTCAGT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGAAGCCGGTCACATGGACACACCTGTGCACACATGCCTACAGGCCAGCTCTGTGCCAAG
                                                                            

1.3             GTTGTTTTAAGAAATGACAAGACTAT--------ATGCTTGGTCTCAAGAGTGATCCAGG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGCAACCTAGGTAAAACGAAAGCCGTCAGGGGCAGTGGGCGGCTTCCCGGCTGA-CCACA
                                                                            

1.3             GAGATCCAGAACATCAAGCTGCCATGTCCCATCACCAGGTTGGGACGCACATCATGCTGA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GTGGCTTGGACTGTGAGGGTAGAGTAGGCTCGCTTTGCTTTCCTGAGAAGATGCGGTGGC
                                                                            

1.3             GACACTTTGTC-CAGACCAGGCCTGGACAGTTGTTCCACCAGTGTGAGATGGAAGCTTTT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TGCCTATGTTCTCAGAGCGGGTCTGGGAAG--ATTCAGAATGTCCGGTCCCTGTGGTGTT
                                                                            

1.3             ACCAGGGCAAGTTATACTGTGTTTTGCTCAAAATTATGTGTCTTCAGCTCTATGGAGCCT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GCCAGG-CAAGAGACACGAAGTGCCGAGACACTCCTCGCCTCACC-GCGTGACAGAGCCT
                                                                            

1.3             TCTCTGGGTTCAGTTTTCTTAACTTTTCTCACAAGTCTAAGTGTAGGGCACTGGAAACCA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CTGCCCGGCCCTCCCGT-TCGCCCGTCCTCACTAGC-----TGCACCCTGTTTGCTCGCA
                                                                            

1.3             GAACTAGGCCCAAGAAAGATTTGCAGCATCTGCTAAGGTTTCTTTTTCTGCCACAGGAGA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GACCTCCCATTGCCACAGCCCAAGCACCTTCTTCAACTCTCCCAAAATGGCTCAGCCTAA
                                                                            

1.3             GAAGTCAGGACTCAGCCCATCCATGTGTGAGGATGGCACTTAGCTAGGCCCAAAGGCATG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CCTCTCCTGGCCAATCCCCCCCGCCGGAGAGCAGGACACTAGGGAGGACCCCCAGTCCTG
                                                                            

1.3             CACCATCCTCATAAGAGCCCCACAGCAATTGTTCCTTTGCATTAACACAGCCCTAGCCTT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CAGTGTCTGTGGGGGTTTCTC-TGCCAGCAGGGGGCTGAGCAGAGCCCATCCAGGACACT
                                                                            

1.3             GCATGCAACTTGG-------TGGACTGTGTGGCCTTGTTTCTAGAAAAC-ACACAGTGGC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CCACACTGCCAGGACACACCCAGGCGGCCCGCCCTTGCCTGTCTGCACCTGGGGAGAAGC
                                                                            

1.3             CTCAGGATATGCTTCCTGGAGCAGATGGGTGTTGAGGGTGGGACATTTTACATGGCTTGG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CGGCGCTCCTGCTCCCTCCTGGGGAGGCTGACGGGTGTGGCCACCCGCTGTCACAATGGC
                                                                            

1.3             ACAGCATAGGTAGACAGCAAGGCTATCTTCCCCACTGCCATGGCACATAGTCACATTATC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             ACACTGCCACTGTCCCTTGGCACGCACACAGCCACAGCCACA-CGTGTGACCTGCTGGGC
                                                                            

1.3             CACCTCTCTGGGGTTCAGA-GAGCATGGCTTCACTGCAGCACCAGAGAAGACTACCTACT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CGTGGTTCTGGAGTCTACCTGCGGATGAGCCTGCGGCAGTCCTGGGGAAACTTTTCCAG-
                                                                            

1.3             AGCCTAAGAGAGAAAAGATGGGCCTTAATACCAGACCTCCCAGACAGCAGGCTCTCTGAA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             AGCCTGTTAGCCCGTGGCTACGGTCAGGCTCTGGCCAGGGCAGAGGGCTGCCCAGGGCCA
                                                                            

1.3             AGTTCAAAGTTAACAAGCTCAAGGAAAATGGGGATGGTTGGCTTCCTCCCAAGGTTTTTT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGCTCACAGTACAGGAGGGTGGCGAGGCCCCTCCCTCACTGGCACGCATGAGCACCACCC
                                                                            

1.3             GAGTTTGCTGTGCCTG-----GCAAGTGGTGGAGCCTCCTTTCTGGAATCTTACCTCACT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GCCTCCCCGACTCCCAAGAGTGCACCTGCTGCGGCCACAGCTCCGTGGAAGGACTCCCCC
                                                                            

1.3             GGTCTGGGGAAACAAAATGACCCTTGCACTTCTTGCACCCTCACCCAGAACCCCTAGTCC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TACCTGAGCAGAGCAGAAGCCCCAGGG-----CGGAGCTCCCAGCCAGCATGGTCCGCTG
                                                                            

1.3             CCATGTGGCTGGCAGTCTCCTGCTCTGAGGATGCTCTTTTCTACTGCCACCATCACAGCC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             AGGGCTGGGGGGCGGTCTCC---------GAGGCCCCTCAACAGAGAAGCCTCCACCTGA
                                                                            

1.3             AAGTAAAATGGAACACACACACAAATCCATCAGGAAG--TGACTGCATGTGGGCCAGGGC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGATGGGGAGGACCTGGCAGGCAGCTTCCACGGCAGGGCTGGGAAGTTCAGTGCCTGGAA
                                                                            

1.3             AGAGGGGAAGGCTAGTAAGGCATCAGAGGGTCCCCACAACATGTAGTGGGTCAGATGTTT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             ATAAAGAGCAAGGAAAAATGGACCTCAGGCTTCGTGGCTCCTTTAGGATGTCA----CCT
                                                                            

1.3             CCCTGACCCCCAAAATAGTACGAAAACCCTGGACAAAGCCTTCTGTTCAAAGGGCTAAGA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CACCGGCCTGGGGAA-GGCGGGGGGTGCCCAAGCCCAGCCCTGTGCCC------CCGCTG
                                                                            

1.3             TGCCAGAATGATGTCCAGATGAAGATTCAAGCCAAGTCAAGGGTTAACAGCCTAGGAACA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             AACCTGGCTGGACCGCGTGTGAAAGGCAGAACTAA--CGTGCGGAAACATTTGAAAACAA
                                                                            

1.3             CCTAGGAAACAACATAAGTGTCCACCTTCACGTGACCGCCCAGCGTCATGGGGAAGCTTC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CTCTGAATGTGCGGTTCGGAATCACCCGATCACAGACGAGCGGTCAC-CGGAATCGCCCG
                                                                            

1.3             ATTATAAACTGGTCACCTTACCTATGTGCTCAGGACTGAACAGAAAAGCTCAGAGTGGCA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GTCACAGACGAGCAGTCATCGGACTCACCCGATCACAGACGAGCGGTCACCGGAATCGCC
                                                                            

1.3             AGCCCGCATAGGTCCTGGGCAGTAGAGGACCAGAACTGCCATCAGAGTGCCCAAAGGTAT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CGATCACAGACGAGC-GGCCACCGGAATCGCCCAATCACAGACAAGCAGTCATCGGAATC
                                                                            

1.3             GATCCTCAGCAGGAAAGCATTCCAGGAAAGCAACTGAGAAAGCATTTCTAATGGCTCTTA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             ACCCGATCACAGACGAGCAGTCATCGGACTCACCCGATCACAGA---CGAGCGGTCACCA
                                                                            

1.3             CACAGCTTGGACTTTGTAAATGAAAATTGGGTTACTCTGCCTTGCTGGTCCTTACTGTCC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GACTCGCCCGA--TCACAGACGAGCAGTCATCGGAATCACCCGATCACAGACGAGCAGTC
                                                                            

1.3             AAGAGCAGAACCTGAGCACCCTTGGGTCCTGAGGGATAGTCCTAGGCCTGCCCATATAGT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             ATCGGACTCACCCGATCACAGACGAGCGGTCACCAGAATCGCCCGATCACAGACGAGCAG
                                                                            

1.3             TCCCCAGCAACACCCAGAACTATGTCAGACAAGTGGTCTTCATTGTGTTCCCCCTGCCCC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TCATCGGAATCACCCG-----ATCACAGACGAGTGGCCACCGGAATCACCCGATAACAGC
                                                                            

1.3             CCAGAGTTTCCTTACACAGCACCTTTCTTTAGTCAGTGTTAAGTTTAACTTTGAAAATAA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CCATCACAACTCCAAAGCCCTTGTGTTGAAAAGGCCGAGGACGAGTGGTCACCAAACAGG
                                                                            

1.3             ACGCTCCCTCTAGATTATATGTCATCTAGCGAGGGAAGGGTAGTAACAATTAGATCACGG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GTGGCTCCCCAGGTCCCGAAGCCTGAGACCCGGAAGGCCCTGGCACCCTTACACCCTCGG
                                                                            

1.3             AGACTTGGTGTCTTTGTACCGTCAGTTTAAAATGTCTATGGAATTCATTGTGACATCTGT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             ACTCCTGCCCTCCTCGGCCTCCCTGGCCCCAGCGC-----GGCTCCACCCTGGGCTGCGT
                                                                            

1.3             GTACCCTTTCGACATAGAAACTGATTTGAATCAAACTTTGCTGCACAAAACAGATGTGTA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CTCCTGGTCACAGGCTGCGTTTCTCCTTTCTGTCCGTGGGCAGCCCAGTCCCCACA---G
                                                                            

1.3             TTTTCCTCAGTTTGATTTGAACACACAGGTAGAGTGTTTGTCTCTGCTGCATGTTTTATG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TCACGGCCAAGCCACGCAGAACGAACATGACTCCAGAGGACCTCGCCCTGGAGCTGAGCC
                                                                            

1.3             CAATACCAATTAGCTATTACTAATTATGGATAAATAGAATTCAGTGTCTGTGAATAAAAA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TGGCGCCGGGTCAGGACGGAGGGAAGGGCGGGTTGGGGTCCGCGGGTCCTCACACCGCAC
                                                                            

1.3             CAAACAAACAAAAACTGCACAGCATGCAAACCAAGACCCAGGGCCATGTGCTATTAGGTG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGCAGGCACAGAGGCTCGCCAGGCCCTGATCCGGTCTGTGGGGACGAGGGACACTGAG-G
                                                                            

1.3             ACAGGCACACGAGACAGGGATAGGTTCCCATAGAGGGTGACACTCAGGAGGTGACATTTT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             AGAGGTGCTGGGCACCAGGACGCTGCCTCCTGGTCCCTGGTTGGCCTCAGACAA--GCAC
                                                                            

1.3             CATTTCTAGAGGGGACACCCAGGAGACAGAGACATACTTTGTTGTGAGCTGACCCAGGAA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGCCTCGAGAAAAGAGCCAAGCGCATCGGGAGCACACCAGAAACCGGCCCTGAGCACGAG
                                                                            

1.3             ACAAAGGATACATTCTATCAGGGGAAGACACTCAAGAGACAGAGACAGGCTTTCTTTGAG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             A-AGAGCCTCCGCCCGGCCCGGGCACCACCCGACCTCGCAGGGAGCAGGCCCTGTCACCG
                                                                            

1.3             TTATGACAGCAAAGA-ATAAGGACAGGTTCTGTCAGGGGCGACACTCAGGGACATGGATT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             ACGGGTCACCTCGCCCACACGGCCAGCACCGACTCACCACAGCCCTTCCCAGACCTGGCT
                                                                            

1.3             GGAGTGACAGAGTCATATTTTGTTGCACGTGACACTCGAAGATATGTTTTGTCAGAGTGA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGAGTGGCCGGAGCGG----CGGGGCTCATGGCTCCCATCTTGGCCCCTGGAGGTGAGCT
                                                                            

1.3             AACCTAGGAACATGGTCTGTAGAGGGTGACATACAGGAATACATTCTGTTGGAGGTGACA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CATTCACAGAAGTGGTCCCTTCACTCTGAGAGAGAAAATCGTGGCGTGCATCCCAAACCC
                                                                            

1.3             TTCAGGAGAAAGGGAAAAATTGCAGGGAAGAGCCATGCAG--ATGGTGTCTTAAGTGTCA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TAGGCCACGCCTGTGGGTTTCGTGAATGAGATCGAGGCTGCTGTGGCACCCTGCCCGTCC
                                                                            

1.3             GGGAACGATGGTAGGTAGGTTGGAGGCTGTCTGCAAACACTGACTCTAGTAGAACCCCTA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TGGCCTGGAGCACCCTGGGATCCTGGAGG---GAGAGGCCCCACGCCCCCACTCTCCCTC
                                                                            

1.3             TTTATTTCTATTTAATGTAACGAACAACTAGTTAGTGGAAATGCTTTACCAAAATCAGAG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CACACTTCCAGGGTTGGTGCCCACGAGTTAGAGGCACGGCCTCCCCCAGCGGCCCTCAGG
                                                                            

1.3             TTCAAATTACGTATTTAAATATTGTTGAAGATCTATATTTATACTGGAGTATTTTTACAC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CTTTTCTCAGACATGCGGGAGCCAGGAGAGCACCCTTCTCCACTCAGCTCCAAAGCGAAT
                                                                            

1.3             CTTTCAGTATCCTATCTTATATTGGGGCATAGGGGCATTATGACACATGGAGATAGTTCT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CTTTGAAAACACCCACTCGGCTCCCATCTCTGTCACCTAGCCAGGAGGGGTAGCAAAAAT
                                                                            

1.3             GAACTGGGCTGCACAACAGTTCTGCCACCTCCCTGTA-GTCTGTCCCAGGGAGTTGACAG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             AAAGTCACGAGGACATAGTGGTCACCACTGTCAGTTACAACTTGTCTGTGGAATCCGTAA
                                                                            

1.3             GTGCCTGCCCTGAGCCAAGACCCACTCGCAGAGGCCCTGGGCTGCCTCAGCTGCCTGTTT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TTGCATCTGTGTGCCGCCTCCGAACACAGAACATTGTTTGGACGGCAGCCCCACTGCACA
                                                                            

1.3             TAATGAATA-----GTTTTACTGGCACACAGCTGTACCCATGTGTTTACATACTGTTCTG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TAACAGACCCGTGCATCTTCCTCAGTCAGTTTCTGAATATTGTGAATTCAGGCAGGTGTG
                                                                            

1.3             TAGCTGCTTTGGTATTAGAACTAGCTGGGAGGATTGAGACAGACGCCATGGCACAGACAC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TGTTCTCTTCTGCATGTTTTTATGCACTGCCAATTAGCTTCTAC-TAACCACGGTTCAAC
                                                                            

1.3             ATATGGTATTTGCCACCTGTTCTTTTTCAGGGAACACTGCCTGTCTGTCTGCTTGGTTCT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             AGAAAATAAATGTGTATTTGTGAATAACAAACTGCACAACCTGCAAACCAGGAGAGAGGG
                                                                            

1.3             CTCTCTGTAGACTTGTGTACTACCTGGCTACAACATGGGCACATGGGGGAAGCCCTGCCA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             ACAGGTTCTGTCAGGGGTGACACCAGGACACAGGGACAGGTTCTGTCGGGGGTGACACCA
                                                                            

1.3             ATTAAGAATGGCAAGAGTGACAATTTAGCTGTACTGTGAAGACATCAGTAGACAGAATAT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGACACAGGGACAGGTTCTGTCATG----GGTGACACGAGGACACAGGGACAGGTTCTAT
                                                                            

1.3             CCTTC-CAACACTGAGCCAAACTGCTCTTCTTCACCAACATACTACTGACCATTTTACAG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CATGGGTGACACCAGGAGAGAGGGACAGGTTCTGTTGGGGGTGACAAGAGGAG---ACAG
                                                                            

1.3             TTCAGGGGTGTGGCCATCTTGGGACGCTTAAATTATCTCTTCCTTTAGATTTAACCAAGC
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGACAGGTTCTGTCGGGGGTGACACCAGGAGAGAGGGACAGGTTCTGTCAGGGGTGACAC
                                                                            

1.3             CAAAAAACAAAGGAAGCCTGTACAACAACTTAAACTTGAAAGGAATAATATGCTACTACT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CAGGAGAGAGGGACAGGTTCTGTTGGGGGTGACACCAGGACACAGGAATAGGTTCTGTCG
                                                                            

1.3             ACTAGTTTGTACTAA--GTTTTTTTTTTTCAAGAAAGG-GAGTTAAGTTTATATATATGT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GGAGGACAGTGCTGATCGTGTCTCAGCATCAGGAAAGGAGAAAGGCAGAGGGAGAGCGCT
                                                                            

1.3             GATATATATTTTTACACTATTTTATTAATGTTAGGGATATGGAGTTTATCACTTTATCAG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GAGAAGACTGTTCACGCCAGAGTGCTTATTT-----ATTTTTAATTTACTGCTATAGGA-
                                                                            

1.3             TGTGATGGGTAATGTTGATGTCATGGGTGTTCTGACTCAGAAAGACACTTATACTGACAT
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             TAAGCAACCAGGTAGTGTTCCTAACAATTAGCGTTACCAAAATTAAAGTTCAAATTATAT
                                                                            

1.3             CTAAGCCACACTTGCTCAGACTGTCTGTCAGGTCAGGATGGCCCTGCTGTCCCTCCTATA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             GTTTAAAATATTGTAGAAGATATATATTTATACTGGACTACTTTTACACCTTCTAATATC
                                                                            

1.3             GAGCGCAAGGCGTCTAGTCACCTAGTTGGACATATGGCCTGGCTCATATTGCTTTAGTGA
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CTGTCCAAG---TTTGGGCGCAGATGGTGGAGTTGGGCTGGCATCATGTC-CTGTGGCCG
                                                                            

1.3             AACAGCTTGTGTCTTTTATTTCGTTTATTGTGTTTGCTGTTATTAACATTGTGTGTCAAG
1.4             ------------------------------------------------------------
1.2             ------------------------------------------------------------
1.1             CCCCACTTGCCTGTTGGTGCCACTCCATCCCGGGCCCCAGGGATGCCAGCTCAGGGCTGA
                                                                            

1.3             TTGGTAAAGTGATGAATAAAGGTTTTAAAATATGGAAAAAAAAAAAAAAAAAAA--
1.4             --------------------------------------------------------
1.2             --------------------------------------------------------
1.1             CCACAGCAGCCCTGCGTGGGCATCACCTCCTACCCCAGCCCCCATCCTGGGCTGCT
                                                                        

1 row in set (0.00 sec)

mysql> select * from orthologues where orthologuenumber = 1 and sequencenumber =1\G
*************************** 1. row ***************************
orthologuenumber: 1
  sequencenumber: 1
          source: unigene_human
              id: S1367513
            name: AB017016
     description: 
        sequence: GCCTCCGCTGCAGTCGCTGCGTCTCCAAGCAACATGGCTGACAAGGCCAAGCCTGCCAAAGCTGCCAACAGGACGCCCCCCAAGTCCCCGGGGGACCCCTCGAAGGACCGGGCAGCCAAGAGGCTGTCGCTGGAATCGGAGGGTGCTGGTGAGGGGGCAGCCGCATCCCCTGAGCTCAGTGCCCTGGAGGAGGCCTTCCGGCGCTTTGCCGTGCACGGGGACGCCAGGGCCACCGGGAGGGAGATGCACGGCAAGAACTGGTCGAAGCTGTGCAAGGACTGCCAGGTGATCGACGGCAGGAACGTGACCGTCACTGACGTGGACATCGTCTTCAGCAAGATCAAAGGGAAGTCTTGCCGGACCATCACCTTTGAGCAGTTCCAGGAGGCGCTGGAGGAGCTCGCCAAGAAGCGATTCAAAGACAAGAGCAGCGAGGAGGCCGTTCGCGAGGTGCACAGGCTCATCGAGGGCAAGGCGCCCATCATCTCAGGGGTGACGAAAGCCATCTCGTCGCCCACAGTGTCGAGGCTCACGGACACCACCAAGTTCACGGGCTCCCACAAGGAGCGCTTCGACCCCTCTGGCAAGGGCAAGGGCAAGGCTGGCCGCGTGGATCTGGTGGACGAGTCAGGCTATGTGTCCGGCTACAAGCACGCAGGCACCTACGACCAGAAGGTGCAAGGGGGCAAGTAGCCCCCGCTCCATGCCTCGCGGCACTGCCGGTGTCCCCAGAGCAGGGACTCTGTCACCTCGCACTTCATTACATTCCTGTACTAACTGGGGCAGAACTCAGACGGGTGCCCCAGAgggggctggggggcggccaggcccaggcctccctcctgcccctcctcctaccggatgcccccagcactcccctcTCAAACCAGGTTTGGGCCCCAGTTCGCTGACCCTCCTAATACACCTGCCTCGTCCTCAGCCATTTCCAAAGTGTCTCGCGGATCACACCACACTGGGCACGTGGTTTGCAGGTCAAAGGGGCGTTTTAAAGCAGCTGGCTGTCATGGCAACAGGAGGCTGTGCTGACCTCCTGAGCGGCAGACACCTTCCAGGAGCCCTGAGGGTGGCAGGAGCTAACCCCAACCAGCAGGCAACTAACACGGAATTGGCCCCACACCGGACGTGGGAGGTGTCTGTGGGGCCCGAGGCCTGTCCTGTGTGCAGCGGACACCACGGGGCCTTCCTGCTTTCCTGGGCAGAGGGCAGAGTGAGGCCACCTGGCGGGGGTGCTGGGCGCCTGGCACATGTGTGGGGAAGCCGGTCACATGGACACACCTGTGCACACATGCCTACAGGCCAGCTCTGTGCCAAGGGCAACCTAGGTAAAACGAAAGCCGTCAGGGGCAGTGGGCGGCTTCCCGGCTGACCACAGTGGCTTGGACTGTGAGGGTAGAGTAGGCTCGCTTTGCTTTCCTGAGAAGATGCGGTGGCTGCCTATGTTCTCAGAGCGGGTCTGGGAAGATTCAGAATGTCCGGTCCCTGTGGTGTTGCCAGGCAAGAGACACGAAGTGCCGAGACACTCCTCGCCTCACCGCGTGACAGAGCCTCTGCCCGGCCCTCCCGTTCGCCCGTCCTCACTAGCTGCACCCTGTTTGCTCGCAGACCTCCCATTGCCACAGCCCAAGCACCTTCTTCAACTCTCCCAAAATGGCTCAGCCTAACCTCTCCTGGCCAATCCCCCCCGCCGGAGAGCAGGACACTAGGGAGGACCCCCAGTCCTGCAGTGTCTGTGGGGGTTTCTCTGCCAGCAGGGGGCTGAGCAGAGCCCATCCAGGACACTCCACACTGCCAGGACACACCCAGGCGGCCCGCCCTTGCCTGTCTGCACCTGGGGAGAAGCCGGCGCTCCTGCTCCCTCCTGGGGAGGCTGACGGGTGTGGCCACCCGCTGTCACAATGGCACACTGCCACTGTCCCTTGGCACGCACACAGCCACAGCCACACGTGTGACCTGCTGGGCCGTGGTTCTGGAGTCTACCTGCGGATGAGCCTGCGGCAGTCCTGGGGAAACTTTTCCAGAGCCTGTTAGCCCGTGGCTACGGTCAGGCTCTGGCCAGGGCAGAGGGCTGCCCAGGGCCAGGCTCACAGTACAGGAGGGTGGCGAGGCCCCTCCCTCACTGGCACGCATGAGCACCACCCGCCTCCCCGACTCCCAAGAGTGCACCTGCTGCGGCCACAGCTCCGTGGAAGGACTCCCCCTACCTGAGCAGAGCAGAAGCCCCAGGGCGGAGCTCCCAGCCAGCATGGTCCGCTGAGGGCTGGGGGGCGGTCTCCGAGGCCCCTCAACAGAGAAGCCTCCACCTGAGGATGGGGAGGACCTGGCAGGCAGCTTCCACGGCAGGGCTGGGAAGTTCAGTGCCTGGAAATAAAGAGCAAGGAAAAATGGACCTCAGGCTTCGTGGCTCCTTTAGGATGTCACCTCACCGGCCTGGGGAAGGCGGGGGGTGCCCAAGCCCAGCCCTGTGCCCCCGCTGAACCTGGCTGGACCGCGTGTGAAAGGCAGAACTAACGTGCGGAAACATTTGAAAACAACTCTGAATGTGCGGTTCGGAATCACCCGATCACAGACGAGCGGTCACCGGAATCGCCCGGTCACAGACGAGCAGTCATCGGACTCACCCGATCACAGACGAGCGGTCACCGGAATCGCCCGATCACAGACGAGCGGCCACCGGAATCGCCCAATCACAGACAAGCAGTCATCGGAATCACCCGATCACAGACGAGCAGTCATCGGACTCACCCGATCACAGACGAGCGGTCACCAGACTCGCCCGATCACAGACGAGCAGTCATCGGAATCACCCGATCACAGACGAGCAGTCATCGGACTCACCCGATCACAGACGAGCGGTCACCAGAATCGCCCGATCACAGACGAGCAGTCATCGGAATCACCCGATCACAGACGAGTGGCCACCGGAATCACCCGATAACAGCCCATCACAACTCCAAAGCCCTTGTGTTGAAAAGGCCGAGGACGAGTGGTCACCAAACAGGGTGGCTCCCCAGGTCCCGAAGCCTGAGACCCGGAAGGCCCTGGCACCCTTACACCCTCGGACTCCTGCCCTCCTCGGCCTCCCTGGCCCCAGCGCGGCTCCACCCTGGGCTGCGTCTCCTGGTCACAGGCTGCGTTTCTCCTTTCTGTCCGTGGGCAGCCCAGTCCCCACAGTCACGGCCAAGCCACGCAGAACGAACATGACTCCAGAGGACCTCGCCCTGGAGCTGAGCCTGGCGCCGGGTCAGGACGGAGGGAAGGGCGGGTTGGGGTCCGCGGGTCCTCACACCGCACGGCAGGCACAGAGGCTCGCCAGGCCCTGATCCGGTCTGTGGGGACGAGGGACACTGAGGAGAGGTGCTGGGCACCAGGACGCTGCCTCCTGGTCCCTGGTTGGCCTCAGACAAGCACGGCCTCGAGAAAAGAGCCAAGCGCATCGGGAGCACACCAGAAACCGGCCCTGAGCACGAGAAGAGCCTCCGCCCGGCCCGGGCACCACCCGACCTCGCAGGGAGCAGGCCCTGTCACCGACGGGTCACCTCGCCCACACGGCCAGCACCGACTCACCACAGCCCTTCCCAGACCTGGCTGGAGTGGCCGGAGCGGCGGGGCTCATGGCTCCCATCTTGGCCCCTGGAGGTGAGCTCATTCACAGAAGTGGTCCCTTCACTCTGAGAGAGAAAATCGTGGCGTGCATCCCAAACCCTAGGCCACGCCTGTGGGTTTCGTGAATGAGATCGAGGCTGCTGTGGCACCCTGCCCGTCCTGGCCTGGAGCACCCTGGGATCCTGGAGGGAGAGGCCCCACGCCCCCACTCTCCCTCCACACTTCCAGGGTTGGTGCCCACGAGTTAGAGGCACGGCCTCCCCCAGCGGCCCTCAGGCTTTTCTCAGACATGCGGGAGCCAGGAGAGCACCCTTCTCCACTCAGCTCCAAAGCGAATCTTTGAAAACACCCACTCGGCTCCCATCTCTGTCACCTAGCCAGGAGGGGTAGCAAAAATAAAGTCACGAGGACATAGTGGTCACCACTGTCAGTTACAACTTGTCTGTGGAATCCGTAATTGCATCTGTGTGCCGCCTCCGAACACAGAACATTGTTTGGACGGCAGCCCCACTGCACATAACAGACCCGTGCATCTTCCTCAGTCAGTTTCTGAATATTGTGAATTCAGGCAGGTGTGTGTTCTCTTCTGCATGTTTTTATGCACTGCCAATTAGCTTCTACTAACCACGGTTCAACAGAAAATAAATGTGTATTTGTGAATAACAAACTGCACAACCTGCAAACCAGGAGAGAGGGACAGGTTCTGTCAGGGGTGACACCAGGACACAGGGACAGGTTCTGTCGGGGGTGACACCAGGACACAGGGACAGGTTCTGTCATGGGTGACACGAGGACACAGGGACAGGTTCTATCATGGGTGACACCAGGAGAGAGGGACAGGTTCTGTTGGGGGTGACAAGAGGAGACAGGGACAGGTTCTGTCGGGGGTGACACCAGGAGAGAGGGACAGGTTCTGTCAGGGGTGACACCAGGAGAGAGGGACAGGTTCTGTTGGGGGTGACACCAGGACACAGGAATAGGTTCTGTCGGGAGGACAGTGCTGATCGTGTCTCAGCATCAGGAAAGGAGAAAGGCAGAGGGAGAGCGCTGAGAAGACTGTTCACGCCAGAGTGCTTATTTATTTTTAATTTACTGCTATAGGATAAGCAACCAGGTAGTGTTCCTAACAATTAGCGTTACCAAAATTAAAGTTCAAATTATATGTTTAAAATATTGTAGAAGATATATATTTATACTGGACTACTTTTACACCTTCTAATATCCTGTCCAAGTTTGGGCGCAGATGGTGGAGTTGGGCTGGCATCATGTCCTGTGGCCGCCCCACTTGCCTGTTGGTGCCACTCCATCCCGGGCCCCAGGGATGCCAGCTCAGGGCTGACCACAGCAGCCCTGCGTGGGCATCACCTCCTACCCCAGCCCCCATCCTGGGCTGCT
1 row in set (0.00 sec)


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Sep 30 22:42:15 EDT 2007
CREATED orthologuestrainingset.pl TO EXTRACT SEQUENCES CONTAINING MOTIFS FOUND IN ORTHOLOGUE SET

unigene ORTHOLOGUE 1 HAS TWO MOTIFS - PFAM 'PF05517' AND PANTHER 'PTHR12932':

(NB: SEQUENCE 1 WAS ERRONEOUS - NO IPRSCAN HITS EXCEPT 20 'SEG' MOTIFS)

select * from orthologuesiprscan where orthologuenumber = 1 and targetname!='seg' and  sequencenumber=2\G
*************************** 1. row ***************************
orthologuenumber: 1
  sequencenumber: 2
    targetsource: PANTHER
        targetid: PTHR12932
      targetname: P25 ALPHA-RELATED
      interproid: IPR008907
    interproname: P25-alpha
    interprotype: Family
     hitscoredec: 1.00
     hitscoreexp: -144
       hitstatus: T
      querystart: 433
       querystop: 1009
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
          number: 0
*************************** 2. row ***************************
orthologuenumber: 1
  sequencenumber: 2
    targetsource: PANTHER
        targetid: PTHR12932:
      targetname: TUBULIN POLYMERIZATION PROMOTING PROTEIN
      interproid: noIPR
    interproname: unintegrated
    interprotype: unintegrated
     hitscoredec: 1.00
     hitscoreexp: -144
       hitstatus: T
      querystart: 433
       querystop: 1009
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
          number: 0
*************************** 3. row ***************************
orthologuenumber: 1
  sequencenumber: 2
    targetsource: PFAM
        targetid: PF05517
      targetname: p25-alpha
      interproid: IPR008907
    interproname: P25-alpha
    interprotype: Family
     hitscoredec: 1.10
     hitscoreexp: -117
       hitstatus: T
      querystart: 511
       querystop: 1003
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
          number: 0
3 rows in set (0.00 sec)


 select * from orthologuesiprscan where orthologuenumber = 1 and targetname!='seg' and  sequencenumber=3\G
*************************** 1. row ***************************
orthologuenumber: 1
  sequencenumber: 3
    targetsource: PANTHER
        targetid: PTHR12932
      targetname: P25 ALPHA-RELATED
      interproid: IPR008907
    interproname: P25-alpha
    interprotype: Family
     hitscoredec: 1.70
     hitscoreexp: -148
       hitstatus: T
      querystart: 106
       querystop: 679
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
          number: 0
*************************** 2. row ***************************
orthologuenumber: 1
  sequencenumber: 3
    targetsource: PANTHER
        targetid: PTHR12932:
      targetname: TUBULIN POLYMERIZATION PROMOTING PROTEIN
      interproid: noIPR
    interproname: unintegrated
    interprotype: unintegrated
     hitscoredec: 1.70
     hitscoreexp: -148
       hitstatus: T
      querystart: 106
       querystop: 679
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
          number: 0
*************************** 3. row ***************************
orthologuenumber: 1
  sequencenumber: 3
    targetsource: PFAM
        targetid: PF05517
      targetname: p25-alpha
      interproid: IPR008907
    interproname: P25-alpha
    interprotype: Family
     hitscoredec: 4.50
     hitscoreexp: -116
       hitstatus: T
      querystart: 181
       querystop: 673
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
          number: 0
3 rows in set (0.02 sec)


 select * from orthologuesiprscan where orthologuenumber = 1 and targetname!='seg' and  sequencenumber=4\G
*************************** 1. row ***************************
orthologuenumber: 1
  sequencenumber: 4
    targetsource: PANTHER
        targetid: PTHR12932
      targetname: P25 ALPHA-RELATED
      interproid: IPR008907
    interproname: P25-alpha
    interprotype: Family
     hitscoredec: 1.40
     hitscoreexp: -148
       hitstatus: T
      querystart: 162
       querystop: 735
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
          number: 0
*************************** 2. row ***************************
orthologuenumber: 1
  sequencenumber: 4
    targetsource: PANTHER
        targetid: PTHR12932:
      targetname: TUBULIN POLYMERIZATION PROMOTING PROTEIN
      interproid: noIPR
    interproname: unintegrated
    interprotype: unintegrated
     hitscoredec: 1.40
     hitscoreexp: -148
       hitstatus: T
      querystart: 162
       querystop: 735
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
          number: 0
*************************** 3. row ***************************
orthologuenumber: 1
  sequencenumber: 4
    targetsource: PFAM
        targetid: PF05517
      targetname: p25-alpha
      interproid: IPR008907
    interproname: P25-alpha
    interprotype: Family
     hitscoredec: 4.50
     hitscoreexp: -116
       hitstatus: T
      querystart: 237
       querystop: 729
       childlist: 
     foundinlist: 
          golist: 
           frame: 0
          number: 0
3 rows in set (0.00 sec)


SEARCHED FOR TRAINING SET SEQUENCES THAT HAVE BOTH MOTIFS:


SLOW SEARCH WITHOUT FULLTEXT INDEX
select count(*) from swissprotiprscan where targetid='PF05517'; 
+----------+
| count(*) |
+----------+
|       53 |
+----------+
1 row in set (59.68 sec)

*** FAST SEARCH WITH FULLTEXT INDEX
SELECT count(*) FROM swissprotiprscan WHERE MATCH(targetid) AGAINST ('PF05517');
+----------+
| count(*) |
+----------+
|       53 |
+----------+
1 row in set (0.02 sec)

SELECT DISTINCT id, name FROM swissprotiprscan WHERE MATCH(targetid) AGAINST ('PF05517');
+--------+--------------+
| id     | name         |
+--------+--------------+
| Q9VV43 | Y4893_DROME  |
| Q5PPN5 | Q5PPN5_RAT   |
| Q5DEP2 | Q5DEP2_SCHJA |
| Q5CHX6 | Q5CHX6_CRYHO |
| Q5BZ16 | Q5BZ16_SCHJA |
| Q5BTA2 | Q5BTA2_SCHJA |
| Q583A1 | Q583A1_9TRYP |
| Q4Z299 | Q4Z299_PLABE |
| Q4Y3R4 | Q4Y3R4_PLACH |
| Q4UIC0 | Q4UIC0_THEAN |
| Q4UA39 | Q4UA39_THEAN |
| Q4SVU9 | Q4SVU9_TETNG |
| Q5TR29 | Q5TR29_ANOGA |
| Q61EN3 | Q61EN3_CAEBR |
| Q9CRB6 | CG38_MOUSE   |
| Q9BW30 | CG38_HUMAN   |
| Q8T935 | Q8T935_TETTH |
| Q8T931 | Q8T931_TETTH |
| Q8I557 | Q8I557_PLAF7 |
| Q86E15 | Q86E15_SCHJA |
| Q7TQD2 | P25A_MOUSE   |
| Q7RD81 | Q7RD81_PLAYO |
| Q7R2L7 | Q7R2L7_GIALA |
| Q7PT09 | Q7PT09_ANOGA |
| Q6P604 | Q6P604_BRARE |
| Q4RI11 | Q4RI11_TETNG |
| Q4R3A0 | Q4R3A0_MACFA |
| Q4Q350 | Q4Q350_LEIMA |
| Q244Y3 | Q244Y3_TETTH |
| Q244Y1 | Q244Y1_TETTH |
| Q22LY5 | Q22LY5_TETTH |
| Q22LY4 | Q22LY4_TETTH |
| Q22LY3 | Q22LY3_TETTH |
| Q1JPR8 | Q1JPR8_MOUSE |
| Q16YE8 | Q16YE8_AEDAE |
| Q0P5Y3 | Q0P5Y3_MOUSE |
| Q01BN1 | Q01BN1_OSTTA |
| P91127 | YBYK_CAEEL   |
| P59282 | P25B_HUMAN   |
| Q27957 | P25A_BOVIN   |
| Q29EJ5 | Q29EJ5_DROPS |
| Q4Q349 | Q4Q349_LEIMA |
| Q4N792 | Q4N792_THEPA |
| Q4N2S7 | Q4N2S7_THEPA |
| Q4L233 | Q4L233_HUMAN |
| Q4DIP8 | Q4DIP8_TRYCR |
| Q4CVJ1 | Q4CVJ1_TRYCR |
| Q3ZCC8 | Q3ZCC8_BOVIN |
| Q3URG1 | Q3URG1_MOUSE |
| Q3T077 | Q3T077_BOVIN |
| Q2VYF3 | Q2VYF3_HUMAN |
| Q2VPM9 | Q2VPM9_XENLA |
| O94811 | P25A_HUMAN   |
+--------+--------------+
53 rows in set (0.00 sec)


SELECT count(*) FROM swissprotiprscan WHERE MATCH(targetid) AGAINST ('PTHR12932');
+----------+
| count(*) |
+----------+
|       56 |
+----------+
1 row in set (0.00 sec)


SELECT DISTINCT id, name FROM swissprotiprscan WHERE MATCH(targetid) AGAINST ('PTHR12932');
+--------+--------------+
| id     | name         |
+--------+--------------+
| Q9VV43 | Y4893_DROME  |
| Q5TR29 | Q5TR29_ANOGA |
| Q5PPN5 | Q5PPN5_RAT   |
| Q5DEP2 | Q5DEP2_SCHJA |
| Q5CHX6 | Q5CHX6_CRYHO |
| Q5BZ16 | Q5BZ16_SCHJA |
| Q5BTA2 | Q5BTA2_SCHJA |
| Q583A1 | Q583A1_9TRYP |
| Q4Z299 | Q4Z299_PLABE |
| Q4Y3R4 | Q4Y3R4_PLACH |
| Q4UIC0 | Q4UIC0_THEAN |
| Q4UA39 | Q4UA39_THEAN |
| Q4SVU9 | Q4SVU9_TETNG |
| Q61EN3 | Q61EN3_CAEBR |
| Q6P604 | Q6P604_BRARE |
| Q9VT66 | Q9VT66_DROME |
| Q9CRB6 | CG38_MOUSE   |
| Q9BW30 | CG38_HUMAN   |
| Q8T935 | Q8T935_TETTH |
| Q8T931 | Q8T931_TETTH |
| Q8I557 | Q8I557_PLAF7 |
| Q86E15 | Q86E15_SCHJA |
| Q7TQD2 | P25A_MOUSE   |
| Q7RP42 | Q7RP42_PLAYO |
| Q7RD81 | Q7RD81_PLAYO |
| Q7R2L7 | Q7R2L7_GIALA |
| Q7PT09 | Q7PT09_ANOGA |
| Q4RI11 | Q4RI11_TETNG |
| Q4R3A0 | Q4R3A0_MACFA |
| Q27957 | P25A_BOVIN   |
| Q244Y3 | Q244Y3_TETTH |
| Q244Y1 | Q244Y1_TETTH |
| Q22LY5 | Q22LY5_TETTH |
| Q22LY4 | Q22LY4_TETTH |
| Q22LY3 | Q22LY3_TETTH |
| Q1JPR8 | Q1JPR8_MOUSE |
| Q16YE8 | Q16YE8_AEDAE |
| Q0P5Y3 | Q0P5Y3_MOUSE |
| Q01BN1 | Q01BN1_OSTTA |
| P91127 | YBYK_CAEEL   |
| P59282 | P25B_HUMAN   |
| Q29EJ5 | Q29EJ5_DROPS |
| Q2LZQ7 | Q2LZQ7_DROPS |
| Q4Q350 | Q4Q350_LEIMA |
| Q4Q349 | Q4Q349_LEIMA |
| Q4N792 | Q4N792_THEPA |
| Q4N2S7 | Q4N2S7_THEPA |
| Q4L233 | Q4L233_HUMAN |
| Q4DIP8 | Q4DIP8_TRYCR |
| Q4CVJ1 | Q4CVJ1_TRYCR |
| Q3ZCC8 | Q3ZCC8_BOVIN |
| Q3URG1 | Q3URG1_MOUSE |
| Q3T077 | Q3T077_BOVIN |
| Q2VYF3 | Q2VYF3_HUMAN |
| Q2VPM9 | Q2VPM9_XENLA |
| O94811 | P25A_HUMAN   |
+--------+--------------+
56 rows in set (0.00 sec)


SELECT count(*) FROM swissprotiprscan WHERE MATCH(targetid) AGAINST ('PTHR12932') OR MATCH(targetid) AGAINST ('PF05517');
+----------+
| count(*) |
+----------+
|      109 |
+----------+
1 row in set (57.49 sec)


*** 'OR' IS SLOW:

SELECT DISTINCT id, name FROM swissprotiprscan WHERE MATCH(targetid) AGAINST ('PTHR12932') OR MATCH(targetid) AGAINST ('PF05517');

+--------+--------------+
| id     | name         |
+--------+--------------+
| O94811 | P25A_HUMAN   |
| P59282 | P25B_HUMAN   |
| P91127 | YBYK_CAEEL   |
| Q01BN1 | Q01BN1_OSTTA |
| Q0P5Y3 | Q0P5Y3_MOUSE |
| Q16YE8 | Q16YE8_AEDAE |
| Q1JPR8 | Q1JPR8_MOUSE |
| Q22LY3 | Q22LY3_TETTH |
| Q22LY4 | Q22LY4_TETTH |
| Q22LY5 | Q22LY5_TETTH |
| Q244Y1 | Q244Y1_TETTH |
| Q244Y3 | Q244Y3_TETTH |
| Q27957 | P25A_BOVIN   |
| Q29EJ5 | Q29EJ5_DROPS |
| Q2LZQ7 | Q2LZQ7_DROPS |
| Q2VPM9 | Q2VPM9_XENLA |
| Q2VYF3 | Q2VYF3_HUMAN |
| Q3T077 | Q3T077_BOVIN |
| Q3URG1 | Q3URG1_MOUSE |
| Q3ZCC8 | Q3ZCC8_BOVIN |
| Q4CVJ1 | Q4CVJ1_TRYCR |
| Q4DIP8 | Q4DIP8_TRYCR |
| Q4L233 | Q4L233_HUMAN |
| Q4N2S7 | Q4N2S7_THEPA |
| Q4N792 | Q4N792_THEPA |
| Q4Q349 | Q4Q349_LEIMA |
| Q4Q350 | Q4Q350_LEIMA |
| Q4R3A0 | Q4R3A0_MACFA |
| Q4RI11 | Q4RI11_TETNG |
| Q4SVU9 | Q4SVU9_TETNG |
| Q4UA39 | Q4UA39_THEAN |
| Q4UIC0 | Q4UIC0_THEAN |
| Q4Y3R4 | Q4Y3R4_PLACH |
| Q4Z299 | Q4Z299_PLABE |
| Q583A1 | Q583A1_9TRYP |
| Q5BTA2 | Q5BTA2_SCHJA |
| Q5BZ16 | Q5BZ16_SCHJA |
| Q5CHX6 | Q5CHX6_CRYHO |
| Q5DEP2 | Q5DEP2_SCHJA |
| Q5PPN5 | Q5PPN5_RAT   |
| Q5TR29 | Q5TR29_ANOGA |
| Q61EN3 | Q61EN3_CAEBR |
| Q6P604 | Q6P604_BRARE |
| Q7PT09 | Q7PT09_ANOGA |
| Q7R2L7 | Q7R2L7_GIALA |
| Q7RD81 | Q7RD81_PLAYO |
| Q7RP42 | Q7RP42_PLAYO |
| Q7TQD2 | P25A_MOUSE   |
| Q86E15 | Q86E15_SCHJA |
| Q8I557 | Q8I557_PLAF7 |
| Q8T931 | Q8T931_TETTH |
| Q8T935 | Q8T935_TETTH |
| Q9BW30 | CG38_HUMAN   |
| Q9CRB6 | CG38_MOUSE   |
| Q9VT66 | Q9VT66_DROME |
| Q9VV43 | Y4893_DROME  |
+--------+--------------+
56 rows in set (1 min 4.92 sec)


DOESN'T GIVE WHAT YOU'D EXPECT:

SELECT DISTINCT id, name FROM swissprotiprscan WHERE MATCH(targetid) AGAINST ('PTHR12932') AND MATCH(targetid) AGAINST ('PF05517');
Empty set (0.02 sec)


CHECK IPRSCAN HITS FOR EACH TRAINING SET MEMBER:

select * from swissprotiprscan where id='Q9CRB6' and name='CG38_MOUSE '\G

*************************** 1. row ***************************
          id: Q9CRB6
        name: CG38_MOUSE
targetsource: PANTHER
    targetid: PTHR12932
  targetname: P25-alpha
  interproid: IPR008907
interproname: P25-alpha
interprotype: Family
 hitscoredec: 4.90
 hitscoreexp: -130
   hitstatus: T
  querystart: 0
   querystop: 175
   childlist: 
 foundinlist: 
      golist: 
       frame: 0
      number: 0
*************************** 2. row ***************************
          id: Q9CRB6
        name: CG38_MOUSE
targetsource: PFAM
    targetid: PF05517
  targetname: p25-alpha
  interproid: IPR008907
interproname: P25-alpha
interprotype: Family
 hitscoredec: 2.80
 hitscoreexp: -119
   hitstatus: T
  querystart: 9
   querystop: 173
   childlist: 
 foundinlist: 
      golist: 
       frame: 0
      number: 0
2 rows in set (0.00 sec)



CHECK FOR ANNOTATIONS OF THESE SEQUENCES:




| O94811 | P25A_HUMAN   |
grep -n O94811 uniprot_sprot.fasta
1768639:>O94811|TPPP_HUMAN Tubulin polymerization-promoting protein - Homo sapiens (Human)

| P59282 | P25B_HUMAN   |
grep -n P59282 uniprot_sprot.fasta
1768598:>P59282|TPPP2_HUMAN Tubulin polymerization-promoting protein family member 2 - Homo sapiens (Human)
...
| Q3T077 | Q3T077_BOVIN |
grep -n Q3T077 uniprot_sprot.fasta
1768594:>Q3T077|TPPP2_BOVIN Tubulin polymerization-promoting protein family member 2 - Bos taurus (Bovine)
...
| Q4UIC0 | Q4UIC0_THEAN |
grep -n Q4UIC0 uniprot_sprot.fasta
<NO RESULT>
grep -n Q4UIC0_THEAN uniprot_sprot.fasta
<NO RESULT>
...
| Q5CHX6 | Q5CHX6_CRYHO |
grep -n Q5CHX6  uniprot_sprot.fasta
<NO RESULT>
...
| Q9CRB6 | CG38_MOUSE   |
grep -n Q9CRB6 uniprot_sprot.fasta
1768618:>Q9CRB6|TPPP3_MOUSE Tubulin polymerization-promoting protein family member 3 - Mus musculus (Mouse)
 
+--------+--------------+
| id     | name         |
+--------+--------------+
| O94811 | P25A_HUMAN   |
| P59282 | P25B_HUMAN   |
| P91127 | YBYK_CAEEL   |
| Q01BN1 | Q01BN1_OSTTA |
| Q0P5Y3 | Q0P5Y3_MOUSE |
| Q16YE8 | Q16YE8_AEDAE |
| Q1JPR8 | Q1JPR8_MOUSE |
| Q22LY3 | Q22LY3_TETTH |
| Q22LY4 | Q22LY4_TETTH |
| Q22LY5 | Q22LY5_TETTH |
| Q244Y1 | Q244Y1_TETTH |
| Q244Y3 | Q244Y3_TETTH |
| Q27957 | P25A_BOVIN   |
| Q29EJ5 | Q29EJ5_DROPS |
| Q2LZQ7 | Q2LZQ7_DROPS |
| Q2VPM9 | Q2VPM9_XENLA |
| Q2VYF3 | Q2VYF3_HUMAN |
| Q3T077 | Q3T077_BOVIN |
| Q3URG1 | Q3URG1_MOUSE |
| Q3ZCC8 | Q3ZCC8_BOVIN |
| Q4CVJ1 | Q4CVJ1_TRYCR |
| Q4DIP8 | Q4DIP8_TRYCR |
| Q4L233 | Q4L233_HUMAN |
| Q4N2S7 | Q4N2S7_THEPA |
| Q4N792 | Q4N792_THEPA |
| Q4Q349 | Q4Q349_LEIMA |
| Q4Q350 | Q4Q350_LEIMA |
| Q4R3A0 | Q4R3A0_MACFA |
| Q4RI11 | Q4RI11_TETNG |
| Q4SVU9 | Q4SVU9_TETNG |
| Q4UA39 | Q4UA39_THEAN |
| Q4UIC0 | Q4UIC0_THEAN |
| Q4Y3R4 | Q4Y3R4_PLACH |
| Q4Z299 | Q4Z299_PLABE |
| Q583A1 | Q583A1_9TRYP |
| Q5BTA2 | Q5BTA2_SCHJA |
| Q5BZ16 | Q5BZ16_SCHJA |
| Q5CHX6 | Q5CHX6_CRYHO |
| Q5DEP2 | Q5DEP2_SCHJA |
| Q5PPN5 | Q5PPN5_RAT   |
| Q5TR29 | Q5TR29_ANOGA |
| Q61EN3 | Q61EN3_CAEBR |
| Q6P604 | Q6P604_BRARE |
| Q7PT09 | Q7PT09_ANOGA |
| Q7R2L7 | Q7R2L7_GIALA |
| Q7RD81 | Q7RD81_PLAYO |
| Q7RP42 | Q7RP42_PLAYO |
| Q7TQD2 | P25A_MOUSE   |
| Q86E15 | Q86E15_SCHJA |
| Q8I557 | Q8I557_PLAF7 |
| Q8T931 | Q8T931_TETTH |
| Q8T935 | Q8T935_TETTH |
| Q9BW30 | CG38_HUMAN   |
| Q9CRB6 | CG38_MOUSE   |
| Q9VT66 | Q9VT66_DROME |
| Q9VV43 | Y4893_DROME  |
+--------+--------------+












++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Sep 30 00:07:23 EDT 2007
CREATE swissprotiprscan.pl TO PARSE HITS IN match.xml

LOADED 15 MILLION IPRSCAN HITS FOR 282,000 PROTEINS:

./swissprotiprscan.pl -t swissprotiprscan -f /Users/young/FUNNYBASE/pipeline/indexer/data/match.xml &> out.swissprotiprscan

Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotiprscan.278.tsv ... done.
Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotiprscan.279.tsv ... done.
Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotiprscan.280.tsv ... done.
Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotiprscan.281.tsv ... done.
Loading file: /Users/young/FUNNYBASE/pipeline/indexer/iprscan/indexer.swissprotiprscan.282.tsv ... done.
Finished loading data into table

Run time: 01:20:01
Completed ./swissprotiprscan.pl
2:42AM, 30 September 2007
****************************************

select count(*) from swissprotiprscan;
+----------+
| count(*) |
+----------+
| 14910035 |
+----------+


THEN ADDED FULLTEXT FUNCTION:


./swissprotiprscan.pl -t swissprotiprscan -f /Users/young/FUNNYBASE/pipeline/indexer/data/match.xml &> out.swissprotiprscan.updatefulltext


GEMS-G5-Genomics:~/FUNNYBASE/bin/orthologues young$ cat out.swissprotiprscan.updatefulltext
Name "main::TSVFILE" used only once: possible typo at ./swissprotiprscan.pl line 85.
Finished loading data into table
Updating fulltext... done.

Run time: 00:51:33
Completed ./swissprotiprscan.pl
10:05PM, 30 September 2007
****************************************



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Sep 29 23:41:42 EDT 2007
CHECKED MATCH COMPLETE FOR RANDOM SAMPLE OF SWISSPROT HITS IN funnybase11 collectionblast

ALL 10 OF FIRST 10 SWISSPROT BLAST HITS OF funnybase11 WERE FOUND:

use funnybase11;
select collectionid, targetsource, targetid, targetname from collectionblast where targetsource='swissprot' limit 10;
+--------------+--------------+----------+-------------+
| collectionid | targetsource | targetid | targetname  |
+--------------+--------------+----------+-------------+
|            1 | swissprot    | Q20334   | TNNI1_CAEEL |
|            1 | swissprot    | P19237   | TNNI1_HUMAN |
|            1 | swissprot    | Q9WUZ5   | TNNI1_MOUSE |
|            1 | swissprot    | P02645   | TNNI1_RABIT |
|            1 | swissprot    | P13413   | TNNI1_RAT   |
|            1 | swissprot    | P68246   | TNNI2_CHICK |
|            1 | swissprot    | P68247   | TNNI2_COTJA |
|            1 | swissprot    | P48788   | TNNI2_HUMAN |
|            1 | swissprot    | P13412   | TNNI2_MOUSE |
|            1 | swissprot    | P02643   | TNNI2_RABIT |
+--------------+--------------+----------+-------------+

GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n  TNNI1_CAEEL match.xml 
14171449:<protein id="Q20334" name="TNNI1_CAEEL" length="250" crc64="B8D3EA0E0D60539B">
GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n TNNI1_HUMAN match.xml 
2047808:<protein id="P19237" name="TNNI1_HUMAN" length="186" crc64="7AE5B8715ECF62DF">
GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n TNNI1_MOUSE match.xml 
53935129:<protein id="Q9WUZ5" name="TNNI1_MOUSE" length="186" crc64="69D26184FB62AA69">
GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n TNNI1_RABIT match.xml 
1573583:<protein id="P02645" name="TNNI1_RABIT" length="184" crc64="4CC73E38AC6FD3E9">
GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n TNNI1_RAT match.xml 
1923288:<protein id="P13413" name="TNNI1_RAT" length="186" crc64="69C0F184FB62AA69">
GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n TNNI2_CHICK match.xml 
3063591:<protein id="P68246" name="TNNI2_CHICK" length="182" crc64="38A9AEAAE80684C3">
GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n TNNI2_COTJA match.xml 
3063598:<protein id="P68247" name="TNNI2_COTJA" length="182" crc64="38A9AEAAE80684C3">
GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n TNNI2_HUMAN match.xml 
2646900:<protein id="P48788" name="TNNI2_HUMAN" length="181" crc64="54DF02565BE31539">
GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n TNNI2_MOUSE match.xml 
1923276:<protein id="P13412" name="TNNI2_MOUSE" length="181" crc64="4640DB5781B1AABE">
GEMS-G5-Genomics:~/FUNNYBASE/pipeline/indexer/data young$ grep -n TNNI2_RABIT match.xml 
1573576:<protein id="P02643" name="TNNI2_RABIT" length="181" crc64="AD3A90BB21A4A24D">


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Sep 19 14:40:10 EDT 2007
Wheelan paper - DOMAIN SIZE HAS NARROW DISTRIBUTION

DOWNLOADED DGS (DOMAIN SIZE BY GUESS) FROM:

ftp://ftp.ncbi.nih.gov/pub/wheelan/DGS/

TO:

/Users/young/FUNNYBASE/dev/annotation/domains/DGS

DGS.c  	27 KB  	9/18/00  	12:00:00 AM
DGS.h 	6 KB 	9/18/00 	12:00:00 AM
DGS.table 	20 KB 	9/18/00 	12:00:00 AM
DGS.table2 	1 KB 	9/18/00 	12:00:00 AM
DGSfiles 		6/9/03 	12:00:00 AM
README 	1 KB 	5/21/01 	12:00:00 AM
bin 		6/9/03 	12:00:00 AM
makefile 	4 KB 	5/24/01 	12:00:00 AM


em README:

Domain Guess By Size, or DGS, is an algorithm that uses
empirical distributions of domain sizes and segmentation
patterns to guess at the most likely locations of protein
domain boundaries, given a protein's size.

To compile DGS, you need the NCBI Toolkit, which can
be obtained from ftp://ncbi.nlm.nih.gov/toolbox/

Once the NCBI toolkit is compiled, you can link the
NCBI libraries to DGS as demonstrated in the example
makefile.

DGS requires two files: a table of domain sizes and
a table of segmentation patterns. These are DGS.table
and DGS.table2.

DGS uses a recursive algorithm to compute possible
domain boundaries. To limit the depth of recursion,
we suggest increasing the "length difference", which
is the minimum step size, as follows:

protein length	DGS step size
<200		10
200-400		20
400-560		25
>560		results won't be significant anyway!



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Aug 15 19:08:53 EDT 2007
TIMING OF orthologuesuniqueorfarrayiprscan AND ESTIMATE OF 3.2 DAYS FOR funnybase11

REM: NOT USING SUPERFAMILY!

1) TIMING OF orthologuesuniqueorfarrayiprscan: ROUGHLY 2 ORFS PER MINUTE...

Wed Aug 15 18:59:05 EDT 2007
598
Wed Aug 15 19:05:53 EDT 2007
610
Wed Aug 15 19:08:10 EDT 2007
617
Wed Aug 15 19:09:41 EDT 2007
619
Wed Aug 15 19:10:06 EDT 2007
623
Wed Aug 15 19:17:28 EDT 2007
643
Wed Aug 15 19:19:37 EDT 2007
647
Wed Aug 15 19:20:50 EDT 2007
648
Wed Aug 15 19:21:06 EDT 2007
650

use unigene;
select count(*) from orthologuesuniqueorf;
+----------+
| count(*) |
+----------+
|     1060 |
+----------+

TIME TO COMPLETE WHOLE DATABASE:

1060 / ( 60 * 2 ) = 1060 / 120 = 8.8 HOURS


2) ESTIMATE OF collectionsequencesuniqueorfarrayiprscan: ROUGHLY 4 ORFS PER MINUTE

use funnybase11;
select avg(length(peptide)) from collectionsequencesuniqueorf;
+----------------------+
| avg(length(peptide)) |
+----------------------+
|              75.3423 |
+----------------------+

use unigene;
select avg(length(peptide)) from orthologuesuniqueorf;
+----------------------+
| avg(length(peptide)) |
+----------------------+
|             137.6349 |
+----------------------+

select count(*) from collectionsequencesuniqueorf;
+----------+
| count(*) |
+----------+
|    18539 |
+----------+

TIME TO COMPLETE WHOLE DATABASE:

18,539 / ( 24 * 60 * 4 ) = 18,539 / 5,760 = 3.2 DAYS


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Aug 14 19:11:40 EDT 2007
orthologuesuniqueorfarrayiprscan IS TWICE AS FAST AS orthologuesarrayiprscan

TOTAL DURATIONS:

									1.2			2.2

orthologuesarrayiprscan				254			379

orthologuesuniqueorfarrayiprscan	79			170


1) SEQUENCE 1.2
===============
sudo ./orthologuesarrayiprscan.pl -d unigene

orthologue counter: 1

Orthologue counter: 1
Input file: /Users/young/FUNNYBASE/pipeline/unigene/iprscan/unigene.fasta.1.2
Printing query file... done.
Executing IPRSCAN for sequence number 1 (Tue Aug 14 17:22:32 EDT 2007)

348
352
338

AVERAGE DURATION: 600 - ( (348 + 352 + 338) / 3 ) = 600 - 346 = 254 seconds


sudo ./orthologuesuniqueorfarrayiprscan.pl -d unigene

Orf counter: 41
Sequence_id: 1.2
Orf id: 1_ORF1

522
526
514

AVERAGE DURATION: 600 - ( (522 + 526 + 514) / 3 ) = 600 - 521 = 79 seconds


1) SEQUENCE 2.2
===============
sudo ./orthologuesarrayiprscan.pl -d unigene

orthologue counter: 5
Input file: /Users/young/FUNNYBASE/pipeline/unigene/iprscan/unigene.fasta.2.2
Printing query file... done.
Executing IPRSCAN for sequence number 5 (Tue Aug 14 18:22:03 EDT 2007)

246
240
178

AVERAGE DURATION: 600 - ( (246 + 240 + 178) / 3 ) = 600 - 221 = 379 seconds


sudo ./orthologuesuniqueorfarrayiprscan.pl -d unigene

Orf counter: 124
Sequence_id: 2.2
Orf id: 1_ORF1

504
508
498

AVERAGE DURATION: 600 - ( (504 + 508 + 498) / 3 ) = 600 - 503 = 97 seconds


Orf counter: 125
Sequence_id: 2.2
Orf id: 1_ORF5

527
530
524

AVERAGE DURATION: 600 - ( (527 + 530 + 524) / 3 ) = 600 - 527 = 73 seconds

TOTAL AVERAGE DURATION (1_ORF1 + 1_ORF5):	97 + 73 = 170 seconds


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Aug 14 16:11:58 EDT 2007
TEST orthologuesorfarrayiprscan.pl BY FIRST DOING iprscan ON A FEW ORTHOLOGUES

1) unigene ORTHOLOGUE SEQUENCE 1.2 (TEST orthologuesorfarrayiprscan.pl WORKS ON A NUCLEOTIDE SEQUENCE)
==================================
select orthologuenumber, sequencenumber, count(number) from orthologuesuniqueorf WHERE orthologuenumber = 1 group by sequencenumber order by sequencenumber;
+------------------+----------------+---------------+
| orthologuenumber | sequencenumber | count(number) |
+------------------+----------------+---------------+
|                1 |              1 |            41 |
|                1 |              2 |             1 |
|                1 |              3 |            42 |
|                1 |              4 |             3 |
+------------------+----------------+---------------+
4 rows in set (0.00 sec)

mysql> select * from orthologuesuniqueorf where orthologuenumber  = 1 and sequencenumber = 2\G*************************** 1. row ***************************
orthologuenumber: 1
  sequencenumber: 2
           frame: 1
          number: 1
        orfstart: 1
         orfstop: 1017
          length: 339
         peptide: MWTCLFRGYHSARYTCRLHEKHLGAWVAQALGETPGRVRRELQVIGALKESSQGKRGPDLNPGIQVLQLQDVFWGDWFSAFACCLRGVDLHRPVGGSPEGPTHVSTIVLLLELRGHGNMADSKAKSAKAANKTPPKSPGDPSKDRAAKRLSLETEGAPEGAAATAPELSALEEAFRRFAVHGDTRATGKEMHGKNWSKLCKDCQVIDGKNVTVTDVDIVFSKIKGKSCRTITFEQFKEALEELSKKRFKDKSSEEAVREVHKLIEGKAPIISGVTKAISSPTVSRLTDTTKFTGSHKERFDPSGKGKGKAGRVDLVDESGYVPGYKHAGTYDQKVQGGK
1 row in set (0.00 sec)


RUN iprscan ON ORIGINAL NUCLEOTIDE SEQUENCE 1.2 (WITH DO ALL ORFs):

cd /Users/young/FUNNYBASE/pipeline/unigene/iprscan
/common/iprscan/bin/iprscan -cli -i unigene.fasta.1.2 -o unigene.out.1.2.iprscan.TEST -iprlookup -goterms 

em unigene.out.1.2.iprscan.TEST
>>>
<interpro_matches>

   <protein id="unigene_dog_1_ORF1" length="339" crc64="F5896B0411A54636" >
        <interpro id="IPR008907" name="P25-alpha" type="Family">
          <match id="PTHR12932" name="P25 ALPHA-RELATED" dbname="PANTHER">
            <location start="145" end="337" score="1e-144" status="T" evidence="HMMPanther" />
          </match>
          <match id="PF05517" name="p25-alpha" dbname="PFAM">
            <location start="171" end="335" score="1.1e-117" status="T" evidence="HMMPfam" />
          </match>
        </interpro>
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="PTHR12932:SF4" name="TUBULIN POLYMERIZATION PROMOTING PROTEIN" dbname="PANTHER">
            <location start="145" end="337" score="1e-144" status="T" evidence="HMMPanther" />
          </match>
          <match id="seg" name="seg" dbname="SEG">
            <location start="120" end="138" score="NA" status="?" evidence="Seg" />
            <location start="153" end="167" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="unigene_dog_2_ORF1" length="150" crc64="C7979A7D64B73EB8" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="44" end="53" score="NA" status="?" evidence="Seg" />
            <location start="63" end="77" score="NA" status="?" evidence="Seg" />
            <location start="91" end="137" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="unigene_dog_2_ORF2" length="62" crc64="B4A39612123B0B20" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="7" end="38" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="unigene_dog_2_ORF3" length="65" crc64="B93BD38778E83297" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="22" end="42" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="unigene_dog_3_ORF2" length="77" crc64="A7F0CCE899B41EFE" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="30" end="51" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="unigene_dog_3_ORF3" length="66" crc64="E4F15F57D864FBFD" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="50" end="66" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>

</interpro_matches>
<<<

RUN orthologuesorfarrayiprscan.pl ON SEQUENCE 1.2:


sudo ./orthologuesuniqueorfarrayiprscan.pl -d unigene
Doing iprscan for all orthologue ORFs (total 1057)

[][][][][]      Orf counter: 41
Sequence_id: 1.2
Orf id: 1_ORF1
Input file: /Users/young/FUNNYBASE/pipeline/unigene/iprscan/unigene.all.1.2.1_ORF1.1-1017.fasta
Printing query file... >1_ORF1
MWTCLFRGYHSARYTCRLHEKHLGAWVAQALGETPGRVRRELQVIGALKESSQGKRGPDLNPGIQVLQLQDVFWGDWFSAFACCLRGVDLHR...
done.
Executing IPRSCAN for ORF number 41: 1_ORF1 (Tue Aug 14 16:47:43 EDT 2007)



em /Users/young/FUNNYBASE/pipeline/unigene/iprscan/unigene.all.1.2.1_ORF1.1-1017.out
>>>
interpro_matches>

   <protein id="1_ORF1" length="339" crc64="F5896B0411A54636" >
        <interpro id="IPR008907" name="P25-alpha" type="Family">
          <match id="PTHR12932" name="P25 ALPHA-RELATED" dbname="PANTHER">
            <location start="145" end="337" score="1e-144" status="T" evidence="HMMPanther" />
          </match>
          <match id="PF05517" name="p25-alpha" dbname="PFAM">
            <location start="171" end="335" score="1.1e-117" status="T" evidence="HMMPfam" />
          </match>
        </interpro>
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="PTHR12932:SF4" name="TUBULIN POLYMERIZATION PROMOTING PROTEIN" dbname="PANTHER">
            <location start="145" end="337" score="1e-144" status="T" evidence="HMMPanther" />
          </match>
          <match id="seg" name="seg" dbname="SEG">
            <location start="120" end="138" score="NA" status="?" evidence="Seg" />
            <location start="153" end="167" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>

</interpro_matches>
<<<


CONFIRMED RESULTS OF DIRECT iprscan EXECUTION ARE THE SAME AS orthologuesarrayiprscan.pl:

sudo ./orthologuesarrayiprscan.pl -d unigeneDoing iprscan for all orthologues (total 137)

[][][][][]      orthologue counter: 1

Orthologue counter: 1
Input file: /Users/young/FUNNYBASE/pipeline/unigene/iprscan/unigene.fasta.1.2
Printing query file... done.
Executing IPRSCAN for sequence number 1 (Tue Aug 14 17:22:32 EDT 2007)

348

em unigene.out.1.2
>>>
interpro_matches>

   <protein id="1.2_1_ORF1" length="339" crc64="F5896B0411A54636" >
        <interpro id="IPR008907" name="P25-alpha" type="Family">
          <match id="PTHR12932" name="P25 ALPHA-RELATED" dbname="PANTHER">
            <location start="145" end="337" score="1e-144" status="T" evidence="HMMPanther" />
          </match>
          <match id="PF05517" name="p25-alpha" dbname="PFAM">
            <location start="171" end="335" score="1.1e-117" status="T" evidence="HMMPfam" />
          </match>
        </interpro>
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="PTHR12932:SF4" name="TUBULIN POLYMERIZATION PROMOTING PROTEIN" dbname="PANTHER">
            <location start="145" end="337" score="1e-144" status="T" evidence="HMMPanther" />
          </match>
          <match id="seg" name="seg" dbname="SEG">
            <location start="120" end="138" score="NA" status="?" evidence="Seg" />
            <location start="153" end="167" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="1.2_2_ORF1" length="150" crc64="C7979A7D64B73EB8" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="44" end="53" score="NA" status="?" evidence="Seg" />
            <location start="63" end="77" score="NA" status="?" evidence="Seg" />
            <location start="91" end="137" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="1.2_2_ORF2" length="62" crc64="B4A39612123B0B20" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="7" end="38" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="1.2_2_ORF3" length="65" crc64="B93BD38778E83297" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="22" end="42" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="1.2_3_ORF2" length="77" crc64="A7F0CCE899B41EFE" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="30" end="51" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>
   <protein id="1.2_3_ORF3" length="66" crc64="E4F15F57D864FBFD" >
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="seg" name="seg" dbname="SEG">
            <location start="50" end="66" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>

</interpro_matches>
<<<


2) unigene ORTHOLOGUE SEQUENCE 2.2 (TEST orthologuesorfarrayiprscan.pl WORKS ON MULTIPLE ORFs)
==================================

select orthologuenumber, sequencenumber, count(number) from orthologuesuniqueorf WHERE orthologuenumber = 2 group by sequencenumber order by sequencenumber;
+------------------+----------------+---------------+
| orthologuenumber | sequencenumber | count(number) |
+------------------+----------------+---------------+
|                2 |              1 |            37 |
|                2 |              2 |             2 |
|                2 |              3 |             1 |
|                2 |              4 |            16 |
|                2 |              5 |            32 |
|                2 |              6 |            26 |
|                2 |              7 |            16 |
|                2 |              8 |             7 |
|                2 |              9 |             4 |
+------------------+----------------+---------------+

 select * from orthologuesuniqueorf where orthologuenumber  = 2 and sequencenumber = 2\G
 *************************** 1. row ***************************
 orthologuenumber: 2
  sequencenumber: 2
           frame: 1
          number: 1
        orfstart: 1
         orfstop: 2202
          length: 734
         peptide: MLGFLKRPVVVTADINLNVVALTAVGLLSRLWHLAYPRAVVFDEVYYGQYISFYMKRIFFLDGSGPPFGHMLLALGGYLGGFDGNFLWNRIGAEYSSNVPVWSLRLLPALTGAFSIPMAYQILLELGFSHCAAMGAALLMLIENALITQSRLMLLESVLIFFNLLAVLSYLKFSNSQKHRKKRLSGLPFSLSWWFWLMLTGVACSCAVGVKYMGIFTYLLVLAVASVHAWHLIGDQTLSNVGVCVLCHLLARAAALLVIPTLMYLLFFYVHLILVYRSGPHDQIMSSAFQASLEGGLARITQGQPLEVAYGSQVTLKNVFGKPVPCWLHSHQSTYPMIYENGRGSSHQQQVTCYPFKDVNNWWIVKDPGRHQLVVNNPPRPVRHGDVVQLVHGMTTRFLNTHDVAAPLSPHSQEVSCYVDYNISMPSQNLWRLDIVNRESDTEVWKTILSEVRLVHVNTSAVLKLSGAHLPDWGFQQLEVVGEKLSRGYHESMVWNVEEHRYGKSQEQKERELELHSPAQMDVSRNLSFMARFLELQWRMLTAKSDDSEHKYSSSPLDWVTLDTSIAYWLHPRTSAQIHLLGNIVIWASASLAMVVYVLLFFWYLLRRRRSICDIPEDSWLRWVLAGALCAGGWAVNYLPFFMMEKTLFLYHYLPALTFQILLLPVVLQHVSDHLCRSQLLRSLFSALVVAWYSCACHVFNTLRPLTYGDKSLSPSELKALRWKDSWDILIRKH
*************************** 2. row ***************************
orthologuenumber: 2
  sequencenumber: 2
           frame: 1
          number: 5
        orfstart: 2215
         orfstop: 2430
          length: 72
         peptide: AIAVSAPSDRPLILIPAQRPWCTSVPPTLGPCPCETRLGRTSQQHFQQAGLVTLTCPCPDSAFCVQLKRGQX
2 rows in set (0.00 sec)


RUN iprscan ON ORIGINAL NUCLEOTIDE SEQUENCE 2.2 (WITH DO ALL ORFs):

cd /Users/young/FUNNYBASE/pipeline/unigene/iprscan
/common/iprscan/bin/iprscan -cli -i unigene.fasta.2.2 -o unigene.out.2.2.iprscan.TEST -iprlookup -goterms 

em unigene.out.2.2.iprscan.TEST

>>>
<interpro_matches>

   <protein id="2.2_1_ORF1" length="734" crc64="0FCB230B084893BE" >
	<interpro id="IPR003342" name="Glycosyl transferase, family 39" type="Family">
	  <classification id="GO:0000030" class_type="GO">
	    <category>Molecular Function</category>
	    <description>mannosyltransferase activity</description>
	  </classification>
	  <classification id="GO:0006493" class_type="GO">
	    <category>Biological Process</category>
	    <description>protein amino acid O-linked glycosylation</description>
	  </classification>
	  <classification id="GO:0016020" class_type="GO">
	    <category>Cellular Component</category>
	    <description>membrane</description>
	  </classification>
	  <match id="PF02366" name="PMT" dbname="PFAM">
	    <location start="20" end="276" score="1.8e-100" status="T" evidence="HMMPfam" />
	  </match>
	</interpro>
	<interpro id="IPR003608" name="MIR" type="Domain">
	  <found_in>
	    <rel_ref ipr_ref="IPR000493"/>
	    <rel_ref ipr_ref="IPR013333"/>
	 </found_in>
	  <classification id="GO:0016020" class_type="GO">
	    <category>Cellular Component</category>
	    <description>membrane</description>
	  </classification>
	  <match id="PF02815" name="MIR" dbname="PFAM">
	    <location start="328" end="506" score="3.7e-16" status="T" evidence="HMMPfam" />
	  </match>
	  <match id="SM00472" name="no description" dbname="SMART">
	    <location start="305" end="368" score="1.8e-06" status="T" evidence="HMMSmart" />
	    <location start="379" end="436" score="3.2e-09" status="T" evidence="HMMSmart" />
	    <location start="443" end="500" score="6.8e-05" status="T" evidence="HMMSmart" />
	  </match>
	  <match id="PS50919" name="MIR" dbname="PROFILE">
	    <location start="305" end="368" score="10.756" status="T" evidence="ProfileScan" />
	    <location start="379" end="436" score="12.763" status="T" evidence="ProfileScan" />
	    <location start="440" end="500" score="9.581" status="T" evidence="ProfileScan" />
	  </match>
	</interpro>
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="G3DSA:2.80.10.50" name="no description" dbname="GENE3D">
	    <location start="302" end="510" score="5.3e-56" status="T" evidence="Gene3D" />
	  </match>
	  <match id="PTHR10050" name="DOLICHYL-PHOSPHATE-MANNOSE--PROTEIN MANNOSYLTRANSFERASE" dbname="PANTHER">
	    <location start="352" end="733" score="9e-182" status="T" evidence="HMMPanther" />
	  </match>
	  <match id="PTHR10050:SF5" name="DOLICHYL-PHOSPHATE-MANNOSE--PROTEIN MANNOSYLTRANSFERASE" dbname="PANTHER">
	    <location start="352" end="733" score="9e-182" status="T" evidence="HMMPanther" />
	  </match>
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="249" end="257" score="NA" status="?" evidence="Seg" />
	    <location start="595" end="610" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>


   <protein id="2.2_2_ORF2" length="61" crc64="C771FF855E4FD1A5" >
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="8" end="19" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>
   <protein id="2.2_2_ORF3" length="57" crc64="F6009C591B1A042B" >
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="2" end="13" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>
   <protein id="2.2_2_ORF4" length="50" crc64="BA957F1A147B886B" >
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="7" end="21" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>
   <protein id="2.2_2_ORF5" length="54" crc64="BB8F7697764EBA2D" >
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="34" end="47" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>
   <protein id="2.2_2_ORF6" length="52" crc64="3E44F3C80297BF80" >
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="12" end="22" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>
   <protein id="2.2_3_ORF2" length="62" crc64="06017F6E47AC763C" >
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="25" end="37" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>
   <protein id="2.2_3_ORF3" length="193" crc64="08F0E73A149FE8D8" >
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="155" end="167" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>
   <protein id="2.2_3_ORF4" length="125" crc64="E49EB14205F90042" >
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="87" end="102" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>
   <protein id="2.2_3_ORF5" length="69" crc64="A8E23D771F6D6123" >
	<interpro id="noIPR" name="unintegrated" type="unintegrated">
	  <match id="seg" name="seg" dbname="SEG">
	    <location start="1" end="13" score="NA" status="?" evidence="Seg" />
	  </match>
	</interpro>
   </protein>

</interpro_matches>
<<<



RUN orthologuesorfarrayiprscan.pl ON SEQUENCE 2.2:

Orf counter: 124
Sequence_id: 2.2
Orf id: 1_ORF1
Input file: /Users/young/FUNNYBASE/pipeline/unigene/iprscan/unigene.all.2.2.1_ORF1.1-2202.fasta
Printing query file... >1_ORF1
MLGFLKRPVVVTADINLNVVALTAVGLLSRLWHLAYPRAVVFDEVYYGQYISFYMKRIFFLDGSGPPFGHMLLALGGYLGGFDGNFLWNRIG...
done.
Executing IPRSCAN for ORF number 124: 1_ORF1 (Tue Aug 14 17:03:31 EDT 2007)

em unigene.all.2.2.1_ORF1.1-2202.out

>>>
<interpro_matches>

   <protein id="1_ORF1" length="734" crc64="0FCB230B084893BE" >
        <interpro id="IPR003342" name="Glycosyl transferase, family 39" type="Family">
          <classification id="GO:0000030" class_type="GO">
            <category>Molecular Function</category>
            <description>mannosyltransferase activity</description>
          </classification>
          <classification id="GO:0006493" class_type="GO">
            <category>Biological Process</category>
            <description>protein amino acid O-linked glycosylation</description>
          </classification>
          <classification id="GO:0016020" class_type="GO">
            <category>Cellular Component</category>
            <description>membrane</description>
          </classification>
          <match id="PF02366" name="PMT" dbname="PFAM">
            <location start="20" end="276" score="1.8e-100" status="T" evidence="HMMPfam" />
          </match>
        </interpro>
        <interpro id="IPR003608" name="MIR" type="Domain">
          <found_in>
            <rel_ref ipr_ref="IPR000493"/>
            <rel_ref ipr_ref="IPR013333"/>
         </found_in>
          <classification id="GO:0016020" class_type="GO">
            <category>Cellular Component</category>
            <description>membrane</description>
          </classification>
          <match id="PF02815" name="MIR" dbname="PFAM">
            <location start="328" end="506" score="3.7e-16" status="T" evidence="HMMPfam" />
          </match>
          <match id="SM00472" name="no description" dbname="SMART">
            <location start="305" end="368" score="1.8e-06" status="T" evidence="HMMSmart" />
            <location start="379" end="436" score="3.2e-09" status="T" evidence="HMMSmart" />
            <location start="443" end="500" score="6.8e-05" status="T" evidence="HMMSmart" />
          </match>
          <match id="PS50919" name="MIR" dbname="PROFILE">
            <location start="305" end="368" score="10.756" status="T" evidence="ProfileScan" />
            <location start="379" end="436" score="12.763" status="T" evidence="ProfileScan" />
            <location start="440" end="500" score="9.581" status="T" evidence="ProfileScan" />
          </match>
        </interpro>
        <interpro id="noIPR" name="unintegrated" type="unintegrated">
          <match id="G3DSA:2.80.10.50" name="no description" dbname="GENE3D">
            <location start="302" end="510" score="5.3e-56" status="T" evidence="Gene3D" />
          </match>
          <match id="PTHR10050" name="DOLICHYL-PHOSPHATE-MANNOSE--PROTEIN MANNOSYLTRANSFERASE" dbname="PANTHER">
            <location start="352" end="733" score="9e-182" status="T" evidence="HMMPanther" />
          </match>
          <match id="PTHR10050:SF5" name="DOLICHYL-PHOSPHATE-MANNOSE--PROTEIN MANNOSYLTRANSFERASE" dbname="PANTHER">
            <location start="352" end="733" score="9e-182" status="T" evidence="HMMPanther" />
          </match>
          <match id="seg" name="seg" dbname="SEG">
            <location start="249" end="257" score="NA" status="?" evidence="Seg" />
            <location start="595" end="610" score="NA" status="?" evidence="Seg" />
          </match>
        </interpro>
   </protein>

</interpro_matches>
<<<


[][][][][]      Orf counter: 125
Sequence_id: 2.2
Orf id: 1_ORF5
Input file: /Users/young/FUNNYBASE/pipeline/unigene/iprscan/unigene.all.2.2.1_ORF5.2215-2430.fasta
Printing query file... >1_ORF5
AIAVSAPSDRPLILIPAQRPWCTSVPPTLGPCPCETRLGRTSQQHFQQAGLVTLTCPCPDSAFCVQLKRGQX
...
done.
Executing IPRSCAN for ORF number 125: 1_ORF5 (Tue Aug 14 17:06:57 EDT 2007)

em unigene.all.2.2.1_ORF5.2215-2430.out

>>>
interpro_matches>


</interpro_matches>
<<<



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Aug 13 11:35:47 EDT 2007
CREATED orthologuesorfarrayiprscan.pl FOR IPRSCAN OF NUCLEOTIDE DATABASE ORFs

TEST iprscan:

cd /Users/young/FUNNYBASE/pipeline/unigene/iprscan
/common/iprscan/bin/iprscan -cli -i unigene.1.3.ORFs.fasta -o unigene.1.3.ORFs.iprscan -iprlookup -goterms 


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Aug  8 18:50:49 EDT 2007
RAN orthologuesworkflow1protein.pl AGAINST inparanoid_sanPF_ensAG

sudo ./orthologuesworkflow1protein.pl -d inparanoid_sanPF_ensAGDoing stages (total 3)
	Stage name: 1.1
	Application name: orthologues
	Doing stage '1.1'...
	Executing application 'orthologues'... done.
	done.
	Stage name: 2.1
	Application name: orthologuesarrayiprscan
	Doing stage '2.1'...
	Executing application 'orthologuesarrayiprscan'... done.
	done.
	Stage name: 3.1
	Application name: orthologuesiprscan
	Doing stage '3.1'...
	Executing application 'orthologuesiprscan'... done.
	done.


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Aug  8 13:39:31 EDT 2007
RAN orthologuesiprscan.pl ON inparanoid_sanPF_ensAG

./orthologuesiprscan.pl -d inparanoid_sanPF_ensAG -s protein

	Doing iprscan for all orthologues (total 3496)
	0
	100
	200
	300
	400
	500
	600
	700
	800
	900
	1000
	1100
	1200
	1300
	1400
	1500
	1600
	1700
	1800
	1900
	2000
	2100
	2200
	2300
	2400
	2500
	2600
	2700
	2800
	2900
	3000
	3100
	3200
	3300
	3400
	Output file printed:
	
	/Users/young/FUNNYBASE/pipeline/inparanoid_sanPF_ensAG/collection/inparanoid_sanPF_ensAG.orthologuesiprscan.tsv
	
	Dropping 'orthologuesiprscan' if exists... done.
	Creating table 'orthologuesiprscan'... done.
	Loading data into table 'orthologuesiprscan'... done.
	
	Run time: 00:00:09
	Completed ./orthologuesiprscan.pl
	1:38PM, 8 August 2007
	****************************************



SELECT COUNT(distinct orthologuenumber) from orthologuesiprscan;
+----------------------------------+
| COUNT(distinct orthologuenumber) |
+----------------------------------+
|                             1312 |
+----------------------------------+
1 row in set (0.08 sec)

mysql> SELECT COUNT(distinct orthologuenumber) from orthologues;
+----------------------------------+
| COUNT(distinct orthologuenumber) |
+----------------------------------+
|                             1375 |
+----------------------------------+


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sun Aug  5 10:15:16 EDT 2007
COMPLETED orthologuesarrayiprscandaemon.pl AND orthologuesarrayiprscan.pl


	NAME     orthologuesarrayiprscandaemon.pl
	
	PURPOSE
	
	  RUN MULTIPLE INSTANCES OF iprscan ON ALL COLLECTION SEQUENCES
	
	INPUT
	
		1. XML FILE orthologuesarrayiprscan.xml for orthologuesarrayiprscan.pl
	
		2. App MODULE TO RUN orthologuesarrayiprscan.pl AS OBJECT USING IO::Pipe 
	
	OUTPUT
	
		1. OUTPUT OF orthologuesarrayiprscan.pl, I.E.:
	
			- IPRSCAN OUTPUT FILES IN iprscan DIRECTORY:
		
			<orthologue_database>.out.<orthologue_number>.<sequence_number> 
	
			- ERROR AND OUTPUT FILES IN iprscan DIRECTORY IF FAILED OR INCOMPLETE
		
			<orthologue_database>.out.<orthologue_number>.<sequence_number>.STDOUT 
			<orthologue_database>.out.<orthologue_number>.<sequence_number>.STDERR 
	
	USAGE
	  
	  ./orthologuesarrayiprscandaemon.pl <-d database> [-n number_instances] [-h]
	  
		  -d database         :  name of database
		  -n number_instances :  name of database
		  -h print_help       :  print out help info
	
	EXAMPLES:
	
./orthologuesarrayiprscandaemon.pl -d unigene -n 10
	



	NAME     orthologuesarrayiprscan.pl
	
	PURPOSE
    
        RUN iprscan ON ALL orthologue SEQUENCES
	
	INPUT
	
		1. orthologuenumber, sequencenumber, sequence FIELDS FROM orthologues TABLE
		
		2. iprscan WITH sge ENABLED
		
	OUTPUT
	
		1. IPRSCAN OUTPUT FILES IN iprscan DIRECTORY:
		
			<orthologue_database>.out.<orthologue_number>.<sequence_number> 
	
		2. ERROR AND OUTPUT FILES IN iprscan DIRECTORY IF FAILED OR INCOMPLETE
		
			<orthologue_database>.out.<orthologue_number>.<sequence_number>.STDOUT 
			<orthologue_database>.out.<orthologue_number>.<sequence_number>.STDERR 
	
	NOTES
	
	    - CHECKS PROGRESS BY RUNNING iprscan SUBROUTINE AS IO::Pipe::Producer OBJECT
    
	    - TERMINATES iprscan JOBS IF NOT COMPLETED AFTER PRESET INTERVAL
    
	    - RUN BY orthologuesarrayiprscandaemon.pl, WHICH CREATES n NUMBER OF INSTANCES
        OF orthologuesarrayiprscan.pl:
        
	        ./orthologuesarrayiprscandaemon.pl -d unigene -n 10
	
	USAGE
	  
	./orthologuesarrayiprscan.pl <-d database> [-h]
	
	-d database         :  name of database
	-h print_help       :  print out help info

	EXAMPLES
	
./orthologuesarrayiprscan.pl -d unigene
	

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Jul 17 23:52:51 EDT 2007
FAILURE REPORT EXIT CODE 256

4313
FAILED
        Iprscan job iprscan-20070717-20540381 failed and exit with status code 256
Completed 4313

KILLED DEAD JOBS:

sudo qdel 897901 
sudo qdel 897932 
sudo qdel 897924 
sudo qdel 898158 
sudo qdel 897896 
sudo qdel 897920 

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Jul 16 18:49:46 EDT 2007
orthologuesarrayiprscan STALLING AT SOME SEQUENCES

E.G.: MANUAL RUN GAVE ERROR:

/common/iprscan/bin/iprscan -cli -i /Users/young/FUNNYBASE/pipeline/inparanoid_sanPF_ensAG/iprscan/inparanoid_sanPF_ensAG.fasta.26.1 -o /Users/young/FUNNYBASE/pipeline/inparanoid_sanPF_ensAG/iprscan/inparanoid_sanPF_ensAG.out.26.1 -iprlookup -goterms

/common/iprscan/tmp/20070716/iprscan-20070716-18151789

ll;
total 24
drwxrwxrwx    11 www   admin  374B Jul 16 18:16 .
drwxrwxrwx   106 root  admin    3K Jul 16 18:34 ..
drwxrwxrwx     3 www   admin  102B Jul 16 18:16 chunk_1
-rwxr-xr-x     1 www   admin    1K Jul 16 18:16 iprscan-20070716-18151789.dcmd
-rw-rw-rw-     1 www   admin    6B Jul 16 18:16 iprscan-20070716-18151789.djob
-rwxr-xr-x     1 www   admin  338B Jul 16 18:16 iprscan-20070716-18151789.dsub
-rw-r--r--     1 www   admin  254B Jul 16 18:16 iprscan-20070716-18151789.errors
-rw-r--r--     1 www   admin    3B Jul 16 18:16 iprscan-20070716-18151789.exitcode
-rw-rw-rw-     1 www   admin    1K Jul 16 18:16 iprscan-20070716-18151789.input
-rw-rw-rw-     1 www   admin  320B Jul 16 18:16 iprscan-20070716-18151789.params
-rw-rw-rw-     1 www   admin    1K Jul 16 18:16 iprscan-20070716-18151789.seqs
dlc-genomics:/common/iprscan/tmp/20070716/iprscan-20070716-18151789 young$ em *errors

iprscan submission failed: checkSequences: cannot get raw entry from match file: getRawEntryFromIprMatches: query iprmatches failed: Can't use string ("") as an ARRAY ref while "strict refs" in use at /common/iprscan/lib/Index/IprMatches.pm line 472.<br>

Which is this line in IprMatches.pm:

472		$go_entry = $go_entry->[0]; #get_entry returns an array ref. A database member acc/id should be unique on all the interpro database.


Which led to the error message being sent byt these lines in InterProScan.pm:

896	if ($checkcrc) {
897	  ($res, $raw) = $self->getRawEntryFromIprMatches($preid, $crc, $len, $apps,$iprfields, $goterms);
898	  return (0, "checkSequences: Cannot get raw entry from iprmatches: $raw") unless $res;


LIST OF SEQUENCES RUNNING FROM ps aux | grep perl

sequence	iprscan_directory									job_no
10.1	NOT FOUND
11.2	/common/iprscan/tmp/20070717/iprscan-20070717-13540699	897389
17.1	NOT FOUND
17.2	NOT FOUND
28.1	/common/iprscan/tmp/20070717/iprscan-20070717-13542379	897397
42.1	/common/iprscan/tmp/20070717/iprscan-20070717-13545901	897406
42.2	/common/iprscan/tmp/20070717/iprscan-20070717-13551232	897420 
68.2	/common/iprscan/tmp/20070717/iprscan-20070717-14094378	897579


STALLED JOBS:

sudo qdel 897406
sudo qdel 897420 
sudo qdel 897397
sudo qdel 897579
sudo qdel 897766
sudo qdel 897389


:::::::::::::::::::::::::::::
queuename                      qtype used/tot. load_avg arch          states
----------------------------------------------------------------------------
all.q@gems.rsmas.miami.edu     BIP   0/2       0.21     darwin        d
----------------------------------------------------------------------------
all.q@node001.cluster.private  BIP   2/2       0.01     darwin        
 897389 0.55500 iprscan-20 www          r     07/17/2007 13:55:11     1        
 897766 0.55500 iprscan-20 www          r     07/17/2007 14:55:56     1        
----------------------------------------------------------------------------
all.q@node002.cluster.private  BIP   0/2       0.00     darwin        
----------------------------------------------------------------------------
all.q@node004.cluster.private  BIP   0/2       0.00     darwin        
----------------------------------------------------------------------------
all.q@node005.cluster.private  BIP   0/2       0.07     darwin        
----------------------------------------------------------------------------
all.q@node006.cluster.private  BIP   2/2       0.03     darwin        
 897397 0.55500 iprscan-20 www          r     07/17/2007 13:55:26     1        
 897579 0.55500 iprscan-20 www          r     07/17/2007 14:10:41     1        
----------------------------------------------------------------------------
all.q@node007.cluster.private  BIP   0/2       0.01     darwin        
----------------------------------------------------------------------------
all.q@node008.cluster.private  BIP   0/2       0.00     darwin        
----------------------------------------------------------------------------
all.q@node009.cluster.private  BIP   0/2       0.02     darwin        
----------------------------------------------------------------------------
all.q@node010.cluster.private  BIP   0/2       0.00     darwin        
----------------------------------------------------------------------------
all.q@node011.cluster.private  BIP   1/2       1.00     darwin        
 897147 0.55500 stramenoph root         r     07/11/2007 00:28:34     1 1
----------------------------------------------------------------------------
all.q@node012.cluster.private  BIP   0/2       0.00     darwin        
----------------------------------------------------------------------------
all.q@node013.cluster.private  BIP   2/2       0.01     darwin        
 897406 0.55500 iprscan-20 www          r     07/17/2007 13:55:56     1        
 897420 0.55500 iprscan-20 www          r     07/17/2007 13:56:11     1       

iprseq -j 897406
iprseq -j 897420 
iprseq -j 897397
iprseq -j 897579
iprseq -j 897766
iprseq -j 897389


iprseq -j 897406
Temp dir: iprscan-20070717-13545901
Parent dir: 20070717
Target dir: /common/iprscan/tmp/20070717/iprscan-20070717-13545901
Target file: /common/iprscan/tmp/20070717/iprscan-20070717-13545901/*seqs
Fasta:
>>42.1
MQIFVKTLTGKTITLDVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLDVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLDVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLDVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLDVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGF

/common/iprscan/tmp/20070717/iprscan-20070717-13545901 young$ ll
total 26
drwxrwxrwx    12 www    admin  408B Jul 17 15:14 .
drwxrwxrwx   225 young  admin    7K Jul 17 15:52 ..
drwxrwxrwx     3 www    admin  102B Jul 17 13:55 chunk_1
-rwxr-xr-x     1 www    admin  170B Jul 17 15:14 iprscan-20070717-13545901.dchk
-rw-rw-rw-     1 www    admin    0B Jul 17 15:14 iprscan-20070717-13545901.dchk.stderr
-rwxr-xr-x     1 www    admin    1K Jul 17 13:55 iprscan-20070717-13545901.dcmd
-rw-rw-rw-     1 www    admin    6B Jul 17 13:55 iprscan-20070717-13545901.djob
-rwxr-xr-x     1 www    admin  338B Jul 17 13:55 iprscan-20070717-13545901.dsub
-rw-r--r--     1 www    admin    0B Jul 17 13:55 iprscan-20070717-13545901.errors
-rw-rw-rw-     1 www    admin  394B Jul 17 13:55 iprscan-20070717-13545901.input
-rw-rw-rw-     1 www    admin  320B Jul 17 13:55 iprscan-20070717-13545901.params
-rw-rw-rw-     1 www    admin  388B Jul 17 13:55 iprscan-20070717-13545901.seqs
dlc-genomics:/common/iprscan/tmp/20070717/iprscan-20070717-13545901 young$ ll chunk_1/
total 2
drwxrwxrwx    3 www  admin  102B Jul 17 13:55 .
drwxrwxrwx   12 www  admin  408B Jul 17 15:14 ..
-rw-rw-rw-    1 www  admin   0B Jul 17 13:55 iprscan-20070717-13545901.nocrc


iprseq -j 897420 
Temp dir: iprscan-20070717-13551232
Parent dir: 20070717
Target dir: /common/iprscan/tmp/20070717/iprscan-20070717-13551232
Target file: /common/iprscan/tmp/20070717/iprscan-20070717-13551232/*seqs
Fasta:
>>42.2
MQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGGMQI

/common/iprscan/tmp/20070717/iprscan-20070717-13551232 young$ ll
total 30
drwxrwxrwx    13 www    admin  442B Jul 17 15:14 .
drwxrwxrwx   227 young  admin    7K Jul 17 15:52 ..
drwxrwxrwx     3 www    admin  102B Jul 17 13:56 chunk_1
-rwxr-xr-x     1 www    admin  170B Jul 17 15:14 iprscan-20070717-13551232.dchk
-rw-rw-rw-     1 www    admin  165B Jul 17 15:14 iprscan-20070717-13551232.dchk.stderr
-rw-rw-rw-     1 www    admin    0B Jul 17 15:14 iprscan-20070717-13551232.dchk.stdout
-rwxr-xr-x     1 www    admin    1K Jul 17 13:56 iprscan-20070717-13551232.dcmd
-rw-rw-rw-     1 www    admin    6B Jul 17 13:56 iprscan-20070717-13551232.djob
-rwxr-xr-x     1 www    admin  338B Jul 17 13:56 iprscan-20070717-13551232.dsub
-rw-r--r--     1 www    admin    0B Jul 17 13:56 iprscan-20070717-13551232.errors
-rw-rw-rw-     1 www    admin  782B Jul 17 13:56 iprscan-20070717-13551232.input
-rw-rw-rw-     1 www    admin  320B Jul 17 13:56 iprscan-20070717-13551232.params
-rw-rw-rw-     1 www    admin  770B Jul 17 13:56 iprscan-20070717-13551232.seqs
dlc-genomics:/common/iprscan/tmp/20070717/iprscan-20070717-13551232 young$ ll chunk_1/
total 2
drwxrwxrwx    3 www  admin  102B Jul 17 13:56 .
drwxrwxrwx   13 www  admin  442B Jul 17 15:14 ..
-rw-rw-rw-    1 www  admin   0B Jul 17 13:56 iprscan-20070717-13551232.nocrc



iprseq -j 897397
Temp dir: iprscan-20070717-13542379
Parent dir: 20070717
Target dir: /common/iprscan/tmp/20070717/iprscan-20070717-13542379
Target file: /common/iprscan/tmp/20070717/iprscan-20070717-13542379/*seqs
Fasta:
>>28.1
MSEEEDNQSNNISLERNTVSEECTYSTNERTKKKKLDNIIDEENNKKIKLNNNCYEQDDDEQTLFDNNKINEYNILDNKNVDSNITNNINLNKCNVKVENNILNNITNVQNDILSKENNNNNNYNNVQPTTHTSVVTNNEDDSMINKLTNQKYSQRYLQLLEEKKKLPAWSAKKNFLKLLKKNNVLIIVGDTGSGKTTQISQFVLESKYTEKKSIAVTQPRRVAAMSVAARVSEELDVELGTYVGYTIRFEDKSSNKTIIKYLTDGMLLRESMSDPLLTKYNTIILDEAHERTLATDILFGVIKNIQEKRNDLKLIVMSATLDAEKFQKFFNNSKILNIPGRLFPVEIFYTLQAEKDYVKVVIRTVYDIHINEEEGDILVFLTGEEEIEMTKKEIERVVSRNMNAGQLVVLPLYSSLPPAQQQKIFEPPPKPRFKGDKNGRKCILATNIAETSITIDGIVYVIDPGFSKQKVYNPRARIESLLIAPISKASAEQRAGRAGRTKPGKCFRLYTEKCFEETLPEQTYPEILRSNLGSVVLNLKKLGIDDLVHFDFMDPPAPETLMRALEQLNYLGALDDEGDLTNKGHLMSEFPVDPQLAKVLIESPNYSCSSEILTIAAMLSVPNCFLRPKVKVKEADEMKMRFSHLDGDHLTLLNVFHAYVKHALVDTNESKKFCFEYFLNHRAMTSAQNVRQQLLRIMERLNLKILSIKPSNPEYYINIRKALLSGFYQQVAYKTTKGYYITVKDIQMVTLHPSTVFQMNPEWVVYHELLLTSKNFIRTVTKIEGKWLLEIAPNYYNLEDLPNSEAKNDLKMLHKKLNH

/common/iprscan/tmp/20070717/iprscan-20070717-13542379 young$ ll
total 27
drwxrwxrwx    10 www    admin  340B Jul 17 15:14 .
drwxrwxrwx   213 young  admin    7K Jul 17 15:50 ..
drwxrwxrwx     3 www    admin  102B Jul 17 13:55 chunk_1
-rwxr-xr-x     1 www    admin    1K Jul 17 13:55 iprscan-20070717-13542379.dcmd
-rw-rw-rw-     1 www    admin    6B Jul 17 13:55 iprscan-20070717-13542379.djob
-rwxr-xr-x     1 www    admin  338B Jul 17 13:55 iprscan-20070717-13542379.dsub
-rw-r--r--     1 www    admin    0B Jul 17 13:55 iprscan-20070717-13542379.errors
-rw-rw-rw-     1 www    admin  840B Jul 17 13:55 iprscan-20070717-13542379.input
-rw-rw-rw-     1 www    admin  320B Jul 17 13:55 iprscan-20070717-13542379.params
-rw-rw-rw-     1 www    admin  827B Jul 17 13:55 iprscan-20070717-13542379.seqs
dlc-genomics:/common/iprscan/tmp/20070717/iprscan-20070717-13542379 young$ ll chunk_1/
total 2
drwxrwxrwx    3 www  admin  102B Jul 17 13:55 .
drwxrwxrwx   10 www  admin  340B Jul 17 15:14 ..
-rw-rw-rw-    1 www  admin   0B Jul 17 13:55 iprscan-20070717-13542379.nocrc


iprseq -j 897579
Temp dir: iprscan-20070717-14094378
Parent dir: 20070717
Target dir: /common/iprscan/tmp/20070717/iprscan-20070717-14094378
Target file: /common/iprscan/tmp/20070717/iprscan-20070717-14094378/*seqs
Fasta:
>>68.2
MLELKRTFDAKGHCLLEMPSGTGKTTTLLSLIVAYILENPHVVRKLIYCSRTVPEIEKVIAELKHLMNYYEKQTGAMPNITGLVLSSRKNMCIHPEVSREREGKIVDARCYGMTASYVRERAAHDESAPVCQYYEGFQAEGKENMLPPGVYSIDDLKEFGRERNWCPYFLSRFAINQAHVVVYSYYYLLDPKVAEVVSKELARESVVVCDEAHNIDNVCVDSMSVKINRRLIERSTTGIHNLEKKVAELKEDDKRRLNEEYVRLVQGLKDASFARETDMVLANPVLPNEVIREVVPGNIRNADHFLSFLKRFIEYIKSRLRVQHVVQESPAGFLRDVQQKVCIERKPLRFCADRLQSLLRTLEITDLSEYGPLSVITSFATLVSTYTKGFTIIIEPFDDKTPTVSNPIMHFSCLDSSIAMKPIFQRFQSVVITSGTLSPMDMYPKILDFEPVVMSSFTMTLARPCLLPMIVARGNDQVAISSRFETREDTAVTRNYGQLLVETAKTVPDGVVCFFTSYLYLESVVASWYDQGIIDTLLRYKLLFIETQDNAETSYALMNYVKACECGRGAVLLAVARGKVSEGVDFDHHLGRAVLMFGIPYVYTQSRILKARLDYLRDQFQIRENDFLTFDALRHAAQCVGRAIRGKTDYGIMIFADKRFSRQDKRGKLPKWIQEHLTDNLSNLSTEESMQLAKRWLRQMAQPFTREDQLGVSLLTLEQLQSMEREKLEKQAQGKQ

/common/iprscan/tmp/20070717/iprscan-20070717-14094378 young$ ll
total 27
drwxrwxrwx    10 www    admin  340B Jul 17 15:14 .
drwxrwxrwx   217 young  admin    7K Jul 17 15:50 ..
drwxrwxrwx     3 www    admin  102B Jul 17 14:10 chunk_1
-rwxr-xr-x     1 www    admin    1K Jul 17 14:10 iprscan-20070717-14094378.dcmd
-rw-rw-rw-     1 www    admin    6B Jul 17 14:10 iprscan-20070717-14094378.djob
-rwxr-xr-x     1 www    admin  338B Jul 17 14:10 iprscan-20070717-14094378.dsub
-rw-r--r--     1 www    admin    0B Jul 17 14:10 iprscan-20070717-14094378.errors
-rw-rw-rw-     1 www    admin  755B Jul 17 14:10 iprscan-20070717-14094378.input
-rw-rw-rw-     1 www    admin  320B Jul 17 14:10 iprscan-20070717-14094378.params
-rw-rw-rw-     1 www    admin  743B Jul 17 14:10 iprscan-20070717-14094378.seqs
dlc-genomics:/common/iprscan/tmp/20070717/iprscan-20070717-14094378 young$ ll chunk_1/
total 2
drwxrwxrwx    3 www  admin  102B Jul 17 14:10 .
drwxrwxrwx   10 www  admin  340B Jul 17 15:14 ..
-rw-rw-rw-    1 www  admin   0B Jul 17 14:10 iprscan-20070717-14094378.nocrc


iprseq -j 897766
Temp dir: iprscan-20070717-14545415
Parent dir: 20070717
Target dir: /common/iprscan/tmp/20070717/iprscan-20070717-14545415
Target file: /common/iprscan/tmp/20070717/iprscan-20070717-14545415/*seqs
Fasta:
>>314.2
FDPNILQDLLPLYYKRLFPHKQFYRWMSYGRSESSVFSNREFSFTLQDDIYIRYQSFETQQELEREICSKAPFKIDIGAVYNIRPKDHRGSTAIQPVQRELVFDIDMTDYDDIRTCCNEANVCQLCWKFMSIACRVLDEALREDFGFEHLLWVFSGRRGIHCWVSDKAARHLDTAARSAIAMYLNLLISGGEGTASRVIIHDEMHHSVRRAYRIVAPLFEEICLVDQNMFGKPEGVRKLLALVQDASVRAELEKRFKAVANDSKGVWKEFVAYFDELRMSGNSNRYRRFKFIVEEVTLAFTYPRLDINVTKGFNHLLKSPFCVHPKTGKVCIPFNPNIASKFDPTDVPTIIDLLKEVNAFDEKNTVEGEENRSKIKDYKKTSMFKGTVIFEEFLRKLEQTFKGKAAAL

/common/iprscan/tmp/20070717/iprscan-20070717-14545415 young$ ll
total 25
drwxrwxrwx    10 www    admin  340B Jul 17 15:14 .
drwxrwxrwx   219 young  admin    7K Jul 17 15:51 ..
drwxrwxrwx     3 www    admin  102B Jul 17 14:55 chunk_1
-rwxr-xr-x     1 www    admin    1K Jul 17 14:55 iprscan-20070717-14545415.dcmd
-rw-rw-rw-     1 www    admin    6B Jul 17 14:55 iprscan-20070717-14545415.djob
-rwxr-xr-x     1 www    admin  338B Jul 17 14:55 iprscan-20070717-14545415.dsub
-rw-r--r--     1 www    admin    0B Jul 17 14:55 iprscan-20070717-14545415.errors
-rw-rw-rw-     1 www    admin  422B Jul 17 14:55 iprscan-20070717-14545415.input
-rw-rw-rw-     1 www    admin  320B Jul 17 14:55 iprscan-20070717-14545415.params
-rw-rw-rw-     1 www    admin  416B Jul 17 14:55 iprscan-20070717-14545415.seqs
dlc-genomics:/common/iprscan/tmp/20070717/iprscan-20070717-14545415 young$ ll chunk_1/
total 2
drwxrwxrwx    3 www  admin  102B Jul 17 14:55 .
drwxrwxrwx   10 www  admin  340B Jul 17 15:14 ..
-rw-rw-rw-    1 www  admin   0B Jul 17 14:55 iprscan-20070717-14545415.nocrc


iprseq -j 897389
Temp dir: iprscan-20070717-13540699
Parent dir: 20070717
Target dir: /common/iprscan/tmp/20070717/iprscan-20070717-13540699
Target file: /common/iprscan/tmp/20070717/iprscan-20070717-13540699/*seqs
Fasta:
>>11.2
MDKKRNIRNMSVIAHVDHGKSTLTDSLVSKAGIIAGAKAGETRFTDTRKDEQERCITIKSTAISMYFELDEKDLVFITNPDQRDKDCKGFLINLIDSPGHVDFSSEVTAALRVTDGALVVVDCVSGVCVQTETVLRQAIAERIKPVLFMNKMDRALLELQLDPEDLYQTFQRIVENVNVIIATYNDDGGPMGEVRIDPSRGSVGFGSGLHGWAFTLKQFAEMYSAMFKIDVVKLMNRLWGENFFNSKTKKWAKVKDDDNKRSFVMYILDPIYKVFDAIMNYKTDEIPKLLEKIKVSLKHEDKDKDGKNLLKVVMRTWLPAGEALLQMIAIHLPSPVVAQKYRMEMLYEGPHDDEAAVAVKNCDPEGPLMMYVSKMVPTSDKGRFYAFGRVFAGKVATGQKCRIMGPNFTPGKKEDLYEKAIQRTILMMGRYVEAIEDVPCGNICGLVGVDQFLVKTGTISTFKDAHNMKVMKFSVSPVVRVAVEPKNPADLPKLVEGLKRLAKSDPMVQCIIEESGEHIIAGAGELHLEICLKDLEEDHACIPLKKSDPVVSYRETVSDESDQMCLSKSPNKHNRLFMKAVPMPDGLPDDIDNGDVNARDEFKQRARYLSEKYDYDVTEARKIWCFGPDGTGPNIVVDCTKGVQYLNEIKDSVVAGFQWASKEGVLAEENMRGVRFNIYDVALHADAIHRGGGQIIPTARRVLYASYITASPRIMEPVYLCEIQCPEAAVGGIYGVLNRRRGHVFEDSQVAGTPMFVVKAYLPVNESFGFTADLRSNTGGQAFPQCVFDHWQIFPGDPTDPSTKPYQIIQDIRKRKGLKEGLPDLSQYLDKL

/common/iprscan/tmp/20070717/iprscan-20070717-13540699 young$ ll
total 28
drwxrwxrwx    12 www    admin  408B Jul 17 15:14 .
drwxrwxrwx   220 young  admin    7K Jul 17 15:51 ..
drwxrwxrwx     3 www    admin  102B Jul 17 13:55 chunk_1
-rwxr-xr-x     1 www    admin  170B Jul 17 15:14 iprscan-20070717-13540699.dchk
-rw-rw-rw-     1 www    admin    0B Jul 17 15:14 iprscan-20070717-13540699.dchk.stderr
-rwxr-xr-x     1 www    admin    1K Jul 17 13:54 iprscan-20070717-13540699.dcmd
-rw-rw-rw-     1 www    admin    6B Jul 17 13:55 iprscan-20070717-13540699.djob
-rwxr-xr-x     1 www    admin  338B Jul 17 13:54 iprscan-20070717-13540699.dsub
-rw-r--r--     1 www    admin    0B Jul 17 13:55 iprscan-20070717-13540699.errors
-rw-rw-rw-     1 www    admin  852B Jul 17 13:54 iprscan-20070717-13540699.input
-rw-rw-rw-     1 www    admin  320B Jul 17 13:54 iprscan-20070717-13540699.params
-rw-rw-rw-     1 www    admin  839B Jul 17 13:54 iprscan-20070717-13540699.seqs
dlc-genomics:/common/iprscan/tmp/20070717/iprscan-20070717-13540699 young$ ll chunk_1/
total 2
drwxrwxrwx    3 www  admin  102B Jul 17 13:55 .
drwxrwxrwx   12 www  admin  408B Jul 17 15:14 ..
-rw-rw-rw-    1 www  admin   0B Jul 17 13:55 iprscan-20070717-13540699.nocrc





42.2
=====

/common/iprscan/tmp/20070717/iprscan-20070717-13551232 young$ ll
total 28
drwxrwxrwx    13 www    admin  442B Jul 17 15:14 .
drwxrwxrwx   205 young  admin    6K Jul 17 14:55 ..
drwxrwxrwx     3 www    admin  102B Jul 17 13:56 chunk_1
-rwxr-xr-x     1 www    admin  170B Jul 17 15:14 iprscan-20070717-13551232.dchk
-rw-rw-rw-     1 www    admin  165B Jul 17 15:14 iprscan-20070717-13551232.dchk.stderr
-rw-rw-rw-     1 www    admin    0B Jul 17 15:14 iprscan-20070717-13551232.dchk.stdout
-rwxr-xr-x     1 www    admin    1K Jul 17 13:56 iprscan-20070717-13551232.dcmd
-rw-rw-rw-     1 www    admin    6B Jul 17 13:56 iprscan-20070717-13551232.djob
-rwxr-xr-x     1 www    admin  338B Jul 17 13:56 iprscan-20070717-13551232.dsub
-rw-r--r--     1 www    admin    0B Jul 17 13:56 iprscan-20070717-13551232.errors
-rw-rw-rw-     1 www    admin  782B Jul 17 13:56 iprscan-20070717-13551232.input
-rw-rw-rw-     1 www    admin  320B Jul 17 13:56 iprscan-20070717-13551232.params
-rw-rw-rw-     1 www    admin  770B Jul 17 13:56 iprscan-20070717-13551232.seqs


/common/iprscan/tmp/20070717/iprscan-20070717-13551232 young$ ll chunk_1/
total 2
drwxrwxrwx    3 www  admin  102B Jul 17 13:56 .
drwxrwxrwx   13 www  admin  442B Jul 17 15:14 ..
-rw-rw-rw-    1 www  admin   0B Jul 17 13:56 iprscan-20070717-13551232.nocrc

em *params
>>>
iprlookup=1
frame=6
appl=blastprodom,coils,gene3d,hmmpanther,hmmpir,hmmpfam,hmmsmart,hmmtigr,fprintscan,scanregexp,profilescan,superfamily,seg
tool=iprscan
submission=cli
goterms=1
cmd=submit
jobid=iprscan-20070717-13551232
onego=1
crc=1
seqtype=P
format=xml
srchtype=interactive
remotehost=dlc-genomics.rsmas.miami.edu
<<<

em *seqs
>>>
>>42.2
MQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRG\
GMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLR\
GGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRL\
RGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLR\
LRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVL\
RLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLV\
LRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHL\
VLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLH\
LVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTL\
HLVLRLRGGMQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKEST\
LHLVLRLRGGMQI
<<<

NB: Contains repeats

em *dsub
>>>
#!/bin/sh

#If you need to add some specific environment variables
#do it here
export PERL5LIB=${PERL5LIB}':'/RemotePerl/5.8.6

/common/sge/bin/darwin/qsub -N iprscan-20070717-13551232  -shell y -b y -o /dev/null -e /dev/null -v PERL5LIB=/RemotePerl /common\
/iprscan/tmp/20070717/iprscan-20070717-13551232/iprscan-20070717-13551232.dcmd

<<<


em iprscan-20070717-13551232.dchk.stderr
>>>
/common/iprscan/tmp/20070717/iprscan-20070717-13551232/iprscan-20070717-13551232.dchk: line 8: 25717 Killed                  /common/iprscan/bin/qstat_ipr.pl 897420
<<<

em /common/iprscan/bin/qstat_ipr.pl
>>>
#!/usr/bin/perl

# Script to wrap SGE's qstat command so that
# it returns something sensible that can be read
# by the Dispatcher etc.

#job-ID  prior   name       user         state submit/start at     queue                          slots ja-task-ID 
#-----------------------------------------------------------------------------------------------------------------
#  13082 0.56000 sleep.csh  hunter       r     07/04/2005 09:51:05 all                                1        
#
#################################################################################
# --  FINISHED JOBS  -  FINISHED JOBS  -  FINISHED JOBS  -  FINISHED JOBS  --  
#################################################################################
#  12982 0.00000 sleep.csh  hunter       qw    07/01/2005 11:18:10                                    1        
#  12983 0.00000 sleep.csh  hunter       qw    07/01/2005 11:18:39                                    1        
#  12984 0.00000 sleep.csh  hunter       qw    07/01/2005 11:19:11                                    1        
#  12985 0.00000 sleep.csh  hunter       qw    07/01/2005 11:19:28                                    1        
#  12986 0.00000 sleep.csh  hunter       qw    07/01/2005 11:19:28                                    1        
#

# get job number for SGE system
$jobid=shift;

#check qstat
$qstat = `qstat -f -s prszh`;
# $qstat = `qstat -s prszh`;
@qstat = split (/\n/,$qstat);

$finished = 0;
$notthere = 1;

foreach (@qstat) {
	if (/FINISHED/) {
		$finished = 1;
	}

	if($finished == 1 && /(.*\s+)qw(\s+\d+.*)/) {
		$line = "$1DONE$2";
	} else {
		$line = $_;
	}

	if ($line=~/$jobid/) {
		print $line."\n";
		$notthere=0;
		exit 0;
	} 
}

if ($notthere == 1) {
	print "\t$jobid\tiprscan\tw\t1234\n";
}
exit 0;

<<<


em iprscan-20070717-13551232.dchk
>>>
#!/bin/sh

#If you need to add some specific environment variables
#do it here
export PERL5LIB=${PERL5LIB}':'/RemotePerl/5.8.6


/common/iprscan/bin/qstat_ipr.pl 897420

<<<



28.1
====


/common/iprscan/tmp/20070717/iprscan-20070717-13542379 young$ ll
total 26
drwxrwxrwx    10 www    admin  340B Jul 17 15:14 .
drwxrwxrwx   205 young  admin    6K Jul 17 14:55 ..
drwxrwxrwx     3 www    admin  102B Jul 17 13:55 chunk_1
-rwxr-xr-x     1 www    admin    1K Jul 17 13:55 iprscan-20070717-13542379.dcmd
-rw-rw-rw-     1 www    admin    6B Jul 17 13:55 iprscan-20070717-13542379.djob
-rwxr-xr-x     1 www    admin  338B Jul 17 13:55 iprscan-20070717-13542379.dsub
-rw-r--r--     1 www    admin    0B Jul 17 13:55 iprscan-20070717-13542379.errors
-rw-rw-rw-     1 www    admin  840B Jul 17 13:55 iprscan-20070717-13542379.input
-rw-rw-rw-     1 www    admin  320B Jul 17 13:55 iprscan-20070717-13542379.params
-rw-rw-rw-     1 www    admin  827B Jul 17 13:55 iprscan-20070717-13542379.seqs
dlc-genomics:/common/iprscan/tmp/20070717/iprscan-20070717-13542379 young$ ll chunk_1/
total 2
drwxrwxrwx    3 www  admin  102B Jul 17 13:55 .
drwxrwxrwx   10 www  admin  340B Jul 17 15:14 ..
-rw-rw-rw-    1 www  admin   0B Jul 17 13:55 iprscan-20070717-13542379.nocrc


em *seqs
>>>
>>28.1
MSEEEDNQSNNISLERNTVSEECTYSTNERTKKKKLDNIIDEENNKKIKLNNNCYEQDDDEQTLFDNNKINEYNILDNKNVDSNITNNINLNKCNVKVENNILN\
NITNVQNDILSKENNNNNNYNNVQPTTHTSVVTNNEDDSMINKLTNQKYSQRYLQLLEEKKKLPAWSAKKNFLKLLKKNNVLIIVGDTGSGKTTQISQFVLESK\
YTEKKSIAVTQPRRVAAMSVAARVSEELDVELGTYVGYTIRFEDKSSNKTIIKYLTDGMLLRESMSDPLLTKYNTIILDEAHERTLATDILFGVIKNIQEKRND\
LKLIVMSATLDAEKFQKFFNNSKILNIPGRLFPVEIFYTLQAEKDYVKVVIRTVYDIHINEEEGDILVFLTGEEEIEMTKKEIERVVSRNMNAGQLVVLPLYSS\
LPPAQQQKIFEPPPKPRFKGDKNGRKCILATNIAETSITIDGIVYVIDPGFSKQKVYNPRARIESLLIAPISKASAEQRAGRAGRTKPGKCFRLYTEKCFEETL\
PEQTYPEILRSNLGSVVLNLKKLGIDDLVHFDFMDPPAPETLMRALEQLNYLGALDDEGDLTNKGHLMSEFPVDPQLAKVLIESPNYSCSSEILTIAAMLSVPN\
CFLRPKVKVKEADEMKMRFSHLDGDHLTLLNVFHAYVKHALVDTNESKKFCFEYFLNHRAMTSAQNVRQQLLRIMERLNLKILSIKPSNPEYYINIRKALLSGF\
YQQVAYKTTKGYYITVKDIQMVTLHPSTVFQMNPEWVVYHELLLTSKNFIRTVTKIEGKWLLEIAPNYYNLEDLPNSEAKNDLKMLHKKLNH
<<<


em *params
>>>
iprlookup=1
frame=6
appl=blastprodom,coils,gene3d,hmmpanther,hmmpir,hmmpfam,hmmsmart,hmmtigr,fprintscan,scanregexp,profilesc\
an,superfamily,seg
tool=iprscan
submission=cli
goterms=1
cmd=submit
jobid=iprscan-20070717-13542379
onego=1
crc=1
seqtype=P
format=xml
srchtype=interactive
remotehost=dlc-genomics.rsmas.miami.edu
<<<


em *dsub
>>>
#!/bin/sh

#If you need to add some specific environment variables
#do it here
export PERL5LIB=${PERL5LIB}':'/RemotePerl/5.8.6


/common/sge/bin/darwin/qsub -N iprscan-20070717-13542379  -shell y -b y -o /dev/null -e /dev/null -v PERL\
5LIB=/RemotePerl /common/iprscan/tmp/20070717/iprscan-20070717-13542379/iprscan-20070717-13542379.dcmd
<<<



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Jul 11 19:50:38 EDT 2007
CREATED Collector::Orthologues AND REFACTORED Workflow AND App OBJECTS

REASONS:

	-	STREAMLINE THE PIPELINE CODE

	-	ADD STAGE STATUS INFORMATION

	-	ALLOW WEB USE OF SAME CODE BASE WITHOUT FURTHER MODIFICATION




++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Wed Jul 11 17:07:48 EDT 2007
RAN INPARANOID

sudo /Users/young/FUNNYBASE/apps/blast/wu-blastall -p blastp -i P -d P -v 9765 -b 9765 -F seg -z 5000000 | ./blast_parser.pl > P-P

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Tue Jul 10 16:40:05 EDT 2007
DOWNLOADED INPARANOID SQL TABLES FOR Pfal-Agam

http://inparanoid.cgb.ki.se/download/current/sqltables/


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Mon Jul  9 15:34:40 EDT 2007
RESOLVED ERROR IN Iprscan::interpros

FIXED ISSUE OF INBRED HASHES IN Iprscan::interpros WHILST REFACTORING
./collectionsequencesiprscan.pl

RERAN ./collectionsequencesiprscan.pl
	
	$VAR1 = undef;
	SELECT * FROM collectionsequencesorf
					WHERE collectionid = 11360
					AND frame = 2
					AND length >= 49
	Orf name: 11360_2_ORF2
	Frame: 2
	Number: 2
	Length: 139
	NOT DEFINED OR MULTIPLE RESULTS
	Collection id: 11381
	Collection accession: 1
	Orf:
	$VAR1 = undef;
	SELECT * FROM collectionsequencesorf
					WHERE collectionid = 11381
					AND frame = 1
					AND length >= 49
	Orf name: 11381_1_ORF3
	Frame: 1
	Number: 3
	Length: 54
	11400
	11500
	ORF 11523_2_ORF1 has length 49 (< 50)
	11600
	ORF 11610_2_ORF2 has length 49 (< 50)
	ORF 11648_2_ORF1 has length 49 (< 50)
	11700
	11800
	11900
	ORF 11972_1_ORF2 has length 49 (< 50)
	NOT DEFINED OR MULTIPLE RESULTS
	Collection id: 11972
	Collection accession: 1
	Orf:
	$VAR1 = undef;
	SELECT * FROM collectionsequencesorf
					WHERE collectionid = 11972
					AND frame = 1
					AND length >= 49
	Orf name: 11972_1_ORF2
	Frame: 1
	Number: 2
	Length: 49
	Output file printed:
	
	/Users/young/FUNNYBASE/pipeline/funnybase11/collection/funnybase11.collectionsequencesiprscan.tsv
	
	Dropping 'collectionsequencesiprscan' if exists... done.
	Creating table 'collectionsequencesiprscan'... done.
	Loading data into table 'collectionsequencesiprscan'... done.
	
	Run time: 00:11:31
	Completed ./collectionsequencesiprscan.pl
	6:10PM, 9 July 2007
	****************************************

THEN RERAN WORKFLOW 3 - IPRSCAN SVG

REQUIRED	./collectionsequencesannotation.pl			WORKFLOW 1
REQUIRED	./collectionsequencesiprscan.pl				WORKFLOW 2

./collectionsequencesiprscansvg.pl

./collectionsequencesiprscandomain.pl

./collectionsequencesiprscandomainplussvg.pl

11800
11900
Output file printed:

/Users/young/FUNNYBASE/pipeline/funnybase11/collection/funnybase11.collectionsequencesiprscandomainplussvg.tsv

Dropping 'collectionsequencesiprscandomainplussvg' if exists... done.
Creating table 'collectionsequencesiprscandomainplussvg'... done.
Loading data into table 'collectionsequencesiprscandomainplussvg'... done.
Completed ./collectionsequencesiprscandomainplussvg.pl
Run time: 00:06:37
11:06PM, 9 July 2007
****************************************



RERAN ./orthologuesiprscan.pl

	Output file printed:
	
	/Users/young/FUNNYBASE/pipeline/unigene/collection/unigene.orthologuesiprscan.tsv
	
	Dropping 'orthologuesiprscan' if exists... done.
	Creating table 'orthologuesiprscan'... done.
	Loading data into table 'orthologuesiprscan'... done.
	
	Run time: 00:00:06
	Completed ./orthologuesiprscan.pl
	7:19PM, 9 July 2007
	****************************************


THEN RERAN WORKFLOW 3:


WORKFLOW 3 - IPRSCAN SVG

REQUIRED	./orthologuesannotation.pl			WORKFLOW 1
REQUIRED	./orthologuesiprscan.pl				WORKFLOW 2

	./orthologuesiprscansvg.pl

./orthologuesiprscandomain.pl

	./orthologuesiprscandomainsvg.pl
	
	./orthologuesiprscandomainplussvg.pl

USED BY		./iprscan.cgi



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Jul  5 23:39:28 EDT 2007
POSSIBLE ERROR IN orthologuesiprscansvg - MISSING A SEQUENCE FOR unigene ORTHOLOGUE 16

select orthologuenumber, sequencenumber from orthologuesiprscansvg where orthologuenumber = 16;
+------------------+----------------+
| orthologuenumber | sequencenumber |
+------------------+----------------+
|               16 |              1 |
|               16 |              2 |
|               16 |              3 |
|               16 |              5 |
|               16 |              6 |
|               16 |              7 |
+------------------+----------------+



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Jul  5 18:56:58 EDT 2007
COMPLETED WORKFLOW 2 AND WORKFLOW 3

./orthologuesbesthit.pl -d unigene

	Run time: 00:20:00
	Completed ./orthologuesbesthit.pl
	6:55PM, 5 July 2007
	****************************************

./orthologuesiprscansvg.pl -d unigene

	Creating table 'orthologuesiprscansvg' if not exists... done.
	Doing DOMAIN SVGs for orthologues (total 138)
	0
	100
	Output file printed:
	
	/Users/young/FUNNYBASE/pipeline/unigene/collection/unigene.orthologuesiprscansvg.tsv
	
	Dropping 'orthologuesiprscansvg' if exists... done.
	Creating table 'orthologuesiprscansvg'... done.
	Loading data into table 'orthologuesiprscansvg'... done.
	Completed ./orthologuesiprscansvg.pl
	Run time: 00:00:03
	7:28PM, 5 July 2007
	****************************************


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Jul  5 15:48:21 EDT 2007
COMPLETED ORTHOLOGUES iprscan PIPELINE


WORKFLOW 1 - IPRSCAN
./orthologues.pl					LOAD SEQUENCE FILES INTO DATABASE

./orthologuesorf.pl					GET ORFS

./orthologuesarrayiprscan.pl		RUN ARRAY IPRSCAN

./orthologuesiprscan.pl				1. PARSE IPRSCAN OUTPUT FILES USING ORF INFORMATION
									2. PRINTS .TSV FILE
									3. LOAD IPRSCAN FILES INTO orthologuesiprscan TABLE 
	
WORKFLOW 2 - BLAST

./orthologues.pl					LOAD SEQUENCE FILES INTO DATABASE

./orthologuesarrayblast.pl			RUN ARRAY BLAST

./orthologuesarrayblastloaddata.pl	LOAD DATA INTO orthologuesblast TABLE

./orthologuesbesthit.pl				1. GET BEST HITS
									2. PRINT .TSV FILE
									3. LOAD INTO orthologuesbesthit TABLE
									
./orthologuesannotation.pl			DO ANNOTATION


WORKFLOW 3 - IPRSCAN SVG

REQUIRED	./orthologuesannotation.pl			WORKFLOW 1
REQUIRED	./orthologuesiprscan.pl				WORKFLOW 2

./orthologuesiprscansvg.pl

./orthologuesiprscandomain.pl

./orthologuesiprscandomainsvg.pl

./iprscan.cgi



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Jul  5 15:48:01 EDT 2007
COMPLETED unigene ORTHOLOGUE DOMAINS

select orthologuenumber, count(*), count(distinct name) from orthologuesiprscandomain group by orthologuenumber ;
+------------------+----------+----------------------+
| orthologuenumber | count(*) | count(distinct name) |
+------------------+----------+----------------------+
|                1 |        9 |                    1 |
|                2 |       13 |                    6 |
|                3 |        3 |                    2 |
|                4 |        5 |                    2 |
|                5 |        7 |                    3 |
|                6 |       12 |                    8 |
|                7 |        9 |                    2 |
|                8 |       12 |                    2 |
|                9 |        9 |                    1 |
|               10 |        8 |                    3 |
|               11 |        6 |                    2 |
|               12 |        4 |                    2 |
|               13 |        5 |                    2 |
|               14 |        1 |                    1 |
|               15 |       13 |                    3 |
|               16 |        9 |                    2 |
|               17 |        6 |                    2 |
|               18 |        4 |                    1 |
|               19 |        9 |                    2 |
|               20 |       12 |                    4 |
+------------------+----------+----------------------+


mysql> select * from orthologuesiprscandomain where orthologuenumber=1\G
*************************** 1. row ***************************
orthologuenumber: 1
  sequencenumber: 1
          number: 1
            name: seg
        minority: hypothetical protein mth777,p25-alpha
      querystart: 58
       querystop: 2162
         members: [{"targetname":"Hypothetical protein MTH777 (MT0777)","hitscoreexp":-11,"targetsource":"SUPERFAMILY","querystart":58,"querystop":1194,"targetid":"SSF75181","hitscoredec":7.30},{"targetname":"p25-alpha","hitscoreexp":-121,"targetsource":"PFAM","querystart":184,"querystop":1365,"targetid":"PF05517","hitscoredec":4.30},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":200,"querystop":544,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":347,"querystop":586,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":693,"querystop":1307,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":745,"querystop":1053,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":1208,"querystop":2128,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":1323,"querystop":1733,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":1490,"querystop":1870,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":1770,"querystop":2162,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":1793,"querystop":2062,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":1891,"querystop":2121,"targetid":"seg","hitscoredec":0.00}]
       targetids: SSF75181-PF05517-seg-seg-seg-seg-seg-seg-seg-seg-seg-seg
          groups: [{"name":"seg","score":1,"words":{"seg":1}},{"name":"hypothetical protein mth777","score":"","words":{"Hypothetical protein MTH777":1}},{"name":"p25-alpha","score":"","words":{"p25-alpha":1}}]
*************************** 2. row ***************************
orthologuenumber: 1
  sequencenumber: 1
          number: 2
            name: seg
        minority: 
      querystart: 2203
       querystop: 2445
         members: [{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":2203,"querystop":2445,"targetid":"seg","hitscoredec":0.00}]
       targetids: seg
          groups: [{"name":"seg","score":1,"words":{"seg":1}}]
*************************** 3. row ***************************
orthologuenumber: 1
  sequencenumber: 1
          number: 3
            name: seg
        minority: 
      querystart: 2649
       querystop: 3739
         members: [{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":2649,"querystop":3485,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":2827,"querystop":3546,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":3044,"querystop":3739,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":3171,"querystop":3455,"targetid":"seg","hitscoredec":0.00}]
       targetids: seg-seg-seg-seg
          groups: [{"name":"seg","score":1,"words":{"seg":1}}]
*************************** 4. row ***************************
orthologuenumber: 1
  sequencenumber: 1
          number: 4
            name: seg
        minority: 
      querystart: 4381
       querystop: 4611
         members: [{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":4381,"querystop":4611,"targetid":"seg","hitscoredec":0.00}]
       targetids: seg
          groups: [{"name":"seg","score":1,"words":{"seg":1}}]
*************************** 5. row ***************************
orthologuenumber: 1
  sequencenumber: 2
          number: 1
            name: seg
        minority: hypothetical protein mth777,p25-alpha,adp-ribosylation
      querystart: 382
       querystop: 2019
         members: [{"targetname":"Hypothetical protein MTH777 (MT0777)","hitscoreexp":-9,"targetsource":"SUPERFAMILY","querystart":382,"querystop":1848,"targetid":"SSF75181","hitscoredec":3.60},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":390,"querystop":683,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":419,"querystop":1006,"targetid":"seg","hitscoredec":0.00},{"targetname":"p25-alpha","hitscoreexp":-117,"targetsource":"PFAM","querystart":511,"querystop":2019,"targetid":"PF05517","hitscoredec":1.10},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":620,"querystop":898,"targetid":"seg","hitscoredec":0.00},{"targetname":"ADP-ribosylation","hitscoreexp":1,"targetsource":"SUPERFAMILY","querystart":806,"querystop":1165,"targetid":"SSF56399","hitscoredec":0.01},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":807,"querystop":1052,"targetid":"seg","hitscoredec":0.00}]
       targetids: SSF75181-seg-seg-PF05517-seg-SSF56399-seg
          groups: [{"name":"seg","score":1,"words":{"seg":1}},{"name":"hypothetical protein mth777","score":"","words":{"Hypothetical protein MTH777":1}},{"name":"p25-alpha","score":"","words":{"p25-alpha":1}},{"name":"adp-ribosylation","score":"","words":{"ADP-ribosylation":1}}]
*************************** 6. row ***************************
orthologuenumber: 1
  sequencenumber: 3
          number: 1
            name: seg
        minority: hypothetical protein mth777,p25-alpha
      querystart: 61
       querystop: 1400
         members: [{"targetname":"Hypothetical protein MTH777 (MT0777)","hitscoreexp":-7,"targetsource":"SUPERFAMILY","querystart":61,"querystop":1185,"targetid":"SSF75181","hitscoredec":9.90},{"targetname":"p25-alpha","hitscoreexp":-116,"targetsource":"PFAM","querystart":181,"querystop":1356,"targetid":"PF05517","hitscoredec":4.50},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":347,"querystop":799,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":818,"querystop":1153,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":1200,"querystop":1400,"targetid":"seg","hitscoredec":0.00}]
       targetids: SSF75181-PF05517-seg-seg-seg
          groups: [{"name":"seg","score":1,"words":{"seg":1}},{"name":"hypothetical protein mth777","score":"","words":{"Hypothetical protein MTH777":1}},{"name":"p25-alpha","score":"","words":{"p25-alpha":1}}]
*************************** 7. row ***************************
orthologuenumber: 1
  sequencenumber: 3
          number: 2
            name: seg
        minority: 
      querystart: 1634
       querystop: 2023
         members: [{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":1634,"querystop":1933,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":1784,"querystop":2023,"targetid":"seg","hitscoredec":0.00}]
       targetids: seg-seg
          groups: [{"name":"seg","score":1,"words":{"seg":1}}]
*************************** 8. row ***************************
orthologuenumber: 1
  sequencenumber: 3
          number: 3
            name: seg
        minority: 
      querystart: 3395
       querystop: 3586
         members: [{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":3395,"querystop":3586,"targetid":"seg","hitscoredec":0.00}]
       targetids: seg
          groups: [{"name":"seg","score":1,"words":{"seg":1}}]
*************************** 9. row ***************************
orthologuenumber: 1
  sequencenumber: 4
          number: 1
            name: seg
        minority: hypothetical protein mth777,p25-alpha
      querystart: 117
       querystop: 1469
         members: [{"targetname":"Hypothetical protein MTH777 (MT0777)","hitscoreexp":-7,"targetsource":"SUPERFAMILY","querystart":117,"querystop":1298,"targetid":"SSF75181","hitscoredec":5.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":119,"querystop":385,"targetid":"seg","hitscoredec":0.00},{"targetname":"p25-alpha","hitscoreexp":-116,"targetsource":"PFAM","querystart":237,"querystop":1469,"targetid":"PF05517","hitscoredec":4.50},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":379,"querystop":882,"targetid":"seg","hitscoredec":0.00},{"targetname":"seg","hitscoreexp":0,"targetsource":"SEG","querystart":885,"querystop":1331,"targetid":"seg","hitscoredec":0.00}]
       targetids: SSF75181-seg-PF05517-seg-seg
          groups: [{"name":"seg","score":1,"words":{"seg":1}},{"name":"hypothetical protein mth777","score":"","words":{"Hypothetical protein MTH777":1}},{"name":"p25-alpha","score":"","words":{"p25-alpha":1}}]
9 rows in set (0.00 sec)



select distinct name from orthologuesiprscandomain where orthologuenumber=2 ;
+-----------------------------------+
| name                              |
+-----------------------------------+
| seg                               |
| pmt                               |
| human uncharacterized protein     |
| rab3 interacting molecule-related |
| rnase_pancreatic                  |
| uncharacterized                   |
+-----------------------------------+

select distinct name from orthologuesiprscandomain where orthologuenumber=3;
+-------------------+
| name              |
+-------------------+
| wd_repeats_region |
| pul               |
+-------------------+


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Thu Jul  4 18:56:11 EDT 2007
COMPLETED AND LOADED BLAST OF unigene

sudo ./orthologuesarrayblastloaddata.pl -d unigene

	Using default conf file: conf/default.conf
	...
	Doing target database: refseq-human
	TSV file: /common/pipeline/unigene/blast/unigene-refseq-human.blast.tsv
	Deleting from orthologuesblast WHERE targetsource='refseq-human'...done.
	Loading 'refseq-human' hits data into table 'orthologuesblast'...done.
	
	Doing target database: refseq-mouse
	TSV file: /common/pipeline/unigene/blast/unigene-refseq-mouse.blast.tsv
	Deleting from orthologuesblast WHERE targetsource='refseq-mouse'...done.
	Loading 'refseq-mouse' hits data into table 'orthologuesblast'...done.
	
	Doing target database: refseq-dog
	TSV file: /common/pipeline/unigene/blast/unigene-refseq-dog.blast.tsv
	Deleting from orthologuesblast WHERE targetsource='refseq-dog'...done.
	Loading 'refseq-dog' hits data into table 'orthologuesblast'...done.
	
	Doing target database: refseq-rat
	TSV file: /common/pipeline/unigene/blast/unigene-refseq-rat.blast.tsv
	Deleting from orthologuesblast WHERE targetsource='refseq-rat'...done.
	Loading 'refseq-rat' hits data into table 'orthologuesblast'...done.
	
	Doing target database: swissprot
	TSV file: /common/pipeline/unigene/blast/unigene-swissprot.blast.tsv
	Deleting from orthologuesblast WHERE targetsource='swissprot'...done.
	Loading 'swissprot' hits data into table 'orthologuesblast'...done.
	
	Run time: 00:13:36
	Completed ./orthologuesarrayblastloaddata.pl
	6:56PM, 4 July 2007
	****************************************



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sat Jun 30 19:21:03 EDT 2007
RUN BLASTS FOR inparanoid OF Pfal AGAINST Agam

FORMAT:

/Users/young/FUNNYBASE/apps/blast/wu-formatdb -i /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/pfal.fasta -p T -o T

/Users/young/FUNNYBASE/apps/blast/wu-formatdb -i /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/agam.fasta -p T -o T

BLAST:

/Users/young/FUNNYBASE/apps/blast/wu-blastall -p blastp -i /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/pfal.fasta -d /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/agam.fasta -o pfal-agam

/Users/young/FUNNYBASE/apps/blast/wu-blastall -p blastp -i /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/agam.fasta -d /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/pfal.fasta -o agam-pfal

/Users/young/FUNNYBASE/apps/blast/wu-blastall -p blastp -i /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/agam.fasta -d /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/agam.fasta -o agam-agam

/Users/young/FUNNYBASE/apps/blast/wu-blastall -p blastp -i /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/pfal.fasta -d /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/pfal.fasta -o pfal-pfal

	PARSE:
cd ~/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid

./blast_parser.pl 50 < agam-agam > A-A
./blast_parser.pl 50 < agam-pfal > A-P
./blast_parser.pl 50 < pfal-agam > P-A
./blast_parser.pl 50 < pfal-pfal > P-P


/Users/young/FUNNYBASE/apps/blast/blastall -p blastp -i /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/pfal.fasta -d /Users/young/FUNNYBASE/dev/orthologues/inparanoid/software/inparanoid/agam.fasta -v $A -b $A -F \"m S\" -M $matrix -z 5000000 | ./blast_parser.pl $score_cutoff > $blast_outputAA



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Fri Jun 29 00:03:35 EDT 2007
USED runorthologuesiprscan.pl TO RUN iprscan7.pl

ON THREE GROUPS OF ORTHOLOGUES:

    1. unigene (BBH) completed earlier

    2. inparanoid

    3. COG
   

	NAME		iprscan
	
	PURPOSE
	
		1.	RUN iprscan	ON USER-INPUT FASTA FILE SEQUENCES

	INPUT
	
		1. SINGLE OR MULTI-FASTA FILE CONTAINING QUERY SEQUENCES
		
	OUTPUT
	
		1. XML-FORMAT iprscan OUTPUT
	
		2. .TSV FILE CONFORMING TO iprscan TABLE

    USAGE
	
		./iprscan.pl <-i inputfile_stem> <-o outputfile_stem> [-p hmmpfam]
	
        -i  inputfile_stem    : stem of FASTA or MULTI-FASTA input file (i.e., without the number at the end)
        -o  inputfile_stem    : stem of FASTA or MULTI-FASTA input file (i.e., without the number at the end)
        -p  iprscan_programme : any of the 15 interproscan programmes (i.e., fprintscan, profilescan,
                                blastprodom, hmmsmart, hmmpanther, hmmpfam, hmmtigr, scanregexp, coils,
                                seg, tmhmm, signalp, hmmpir, superfamily, gene3d)
        -h  help              : print this help message
 
	EXAMPLE


RUN WITH LOGFILE 
sudo ./iprscan.pl -i /Users/local/FUNNYBASE/pipeline/orthologues/fasta/orthologues.fasta.4 -o /Users/local/FUNNYBASE/pipeline/orthologues/fasta/orthologues.out.4 -l

RUN ONLY hmmpfam
sudo ./iprscan.pl -p hmmpfam -i /Users/local/FUNNYBASE/pipeline/orthologues/fasta/orthologues.fasta.1 -o /Users/local/FUNNYBASE/pipeline/orthologues/fasta/orthologues.out.1


BUT PROBLEM WITH HALF OF THE FOUR SEQUENCES NOT FINISHING IN TIME (1 HOUR)



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Fri Jun 22 13:56:53 EDT 2007

UNIGENE ORTHOLOGUES
~/FUNNYBASE/pipeline/orthologues/fasta/orthologues.fasta.1

	EXAMPLE iprscan OUTPUT:
	~/FUNNYBASE/pipeline/orthologues/dt/orthologues.iprscan.complete.1

INPARANOID (SWISSPROT) ORTHOLOGUES
~/FUNNYBASE/dev/orthologues/inparanoid/data/README.txt


++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Fri Dec 1 13:56:53 EDT 2007
ARRAYPHYLIP ON UNIGENE orthologues

sudo ./arrayphylip.pl orthologues 20 orthologues.options

line
cd orthologues/fasta
rm -fr *parsed
get *parsed


line
cd phylip/orthologues
get *options
cp ../../orthologues/fasta/*parsed ./
rename ./ s/.aln.parsed//
sudo rm -fr data*

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Fri Dec  1 14:48:34 PST 2006

NB: PHYLIP REQUIRES MAX TEN-LETTER HEADER

I.E.: PROBLEM USING arrayphylip.pl TO RUN dnaml.

Nucleic acid sequence Maximum Likelihood method, version 3.66

Settings for this run:
  U                 Search for best tree?  Yes
  T        Transition/transversion ratio:  2.0000
  F       Use empirical base frequencies?  Yes
  C                One category of sites?  Yes
  R           Rate variation among sites?  Gamma distributed rates
  A   Rates at adjacent sites correlated?  No, they are independent
  W                       Sites weighted?  No
  S        Speedier but rougher analysis?  Yes
  G                Global rearrangements?  Yes
  J   Randomize input order of sequences?  Yes (seed =    1749,  1 times)
  O                        Outgroup root?  No, use as outgroup species  1
  M           Analyze multiple data sets?  No
  I          Input sequences interleaved?  Yes
  0   Terminal type (IBM PC, ANSI, none)?  ANSI
  1    Print out the data at start of run  No
  2  Print indications of progress of run  Yes
  3                        Print out tree  Yes
  4       Write out trees onto tree file?  Yes
  5   Reconstruct hypothetical sequences?  No

  Y to accept these or type the letter for one to change
Y

Coefficient of variation of substitution rate among sites (must be positive)
 In gamma distribution parameters, this is 1/(square root of alpha)
1.264911

Rates in HMM:
Number of categories (1-9)?
6
ERROR: bad base: | at site     1 of species   1






PROBLEM:
++++++++
targetname IN indexes TABLE, NOT targetname AS IN orthologues.tsv FILE SO CAN'T LOOK UP SEQUENCE USING indexes TABLE


CHECKED orthologues TABLE IN orthologues DATABASE:

58 targetids HAVE 2 OR MORE targetnames:
use orthologues;
select targetid, count(targetname) from orthologues group by targetid having count(targetname)>=2;
+-----------+-------------------+
| targetid  | count(targetname) |
+-----------+-------------------+
| S10533129 |                 2 |
| S10829113 |                 4 |
| S10838657 |                 4 |
...
| S26696167 |                11 |
| S26698281 |                 4 |
| S26699394 |                 2 |
| S26708635 |                 2 |
| S33741313 |                 4 |
| S7227485  |                 3 |
| S8039480  |                 2 |
| S8172098  |                 4 |
| S8981000  |                 4 |
| S9678541  |                 4 |
+-----------+-------------------+
58 rows in set (0.01 sec)

SO CAN'T DO A ONE-TO-ONE MAPPING/LOOKUP TABLE

SOLUTION:
++++++++
COPY OVER THE ORTHOLOGUES DATABASE FROM gems ONTO genomics AND RERUN orthologues.pl TO PRODUCE OUTPUT WITH targetname NOT targetid:
(THE REASON WAS THAT THE targetid CAME ALONG WITH THE BETTER targetannotation FROM THE .data FILE).

+-----------------------+
| Tables_in_orthologues |
+-----------------------+
| Hs_top100             |
| externalblast         |
| orthologues           |
| unigene_dog           |
| unigene_fundulus      |
| unigene_human         |
| unigene_mouse         |
| unigene_rat           |
+-----------------------+


ON gems:

sudo ./transfer.database.pl -d orthologues -t unigene_dog


